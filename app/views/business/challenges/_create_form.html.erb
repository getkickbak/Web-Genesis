<% content_for :script do %>
<% end %>
<% content_for :link do %>
<% end %>
<div style="display:none;">
	<div id="price_per_point">
		<%= current_merchant.reward_model.price_per_point %>
	</div>
	<div id="rebate_rate">
		<%= current_merchant.reward_model.rebate_rate %>
	</div>
</div>
<%= simple_form_for @challenge, :html => { :class => 'form-horizontal' } do |f| %>
<fieldset>
	<%= f.input :type_id, :collection => @available_challenge_types, :input_html => { :class => 'input-medium' } %>
	<% if @challenge.type && @challenge.type.value == 'birthday' %>
	<div class="challenge_desc">
		<span>When someone visits on a birthday</span><%= f.input :name, :as => :hidden %>
	</div>
	<%= f.input :description, :as => :hidden %>
	<%= f.input :require_verif, :as => :hidden %>
	<%= f.input :points, :as => :hidden %>
	<div class="challenge_desc">
		<span>they will get $</span>
		<input id="challenge_reward_amount" name="challenge[reward_amount]" type="text" class="numfield" placeholder=""/>
		<span>worth of points</span>
	</div>
	<% elsif @challenge.type && @challenge.type.value == 'menu' %>
	<div class="challenge_desc">
		<span>When someone buys a</span>
		<input id="challenge_name" name="challenge[name]" type="text" class="textfield" placeholder="Name"/>
	</div>
	<%= f.input :description, :as => :hidden %>
	<%= f.input :require_verif, :as => :hidden %>
	<%= f.input :points, :as => :hidden %>
	<div class="challenge_desc">
		<span>they will get $</span>
		<input id="challenge_reward_amount" name="challenge[reward_amount]" type="text" class="numfield" placeholder=""/>
		<span>worth of points</span>
	</div>
	<% elsif @challenge.type && @challenge.type.value == 'photo' %>
	<div class="challenge_desc">
		<span>When someone shares an exciting photo of this place with their friends through social media</span><%= f.input :name, :as => :hidden %>
	</div>
	<%= f.input :description, :as => :hidden %>
	<%= f.input :require_verif, :as => :hidden %>
	<%= f.input :points, :as => :hidden %>
	<div class="challenge_desc">
		<span>they will get $</span>
		<input id="challenge_reward_amount" name="challenge[reward_amount]" type="text" class="numfield" placeholder=""/>
		<span>worh of points</span>
	</div>
	<% elsif @challenge.type && @challenge.type.value == 'referral' %>
	<div class="challenge_desc">
		<span>When someone refers a friend</span><%= f.input :name, :as => :hidden %>
	</div>
	<%= f.input :description, :as => :hidden %>
	<%= f.input :require_verif, :as => :hidden %>
	<div class="challenge_desc">
		<span>they will get $</span>
		<input id="challenge_reward_amount" name="challenge[reward_amount]" type="text" class="numfield" placeholder=""/>
		<%= f.input :points, :as => :hidden %>
		<span>worth of points</span>
	</div>
	<div class="challenge_desc">
		<span>and their friend will get</span>
		<input id="challenge_referral_data_referral_reward_amount" name="challenge[referral_data][referral_reward_amount]" type="text" class="numfield" placeholder=""/>
		<input class="hidden" id="challenge_referral_data_referral_points" name="challenge[referral_data][referral_points]" type="hidden">
		<span>worth of points</span>
	</div>
	<% elsif @challenge.type && @challenge.type.value == 'custom' %>
	<%= f.input :name , :input_html => { :class => 'input-large' }%>
	<%= f.input :description, :as => :text, :input_html => { :rows => 10 , :class => 'input-large' } %>
	<%= f.input :require_verif, :as => :hidden %>
	<%= f.input :reward_amount, :input_html => { :class => 'input-medium' } %>
	<%= f.input :points, :input_html => { :class => 'input-medium' } %>
	<% end %>
	<% if @challenge.type && @challenge.type.value != '' %>
	<%= f.input :venue_ids, :label => 'Venues', :collection => current_merchant.venues.collect{ |p| [p.display_name, p.id, ] }, :as => :check_boxes, :checked => @venue_ids %>
	<% end %>
	<br />
	<div class="form-actions">
		<%= f.button :submit , "Save", :class => 'btn btn-primary', :disable_with => "Working..." %>
	</div>
	<!-- /form-actions -->
</fieldset>
<% end %>
