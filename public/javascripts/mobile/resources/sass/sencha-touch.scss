@import 'sencha-touch/default/all';

@include sencha-panel;
@include sencha-buttons;
@include sencha-sheet;
@include sencha-picker;
@include sencha-tabs;
@include sencha-toolbar;
@include sencha-toolbar-forms;
@include sencha-indexbar;
@include sencha-list;
@include sencha-list-paging;
@include sencha-list-pullrefresh;
@include sencha-layout;
@include sencha-carousel;
@include sencha-form;
@include sencha-msgbox;
@include sencha-loading-spinner;

//------------------------------------------------------------------------------
// Global Vars
//------------------------------------------------------------------------------
$icon-size: 57px;
$panelGap: 0.8em;
$panelTopGap: 0.7em;
$panelBorderRadius : 0.6em;
$xsmallFontSize : 0.3em;
$smallFontSize : 0.4em;
$normalFontSize : 0.6em;
$largeFontSize : 0.8em;
$xlargeFontSize : 1.2em;

//Enhancements
@include pictos-iconmask('list');
@include pictos-iconmask('info_plain');
@include pictos-iconmask('share');
@include pictos-iconmask('mail');
@include pictos-iconmask('shop2');
@include pictos-iconmask('team');
@include pictos-iconmask('check_black1');
@include pictos-iconmask('delete_black2');

body {
}

.navigationBarTop, .navigationBarBottom {
   .x-button {
      &.x-iconalign-top, &.x-iconalign-bottom {
         padding-top:.2em;
         padding-bottom:.1em;
         .x-button-label {
            //@extend .x-tabbar.x-docked-bottom .x-tab .x-button-label;
            margin: 0;
            padding: .1em 0 .2em 0;
            font-size: 9px;
            line-height: 12px;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
         }
      }
   }
   .x-title {
      font-size:$largeFontSize;
   }

}
//------------------------------------------------------------------------------
// Utility CSS
//------------------------------------------------------------------------------
.wrap {
   white-space:normal !important;  
}
.noWrap {
   white-space:nowrap !important;
} 
.x-button-icon.dummymask {
   width: 1.3em;
   height: 1.3em;
}

.x-body {
   div.separator .x-inner:first-child {
     margin:0em $panelGap;
     margin-bottom:$panelTopGap;
   }
   div.separator:first-child .x-inner:first-child {
     margin-top:$panelTopGap;
   }
   div.separator_pad .x-inner:first-child {
     padding:0em $panelGap;
     padding-bottom:$panelTopGap;
   }
   div.separator_pad:first-child .x-inner:first-child {
     padding-top:$panelTopGap;
   }
   
   div.separator > .x-innerhtml:first-child {
     margin:0em $panelGap;
     margin-bottom:$panelTopGap;
   }
   div.separator:first-child > .x-innerhtml:first-child {
     margin-top:$panelTopGap;
   }
   div.separator_pad > .x-innerhtml:first-child {
     padding:0em $panelGap;
     padding-bottom:$panelTopGap;
   }
   div.separator_pad:first-child > .x-innerhtml:first-child {
     padding-top:$panelTopGap;
   }
   
   .x-container, .x-button, .x-map { 
      &.separator {
         margin:0em $panelGap;
         margin-bottom:$panelTopGap;
      }
      &.separator:first-child {
         margin-top:$panelTopGap;
      }
      &.separator_pad {
         padding:0em $panelGap;
         padding-bottom:$panelTopGap;
      }
      &.separator_pad:first-child {
         padding-top:$panelTopGap;
      }
   }
}
.shadows {
   @include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
}
.bold {
  font-weight:bold;
}

//------------------------------------------------------------------------------
// List
//------------------------------------------------------------------------------
.x-list-round {
   .x-inner, .x-list-inner {
      div[id|=ext-component] {
         @if $include-border-radius { @include border-radius(.4em) }
      }
   }
   .x-list-item:first-child {
      border-top: 1px solid darken($list-bg-color, 15%);
      @include border-top-radius(.4em)
   }
   .x-list-item:last-child {
     @include border-bottom-radius(.4em)
   }
}

//------------------------------------------------------------------------------
// Button
//------------------------------------------------------------------------------
.x-button-large, .x-toolbar .x-button-large {
   @if $include-border-radius { @include border-radius($panelBorderRadius); }
   padding: .6em 1.2em;
   min-height: $button-height*1.5 !important;

   .x-button-label {
      font-size: $xlargeFontSize;
   }

   .x-button-icon {
      width: 1.5em;
      height: 1.5em;
   }
}
@mixin sencha-button-ui($ui-label, $color, $gradient: $button-gradient) {
  .x-button.x-button-#{$ui-label}, .x-button.x-button-#{$ui-label}-round, .x-button.x-button-#{$ui-label}-small, .x-button.x-button-#{$ui-label}-large {
    @include toolbar-button($color, $gradient);
  }

  .x-button.x-button-#{$ui-label}-round {
    @extend .x-button-round;
  }

  .x-button.x-button-#{$ui-label}-small {
    @extend .x-button-small;
  }
  .x-button.x-button-#{$ui-label}-large {
    @extend .x-button-large;
  }
}

.wrap {
   .x-button-label {
      white-space:normal !important;
   }
}

.plain {
   &.x-button, &.x-toolbar .x-button {
      background:none;
      border:none;
   }
}

@include sencha-button-ui('yellow', darken(saturate(yellow, 55%), 10%));
@include sencha-button-ui('green', darken(saturate(green, 55%), 10%));
@include sencha-button-ui('red', darken(saturate(red, 55%), 10%));
@include sencha-button-ui('blue', darken(saturate(blue, 55%), 10%));
@include sencha-button-ui('black', darken(saturate(black, 55%), 10%));
@include sencha-button-ui('fbBlue', desaturate(darken(blue, 10%), 5%));

//------------------------------------------------------------------------------
// List CSS
//------------------------------------------------------------------------------
.listScrollWrapper, .listScrollIndexWrapper {
   .x-list-item:first-child {
      //margin-top: 1em;
   }
   .photo {
      top:$panelTopGap*0.5;
      left:$panelGap;
   }
}
.listNoScrollWrapper.separator, .listScrollWrapper.separator, .listScrollIndexWrapper.separator {
   margin:0 !important;
}
.listNoScrollWrapper.separator_pad, .listScrollWrapper.separator_pad, .listScrollIndexWrapper.separator_pad {
   padding:0 !important;
}
.listNoScrollWrapper.separator {
   .x-list-item:first-child {
   }
   .x-list-item {
      border-left: 1px solid darken($list-bg-color, 15%);
      border-right: 1px solid darken($list-bg-color, 15%);
   }
   .photo {
      top:$panelTopGap*0.5;
      left:$panelGap;
   }
   &.noBorder .x-list-item {
      border : none
   }
}
.listScrollWrapper, .listNoScrollWrapper, .listScrollIndexWrapper {
   &.x-list .x-list-disclosure {
      bottom:1.0em;
   }
   &.x-list .x-list-item .x-list-item-label {
      position:relative;
      padding-top:$panelTopGap*0.5;
      padding-bottom:$panelTopGap*0.5;
      min-height:3.25em;
      .photo {
         position:absolute;
         img {
            width : $icon-size;
         }
      }
      .listItemDetailsWrapper {
         padding-left:$icon-size + 10px;
         //padding-right:$icon-size + 10px;
         //width:20em;
         width:14.5em;
         min-height:$icon-size;
         .itemTitle {
            font-size:$normalFontSize;
         }
         .itemDesc {
            font-size:$normalFontSize;
            @include ellipsis
         }
      }
   }
   .x-inner, .x-list-inner {
      div[id|=ext-component] {
         @include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
      }
   }
}

//------------------------------------------------------------------------------
// Icon Select CSS (MainPage and Challenge Page)
//------------------------------------------------------------------------------
.mainMenuSelections {
   padding:$panelGap;
   .x-dataview-item, .x-data-item {
      width:50%;
      float:left;
      font-size:$largeFontSize;
      color:#fff;
      position:relative; // Used for add Icon Mask to the selection
      .mainPageItemWrapper {
         text-align:center;
         .photo {
            height : $icon-size*1.5;
            img {
               width : $icon-size*1.5;
               max-height : $icon-size*1.5;
            }
         }
         .photoName {
            font-weight:bold;
            text-shadow:0em 0.1em 0.03em #000;
            padding-bottom:$panelTopGap*2
         }
      }
   }
   .x-dataview-item:nth-child(2n+1) {
      clear:both;
   }
   .x-scroll-bar.x-scroll-bar-y {
      display:none;
   }
}

.challengeMenuSelections {
   padding:$panelGap;
   .x-dataview-item, .x-data-item {
      width:33%;
      float:left;
      font-size:$largeFontSize;
      color:#fff;
      position:relative; // Used for add Icon Mask to the selection
      .mainPageItemWrapper {
         text-align:center;
         .photo {
            height : $icon-size*1.25;
            img {
               width : $icon-size*1.25;
               max-height : $icon-size*1.25;
            }
         }
         .photoName {
            font-weight:bold;
            text-shadow:0em 0.1em 0.03em #000;
            padding-bottom:$panelTopGap*2
         }
      }
   }
   .x-dataview-item:nth-child(3n+1) {
      clear:both;
   }
   .x-scroll-bar.x-scroll-bar-y {
      display:none;
   }
}

.challengePageItemDescWrapper {
   min-height : 6em;
   max-height : 6em;
   padding:$panelGap;
   background: rgba(0, 0, 0, .25);
   .itemDesc {
      font-size:$normalFontSize;
      padding-bottom:1px;  
   }
   .itemDescName {
      text-align:center;
   }
}

//------------------------------------------------------------------------------
// Checkin Pages
//------------------------------------------------------------------------------
.checkInExploreList {
   @extend .listScrollWrapper;
   .listItemDetailsWrapper {
      width:12em !important;
   }
}

.checkinMerchant {
   .x-body {
   }
}
.checkinMerchantWrapper {
   .x-inner {
      margin:0!important;
      padding:0!important;
   }
   .photo {
      height:$icon-size*2+10;
      img {
         width : $icon-size*2;
         max-height:$icon-size*2;
         @include box-shadow(0.2em 0.2em 0.2em rgba(0,0,0,.6));
         margin-right:$panelGap;
      }
   }
   .checkinMerchantDetailsWrapper {
      //margin-left:$icon-size*1.5 + 10px;
      //padding-right:$icon-size;
      width:8.5em !important;
      .itemTitle {
         font-size:$largeFontSize;
      }
      .itemDesc {
         font-size:$normalFontSize;
         @include ellipsis
      }
   }
}
.checkInNow {
  background : black;
  padding: $panelTopGap 2*$panelGap;
}
//------------------------------------------------------------------------------
// Merchant Account
//------------------------------------------------------------------------------
.merchantStatsPanel {
   .x-inner {
      margin:0 !important;
   }  
   height:7em;
   .merchantStats {
      font-size : $smallFontSize;
      .photo {
         height:$icon-size*2+10;
         margin-right:$panelGap*2;
         img {
            width:$icon-size*2;
            max-height:$icon-size*2;
            @include box-shadow(0.5em 0.5em 0.5em rgba(0,0,0,.6));
         }
      }
      .x-field {
         border : none;
         min-height:$form-field-height*0.6;
      }
      .x-form-label {
        padding : $form-spacing*0.6;
        border:none;
      }
      .x-input-el {
        min-height:$form-field-height*0.6;
      }
   }
}

.ptsEarnPanelHdr, .ptsMerchantFeedPanelHdr {
   &.x-toolbar {
      height : $global-row-height*0.75;
      @if $include-border-radius { @include border-top-radius($panelBorderRadius); }
   }
   .x-title {
      font-size:$normalFontSize;
   }
   margin:0em $panelGap;
}

.ptsEarnPanel {
   padding:$panelGap*0.5;
   //border: 1px solid darken($list-bg-color, 15%);
   @if $include-border-radius { @include border-radius($panelBorderRadius); }
   @include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
   .x-inner {
     margin:0 !important;
     height:$icon-size;
   }
   .photo img {
      width:$icon-size;
   }
   .points {
     font-size:$xlargeFontSize*1.5;
     text-align:center;
     .x-innerhtml {
        line-height:$xlargeFontSize*1.5;
     }
   }
}

.ptsMerchantFeedPanel {
  @extend .listNoScrollWrapper;
  .x-inner div[id|=ext-component], .x-list-item:last-child {
     @if $include-border-radius { @include border-bottom-radius($panelBorderRadius); }
  }
  .listItemDetailsWrapper {
      width:13em !important;
   }
}

//------------------------------------------------------------------------------
// Rewards & Redemption Page
//------------------------------------------------------------------------------
.rewardsRedemptionsPanelHdr {
   &.x-toolbar {
      height : $global-row-height*0.75;
   }
   .x-title {
      font-size:$normalFontSize;
   }
   //margin:0em $panelGap;  
}
//------------------------------------------------------------------------------
// Rewards Page
//------------------------------------------------------------------------------
.earnPtsPanelHdr {
   &.x-toolbar { 
      height : $global-row-height*0.75;
   }
   .x-title {
      font-size:$normalFontSize;
   }
   //margin:0em $panelGap;
}
.rewardsMain {
   @extend .listScrollIndexWrapper;
   .x-inner div[id|=ext-component] {
      //@if $include-border-radius { @include border-radius($panelBorderRadius); }
   }
   &.x-list .x-list-item:last-child {
     border-bottom : 0;
   }
}
.rewardsCart {
   @extend .listNoScrollWrapper;
   &.separator_pad .x-body .x-scroll-container > .x-inner:first-child {
      padding:0;
   }
   .x-dataview-inner div.x-data-item {
      .x-data-item-inner {
         padding:0;
         padding-bottom:$panelGap;       
      }
      text-align:center;
      .photo img {
         width:$icon-size*0.5;
         vertical-align:middle;
      }
      .title {
         text-align:left;
         font-size:$normalFontSize;
         min-height:$icon-size*0.5;
      }
      .points {
        min-width:3em;
        @extend .noWrap;
        font-weight:bold;
        text-align:right;
        
      }
      .x-field-select {
         width:3em !important;
         border: 1px solid $form-light;
         @if $include-border-radius { @include border-radius($form-fieldset-radius); }
         &.x-field {           
            min-height:1em;
         }
         .x-input-el {
            min-height:1em;
            padding:0.2em;
         }
         &::before {
            width:2.5em;
         }
         &::after {
            margin:0.7em 0.3em;
         }
      }
      .x-data-item-inner div {
        margin-right:$panelGap*0.25;
        @include box-shadow(none);
      }
      .x-data-item-inner div:first-child {
        margin-right:0em;
      }
      .x-data-item-inner div:last-child {
        margin-right:0em;
      }
      &:first-child {
        padding-top:$panelGap;
      }
   }
   .x-dataview-inner div.x-data-item:nth-child(4) {
        .x-data-item-inner {
         padding-top:$panelGap;
      }
   }
}

.rewardsCartFooter {
   text-align:center;
   font-weight:bold;
   .points {
      text-align:right;
   }
}

//------------------------------------------------------------------------------
// Redemptions Page
//------------------------------------------------------------------------------
.redemptionsMain {
   .ptsEarnPanelHdr:first-child {
      margin-top:$panelTopGap;
   }
   .ptsEarnPanel {
      @if $include-border-radius { @include border-top-radius(0); }
      .points .x-innerhtml {
         font-size:$xlargeFontSize;
         font-weight:bold;
         line-height:$icon-size;
      }
   }
   .redemptionsView {
      .redemptionsDataviewWrapper {
         @if $include-border-radius { @include border-bottom-radius($panelBorderRadius); }
         @include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
      }
      .redemptionsDataview {
         height:4em;
      }
      .redemptionsDataviewWrapper {
         background-color : #DDDAC4;
         .x-dataview-inner > div[id|=ext-component] {
            display:table;
         }
         .x-dataview-item {
            display:table-cell;
            vertical-align:middle;
            .photo {
               width:$icon-size + 10;
               height:$icon-size + 10;
               margin: $panelGap*0.25;
               @if $include-border-radius { @include border-radius(.4em) }
               border: 2px solid transparent;
               padding:6px;
            }
            &.x-item-selected .photo {
               border-color:darken($list-bg-color, 15%);
            }
         }
         .x-scroll-bar.x-scroll-bar-x {
            display:none;
         }
      }
      .desc {
         min-height:3em;
         .x-innerhtml {
            font-size:$normalFontSize;
         }
      }
      .ptsContainer {
         height:$icon-size;
         .photo img {
            width:$icon-size;
            margin-left:$panelGap;
         }
         .points .x-innerhtml {
            line-height:$icon-size;
            font-weight:bold;
            font-size:$xlargeFontSize*2;
            text-align:center;
         }
      }
      .x-inner {
         margin:0 !important;
         padding:0 !important;
      }
      .redemptionsList {
         @extend .listScrollIndexWrapper;
         .x-inner div[id|=ext-component] {
            //@if $include-border-radius { @include border-radius($panelBorderRadius); }
         }
         &.x-list .x-list-item:last-child {
           border-bottom : 0;
         }
         .listItemDetailsWrapper {
            width:13em !important;
         }
      }
   }
}

//------------------------------------------------------------------------------
// Accounts Page
//------------------------------------------------------------------------------
.accountsMain {
   .accountsPanelHdr {
      @extend .ptsEarnPanelHdr;
   }
   .accountsPanelHdr:first-child {
      margin-top:$panelTopGap;
   }
   .accountsPanel, .accountsList {
     @extend .listScrollWrapper;
   }
   .accountsPanel {
      .listItemDetailsWrapper {
         width:13em !important;
      }
   }
}
