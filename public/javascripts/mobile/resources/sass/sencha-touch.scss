//------------------------------------------------------------------------------
// Global Vars Default Theme Override
//------------------------------------------------------------------------------
$base-color: #00ADEE !default;
$base-gradient: 'smooth';
$active-color: darken(saturate(#FAA845, 55%), 10%) !default;

//Buttons
$include-buttons-uis : false;
$include-default-icons : false;

// Forms
//$form-dark: #FFF !default;
$form-light: #0A78BE !default;
$form-field-bg-color : #F3F3F4 !default;

// Lists
$list-bg-color: #F3F3F4 !default;
$list-active-gradient: 'bevel';
//$list-header-bg-color: transparentize(saturate($base-color, 10%), .25);
$list-header-bg-color: #E86025;
$list-header-gradient: 'matte';

// Tabs
$tabs-dark: #111;
$include-toolbar-uis : false;

//------------------------------------------------------------------------------
// Global Vars Theme
//------------------------------------------------------------------------------

// Icon Reference size
$icon-size: 57px;
// Panel Gaps
$panelGap: 0.8em;
$panelTopGap: 0.7em;
$panelBorderRadius : 0.6em;
// Font sizes
$xsmallFontSize : 0.3em;
$smallFontSize : 0.4em;
$normalFontSize : 0.6em;
$largeFontSize : 0.8em;
$xlargeFontSize : 1.2em;
// Theme Name
$gtheme-name : 'v1';
// Theme Path
$theme-path : '../../../../../resources/themes';
$theme-path-rel : '../themes';

// Badges Theme
$badgePoints-bg-color: darken(green, 10%) !default;
$badgePoints-bg-gradient: $base-gradient !default;

//------------------------------------------------------------------------------
// Default Theme Includes
//------------------------------------------------------------------------------
@import 'sencha-touch/default/all';

//------------------------------------------------------------------------------
// Default Theme Function Overrides
//------------------------------------------------------------------------------
/**
 * Includes a base64-encoded icon for use within tab bars and buttons (With the component parameter iconMask: true).
 *
 *     @include pictos-iconmask('attachment');
 *
 * @param {string} $name The name of the icon to be included. This is to match the name of the icon file (located at resources/themes/images/default/pictos) without its extention (.png).
 */
@mixin pictos-iconmask($name) {
}
@mixin toolbar-iconmask($name) {
  .x-tab .x-button-icon.#{$name},
  .x-button .x-button-icon.x-icon-mask.#{$name} {
    -webkit-mask-image: theme_image($theme-path + "/images/" + $gtheme-name,  "toolbar/" + $name + ".png");
  }
}

/**
 * Add a background radial gradient to a selector.
 *
 *     .my-element {
 *       @include background-gradient(green, 'recessed')
 *     }
 *
 * @param {start-color} The start color of the gradient.
 * @param {end-color} The end color of the gradient.
 * @param {position} The position to go with the gradient/image.
 * @param {image} The image to go with the gradient.
 */
@mixin custom-radial-gradient($start-color, $end-color, $position, $image : false) {
  background-color: $end-color;
  @if $image {
     @include background-image($image, radial-gradient($position, color_stops($start-color, $end-color)));
  } @else {
     @include background-image(radial-gradient($position, color_stops($start-color, $end-color)));    
  }
}

/**
 * Add a background radial gradient to a selector.
 *
 *     .my-element {
 *       @include background-gradient(green, 'recessed')
 *     }
 *
 * @param {start-color} The start color of the gradient.
 * @param {end-color} The end color of the gradient.
 * @param {position} The position to go with the gradient/image.
 * @param {image} The image to go with the gradient.
 */
@mixin custom-linear-gradient($start-color, $end-color, $position, $image : false) {
  background-color: $end-color;
  @if $image {
     @include background-image($image, linear-gradient($position, color_stops($start-color, $end-color)));
  } @else {
     @include background-image(linear-gradient($position, color_stops($start-color, $end-color)));    
  }
}

/**
 * Add a background radial gradient to a selector.
 *
 *     .my-element {
 *       @include background-gradient(green, 'recessed')
 *     }
 *
 * @param {bg-color} The start bg color of the gradient.
 * @param {position} The position to go with the gradient/image.
 * @param {image} The image to go with the gradient.
 * @param {type} predefined custom style settings.
 */
@mixin custom-background-gradient($bg-color, $position : 'top', $image : false, $type : 'smooth') {
  background-color: darken($bg-color, 15%);
  @if $image {
     @if $type == smooth {
        @include background-image($image, linear-gradient($position, color_stops($bg-color 30%, darken($bg-color, 20%))));
     } @else if $type == recessed {
        @include background-image($image, linear-gradient($position, color_stops(darken($bg-color, 10%), darken($bg-color, 5%) 10%, $bg-color 65%, lighten($bg-color, .5%))));
     }
  } @else {
     @if $type == smooth {
        @include background-image(linear-gradient($position, color_stops($bg-color 30%, darken($bg-color, 20%))));    
     } @else if $type == recessed {
        @include background-image(linear-gradient($position, color_stops(darken($bg-color, 10%), darken($bg-color, 5%) 10%, $bg-color 65%, lighten($bg-color, .5%))));
     }
  }
}

//------------------------------------------------------------------------------
// Default Theme Includes and CSS Overrides
//------------------------------------------------------------------------------

@include sencha-panel;
@include sencha-buttons;
@include sencha-sheet;
//@include sencha-picker;
@include sencha-tabs;
@include sencha-toolbar;
@include sencha-toolbar-forms;
@include sencha-indexbar;
@include sencha-list;
@include sencha-list-paging;
@include sencha-list-pullrefresh;
@include sencha-layout;
@include sencha-carousel;
@include sencha-form;
//@include sencha-msgbox;
@include sencha-loading-spinner;

//------------------------------------------------------------------------------
// Default Theme CSS Classes
//------------------------------------------------------------------------------
@-webkit-keyframes roulette-table-rotate {
   0%{     -webkit-transform: rotate(0deg);   }         
   4.17%{     -webkit-transform: rotate(15deg);   }
   8.33%{  -webkit-transform: rotate(30deg);  }
   12.5%{  -webkit-transform: rotate(45deg);  }
   16.66%{ -webkit-transform: rotate(60deg);  }
   20.83%{ -webkit-transform: rotate(75deg);  }
   25.00%{    -webkit-transform: rotate(90deg);  }
   29.17%{    -webkit-transform: rotate(105deg);  }
   33.33%{ -webkit-transform: rotate(120deg); }
   37.50%{ -webkit-transform: rotate(135deg); }
   41.67%{ -webkit-transform: rotate(150deg); }
   45.83%{ -webkit-transform: rotate(165deg); }
   50.00%{    -webkit-transform: rotate(180deg); }
   54.17%{    -webkit-transform: rotate(195deg); }
   58.33%{ -webkit-transform: rotate(210deg); }
   62.50%{ -webkit-transform: rotate(225deg); }
   66.66%{ -webkit-transform: rotate(240deg); }
   70.83%{ -webkit-transform: rotate(255deg); }
   75.00%{    -webkit-transform: rotate(270deg); }
   79.17%{    -webkit-transform: rotate(285deg); }
   83.33%{ -webkit-transform: rotate(300deg); }
   87.50%{ -webkit-transform: rotate(315deg); }
   91.67%{   -webkit-transform: rotate(330deg); }
   95.83%{   -webkit-transform: rotate(345deg); }
   100%{   -webkit-transform: rotate(360deg); }
}
@-webkit-keyframes roulette-table-rotate-back {
   0%{     -webkit-transform: rotate(0deg);   }         
   4.17%{     -webkit-transform: rotate(345deg);   }
   8.33%{  -webkit-transform: rotate(330deg);  }
   12.5%{  -webkit-transform: rotate(315deg);  }
   16.66%{ -webkit-transform: rotate(300deg);  }
   20.83%{ -webkit-transform: rotate(285deg);  }
   25.00%{    -webkit-transform: rotate(270deg);  }
   29.17%{    -webkit-transform: rotate(255deg);  }
   33.33%{ -webkit-transform: rotate(240deg); }
   37.50%{ -webkit-transform: rotate(225deg); }
   41.67%{ -webkit-transform: rotate(210deg); }
   45.83%{ -webkit-transform: rotate(195deg); }
   50.00%{    -webkit-transform: rotate(180deg); }
   54.17%{    -webkit-transform: rotate(165deg); }
   58.33%{ -webkit-transform: rotate(150deg); }
   62.50%{ -webkit-transform: rotate(135deg); }
   66.66%{ -webkit-transform: rotate(120deg); }
   70.83%{ -webkit-transform: rotate(105deg); }
   75.00%{    -webkit-transform: rotate(90deg); }
   79.17%{    -webkit-transform: rotate(75deg); }
   83.33%{ -webkit-transform: rotate(60deg); }
   87.50%{ -webkit-transform: rotate(45deg); }
   91.67%{   -webkit-transform: rotate(30deg); }
   95.83%{   -webkit-transform: rotate(15deg); }
   100%{   -webkit-transform: rotate(0deg); }
}

body {
}

.navigationBarTop, .navigationBarBottom {
   .x-button {
      &.x-iconalign-top, &.x-iconalign-bottom {
         padding-top:.2em;
         padding-bottom:.1em;
         .x-button-label {
            //@extend .x-tabbar.x-docked-bottom .x-tab .x-button-label;
            margin: 0;
            padding: .1em 0 .2em 0;
            font-size: 9px;
            line-height: 12px;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
         }
      }
   }
   .x-title {
      font-size:$xlargeFontSize;
   }

}

.pointsphotobase {
   line-height:$icon-size;
   font-size:$xlargeFontSize*1.25;
   text-align:center;
   padding-left:$icon-size + 10px;
   position:relative;
   &:before {
      position:absolute;
      z-index:1;
      top:0;
      left:0;
      content : ' ';
      width : $icon-size;
      height : $icon-size;
      max-height: $icon-size;
      background-position: top;
      background-size: contain;
      background-repeat: no-repeat;
      background-color: transparent;
      background-image: theme_image($theme-path + "/images/" + $gtheme-name,  "miscicons/" + "points" + ".png");
   }
}
.pointsphoto {
   @extend .pointsphotobase;
   height:$icon-size+10px;
   max-height:$icon-size+10px;
   &:after {
      font-size:$smallFontSize;
      font-weight:bold;
      position:absolute;
      z-index:1;
      top:$icon-size/2+3px;
      left:0;
      content : 'Points';
      width : $icon-size;
      height : 1em;
      max-height: 1em;
   }
}
.visitsphoto {
   @extend .pointsphoto;
   &:before {
      background-image: theme_image($theme-path + "/images/" + $gtheme-name,  "miscicons/" + "number_visits" + ".png");
   }
   &:after {
      content : 'Visits';
   }
}

.kbTitle {
   &:before {
      position:absolute;
      z-index:1;
      top:0;
      left:0;
      content:" ";
      width :100%;
      height :100%;
      background-position: center center;
      background-size: contain;
      background-repeat: no-repeat;
      background-color: transparent;
      background-image: theme_image($theme-path + "/images/" + $gtheme-name, "logo" + ".png");
   }
}

.emptyPage {
   background-size:contain;
   font-size:$largeFontSize;
   font-weight:bold;
   &:before {
      position:absolute;
      top:3em;
      left:0;
      width:100%;
      height:100%;
      text-align:center;
      padding:$panelTopGap $panelGap;
      background:transparent;
      color : #555658;
   }
}

.calculator {
   background : black;
   .x-field.x-field-text {
      .x-component-outer {
         margin: $panelGap $panelGap*2;
         outline: darken(#F3F3F4, 10%) inset $panelGap;
         input.x-input-el {
            &::-webkit-input-placeholder {
               direction:rtl;
           }
            background : #F3F3F4;
            padding: $panelTopGap/4;
            font-size:$xlargeFontSize*1.75;
            min-height: 1.0em + $panelGap/2;
            text-align:right;
         }
      }
   }
   .dialpad {
      .x-container .x-inner {
          margin-top:$panelTopGap;
      }
      .x-button {
          margin-left:$panelGap;
          .x-button-label {
             font-size:$xlargeFontSize*1.25;
          }
      }
      .x-button:last-child {
          margin-right:$panelGap;        
      }
   }
   .x-button.separator {
      margin-top :$panelTopGap;
   }
}

.qrcodeContainer  {
   background : white;
   .x-inner {
      margin: $panelTopGap*2 $panelGap*2;
   }
   .title {
     min-height:$xlargeFontSize*2;
     max-height:$xlargeFontSize*2;
     font-size:$xlargeFontSize*2;
     padding: $panelTopGap $panelGap;
   }
   .qrcode {
      background-position: center center;
      background-repeat: no-repeat;
      background-size : $icon-size*3 $icon-size*3; //Maximum size of QR Code as well
      width:100%;
      height:100%%;
   }
   .done {
      //background : black;
   }
}

//------------------------------------------------------------------------------
// CSS Overrides for default graphics
//------------------------------------------------------------------------------
.x-emptytext {
  
}
//------------------------------------------------------------------------------
// Utility CSS
//------------------------------------------------------------------------------
.wrap {
   white-space:normal !important;  
}
.noWrap {
   white-space:nowrap !important;
} 
.x-button-icon.dummymask {
   width: 1.3em;
   height: 1.3em;
}

.x-body {
   div.separator .x-inner:first-child {
     margin:0em $panelGap;
     margin-bottom:$panelTopGap;
   }
   div.separator:first-child .x-inner:first-child {
     margin-top:$panelTopGap;
   }
   div.separator_pad .x-inner:first-child {
     padding:0em $panelGap;
     padding-bottom:$panelTopGap;
   }
   div.separator_pad:first-child .x-inner:first-child {
     padding-top:$panelTopGap;
   }
   
   div.separator > .x-innerhtml:first-child {
     margin:0em $panelGap;
     margin-bottom:$panelTopGap;
   }
   div.separator:first-child > .x-innerhtml:first-child {
     margin-top:$panelTopGap;
   }
   div.separator_pad > .x-innerhtml:first-child {
     padding:0em $panelGap;
     padding-bottom:$panelTopGap;
   }
   div.separator_pad:first-child > .x-innerhtml:first-child {
     padding-top:$panelTopGap;
   }
   
   .x-container, .x-button, .x-map { 
      &.separator {
         margin:0em $panelGap;
         margin-bottom:$panelTopGap;
      }
      &.separator:first-child {
         margin-top:$panelTopGap;
      }
      &.separator_pad {
         padding:0em $panelGap;
         padding-bottom:$panelTopGap;
      }
      &.separator_pad:first-child {
         padding-top:$panelTopGap;
      }
   }
}
.shadows {
   @include box-shadow(0 0 0.2em rgba(0,0,0,.6));
}
.bold {
  font-weight:bold;
}

.itemTitle {
   background-image: -webkit-gradient(linear,left top,right top, color-stop(80%, rgba(0, 0, 0, 1)), to($list-bg-color));
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   overflow:hidden;
   white-space:nowrap;
   word-wrap:break-word;
   margin-bottom:$panelTopGap/4;
}

.itemDesc {
   @include ellipsis;
   white-space:normal;         
}

.round {
   @if $include-border-radius { @include border-radius($panelBorderRadius); }
}

.panelHdr {
   &.x-toolbar {
      height : $global-row-height*0.75;
      @if $include-border-radius { @include border-top-radius($panelBorderRadius); }
   }
   .x-title {
      font-size:$normalFontSize;
   }
   margin:0em $panelGap;
}
.title {
   @extend .shadows;
   font-size:$xlargeFontSize;
   font-weight:bold;
   min-height : 3.6em;
   text-align:center;
   color : #00ADEE;
   background-color : #F3F3F4;
}

//------------------------------------------------------------------------------
// Mask
//------------------------------------------------------------------------------
.x-mask {
   background:rgba(#25aae1, 0.4) center center no-repeat;
}

//------------------------------------------------------------------------------
// Sheet
//------------------------------------------------------------------------------
.x-sheet, .x-sheet-action {
   @include custom-linear-gradient(#00ADEE 10%, #0A78BE 65%, top);
}

//------------------------------------------------------------------------------
// ListField
//------------------------------------------------------------------------------

@mixin listmark($color: #000){
  @extend .x-listmark-base;
  background-color: $color;
}

// Ext.field.Select
.x-listmark-base {
   & {
      @include insertion(2em, 2em, $panelTopGap, auto);
      right: ($form-spacing + .1em);
      background: theme_image($theme-path + "/images/" + $gtheme-name, "miscicons/" + "disclose" + ".png") no-repeat center center;
      background-size: 2em;
      background-color:transparent !important;
      margin-top: -.5em;
      -webkit-mask:none;
   }
   &.facebook {
      right: ($form-spacing + .5em);
      @include insertion(1.3em, 1.3em, $panelTopGap, auto);
      background: theme_image($theme-path + "/images/" + $gtheme-name,  "toolbar/" + "facebook" + ".png") no-repeat 50% 50%;
      background-size: 1.3em;
      margin-top: 0;
   }
}
  
// Create the dropdown arrow
// for select fields
.x-field-list {
   @extend .x-field-select;
   .x-component-outer {
      &:after {
         @include listmark($form-light);
         z-index: 2;
      }
      &:before {
         @if $include-highlights { background: -webkit-gradient(linear, 0% 0%, 100% 0%, from(rgba($form-field-bg-color, 0)), color-stop(.5, rgba($form-field-bg-color, 1))); }
      }
   }
}

//------------------------------------------------------------------------------
// Toolbar CSS
//------------------------------------------------------------------------------
/**
 * Includes the default styles for toolbar buttons, mostly used as a helper function.
 *
 * @param {color} $bg-color Base color to be used for the button.
 * @param {color} $type Gradient style for the button, will automatically use "recessed" when pressed.
 */
@mixin toolbar-button($bg-color, $type: $button-gradient){
  & {
    border: 1px solid #D1D2D4;
    @include color-by-background($bg-color, 75%);
    @include custom-background-gradient($bg-color, top, false, $type);

    .x-button-icon.x-icon-mask {
      @include mask-by-background($bg-color);
    }

    &.x-button-pressing, &.x-button-pressed, &.x-button-active {
      &, &:after {
        @include custom-background-gradient(darken($bg-color, 3%), top, false, 'recessed');
      }
    }
  }
  .x-toolbar & {
    background:transparent;
    border: 1px solid #F3F3F4;
    &.x-button-back:before, &.x-button-forward:after {
       background:#F3F3F4;
       //background: darken($bg-color, 20%);
    }

    //&.x-button-back, &.x-button-forward, &.x-button-back:after, &.x-button-forward:after {
    &.x-button-back, &.x-button-forward {
      background:transparent;
      border-left: 1px solid transparent;
    }
  }
}

//------------------------------------------------------------------------------
// Create Default Button UIs
//------------------------------------------------------------------------------
@include sencha-toolbar-ui('dark', #555658);
@include sencha-toolbar-ui('light', #00ADEE);

//------------------------------------------------------------------------------
// Theme Icons
//------------------------------------------------------------------------------
@include toolbar-iconmask('accounts');
@include toolbar-iconmask('back');
@include toolbar-iconmask('dochallenges');
@include toolbar-iconmask('challenges');
@include toolbar-iconmask('close');
@include toolbar-iconmask('delete');
//@include toolbar-iconmask('disclose');
@include toolbar-iconmask('earnpointscart');
@include toolbar-iconmask('explore');
@include toolbar-iconmask('home');
@include toolbar-iconmask('info');
@include toolbar-iconmask('mail');
@include toolbar-iconmask('order');
@include toolbar-iconmask('prizes');
@include toolbar-iconmask('redeem');
@include toolbar-iconmask('rewards');
@include toolbar-iconmask('share');
@include toolbar-iconmask('tocheckedinmerch');
@include toolbar-iconmask('checkin');
@include toolbar-iconmask('maps');

.x-toolbar-dark, .x-tabbar-dark {
   @include custom-linear-gradient(#555658 10%, #000000 85%, top);
   color : #F3F3F4;
}
.x-toolbar-light, .x-tabbar-light {
   @include custom-linear-gradient(#00ADEE 0%, #0A78BE 75%, top);
   color : #F3F3F4;
}

//------------------------------------------------------------------------------
// List CSS
//------------------------------------------------------------------------------
.x-list {
   background:transparent;
   .x-list-disclosure {
      background: theme_image($theme-path + "/images/" + $gtheme-name, "miscicons/" + "disclose" + ".png");
      background-size: 2em;
      background-position:center center;
      background-repeat:no-repeat;
   }
   .x-list-container {
      .x-list-header {
         @include custom-linear-gradient(#FAA845, $list-header-bg-color, top);
         color : #F3F3F4;
      }
      .x-list-item-label {
         background : #F3F3F4;
      }
   }
}

.x-list-round {
   .x-inner, .x-list-inner {
      .x-list-container {
         //@include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
         @if $include-border-radius { @include border-radius($panelBorderRadius) }
      }
   }
   .x-list-header {
      @include bevel-by-background($list-header-bg-color);
      border-top: 1px solid $list-header-bg-color;
      border-bottom: 1px solid darken($list-header-bg-color, 20%);
      font-weight: bold;
      font-size: $largeFontSize;
      padding: $panelTopGap/4 1.02em;
      @include bevel-by-background($list-header-bg-color);
   }
}
.x-list-bottom-round {
   @extend .x-list-round;
   .x-inner, .x-list-inner {
      .x-list-container {
         @if $include-border-radius { @include border-bottom-radius($panelBorderRadius) }
     }
   }
}
   
.x-list-round, .x-list-bottom-round {
   /*
   .x-list-item:first-child {
      border-top: 1px solid darken($list-bg-color, 15%);
      @include border-top-radius($panelBorderRadius)
   }
   */
   &.x-list-ungrouped * .x-list-item-label, &.x-list-grouped * .x-list-item-label {
      background : #F3F3F4;
      @if $include-border-radius { @include border-radius(0); }
   }
   &.x-list-ungrouped .x-list-item:last-child, &.x-list-grouped .x-list-item:last-child {
     margin : 0;
     .x-list-item-label {
        border-width : 1px 0 0 0;
     }
   }
   &.x-list-grouped .x-list-footer-item {
     margin-bottom : 0;
   }
   .x-list-container {
     padding : 0;
   }
}

//------------------------------------------------------------------------------
// Button
//------------------------------------------------------------------------------
@mixin sencha-button-ui($ui-label, $color, $gradient: $button-gradient) {
  .x-button.x-button-#{$ui-label}, .x-button.x-button-#{$ui-label}-round, .x-button.x-button-#{$ui-label}-small, .x-button.x-button-#{$ui-label}-large {
    @include toolbar-button($color, $gradient);
    //border: 1px solid darken($color, 20%);
    border: 1px solid $color !important;
    //border-top-color: darken($color, 15%) !important;
  }

  .x-button.x-button-#{$ui-label}-round {
    @extend .x-button-round;
  }

  .x-button.x-button-#{$ui-label}-small {
    @extend .x-button-small;
  }
  .x-button.x-button-#{$ui-label}-large {
    @extend .x-button-large;
  }
}

@include sencha-button-ui('orange', #E86025);
@include sencha-button-ui('green', darken(saturate(green, 55%), 10%));
@include sencha-button-ui('red', darken(saturate(red, 55%), 10%));
@include sencha-button-ui('blue', darken(saturate(blue, 55%), 10%));
@include sencha-button-ui('black', darken(saturate(black, 55%), 10%));
@include sencha-button-ui('fbBlue', desaturate(darken(blue, 10%), 5%));

@include sencha-button-ui('action', $active-color);
@include sencha-button-ui('cancel', #555658);

// Back/Forward buttons
$shadow-width: .065em; // Space between tip and its shadow
$overlap-width: .2em; // how far the mask is clipped

// $mask-height: $button-height + $button-stroke-weight * 2; // Ugh, this is non-specific... borders?
$mask-height: $button-height;
$mask-width: $mask-height/2;

$mask-offset: $button-radius - $overlap-width - $button-stroke-weight + $shadow-width - 0.2em;

$tip-width: $mask-width - $mask-offset + $shadow-width;

.x-button {
   @include toolbar-button(#F3F3F4, $button-gradient);
}
.x-button-forward, .x-button-back {
   &:before, &:after {
      @include insertion($mask-width, $mask-height, -$button-stroke-weight, auto);
      -webkit-mask: $mask-offset 0 theme_image($theme-path + "/images/" + $gtheme-name, "toolbar/"+ "tip" + ".png") no-repeat;
      -webkit-mask-size: $mask-width $mask-height;
   }
}
.x-button-forward,
.x-toolbar .x-button-forward {
   &:before, &:after {
      -webkit-mask: $mask-offset 0 theme_image($theme-path + "/images/" + $gtheme-name, "toolbar/"+ "tip" + ".png") no-repeat;
   }
}

.x-button-large, .x-toolbar .x-button-large {
   @if $include-border-radius { @include border-radius($panelBorderRadius); }
   padding: .6em 1.2em;
   min-height: $button-height*1.5 !important;

   .x-button-label {
      font-size: $xlargeFontSize;
   }

   .x-button-icon {
      width: 1.5em;
      height: 1.5em;
   }
}

.wrap {
   .x-button-label {
      white-space:normal !important;
   }
}

.plain {
   &.x-button, &.x-toolbar .x-button {
      background:none;
      border:none;
   }
}

.x-badge {
   &.round {
      @if $include-border-radius { @include border-radius(0.5em); }
   }
}

//------------------------------------------------------------------------------
// Form CSS
//------------------------------------------------------------------------------
//
// Transparent colors to make texture background show up on all screens
//
.x-form .x-scroll-container {
   background : transparent;
}
.x-form-fieldset .x-form-fieldset-inner {
   border : none;
   background : #F3F3F4;
}
.x-form-fieldset .x-form-label {
  border : none;
}
.x-field {
   background : #F3F3F4;
}
.x-form-label {
   @include custom-linear-gradient(#00ADEE 10%, #0A78BE 85%, top);
   color : white;
}
//------------------------------------------------------------------------------
// List CSS
//------------------------------------------------------------------------------
.listScrollWrapper, .listScrollIndexWrapper {
   .x-list-item:first-child {
      //margin-top: 1em;
   }
   .photo {
      top:$panelTopGap;
      left:$panelGap;
   }
}
.listNoScrollWrapper.separator, .listScrollWrapper.separator, .listScrollIndexWrapper.separator {
   margin:0 !important;
}
.listNoScrollWrapper.separator_pad, .listScrollWrapper.separator_pad, .listScrollIndexWrapper.separator_pad {
   padding:0 !important;
}
.listNoScrollWrapper.separator {
   .x-list-item:first-child {
   }
   /*
   .x-list-item {
      border-left: 1px solid darken($list-bg-color, 15%);
      border-right: 1px solid darken($list-bg-color, 15%);
   }
   */
   .photo {
      top:$panelTopGap;
      left:$panelGap;
   }
   &.noBorder .x-list-item {
      border : none
   }
}
.listScrollWrapper, .listNoScrollWrapper, .listScrollIndexWrapper {
   &.x-list {
      .x-list-disclosure {
         top:1.50em;
         bottom: 0em;
      }
      .x-list-item {
         &.x-list-header-item .x-list-disclosure {
            top:1.50em + 1.7em;
         }
         .x-list-item-label {
            //@if $include-border-radius { @include border-radius(0); }
            position:relative;
            padding:$panelTopGap $panelGap;
            min-height:3.25em;
            border-width: 1px 0 0 0;
            border-top: 1px solid darken($list-bg-color, 15%);
            .photo {
               position:absolute;
               height:$icon-size;
               img {
                  width : $icon-size;
                  max-height : $icon-size;
               }
            }
            .listItemDetailsWrapper {
               padding-left:$icon-size + 10px;
               padding-right:$list-disclosure-size*1.5;
               min-height:$icon-size;
               .itemDistance {
                 position:absolute;
                 top:$panelTopGap;
                 right:$panelGap;
                 font-weight:bold;
                 font-size:$normalFontSize;
               }
               .itemTitle {
                  font-size:$normalFontSize;
               }
               .itemDesc {
                  font-size:$normalFontSize;
                  word-break:break-word;
               }
            }
         }
         &:first-child .x-list-item-label {
            border: none;
            @if $include-border-radius { @include border-radius(0); }
         }
      }
   }
   .x-inner, .x-list-inner {
      .x-list-container {
         //@include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
         //border: 1px solid darken($list-bg-color, 15%);
      }
   }
   .x-list-container {
      padding : 0;
   }
}

.x-list-normal {
   .x-list-header {
      line-height:1.7em;
   }
}

.x-list-normal, .x-list-round, .x-list-bottom-round {
   &.x-list-ungrouped, &.x-list-grouped {
      .x-list-container .x-list-item {
         &.x-list-header-item, &.x-list-footer-item {
            .x-list-item-label {
               @if $include-border-radius { @include border-radius(0); }
            }
         }
      }
   }
}
.x-list-round, .x-list-bottom-round {
   &.x-list-ungrouped, &.x-list-grouped {
      .x-list-container .x-list-item {
         &:last-child {
            &.x-list-footer-item {
               .x-list-item-label {
                  @if $include-border-radius { @include border-bottom-radius($panelBorderRadius); }
               }
            }
         }
      }
   }
}

//------------------------------------------------------------------------------
// Icon Select CSS (MainPage and Challenge Page)
//------------------------------------------------------------------------------
.mainMenuSelections {
   padding:$panelGap;
   .x-hasbadge .x-badge {
      font-size:$largeFontSize;
      @include opacity(.9);
      right:2.7em;
   }
   .x-item-selected .photoName {
      background-color:#C3C3C4;
   }
   .x-dataview-item, .x-data-item {
      height:($panelTopGap*2)+($normalFontSize*1.25*1)+(1.25*4.5em);
      width:50%;
      float:left;
      font-size:$normalFontSize*1.25;
      color:#555658;
      position:relative; // Used for add Icon Mask to the selection
      .mainPageItemWrapper {
        padding:$panelTopGap/2 $panelGap/2;
         text-align:center;
         .photo {
            height : $icon-size*1.25;
            img {
               width : $icon-size*1.25;
               max-height : $icon-size*1.25;
            }
         }
         .photoName {
            font-weight:bold;
            padding:$panelTopGap/2 $panelGap/2;
            @if $include-border-radius { @include border-radius($panelBorderRadius); }
         }
      }
   }
   .x-dataview-item:nth-child(2n+1) {
      clear:both;
   }
}

.challengeMenuSelections {
   @extend .mainMenuSelections;
   .x-hasbadge .x-badge {
      right:0em;
      background-color : #E86025;
      border-color : darken(#E86025,5%);
   }
   .x-dataview-item, .x-data-item {
      width:33%;
      height:($panelTopGap*2)+($normalFontSize*1.25*2)+(1.25*5em);
      .mainPageItemWrapper {
         .photo {
            height : $icon-size;
            img {
               width : $icon-size;
               max-height : $icon-size;
            }
         }
      }
   }
   .x-dataview-item:nth-child(3n+1) {
      clear:both;
   }
}

.challengePageItem {
   .x-carousel-item {
      @include box-shadow(inset 0em -0.1em 0.1em rgba(0,0,0,0.6));
   }
}
.challengePageItemDescWrapper {
   min-height : 4em;
   max-height : 4em;
   padding:$panelTopGap/2 $panelGap;
   background: rgba(252, 252, 253, .5);
   .itemDesc {
      font-size:$normalFontSize*1.25;
      padding-bottom:$panelTopGap/2;  
   }
   .itemDescName {
      text-align:center;
   }
}


.referralsMain {
   .referralsPanel {
      @extend .listNoScrollWrapper;
      //@extend .viewport;
      .listItemDetailsWrapper {
         padding-left:0 !important;
         height:$icon-size*1.5;
         .itemTitle {
            margin-top:$panelTopGap;
            font-weight:bold;
            text-align:center;
            font-size:$xlargeFontSize*1.25 !important;
            &.emailsender:before {
               content : " ";
               width :$xlargeFontSize*1.25;
               height :$xlargeFontSize*1.25;
               position:absolute;
               -webkit-mask-image: theme_image($theme-path + "/images/" + $gtheme-name,  "toolbar/" + "mail" + ".png");
               -webkit-mask-size: $xlargeFontSize*1.25 $xlargeFontSize*1.25;
               background-color:#0A78BE;
               top : $panelTopGap*1.5;
            }
         }
         .itemDesc {
            text-align:center;
         }
      }
   }
}
//------------------------------------------------------------------------------
// Login Pages
//------------------------------------------------------------------------------
.viewport {
   @include custom-radial-gradient(#F3F3F4 40%, #D1D2D4 70%, center center, url($theme-path-rel + '/images/' + $gtheme-name + '/texture.png'));
   background-repeat : repeat;
   background-size : contain;
}
.x-navigationview .x-navigationview-inner > .x-layout-card-item {
   background-color:transparent;
   background-repeat : no-repeat;
   &.bgImage {
      @include custom-radial-gradient(#00ADEE 50%, #0A78BE 80%, center center, url($theme-path-rel + '/images/' + $gtheme-name + '/logohomescreen3.png'));
      background-position : center center;
      background-size : 100%, 100%;
   }
}

//------------------------------------------------------------------------------
// Checkin Pages
//------------------------------------------------------------------------------
.checkInExploreList {
   @extend .listScrollWrapper;
   .listItemDetailsWrapper {
      //width:12em !important;
   }
}

.checkInNow {
   @include custom-linear-gradient(#00ADEE 0%, #0A78BE 75%, top);
   color : #F3F3F4;
   padding: $panelTopGap 2*$panelGap;
}

//------------------------------------------------------------------------------
// Merchant Account Page and Merchant Prize Page
//------------------------------------------------------------------------------
.merchantMain {
   .tbPanel {
      background-position: center;
      background-size: cover;
      .container {
        background: rgba(0,0,0,0.3) center center no-repeat;
        color: white;
        padding : $panelTopGap $panelGap;
      }
   }
   .prizesWonPanel {
      @if $include-border-radius { @include border-radius($panelBorderRadius); }
      @include box-shadow(0.2em 0.2em 0em rgba(80,81,82,0.6));
      //border:1px solid #E7E7E8;
      position:relative;
      margin: 0 $panelGap $panelTopGap $panelGap;
      min-height : $icon-size;
      .x-innerhtml {
         @extend .pointsphotobase;
         @if $include-border-radius { @include border-radius($panelBorderRadius); }
         background-color: #F3F3F4;
         margin :0 !important;
         padding:$panelTopGap $panelGap;
         font-size:1em;
         &:before {
            @if $include-border-radius { @include border-left-radius($panelBorderRadius); }
            @include custom-linear-gradient(#00ADEE 10%, #0A78BE 85%, top);
            width:57px + 1.5*12px;
            height:57px + 2*12px;
            max-height:57px + 2*12px;
         }
      }
      .prizeswonphoto {
         @extend .pointsphotobase;
         text-align:left;
         background-color: transparent;
         font-size:1em;
         &:before {
           @include custom-linear-gradient(#00ADEE 10%, #0A78BE 85%, top, url($theme-path-rel + "/images/" + $gtheme-name + "/miscicons/" + "prizeswon" + ".png"));
         }
         .itemTitle {
            font-weight:bold;
            line-height:1em;
            font-size:$largeFontSize !important;
         }
         .itemDesc {
            line-height:2.25em;
            font-style:italic;
            //font-size:$largeFontSize !important;
         }
      }
   }
   .feedPanelHdr {
      @extend .panelHdr;
      @include custom-linear-gradient(#A7A9AC 10%, #77787B 85%, top);
   }
   .descPanelHdr {
      @extend .panelHdr;
   }

   .descPanel {
      padding: $panelTopGap $panelGap;
      background:#F3F3F4;
      @if $include-border-radius { @include border-bottom-radius($panelBorderRadius); }
      //@include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
      .x-inner {
         padding:0 !important;
         margin:0 !important;
         .x-innerhtml {
            font-size : $normalFontSize;
            text-align:justify;
            line-height : $normalFontSize + 1.0em;
            &:first-letter, p:first-letter {
               font-size:400%;
               font-weight:bold;
               line-height : 0.8em;
            }
         }
      }
   }
   .feedPanel {
      @extend .listNoScrollWrapper;
      //@extend .viewport;
      .listItemDetailsWrapper {
         .itemTitle {
            font-weight:bold;
            font-size:$largeFontSize !important;
         }
      }
   }
}

.merchantDetails {
   .x-body {
   }
   .gmap .x-innerhtml {
      overflow:hidden;
   }
   .x-dataview {
      .x-inner {
         margin:0!important;
         padding:0!important;
      }
      .photo {
         height:$icon-size*2+10;
         img {
            width : $icon-size*2;
            max-height:$icon-size*2;
            @include box-shadow(0.2em 0.2em 0.2em rgba(0,0,0,.6));
            margin-right:$panelGap;
         }
      }
      //margin-left:$icon-size*1.5 + 10px;
      padding-right:0;
      //width:8.5em !important;
      .itemTitle {
         font-size:$largeFontSize !important;
      }
      .itemDesc {
         font-size:$normalFontSize;
      }
   }
}
//------------------------------------------------------------------------------
// Rewards Page
//------------------------------------------------------------------------------
.rewardItem {
   .title {
     line-height:$xlargeFontSize*2 + 2*$panelTopGap;
   }
   .itemPhoto {
      background-size : $icon-size*3 $icon-size*3; //Maximum size of QR Code as well
      background-position : center center;
      background-repeat : no-repeat;
   }
   .itemPoints {
      position:absolute;
      bottom:$panelTopGap;
      right:$panelGap;
      font-size:$xlargeFontSize;
   }
   .info {
      position:relative;
      padding:$panelTopGap $panelGap $panelTopGap*2 $panelGap;
      .photo {
         position:absolute;
         right : 0.8em;
         img {
            width : $icon-size;
            max-height : $icon-size;
         }
      }
      .infoWrapper {
         padding-right:$icon-size + 10px;
         width:16em;
         min-height:$icon-size;
         .name {
            font-size:$normalFontSize;
            font-weight:bold;
            @include ellipsis;
            padding-bottom : $panelTopGap;
         }
         .disclaimer {
            font-size:$smallFontSize;
         }
         .date {
            font-size:$normalFontSize;
            font-weight:bold;
         }
      }
   }
}

.rewardsRedemptionsPanelHdr {
   @extend .panelHdr;
}

.rewardsServerMain {
   .x-field {
      background : black;
   }
   .rewardsMainCalculator {
     @extend .calculator
   }
}

.rewardsMain, .rewardsCart {
   @extend .listScrollIndexWrapper;
   .x-inner div[id|=ext-element] {
      //@if $include-border-radius { @include border-radius($panelBorderRadius); }
   }
   &.x-list .x-list-item:last-child {
     border-bottom : 0;
   }
   .x-data-item {
      .x-inner {
         min-width : 0 !important;
      }
      .photo {
        position:static !important;
        //height:$icon-size;
        .x-innerhtml {
           position:relative;
           .x-badge {
              @include opacity(.8);
              @if $include-button-highlights {
                 @include bevel-by-background($badgePoints-bg-color);
              }
              @include color-by-background($badgePoints-bg-color, $contrast: 50%);
              border: 1px solid darken($badgePoints-bg-color, 10%);
              @include background-gradient($badgePoints-bg-color, $badgePoints-bg-gradient);
           }
        }
      }
      .itemDetails {
         margin-left:$panelGap;
         //min-height:$icon-size;
         .itemTitle {
            font-weight:bold;
            font-size:$largeFontSize !important;
            white-space: normal;
            background:transparent;
            -webkit-text-fill-color:$list-color;
         }
         .itemDesc {
            font-size:$smallFontSize;
          }
      }
      .x-spinner {
         background:transparent;
         .x-field-input {
            width:2em;
            &.x-item-hidden {
               visibility:hidden;
            }
         }
         .x-input-el {
            //text-align:right;
            //font-size:$xlargeFontSize;
         }
      }
   }
   .earnPtsPanelHdr {
      @extend .panelHdr;
   }
}

.rewardsCart {
   .x-list-inner {
      padding:0 !important;
   }
}

.rewardsCartFooter {
   text-align:center;
   font-weight:bold;
   .points {
      text-align:right;
   }
}

.prizeCheck {
   position:relative;
   .rouletteBg, .rouletteTable, .rouletteBall {
      top:0;
      left:0;
      position:absolute;
      background-position : center center;
      background-color:transparent;
      background-repeat : no-repeat;
      width:100%;
      height:100%;
   }
   .rouletteBg {
      background-image : theme_image($theme-path + "/images/" + $gtheme-name, "green_roulette_bg" + ".png");
      background-size : cover;
      z-index:1
   }
   .rouletteTable, .rouletteBall {
      -webkit-transform-origin: 50% 50%;
      background-size : contain;
   }
   .rouletteTable {
      background-image : theme_image($theme-path + "/images/" + $gtheme-name, "roulette2" + ".png");
      z-index:2;
   }
   .rouletteBall {
      background-image : theme_image($theme-path + "/images/" + $gtheme-name, "ball" + ".png");
      z-index:3;
   }
   .spinFwd {
      -webkit-animation: roulette-table-rotate 3.0s infinite linear;     
   }
   .spinBack {
      -webkit-animation: roulette-table-rotate-back 2.1s infinite linear;     
   }
}

//------------------------------------------------------------------------------
// Redemptions Page
//------------------------------------------------------------------------------
.redemptionsMain {
   .ptsEarnPanelHdr {
      @extend .panelHdr;
      &:first-child {
         margin-top:$panelTopGap;
      }
   }
   .ptsEarnPanel {
      padding:$panelGap*0.5;
      border: 1px solid #D1D2D4;
      background : #F3F3F4;
      @if $include-border-radius { @include border-bottom-radius($panelBorderRadius); }
      //@include box-shadow(inset 0 0 0.3em rgba(0,0,0,.6));
      .x-inner {
        margin:0 !important;
        height:$icon-size;
      }
      .pointsphotobase {
         font-size:$xlargeFontSize*1.25;
         color : #E86025;
         text-align:center;
         .x-innerhtml {
            font-size:$xlargeFontSize;
            font-weight:bold;
            line-height:$icon-size;
         }
      }
   }

   .x-scroll-scroller {
      position:static;
   }
   .redemptionsList {
      @extend .listScrollIndexWrapper;
      .x-list-item {
         .listItemDetailsWrapper {
            .itemTitle {
               font-weight:bold;
               font-size:$largeFontSize !important;
               white-space: nowrap;
               line-height : $icon-size;
            }
         }
      }
   }
}

//------------------------------------------------------------------------------
// Accounts Page
//------------------------------------------------------------------------------
.accountsMain {
   .accountsPanelHdr {
      @extend .ptsEarnPanelHdr;
   }
   .accountsList {
      @extend .listScrollWrapper;
      .listItemDetailsWrapper {
         padding-left:0 !important;
         .points {
            text-align:right;
            font-size:$xlargeFontSize;
            font-weight:bold;
            line-height:$icon-size;
         }
      }
      .x-list-emptytext {
         position:absolute;
         width:100%;
         height:100%;
         @extend .emptyPage;
         background: theme_image($theme-path + "/images/" + $gtheme-name,  "noaccounts" + ".png") center no-repeat;
         &:before {
            content:"You have no accounts opened";
         }
      }
   }
}

.accountsTransferMain {
   .transferPanel {
      @extend .listNoScrollWrapper;
      //@extend .viewport;
      .listItemDetailsWrapper {
         padding-left:0 !important;
         height:$icon-size*1.5;
         .itemTitle {
            margin-top:$panelTopGap;
            font-weight:bold;
            text-align:center;
            font-size:$xlargeFontSize*1.25 !important;
            &.emailsender:before {
               content : " ";
               width :$xlargeFontSize*1.25;
               height :$xlargeFontSize*1.25;
               position:absolute;
               -webkit-mask-image: theme_image($theme-path + "/images/" + $gtheme-name,  "toolbar/" + "mail" + ".png");
               -webkit-mask-size: $xlargeFontSize*1.25 $xlargeFontSize*1.25;
               background-color:#0A78BE;
               top : $panelTopGap*1.5;
            }
         }
         .itemDesc {
            text-align:center;
         }
      }
   }
   .accountsMainCalculator {
      @extend .calculator;
      .x-field {
         background : black;
      }
   }
}

//------------------------------------------------------------------------------
// Prizes Page
//------------------------------------------------------------------------------
.prizesMain {
   .noprizes {
      @extend .emptyPage;
      background: theme_image($theme-path + "/images/" + $gtheme-name,  "noprizes" + ".png") center no-repeat;
      &:before {
         content:"You have no prizes";
      }
   }
}
      
//------------------------------------------------------------------------------
// Photo Upload Page
//------------------------------------------------------------------------------
.photoUploadPage {
   .background {
      background-color:black;
      background-position: center center;
      background-repeat : no-repeat;
      background-size: contain;
   }
   .desc {
     background: rgba(0,0,0,0.3) center center no-repeat;
     padding: $panelTopGap/2 $panelGap/2;
     textarea {
        color: white;
        font-size:$largeFontSize;
     }
   }
}
