<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
      <!-- Default Fontsize = 11px
      -->
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>KickBak</title>
      <link rel="stylesheet" type="text/css" href="resources/css/android-tablet-lhdpi.css">
      <!--
      <link rel="stylesheet" type="text/css" href="resources/css/android-phone-lhdpi.css">
      -->
      <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www
      directory and include it here -->
      <script type="text/javascript" src="../lib/gibberish-aes.min.js"></script>
      <script type="text/javascript" src="../lib/core/qrcode.js"></script>
      <script type="text/javascript" src="../lib/core/date.js"></script>
      <script type="text/javascript" src="../lib/core/extras.js"></script>
      <!-- Debug Javascript on mobile browser -->
      <script type="text/javascript" src="../lib/touch-2.1.1/sencha-touch-all-debug.js"></script>
      <!--
      Phone Gap Libs
      -->
      <script type="text/javascript" src="lib/cordova-2.6.0.android.js"></script>
      <script type="text/javascript">
         var backBtnCallbackListFn = [];
         var phoneGapAvailable = false;
         var debugMode = true;
         var serverHost;
         //serverHost = 'http://192.168.0.52:3000';
         //serverHost = 'http://192.168.0.46:3000';
		 //serverHost = 'http://76.10.173.153';
		 serverHost = 'http://www.dev1getkickbak.com';
		 //serverHost = 'http://www.devgetkickbak.com';
		 //serverHost = 'http://www.getkickbak.com',
         var merchantMode = true;
         var appName = 'MerchantKickBak';

         var _appPath = "app", _extPath = '../lib/touch-2.1.1/src';

         var _browser = Ext.browser;
         if (!!window.isNK)
         {
            _browser.setFlag('WebView');
            _browser.setFlag('Sencha');
         }
         _browser.setFlag('PhonGap', false);

         //
         // Bug fix to prevent bunching up of cls aggregation
         //
         //Ext.baseCSSPrefix = ' ' + Ext.baseCSSPrefix;

         Ext.Loader.setConfig(
         {
            enabled : true,
            paths :
            {
               Ext : _extPath,
               Genesis : _appPath
            }
         });
      </script>
      <script type="text/javascript" src="lib/core/barcodescanner.js"></script>
      <script type="text/javascript" src="lib/core/QRCodeReader.js"></script>
      <!--
      <script type="text/javascript" src="lib/FileTransfer.js"></script>
      -->
      <!--
      SenchaTouch Libs
      -->
      <script type="text/javascript" src="lib/core/Overrides.js"></script>
      <!-- View Widgets -->
      <script type="text/javascript" src="app/profile/Desktop.js"></script>
      <!-- View Widgets -->
      <script type="text/javascript" src="app/view/widgets/Scroll.js"></script>
      <script type="text/javascript" src="app/view/widgets/ListField.js"></script>
      <script type="text/javascript" src="app/view/widgets/ComponentListItem.js"></script>
      <script type="text/javascript" src="app/view/widgets/ComponentList.js"></script>
      <script type="text/javascript" src="app/view/ViewBase.js"></script>
      <script type="text/javascript" src="app/view/widgets/Item.js"></script>
      <script type="text/javascript" src="app/view/widgets/ItemDetail.js"></script>
      <script type="text/javascript" src="app/view/widgets/MerchantAccountPtsItem.js"></script>
      <script type="text/javascript" src="app/view/widgets/RedeemPtsItem.js"></script>
      <script type="text/javascript" src="app/view/widgets/Calculator.js"></script>
      <!-- Models -->
      <script type="text/javascript" src="app/model/frontend/LicenseServerKey.js"></script>
      <script type="text/javascript" src="app/model/frontend/MainPage.js"></script>
      <script type="text/javascript" src="app/model/UserProfile.js"></script>
      <script type="text/javascript" src="app/model/User.js"></script>
      <script type="text/javascript" src="app/model/Merchant.js"></script>
      <script type="text/javascript" src="app/model/Challenge.js"></script>
      <script type="text/javascript" src="app/model/Checkin.js"></script>
      <script type="text/javascript" src="app/model/PurchaseReward.js"></script>
      <script type="text/javascript" src="app/model/CustomerReward.js"></script>
      <script type="text/javascript" src="app/model/Venue.js"></script>
      <script type="text/javascript" src="app/model/Customer.js"></script>
      <script type="text/javascript" src="app/model/frontend/Account.js"></script>
      <script type="text/javascript" src="app/model/frontend/Signin.js"></script>
      <!-- Views -->
      <script type="text/javascript" src="app/view/Document.js"></script>
      <script type="text/javascript" src="app/view/Viewport.js"></script>
      <script type="text/javascript" src="app/view/MainPageBase.js"></script>
      <script type="text/javascript" src="app/view/RedeemBase.js"></script>
      <script type="text/javascript" src="app/view/server/MainPage.js"></script>
      <script type="text/javascript" src="app/view/server/SettingsPage.js"></script>
      <script type="text/javascript" src="app/view/server/TagCreatePage.js"></script>
      <script type="text/javascript" src="app/view/server/Rewards.js"></script>
      <script type="text/javascript" src="app/view/server/Redemptions.js"></script>
      <script type="text/javascript" src="app/view/server/Prizes.js"></script>
      <script type="text/javascript" src="app/view/server/MerchantAccount.js"></script>
      <script type="text/javascript" src="app/view/widgets/server/RedeemItemDetail.js"></script>

      <!-- Controllers -->
      <script type="text/javascript" src="app/controller/server/mixin/RedeemBase.js"></script>
      <script type="text/javascript" src="app/controller/ControllerBase.js"></script>
      <script type="text/javascript" src="app/controller/ViewportBase.js"></script>
      <script type="text/javascript" src="app/controller/RedeemBase.js"></script>
      <script type="text/javascript" src="app/controller/RewardRedemptionsBase.js"></script>
      <script type="text/javascript" src="app/controller/PrizeRedemptionsBase.js"></script>
      <script type="text/javascript" src="app/controller/MainPageBase.js"></script>
      <script type="text/javascript" src="app/controller/SettingsBase.js"></script>
      <script type="text/javascript" src="app/controller/server/Settings.js"></script>
      <script type="text/javascript" src="app/controller/server/MainPage.js"></script>
      <script type="text/javascript" src="app/controller/server/Viewport.js"></script>
      <script type="text/javascript" src="app/controller/server/Challenges.js"></script>
      <script type="text/javascript" src="app/controller/server/Rewards.js"></script>
      <script type="text/javascript" src="app/controller/server/Redemptions.js"></script>
      <script type="text/javascript" src="app/controller/server/Prizes.js"></script>
      <script type="text/javascript" src="app/controller/server/Merchants.js"></script>

      <!-- External Libs -->
   </head>
   <body>
      <script type="text/javascript">
         // If you want to prevent dragging, uncomment this section
         /*
          function preventBehavior(e)
          {
          e.preventDefault();
          };
          document.addEventListener("touchmove", preventBehavior, false);
          */

         /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
          see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
          for more details -jm */
         /*
          function handleOpenURL(url)
          {
          // TODO: do something with the url passed in.
          }
          */
         /* When this function is called, PhoneGap has been initialized and is ready to roll */
         /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
          see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
          for more details -jm */

         function appInit()
         {
            console.log("appInit - start");
            Ext.application(
            {
               requires : ['Ext.device.Connection', 'Ext.device.Notification', 'Ext.device.Camera', 'Ext.device.Communicator', 'Ext.device.Geolocation', 'Ext.device.Orientation'],
               profiles : ['Desktop'],
               views : ['Document', 'server.Rewards', 'server.Redemptions', 'server.MainPage', 'widgets.server.RedeemItemDetail', 'server.SettingsPage', 'server.TagCreatePage', 'Viewport'],
               controllers : ['server.Viewport', 'server.MainPage', 'server.Challenges', 'server.Rewards', 'server.Redemptions', 'server.Settings', 'server.Prizes'],
               stores : [],
               launch : function()
               {
                  _application = this;
                  //this.redirectTo('');
                  Ext.create('Genesis.view.Viewport');
                  console.log("Launched App");
               },
               appFolder : _appPath,
               name : 'Genesis'
            });

            console.log("appInit - end");
         }


         window.onerror = function(e, url, linenum)
         {
            console.log("Error on Line#" + linenum + "\n" + e);
         }
         console.log("SystemInit");
         appInit();
      </script>
      <div class="serverPhotoCache"></div>
      <p style="display:none;">
         <audio id="click_sound" preload="auto" autobuffer>
            <source src="resources/audio/click_sound.mp3" type="audio/mp3" />
         </audio>
         <audio id="nfc_end" preload="auto" autobuffer>
            <source src="resources/audio/nfc_end.mp3" type="audio/mp3" />
         </audio>
         <audio id="nfc_error" preload="auto" autobuffer>
            <source src="resources/audio/nfc_error.mp3" type="audio/mp3" />
         </audio>
         <audio id="beep" preload="auto" autobuffer>
            <source src="resources/audio/beep.wav" type="audio/wav" />
         </audio></p>
   </body>
</html>
