Ext.define("Ext.device.communicator.Default",{SERVER_URL:"http://localhost:3000",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:"0",generateId:function(){return String(++this.idSeed);},getId:function(a){var b=a.$callbackId;if(!b){a.$callbackId=b=this.generateId();}return b;},getCallbackId:function(k,d){var c=this.callbackIdMap,b=this.callbackDataMap,h,a,g,f;if(!d){a=this.globalScopeId;}else{if(d.isIdentifiable){a=d.getId();}else{a=this.getId(d);}}g=this.getId(k);if(!c[a]){c[a]={};}if(!c[a][g]){h=this.generateId();f={callback:k,scope:d};c[a][g]=h;b[h]=f;}return c[a][g];},getCallbackData:function(a){return this.callbackDataMap[a];},invoke:function(c,a){var b=this.getCallbackData(c);b.callback.apply(b.scope,a);},send:function(b){var d,c,a,f;if(!b){b={};}else{if(b.callbacks){d=b.callbacks;c=b.scope;delete b.callbacks;delete b.scope;for(a in d){if(d.hasOwnProperty(a)){f=d[a];if(typeof f=="function"){b[a]=this.getCallbackId(f,c);}}}}}this.doSend(b);},doSend:function(a){var c=new XMLHttpRequest();c.open("GET",this.SERVER_URL+"?"+Ext.Object.toQueryString(a)+"&_dc="+new Date().getTime(),false);try{c.send(null);}catch(b){if(a.failure){this.invoke(a.failure);}else{if(a.callback){this.invoke(a.callback);}}}}});Ext.define("Ext.device.communicator.Android",{extend:"Ext.device.communicator.Default",doSend:function(a){window.Sencha.action(JSON.stringify(a));}});Ext.define("Ext.device.Communicator",{requires:["Ext.device.communicator.Default","Ext.device.communicator.Android"],singleton:true,constructor:function(){if(Ext.os.is.Android){return new Ext.device.communicator.Android();}return new Ext.device.communicator.Default();}});Ext.define("Ext.device.camera.Abstract",{source:{library:0,camera:1,album:2},destination:{data:0,file:1},encoding:{jpeg:0,jpg:0,png:1},capture:Ext.emptyFn});Ext.define("Ext.device.camera.PhoneGap",{extend:"Ext.device.camera.Abstract",capture:function(l){var h=l.success,d=l.failure,o=l.scope,b=this.source,f=this.destination,k=this.encoding,a=l.source,m=l.destination,c=l.encoding,p={};if(o){h=Ext.Function.bind(h,o);d=Ext.Function.bind(d,o);}if(a!==undefined){p.sourceType=b.hasOwnProperty(a)?b[a]:a;}if(m!==undefined){p.destinationType=f.hasOwnProperty(m)?f[m]:m;}if(c!==undefined){p.encodingType=k.hasOwnProperty(c)?k[c]:c;}if("quality" in l){p.quality=l.quality;}if("width" in l){p.targetWidth=l.width;}if("height" in l){p.targetHeight=l.height;}try{navigator.camera.getPicture(h,d,p);}catch(g){alert(g);}}});Ext.define("Ext.device.camera.Sencha",{extend:"Ext.device.camera.Abstract",requires:["Ext.device.Communicator"],capture:function(d){var c=this.source,b=this.destination,g=this.encoding,h=d.source,a=d.destination,f=d.encoding;if(c.hasOwnProperty(h)){h=c[h];}if(b.hasOwnProperty(a)){a=b[a];}if(g.hasOwnProperty(f)){f=g[f];}Ext.device.Communicator.send({command:"Camera#capture",callbacks:{success:d.success,failure:d.failure},scope:d.scope,quality:d.quality,width:d.width,height:d.height,source:h,destination:a,encoding:f});}});Ext.define("Ext.device.camera.Simulator",{extend:"Ext.device.camera.Abstract",config:{samples:[{success:"http://www.sencha.com/img/sencha-large.png"}]},constructor:function(a){this.initConfig(a);},updateSamples:function(a){this.sampleIndex=0;},capture:function(d){var c=this.sampleIndex,b=this.getSamples(),h=b.length,g=b[c],f=d.scope,k=d.success,a=d.failure;if("success" in g){if(k){k.call(f,g.success);}}else{if(a){a.call(f,g.failure);}}if(++c>h-1){c=0;}this.sampleIndex=c;}});Ext.define("Ext.device.connection.Abstract",{extend:"Ext.Evented",config:{online:false,type:null},UNKNOWN:"Unknown connection",ETHERNET:"Ethernet connection",WIFI:"WiFi connection",CELL_2G:"Cell 2G connection",CELL_3G:"Cell 3G connection",CELL_4G:"Cell 4G connection",NONE:"No network connection",isOnline:function(){return this.getOnline();}});Ext.define("Ext.device.connection.PhoneGap",{extend:"Ext.device.connection.Abstract",syncOnline:function(){var a=navigator.network.connection.type;this._type=a;this._online=a!=Connection.NONE;},getOnline:function(){this.syncOnline();return this._online;},getType:function(){this.syncOnline();return this._type;}});Ext.define("Ext.device.connection.Sencha",{extend:"Ext.device.connection.Abstract",initialize:function(){Ext.device.Communicator.send({command:"Connection#watch",callbacks:{callback:this.onConnectionChange},scope:this});},onConnectionChange:function(a){this.setOnline(Boolean(a.online));this.setType(this[a.type]);this.fireEvent("onlinechange",this.getOnline(),this.getType());}});Ext.define("Ext.device.connection.Simulator",{extend:"Ext.device.connection.Abstract",getOnline:function(){this._online=navigator.onLine;this._type=Ext.device.Connection.UNKNOWN;return this._online;}});Ext.define("Ext.device.geolocation.Abstract",{config:{maximumAge:0,frequency:10000,allowHighAccuracy:false,timeout:Infinity},getCurrentPosition:function(b){var a=Ext.device.geolocation.Abstract.prototype.config;b=Ext.applyIf(b,{maximumAge:a.maximumAge,frequency:a.frequency,allowHighAccuracy:a.allowHighAccuracy,timeout:a.timeout});if(!b.success){Ext.Logger.warn("You need to specify a `success` function for #getCurrentPosition");}return b;},watchPosition:function(b){var a=Ext.device.geolocation.Abstract.prototype.config;b=Ext.applyIf(b,{maximumAge:a.maximumAge,frequency:a.frequency,allowHighAccuracy:a.allowHighAccuracy,timeout:a.timeout});if(!b.callback){Ext.Logger.warn("You need to specify a `callback` function for #watchPosition");}return b;},clearWatch:function(){}});Ext.define("Ext.device.geolocation.Sencha",{extend:"Ext.device.geolocation.Abstract",getCurrentPosition:function(a){a=this.callParent([a]);Ext.apply(a,{command:"Geolocation#getCurrentPosition",callbacks:{success:a.success,failure:a.failure}});Ext.applyIf(a,{scope:this});delete a.success;delete a.failure;Ext.device.Communicator.send(a);return a;},watchPosition:function(a){a=this.callParent([a]);Ext.apply(a,{command:"Geolocation#watchPosition",callbacks:{success:a.callback,failure:a.failure}});Ext.applyIf(a,{scope:this});delete a.callback;delete a.failure;Ext.device.Communicator.send(a);return a;},clearWatch:function(){Ext.device.Communicator.send({command:"Geolocation#clearWatch"});}});Ext.define("Ext.device.geolocation.Simulator",{extend:"Ext.device.geolocation.Abstract",requires:["Ext.util.Geolocation"],getCurrentPosition:function(a){a=this.callParent([a]);Ext.apply(a,{autoUpdate:false,listeners:{scope:this,locationupdate:function(b){if(a.success){a.success.call(a.scope||this,b.position);}},locationerror:function(){if(a.failure){a.failure.call(a.scope||this);}}}});this.geolocation=Ext.create("Ext.util.Geolocation",a);this.geolocation.updateLocation();return a;},watchPosition:function(a){a=this.callParent([a]);Ext.apply(a,{listeners:{scope:this,locationupdate:function(b){if(a.callback){a.callback.call(a.scope||this,b.position);}},locationerror:function(){if(a.failure){a.failure.call(a.scope||this);}}}});this.geolocation=Ext.create("Ext.util.Geolocation",a);return a;},clearWatch:function(){if(this.geolocation){this.geolocation.destroy();}this.geolocation=null;}});Ext.define("Ext.device.orientation.Abstract",{extend:"Ext.EventedBase",onDeviceOrientation:function(a){this.doFireEvent("orientationchange",[a]);}});Ext.define("Ext.device.orientation.HTML5",{extend:"Ext.device.orientation.Abstract",initialize:function(){this.onDeviceOrientation=Ext.Function.bind(this.onDeviceOrientation,this);window.addEventListener("deviceorientation",this.onDeviceOrientation,true);}});Ext.define("Ext.device.orientation.Sencha",{extend:"Ext.device.orientation.Abstract",requires:["Ext.device.Communicator"],initialize:function(){Ext.device.Communicator.send({command:"Orientation#watch",callbacks:{callback:this.onDeviceOrientation},scope:this});}});(function(a,d,c,f){if(typeof c.module!=="undefined"&&c.module["exports"]){if(f&&c.require){for(var b=0;b<f.length;b++){c[f[b]]=c.require(f[b]);}}c.module["exports"]=d.apply(c);}else{if(typeof c.define!=="undefined"&&c.define==="function"&&c.define["amd"]){define(a,(f||[]),d);}else{c[a]=d.apply(c);}}})("utf8",function(){return{encode:function(c){if(typeof c!=="string"){return c;}else{c=c.replace(/\r\n/g,"\n");}var b="",d=0,a;for(d;d<c.length;d++){a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a);}else{if((a>127)&&(a<2048)){b+=String.fromCharCode((a>>6)|192),b+=String.fromCharCode((a&63)|128);}else{b+=String.fromCharCode((a>>12)|224),b+=String.fromCharCode(((a>>6)&63)|128),b+=String.fromCharCode((a&63)|128);}}}return b;},decode:function(c){if(typeof c!=="string"){return c;}var b="",d=0,a=0;while(d<c.length){a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a),d++;}else{if((a>191)&&(a<224)){b+=String.fromCharCode(((a&31)<<6)|(c.charCodeAt(d+1)&63)),d+=2;}else{b+=String.fromCharCode(((a&15)<<12)|((c.charCodeAt(d+1)&63)<<6)|(c.charCodeAt(d+2)&63)),d+=3;}}}return b;}};},this);(function(a,d,c,f){if(typeof c.module!=="undefined"&&c.module["exports"]){if(f&&c.require){for(var b=0;b<f.length;b++){c[f[b]]=c.require(f[b]);}}c.module["exports"]=d.apply(c);}else{if(typeof c.define!=="undefined"&&c.define==="function"&&c.define["amd"]){define(a,(f||[]),d);}else{c[a]=d();}}})("base64",function(a){var c=this;var d=a||this.utf8;var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t){if(typeof c.btoa!=="undefined"){return c.btoa(t);}if(typeof d==="undefined"){throw {error:"MissingMethod",message:"UTF8 Module is missing."};}if(typeof t!=="string"){return t;}else{t=d.encode(t);}var h="",u,s,q,p,o,m,l,k=0;while(k<t.length){u=t.charCodeAt(k++);s=t.charCodeAt(k++);q=t.charCodeAt(k++);p=u>>2;o=((u&3)<<4)|(s>>4);m=((s&15)<<2)|(q>>6);l=q&63;if(isNaN(s)){m=l=64;}else{if(isNaN(q)){l=64;}}h+=b.charAt(p)+b.charAt(o)+b.charAt(m)+b.charAt(l);}return h;},decode:function(t){if(typeof c.atob!=="undefined"){return c.atob(t);}if(typeof d==="undefined"){throw {error:"MissingMethod",message:"UTF8 Module is missing."};}if(typeof t!=="string"){return t;}else{t.replace(/[^A-Za-z0-9\+\/\=]/g,"");}var h="",u,s,q,p,o,m,l,k=0;while(k<t.length){p=b.indexOf(t.charAt(k++));o=b.indexOf(t.charAt(k++));m=b.indexOf(t.charAt(k++));l=b.indexOf(t.charAt(k++));u=(p<<2)|(o>>4);s=((o&15)<<4)|(m>>2);q=((m&3)<<6)|l;h+=String.fromCharCode(u);if(m!=64){h+=String.fromCharCode(s);}if(l!=64){h+=String.fromCharCode(q);}}return d.decode(h);}};},this,["utf8"]);(function(){var a=window.PhoneGap||window.Cordova||window.cordova;Base64ToPNG=function(){};Base64ToPNG.prototype.saveImage=function(c,f,d,b){a.exec(d,b,"Base64ToPNG","saveImage",[c,f]);};a.addConstructor(function(){if(!window.plugins){window.plugins={};}if(!window.plugins.base64ToPNG){window.plugins.base64ToPNG=new Base64ToPNG();}});})();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var b=Date,a=b.prototype,d=b.CultureInfo,h=function(m,k){if(!k){k=2;}return("000"+m).slice(k*-1);};a.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};a.setTimeToNow=function(){var k=new Date();this.setHours(k.getHours());this.setMinutes(k.getMinutes());this.setSeconds(k.getSeconds());this.setMilliseconds(k.getMilliseconds());return this;};b.today=function(){return new Date().clearTime();};b.compare=function(l,k){if(isNaN(l)||isNaN(k)){throw new Error(l+" - "+k);}else{if(l instanceof Date&&k instanceof Date){return(l<k)?-1:(l>k)?1:0;}else{throw new TypeError(l+" - "+k);}}};b.equals=function(l,k){return(l.compareTo(k)===0);};b.getDayNumberFromName=function(l){var u=d.dayNames,k=d.abbreviatedDayNames,t=d.shortestDayNames,q=l.toLowerCase();for(var p=0;p<u.length;p++){if(u[p].toLowerCase()==q||k[p].toLowerCase()==q||t[p].toLowerCase()==q){return p;}}return -1;};b.getMonthNumberFromName=function(l){var q=d.monthNames,k=d.abbreviatedMonthNames,p=l.toLowerCase();for(var o=0;o<q.length;o++){if(q[o].toLowerCase()==p||k[o].toLowerCase()==p){return o;}}return -1;};b.isLeapYear=function(k){return((k%4===0&&k%100!==0)||k%400===0);};b.getDaysInMonth=function(k,l){return[31,(b.isLeapYear(k)?29:28),31,30,31,30,31,31,30,31,30,31][l];};b.getTimezoneAbbreviation=function(o){var m=d.timezones,l;for(var k=0;k<m.length;k++){if(m[k].offset===o){return m[k].name;}}return null;};b.getTimezoneOffset=function(k){var o=d.timezones,m;for(var l=0;l<o.length;l++){if(o[l].name===k.toUpperCase()){return o[l].offset;}}return null;};a.clone=function(){return new Date(this.getTime());};a.compareTo=function(k){return Date.compare(this,k);};a.equals=function(k){return Date.equals(this,k||new Date());};a.between=function(l,k){return this.getTime()>=l.getTime()&&this.getTime()<=k.getTime();};a.isAfter=function(k){return this.compareTo(k||new Date())===1;};a.isBefore=function(k){return(this.compareTo(k||new Date())===-1);};a.isToday=function(){return this.isSameDay(new Date());};a.isSameDay=function(k){return this.clone().clearTime().equals(k.clone().clearTime());};a.addMilliseconds=function(k){this.setMilliseconds(this.getMilliseconds()+k);return this;};a.addSeconds=function(k){return this.addMilliseconds(k*1000);};a.addMinutes=function(k){return this.addMilliseconds(k*60000);};a.addHours=function(k){return this.addMilliseconds(k*3600000);};a.addDays=function(k){this.setDate(this.getDate()+k);return this;};a.addWeeks=function(k){return this.addDays(k*7);};a.addMonths=function(k){var l=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+k);this.setDate(Math.min(l,b.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};a.addYears=function(k){return this.addMonths(k*12);};a.add=function(l){if(typeof l=="number"){this._orient=l;return this;}var k=l;if(k.milliseconds){this.addMilliseconds(k.milliseconds);}if(k.seconds){this.addSeconds(k.seconds);}if(k.minutes){this.addMinutes(k.minutes);}if(k.hours){this.addHours(k.hours);}if(k.weeks){this.addWeeks(k.weeks);}if(k.months){this.addMonths(k.months);}if(k.years){this.addYears(k.years);}if(k.days){this.addDays(k.days);}return this;};var f,g,c;a.getWeek=function(){var u,t,q,p,o,m,l,k,x,v;f=(!f)?this.getFullYear():f;g=(!g)?this.getMonth()+1:g;c=(!c)?this.getDate():c;if(g<=2){u=f-1;t=(u/4|0)-(u/100|0)+(u/400|0);q=((u-1)/4|0)-((u-1)/100|0)+((u-1)/400|0);x=t-q;o=0;m=c-1+(31*(g-1));}else{u=f;t=(u/4|0)-(u/100|0)+(u/400|0);q=((u-1)/4|0)-((u-1)/100|0)+((u-1)/400|0);x=t-q;o=x+1;m=c+((153*(g-3)+2)/5)+58+x;}l=(u+t)%7;p=(m+l-o)%7;k=(m+3-p)|0;if(k<0){v=53-((l-x)/5|0);}else{if(k>364+x){v=1;}else{v=(k/7|0)+1;}}f=g=c=null;return v;};a.getISOWeek=function(){f=this.getUTCFullYear();g=this.getUTCMonth()+1;c=this.getUTCDate();return h(this.getWeek());};a.setWeek=function(k){return this.moveToDayOfWeek(1).addWeeks(k-this.getWeek());};b._validate=function(o,m,k,l){if(typeof o=="undefined"){return false;}else{if(typeof o!="number"){throw new TypeError(o+" is not a Number.");}else{if(o<m||o>k){throw new RangeError(o+" is not a valid value for "+l+".");}}}return true;};b.validateMillisecond=function(k){return b._validate(k,0,999,"millisecond");};b.validateSecond=function(k){return b._validate(k,0,59,"second");};b.validateMinute=function(k){return b._validate(k,0,59,"minute");};b.validateHour=function(k){return b._validate(k,0,23,"hour");};b.validateDay=function(l,k,m){return b._validate(l,1,b.getDaysInMonth(k,m),"day");};b.validateMonth=function(k){return b._validate(k,0,11,"month");};b.validateYear=function(k){return b._validate(k,0,9999,"year");};a.set=function(k){if(b.validateMillisecond(k.millisecond)){this.addMilliseconds(k.millisecond-this.getMilliseconds());}if(b.validateSecond(k.second)){this.addSeconds(k.second-this.getSeconds());}if(b.validateMinute(k.minute)){this.addMinutes(k.minute-this.getMinutes());}if(b.validateHour(k.hour)){this.addHours(k.hour-this.getHours());}if(b.validateMonth(k.month)){this.addMonths(k.month-this.getMonth());}if(b.validateYear(k.year)){this.addYears(k.year-this.getFullYear());}if(b.validateDay(k.day,this.getFullYear(),this.getMonth())){this.addDays(k.day-this.getDate());}if(k.timezone){this.setTimezone(k.timezone);}if(k.timezoneOffset){this.setTimezoneOffset(k.timezoneOffset);}if(k.week&&b._validate(k.week,0,53,"week")){this.setWeek(k.week);}return this;};a.moveToFirstDayOfMonth=function(){return this.set({day:1});};a.moveToLastDayOfMonth=function(){return this.set({day:b.getDaysInMonth(this.getFullYear(),this.getMonth())});};a.moveToNthOccurrence=function(l,m){var k=0;if(m>0){k=m-1;}else{if(m===-1){this.moveToLastDayOfMonth();if(this.getDay()!==l){this.moveToDayOfWeek(l,-1);}return this;}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(l,+1).addWeeks(k);};a.moveToDayOfWeek=function(k,l){var m=(k-this.getDay()+7*(l||+1))%7;return this.addDays((m===0)?m+=7*(l||+1):m);};a.moveToMonth=function(m,k){var l=(m-this.getMonth()+12*(k||+1))%12;return this.addMonths((l===0)?l+=12*(k||+1):l);};a.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};a.getTimezone=function(){return b.getTimezoneAbbreviation(this.getUTCOffset());};a.setTimezoneOffset=function(m){var k=this.getTimezoneOffset(),l=Number(m)*-6/10;return this.addMinutes(l-k);};a.setTimezone=function(k){return this.setTimezoneOffset(b.getTimezoneOffset(k));};a.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};a.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};a.getUTCOffset=function(){var l=this.getTimezoneOffset()*-10/6,k;if(l<0){k=(l-10000).toString();return k.charAt(0)+k.substr(2);}else{k=(l+10000).toString();return"+"+k.substr(1);}};a.getElapsed=function(k){return(k||new Date())-this;};if(!a.toISOString){a.toISOString=function(){function k(l){return l<10?"0"+l:l;}return'"'+this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+'Z"';};}a._toString=a.toString;a.toString=function(m){var k=this;if(m&&m.length==1){var o=d.formatPatterns;k.t=k.toString;switch(m){case"d":return k.t(o.shortDate);case"D":return k.t(o.longDate);case"F":return k.t(o.fullDateTime);case"m":return k.t(o.monthDay);case"r":return k.t(o.rfc1123);case"s":return k.t(o.sortableDateTime);case"t":return k.t(o.shortTime);case"T":return k.t(o.longTime);case"u":return k.t(o.universalSortableDateTime);case"y":return k.t(o.yearMonth);}}var l=function(p){switch(p*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return m?m.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(p){if(p.charAt(0)==="\\"){return p.replace("\\","");}k.h=k.getHours;switch(p){case"hh":return h(k.h()<13?(k.h()===0?12:k.h()):(k.h()-12));case"h":return k.h()<13?(k.h()===0?12:k.h()):(k.h()-12);case"HH":return h(k.h());case"H":return k.h();case"mm":return h(k.getMinutes());case"m":return k.getMinutes();case"ss":return h(k.getSeconds());case"s":return k.getSeconds();case"yyyy":return h(k.getFullYear(),4);case"yy":return h(k.getFullYear());case"dddd":return d.dayNames[k.getDay()];case"ddd":return d.abbreviatedDayNames[k.getDay()];case"dd":return h(k.getDate());case"d":return k.getDate();case"MMMM":return d.monthNames[k.getMonth()];case"MMM":return d.abbreviatedMonthNames[k.getMonth()];case"MM":return h((k.getMonth()+1));case"M":return k.getMonth()+1;case"t":return k.h()<12?d.amDesignator.substring(0,1):d.pmDesignator.substring(0,1);case"tt":return k.h()<12?d.amDesignator:d.pmDesignator;case"S":return l(k.getDate());default:return p;}}):this._toString();};}());(function(){var x=Date,h=x.prototype,y=x.CultureInfo,q=Number.prototype;h._orient=+1;h._nth=null;h._is=false;h._same=false;h._isSecond=false;q._dateElement="day";h.next=function(){this._orient=+1;return this;};x.next=function(){return x.today().next();};h.last=h.prev=h.previous=function(){this._orient=-1;return this;};x.last=x.prev=x.previous=function(){return x.today().last();};h.is=function(){this._is=true;return this;};h.same=function(){this._same=true;this._isSecond=false;return this;};h.today=function(){return this.same().day();};h.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}return false;};h.at=function(k){return(typeof k==="string")?x.parse(this.toString("d")+" "+k):this.set(k);};q.fromNow=q.after=function(k){var l={};l[this._dateElement]=this;return((!k)?new Date():k.clone()).add(l);};q.ago=q.before=function(k){var l={};l[this._dateElement]=this*-1;return((!k)?new Date():k.clone()).add(l);};var f=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),m=("january february march april may june july august september october november december").split(/\s/),p=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),s=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),b=("final first second third fourth fifth").split(/\s/),A;h.toObject=function(){var l={};for(var k=0;k<p.length;k++){l[p[k].toLowerCase()]=this["get"+s[k]]();}return l;};x.fromObject=function(k){k.week=null;return Date.today().set(k);};var z=function(k){return function(){if(this._is){this._is=false;return this.getDay()==k;}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}this._isSecond=false;var C=this._nth;this._nth=null;var l=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(k,C);if(this>l){throw new RangeError(x.getDayName(k)+" does not occur "+C+" times in the month of "+x.getMonthName(l.getMonth())+" "+l.getFullYear()+".");}return this;}return this.moveToDayOfWeek(k,this._orient);};};var g=function(k){return function(){var C=x.today(),l=k-C.getDay();if(k===0&&y.firstDayOfWeek===1&&C.getDay()!==0){l=l+7;}return C.addDays(l);};};for(var w=0;w<f.length;w++){x[f[w].toUpperCase()]=x[f[w].toUpperCase().substring(0,3)]=w;x[f[w]]=x[f[w].substring(0,3)]=g(w);h[f[w]]=h[f[w].substring(0,3)]=z(w);}var B=function(k){return function(){if(this._is){this._is=false;return this.getMonth()===k;}return this.moveToMonth(k,this._orient);};};var o=function(k){return function(){return x.today().set({month:k,day:1});};};for(var v=0;v<m.length;v++){x[m[v].toUpperCase()]=x[m[v].toUpperCase().substring(0,3)]=v;x[m[v]]=x[m[v].substring(0,3)]=o(v);h[m[v]]=h[m[v].substring(0,3)]=B(v);}var c=function(k){return function(){if(this._isSecond){this._isSecond=false;return this;}if(this._same){this._same=this._is=false;var F=this.toObject(),E=(arguments[0]||new Date()).toObject(),D="",C=k.toLowerCase();for(var l=(p.length-1);l>-1;l--){D=p[l].toLowerCase();if(F[D]!=E[D]){return false;}if(C==D){break;}}return true;}if(k.substring(k.length-1)!="s"){k+="s";}return this["add"+k](this._orient);};};var d=function(k){return function(){this._dateElement=k;return this;};};for(var u=0;u<p.length;u++){A=p[u].toLowerCase();h[A]=h[A+"s"]=c(p[u]);q[A]=q[A+"s"]=d(A);}h._ss=c("Second");var a=function(k){return function(l){if(this._same){return this._ss(arguments[0]);}if(l||l===0){return this.moveToNthOccurrence(l,k);}this._nth=k;if(k===2&&(l===undefined||l===null)){this._isSecond=true;return this.addSeconds(this._orient);}return this;};};for(var t=0;t<b.length;t++){h[b[t]]=(t===0)?a(-1):a(t);}}());(function(){Date.Parsing={Exception:function(l){this.message="Parse error at '"+l.substring(0,10)+" ...'";}};var a=Date.Parsing;var c=a.Operators={rtoken:function(l){return function(m){var o=m.match(l);if(o){return([o[0],m.substring(o[0].length)]);}else{throw new a.Exception(m);}};},token:function(l){return function(m){return c.rtoken(new RegExp("^s*"+m+"s*"))(m);};},stoken:function(l){return c.rtoken(new RegExp("^"+l));},until:function(l){return function(m){var o=[],q=null;while(m.length){try{q=l.call(this,m);}catch(p){o.push(q[0]);m=q[1];continue;}break;}return[o,m];};},many:function(l){return function(m){var q=[],o=null;while(m.length){try{o=l.call(this,m);}catch(p){return[q,m];}q.push(o[0]);m=o[1];}return[q,m];};},optional:function(l){return function(m){var o=null;try{o=l.call(this,m);}catch(p){return[null,m];}return[o[0],o[1]];};},not:function(l){return function(m){try{l.call(this,m);}catch(o){return[null,m];}throw new a.Exception(m);};},ignore:function(l){return l?function(m){var o=null;o=l.call(this,m);return[null,o[1]];}:null;},product:function(){var m=arguments[0],o=Array.prototype.slice.call(arguments,1),p=[];for(var l=0;l<m.length;l++){p.push(c.each(m[l],o));}return p;},cache:function(o){var l={},m=null;return function(p){try{m=l[p]=(l[p]||o.call(this,p));}catch(q){m=l[p]=q;}if(m instanceof a.Exception){throw m;}else{return m;}};},any:function(){var l=arguments;return function(o){var p=null;for(var m=0;m<l.length;m++){if(l[m]==null){continue;}try{p=(l[m].call(this,o));}catch(q){p=null;}if(p){return p;}}throw new a.Exception(o);};},each:function(){var l=arguments;return function(o){var t=[],p=null;for(var m=0;m<l.length;m++){if(l[m]==null){continue;}try{p=(l[m].call(this,o));}catch(q){throw new a.Exception(o);}t.push(p[0]);o=p[1];}return[t,o];};},all:function(){var m=arguments,l=l;return l.each(l.optional(m));},sequence:function(l,m,o){m=m||c.rtoken(/^\s*/);o=o||null;if(l.length==1){return l[0];}return function(v){var w=null,x=null;var z=[];for(var u=0;u<l.length;u++){try{w=l[u].call(this,v);}catch(y){break;}z.push(w[0]);try{x=m.call(this,w[1]);}catch(t){x=null;break;}v=x[1];}if(!w){throw new a.Exception(v);}if(x){throw new a.Exception(x[1]);}if(o){try{w=o.call(this,w[1]);}catch(p){throw new a.Exception(w[1]);}}return[z,(w?w[1]:v)];};},between:function(m,o,l){l=l||m;var q=c.each(c.ignore(m),o,c.ignore(l));return function(p){var t=q.call(this,p);return[[t[0][0],r[0][2]],t[1]];};},list:function(l,m,o){m=m||c.rtoken(/^\s*/);o=o||null;return(l instanceof Array?c.each(c.product(l.slice(0,-1),c.ignore(m)),l.slice(-1),c.ignore(o)):c.each(c.many(c.each(l,c.ignore(m))),px,c.ignore(o)));},set:function(l,m,o){m=m||c.rtoken(/^\s*/);o=o||null;return function(F){var t=null,v=null,u=null,w=null,x=[[],F],E=false;for(var z=0;z<l.length;z++){u=null;v=null;t=null;E=(l.length==1);try{t=l[z].call(this,F);}catch(C){continue;}w=[[t[0]],t[1]];if(t[1].length>0&&!E){try{u=m.call(this,t[1]);}catch(D){E=true;}}else{E=true;}if(!E&&u[1].length===0){E=true;}if(!E){var A=[];for(var y=0;y<l.length;y++){if(z!=y){A.push(l[y]);}}v=c.set(A,m).call(this,u[1]);if(v[0].length>0){w[0]=w[0].concat(v[0]);w[1]=v[1];}}if(w[1].length<x[1].length){x=w;}if(x[1].length===0){break;}}if(x[0].length===0){return x;}if(o){try{u=o.call(this,x[1]);}catch(B){throw new a.Exception(x[1]);}x[1]=u[1];}return x;};},forward:function(l,m){return function(o){return l[m].call(this,o);};},replace:function(m,l){return function(o){var p=m.call(this,o);return[l,p[1]];};},process:function(m,l){return function(o){var p=m.call(this,o);return[l.call(this,p[0]),p[1]];};},min:function(l,m){return function(o){var p=m.call(this,o);if(p[0].length<l){throw new a.Exception(o);}return p;};}};var k=function(l){return function(){var m=null,q=[];if(arguments.length>1){m=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){m=arguments[0];}}if(m){for(var p=0,o=m.shift();p<o.length;p++){m.unshift(o[p]);q.push(l.apply(null,m));m.shift();return q;}}else{return l.apply(null,arguments);}};};var h="optional not ignore cache".split(/\s/);for(var d=0;d<h.length;d++){c[h[d]]=k(c[h[d]]);}var g=function(l){return function(){if(arguments[0] instanceof Array){return l.apply(null,arguments[0]);}else{return l.apply(null,arguments);}};};var f="each any all".split(/\s/);for(var b=0;b<f.length;b++){c[f[b]]=g(c[f[b]]);}}());(function(){var f=Date,p=f.prototype,h=f.CultureInfo;var k=function(q){var s=[];for(var g=0;g<q.length;g++){if(q[g] instanceof Array){s=s.concat(k(q[g]));}else{if(q[g]){s.push(q[g]);}}}return s;};f.Grammar={};f.Translator={hour:function(g){return function(){this.hour=Number(g);};},minute:function(g){return function(){this.minute=Number(g);};},second:function(g){return function(){this.second=Number(g);};},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase();};},timezone:function(g){return function(){var q=g.replace(/[^\d\+\-]/g,"");if(q.length){this.timezoneOffset=Number(q);}else{this.timezone=g.toLowerCase();}};},day:function(g){var q=g[0];return function(){this.day=Number(q.match(/\d+/)[0]);};},month:function(g){return function(){this.month=(g.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(g)/4:Number(g)-1;};},year:function(g){return function(){var q=Number(g);this.year=((g.length>2)?q:(q+(((q+2000)<h.twoDigitYearMax)?2000:1900)));};},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(g){g=(g instanceof Array)?g:[g];for(var s=0;s<g.length;s++){if(g[s]){g[s].call(this);}}var q=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=q.getDate();}if(!this.year){this.year=q.getFullYear();}if(!this.month&&this.month!==0){this.month=q.getMonth();}if(!this.day){this.day=1;}if(!this.hour){this.hour=0;}if(!this.minute){this.minute=0;}if(!this.second){this.second=0;}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.day>f.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){t.set({timezone:this.timezone});}else{if(this.timezoneOffset){t.set({timezoneOffset:this.timezoneOffset});}}return t;},finish:function(g){g=(g instanceof Array)?k(g):[g];if(g.length===0){return null;}for(var v=0;v<g.length;v++){if(typeof g[v]=="function"){g[v].call(this);}}var s=f.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else{if(this.now){s=new Date();}}var w=!!(this.days&&this.days!==null||this.orient||this.operator);var y,u,t;t=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){s.setTimeToNow();}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;w=true;}}if(!w&&this.weekday&&!this.day&&!this.days){var q=Date[this.weekday]();this.day=q.getDate();if(!this.month){this.month=q.getMonth();}this.year=q.getFullYear();}if(w&&this.weekday&&this.unit!="month"){this.unit="day";y=(f.getDayNumberFromName(this.weekday)-s.getDay());u=7;this.days=y?((y+(t*u))%u):(t*u);}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}if(this.month&&!this.day&&this.value){s.set({day:this.value*1});if(!w){this.day=this.value*1;}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;w=true;}if(w&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";y=(this.month-s.getMonth());u=12;this.months=y?((y+(t*u))%u):(t*u);this.month=null;}if(!this.unit){this.unit="day";}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*t;}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}this[this.unit+"s"]=this.value*t;}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.weekday&&!this.day&&!this.days){var q=Date[this.weekday]();this.day=q.getDate();if(q.getMonth()!==s.getMonth()){this.month=q.getMonth();}}if((this.month||this.month===0)&&!this.day){this.day=1;}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}if(w&&this.timezone&&this.day&&this.days){this.day=this.days;}return(w)?s.add(this):s.set(this);}};var l=f.Parsing.Operators,d=f.Grammar,o=f.Translator,b;d.datePartDelimiter=l.rtoken(/^([\s\-\.\,\/\x27]+)/);d.timePartDelimiter=l.stoken(":");d.whiteSpace=l.rtoken(/^\s*/);d.generalDelimiter=l.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};d.ctoken=function(u){var t=a[u];if(!t){var v=h.regexPatterns;var s=u.split(/\s+/),q=[];for(var g=0;g<s.length;g++){q.push(l.replace(l.rtoken(v[s[g]]),s[g]));}t=a[u]=l.any.apply(null,q);}return t;};d.ctoken2=function(g){return l.rtoken(h.regexPatterns[g]);};d.h=l.cache(l.process(l.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour));d.hh=l.cache(l.process(l.rtoken(/^(0[0-9]|1[0-2])/),o.hour));d.H=l.cache(l.process(l.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour));d.HH=l.cache(l.process(l.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour));d.m=l.cache(l.process(l.rtoken(/^([0-5][0-9]|[0-9])/),o.minute));d.mm=l.cache(l.process(l.rtoken(/^[0-5][0-9]/),o.minute));d.s=l.cache(l.process(l.rtoken(/^([0-5][0-9]|[0-9])/),o.second));d.ss=l.cache(l.process(l.rtoken(/^[0-5][0-9]/),o.second));d.hms=l.cache(l.sequence([d.H,d.m,d.s],d.timePartDelimiter));d.t=l.cache(l.process(d.ctoken2("shortMeridian"),o.meridian));d.tt=l.cache(l.process(d.ctoken2("longMeridian"),o.meridian));d.z=l.cache(l.process(l.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone));d.zz=l.cache(l.process(l.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone));d.zzz=l.cache(l.process(d.ctoken2("timezone"),o.timezone));d.timeSuffix=l.each(l.ignore(d.whiteSpace),l.set([d.tt,d.zzz]));d.time=l.each(l.optional(l.ignore(l.stoken("T"))),d.hms,d.timeSuffix);d.d=l.cache(l.process(l.each(l.rtoken(/^([0-2]\d|3[0-1]|\d)/),l.optional(d.ctoken2("ordinalSuffix"))),o.day));d.dd=l.cache(l.process(l.each(l.rtoken(/^([0-2]\d|3[0-1])/),l.optional(d.ctoken2("ordinalSuffix"))),o.day));d.ddd=d.dddd=l.cache(l.process(d.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g;};}));d.M=l.cache(l.process(l.rtoken(/^(1[0-2]|0\d|\d)/),o.month));d.MM=l.cache(l.process(l.rtoken(/^(1[0-2]|0\d)/),o.month));d.MMM=d.MMMM=l.cache(l.process(d.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month));d.y=l.cache(l.process(l.rtoken(/^(\d\d?)/),o.year));d.yy=l.cache(l.process(l.rtoken(/^(\d\d)/),o.year));d.yyy=l.cache(l.process(l.rtoken(/^(\d\d?\d?\d?)/),o.year));d.yyyy=l.cache(l.process(l.rtoken(/^(\d\d\d\d)/),o.year));b=function(){return l.each(l.any.apply(null,arguments),l.not(d.ctoken2("timeContext")));};d.day=b(d.d,d.dd);d.month=b(d.M,d.MMM);d.year=b(d.yyyy,d.yy);d.orientation=l.process(d.ctoken("past future"),function(g){return function(){this.orient=g;};});d.operator=l.process(d.ctoken("add subtract"),function(g){return function(){this.operator=g;};});d.rday=l.process(d.ctoken("yesterday tomorrow today now"),o.rday);d.unit=l.process(d.ctoken("second minute hour day week month year"),function(g){return function(){this.unit=g;};});d.value=l.process(l.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"");};});d.expression=l.set([d.rday,d.operator,d.value,d.unit,d.orientation,d.ddd,d.MMM]);b=function(){return l.set(arguments,d.datePartDelimiter);};d.mdy=b(d.ddd,d.month,d.day,d.year);d.ymd=b(d.ddd,d.year,d.month,d.day);d.dmy=b(d.ddd,d.day,d.month,d.year);d.date=function(g){return((d[h.dateElementOrder]||d.mdy).call(this,g));};d.format=l.process(l.many(l.any(l.process(l.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(d[g]){return d[g];}else{throw f.Parsing.Exception(g);}}),l.process(l.rtoken(/^[^dMyhHmstz]+/),function(g){return l.ignore(l.stoken(g));}))),function(g){return l.process(l.each.apply(null,g),o.finishExact);});var m={};var c=function(g){return m[g]=(m[g]||d.format(g)[0]);};d.formats=function(q){if(q instanceof Array){var s=[];for(var g=0;g<q.length;g++){s.push(c(q[g]));}return l.any.apply(null,s);}else{return c(q);}};d._formats=d.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);d._start=l.process(l.set([d.date,d.time,d.expression],d.generalDelimiter,d.whiteSpace),o.finish);d.start=function(g){try{var q=d._formats.call({},g);if(q[1].length===0){return q;}}catch(t){}return d._start.call({},g);};f._parse=f.parse;f.parse=function(g){var q=null;if(!g){return null;}if(g instanceof Date){return g;}try{q=f.Grammar.start.call({},g.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(t){return null;}return((q[1].length===0)?q[0]:null);};f.getParseFunction=function(q){var g=f.Grammar.formats(q);return function(t){var u=null;try{u=g.call({},t);}catch(v){return null;}return((u[1].length===0)?u[0]:null);};};f.parseExact=function(g,q){return f.getParseFunction(q)(g);};}());(function(){var c=Date,b=c.prototype,d=c.CultureInfo,a=[],f=function(h,g){if(!g){g=2;}return("000"+h).slice(g*-1);};c.normalizeFormat=function(h){a=[];var g=new Date().$format(h);return a.join("");};c.strftime=function(h,g){return new Date(g*1000).$format(h);};c.strtotime=function(g){var h=c.parse(g);h.addMinutes(h.getTimezoneOffset()*-1);return Math.round(c.UTC(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds())/1000);};b.$format=function(k){var g=this,l,h=function(m){a.push(m);return g.toString(m);};return k?k.replace(/(%|\\)?.|%%/g,function(o){if(o.charAt(0)==="\\"||o.substring(0,2)==="%%"){return o.replace("\\","").replace("%%","%");}switch(o){case"d":case"%d":return h("dd");case"D":case"%a":return h("ddd");case"j":case"%e":return h("d");case"l":case"%A":return h("dddd");case"N":case"%u":return g.getDay()+1;case"S":return h("S");case"w":case"%w":return g.getDay();case"z":return g.getOrdinalNumber();case"%j":return f(g.getOrdinalNumber(),3);case"%U":var s=g.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),q=g.clone().addDays(1).moveToDayOfWeek(0,-1);return(q<s)?"00":f((q.getOrdinalNumber()-s.getOrdinalNumber())/7+1);case"W":case"%V":return g.getISOWeek();case"%W":return f(g.getWeek());case"F":case"%B":return h("MMMM");case"m":case"%m":return h("MM");case"M":case"%b":case"%h":return h("MMM");case"n":return h("M");case"t":return c.getDaysInMonth(g.getFullYear(),g.getMonth());case"L":return(c.isLeapYear(g.getFullYear()))?1:0;case"o":case"%G":return g.setWeek(g.getISOWeek()).toString("yyyy");case"%g":return g.$format("%G").slice(-2);case"Y":case"%Y":return h("yyyy");case"y":case"%y":return h("yy");case"a":case"%p":return h("tt").toLowerCase();case"A":return h("tt").toUpperCase();case"g":case"%I":return h("h");case"G":return h("H");case"h":return h("hh");case"H":case"%H":return h("HH");case"i":case"%M":return h("mm");case"s":case"%S":return h("ss");case"u":return f(g.getMilliseconds(),3);case"I":return(g.isDaylightSavingTime())?1:0;case"O":return g.getUTCOffset();case"P":l=g.getUTCOffset();return l.substring(0,l.length-2)+":"+l.substring(l.length-2);case"e":case"T":case"%z":case"%Z":return g.getTimezone();case"Z":return g.getTimezoneOffset()*-60;case"B":var p=new Date();return Math.floor(((p.getHours()*3600)+(p.getMinutes()*60)+p.getSeconds()+(p.getTimezoneOffset()+60)*60)/86.4);case"c":return g.toISOString().replace(/\"/g,"");case"U":return c.strtotime("now");case"%c":return h("d")+" "+h("t");case"%C":return Math.floor(g.getFullYear()/100+1);case"%D":return h("MM/dd/yy");case"%n":return"\\n";case"%t":return"\\t";case"%r":return h("hh:mm tt");case"%R":return h("H:mm");case"%T":return h("H:mm:ss");case"%x":return h("d");case"%X":return h("t");default:a.push(o);return o;}}):this._toString();};if(!b.format){b.format=b.$format;}}());var QRCode=function(){var s=function(H,x){var P=236;var O=17;var B=H;var D=l[x];var z=null;var K=0;var v=null;var F=new Array();var L={};var I=function(R,Q){K=B*4+17;z=function(V){var T=new Array(V);for(var U=0;U<V;U+=1){T[U]=new Array(V);for(var S=0;S<V;S+=1){T[U][S]=null;}}return T;}(K);E(0,0);E(K-7,0);E(0,K-7);G();w();N(R,Q);if(B>=7){C(R);}if(v==null){v=y(B,D,F);}J(v,Q);};var E=function(S,Q){for(var R=-1;R<=7;R+=1){if(S+R<=-1||K<=S+R){continue;}for(var T=-1;T<=7;T+=1){if(Q+T<=-1||K<=Q+T){continue;}if((0<=R&&R<=6&&(T==0||T==6))||(0<=T&&T<=6&&(R==0||R==6))||(2<=R&&R<=4&&2<=T&&T<=4)){z[S+R][Q+T]=true;}else{z[S+R][Q+T]=false;}}}};var A=function(){var T=0;var S=0;for(var R=0;R<8;R+=1){I(true,R);var Q=k.getLostPoint(L);if(R==0||T>Q){T=Q;S=R;}}return S;};var w=function(){for(var Q=8;Q<K-8;Q+=1){if(z[Q][6]!=null){continue;}z[Q][6]=(Q%2==0);}for(var R=8;R<K-8;R+=1){if(z[6][R]!=null){continue;}z[6][R]=(R%2==0);}};var G=function(){var W=k.getPatternPosition(B);for(var S=0;S<W.length;S+=1){for(var R=0;R<W.length;R+=1){var U=W[S];var Q=W[R];if(z[U][Q]!=null){continue;}for(var T=-2;T<=2;T+=1){for(var V=-2;V<=2;V+=1){if(T==-2||T==2||V==-2||V==2||(T==0&&V==0)){z[U+T][Q+V]=true;}else{z[U+T][Q+V]=false;}}}}}};var C=function(T){var S=k.getBCHTypeNumber(B);for(var R=0;R<18;R+=1){var Q=(!T&&((S>>R)&1)==1);z[Math.floor(R/3)][R%3+K-8-3]=Q;}for(var R=0;R<18;R+=1){var Q=(!T&&((S>>R)&1)==1);z[R%3+K-8-3][Math.floor(R/3)]=Q;}};var N=function(V,U){var T=(D<<3)|U;var S=k.getBCHTypeInfo(T);for(var R=0;R<15;R+=1){var Q=(!V&&((S>>R)&1)==1);if(R<6){z[R][8]=Q;}else{if(R<8){z[R+1][8]=Q;}else{z[K-15+R][8]=Q;}}}for(var R=0;R<15;R+=1){var Q=(!V&&((S>>R)&1)==1);if(R<8){z[8][K-R-1]=Q;}else{if(R<9){z[8][15-R-1+1]=Q;}else{z[8][15-R-1]=Q;}}}z[K-8][8]=(!V);};var J=function(V,R){var T=-1;var aa=K-1;var U=7;var Q=0;var Y=k.getMaskFunction(R);for(var S=K-1;S>0;S-=2){if(S==6){S-=1;}while(true){for(var X=0;X<2;X+=1){if(z[aa][S-X]==null){var W=false;if(Q<V.length){W=(((V[Q]>>>U)&1)==1);}var Z=Y(aa,S-X);if(Z){W=!W;}z[aa][S-X]=W;U-=1;if(U==-1){Q+=1;U=7;}}}aa+=T;if(aa<0||K<=aa){aa-=T;T=-T;break;}}}};var M=function(aa,ad){var S=0;var ag=0;var ae=0;var R=new Array(ad.length);var V=new Array(ad.length);for(var Y=0;Y<ad.length;Y+=1){var Z=ad[Y].dataCount;var Q=ad[Y].totalCount-Z;ag=Math.max(ag,Z);ae=Math.max(ae,Q);R[Y]=new Array(Z);for(var ab=0;ab<R[Y].length;ab+=1){R[Y][ab]=255&aa.getBuffer()[ab+S];}S+=Z;var W=k.getErrorCorrectPolynomial(Q);var af=f(R[Y],W.getLength()-1);var T=af.mod(W);V[Y]=new Array(W.getLength()-1);for(var ab=0;ab<V[Y].length;ab+=1){var X=ab+T.getLength()-V[Y].length;V[Y][ab]=(X>=0)?T.get(X):0;}}var ac=0;for(var ab=0;ab<ad.length;ab+=1){ac+=ad[ab].totalCount;}var ah=new Array(ac);var U=0;for(var ab=0;ab<ag;ab+=1){for(var Y=0;Y<ad.length;Y+=1){if(ab<R[Y].length){ah[U]=R[Y][ab];U+=1;}}}for(var ab=0;ab<ae;ab+=1){for(var Y=0;Y<ad.length;Y+=1){if(ab<V[Y].length){ah[U]=V[Y][ab];U+=1;}}}return ah;};var y=function(X,W,T){var R=h.getRSBlocks(X,W);var Q=g();for(var S=0;S<T.length;S+=1){var V=T[S];Q.put(V.getMode(),4);Q.put(V.getLength(),k.getLengthInBits(V.getMode(),X));V.write(Q);}var U=0;for(var S=0;S<R.length;S+=1){U+=R[S].dataCount;}if(Q.getLengthInBits()>U*8){throw new Error("code length overflow. ("+Q.getLengthInBits()+">"+U*8+")");}if(Q.getLengthInBits()+4<=U*8){Q.put(0,4);}while(Q.getLengthInBits()%8!=0){Q.putBit(false);}while(true){if(Q.getLengthInBits()>=U*8){break;}Q.put(P,8);if(Q.getLengthInBits()>=U*8){break;}Q.put(O,8);}return M(Q,R);};L.addData=function(R){var Q=q(R);F.push(Q);v=null;};L.isDark=function(R,Q){if(R<0||K<=R||Q<0||K<=Q){throw new Error(R+","+Q);}return z[R][Q];};L.getModuleCount=function(){return K;};L.make=function(){I(false,A());};L.createTableTag=function(U,S){U=U||2;S=(typeof S=="undefined")?U*4:S;var Q="";Q+='<table style="';Q+=" border-width: 0px; border-style: none;";Q+=" border-collapse: collapse;";Q+=" padding: 0px; margin: "+S+"px;";Q+='">';Q+="<tbody>";for(var R=0;R<L.getModuleCount();R+=1){Q+="<tr>";for(var T=0;T<L.getModuleCount();T+=1){Q+='<td style="';Q+=" border-width: 0px; border-style: none;";Q+=" border-collapse: collapse;";Q+=" padding: 0px; margin: 0px;";Q+=" width: "+U+"px;";Q+=" height: "+U+"px;";Q+=" background-color: ";Q+=L.isDark(R,T)?"#000000":"#ffffff";Q+=";";Q+='"/>';}Q+="</tr>";}Q+="</tbody>";Q+="</table>";return Q;};L.createImgTag=function(U,T){U=U||2;T=(typeof T=="undefined")?U*4:T;var S=L.getModuleCount()*U+T*2;var R=T;var Q=S-T;return d(S,S,function(V,Y){if(R<=V&&V<Q&&R<=Y&&Y<Q){var X=Math.floor((V-R)/U);var W=Math.floor((Y-R)/U);return L.isDark(W,X)?0:1;}else{return 1;}});};L.createBase64=function(U,T){U=U||2;T=(typeof T=="undefined")?U*4:T;var S=L.getModuleCount()*U+T*2;var R=T;var Q=S-T;return[t(S,S,function(V,Y){if(R<=V&&V<Q&&R<=Y&&Y<Q){var X=Math.floor((V-R)/U);var W=Math.floor((Y-R)/U);return L.isDark(W,X)?0:1;}else{return 1;}}),S];};return L;};s.stringToBytes=function(x){var v=new Array();for(var w=0;w<x.length;w+=1){var y=x.charCodeAt(w);v.push(y&255);}return v;};s.createStringToBytes=function(y,x){var w=function(){var I=a(y);var z=function(){var J=I.read();if(J==-1){throw new Error();}return J;};var B=0;var C={};while(true){var G=I.read();if(G==-1){break;}var F=z();var E=z();var D=z();var A=String.fromCharCode((G<<8)|F);var H=(E<<8)|D;C[A]=H;B+=1;}if(B!=x){throw new Error(B+" != "+x);}return C;}();var v="?".charCodeAt(0);return function(C){var A=new Array();for(var B=0;B<C.length;B+=1){var D=C.charCodeAt(B);if(D<128){A.push(D);}else{var z=w[C.charAt(B)];if(typeof z=="number"){if((z&255)==z){A.push(z);}else{A.push(z>>>8);A.push(z&255);}}else{A.push(v);}}}return A;};};var m={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var l={L:1,M:0,Q:3,H:2};var c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var k=function(){var y=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var v=(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0);var A=(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0);var x=(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1);var z={};var w=function(B){var C=0;while(B!=0){C+=1;B>>>=1;}return C;};z.getBCHTypeInfo=function(B){var C=B<<10;while(w(C)-w(v)>=0){C^=(v<<(w(C)-w(v)));}return((B<<10)|C)^x;};z.getBCHTypeNumber=function(B){var C=B<<12;while(w(C)-w(A)>=0){C^=(A<<(w(C)-w(A)));}return(B<<12)|C;};z.getPatternPosition=function(B){return y[B-1];};z.getMaskFunction=function(B){switch(B){case c.PATTERN000:return function(D,C){return(D+C)%2==0;};case c.PATTERN001:return function(D,C){return D%2==0;};case c.PATTERN010:return function(D,C){return C%3==0;};case c.PATTERN011:return function(D,C){return(D+C)%3==0;};case c.PATTERN100:return function(D,C){return(Math.floor(D/2)+Math.floor(C/3))%2==0;};case c.PATTERN101:return function(D,C){return(D*C)%2+(D*C)%3==0;};case c.PATTERN110:return function(D,C){return((D*C)%2+(D*C)%3)%2==0;};case c.PATTERN111:return function(D,C){return((D*C)%3+(D+C)%2)%2==0;};default:throw new Error("bad maskPattern:"+B);}};z.getErrorCorrectPolynomial=function(C){var B=f([1],0);for(var D=0;D<C;D+=1){B=B.multiply(f([1,u.gexp(D)],0));}return B;};z.getLengthInBits=function(C,B){if(1<=B&&B<10){switch(C){case m.MODE_NUMBER:return 10;case m.MODE_ALPHA_NUM:return 9;case m.MODE_8BIT_BYTE:return 8;case m.MODE_KANJI:return 8;default:throw new Error("mode:"+C);}}else{if(B<27){switch(C){case m.MODE_NUMBER:return 12;case m.MODE_ALPHA_NUM:return 11;case m.MODE_8BIT_BYTE:return 16;case m.MODE_KANJI:return 10;default:throw new Error("mode:"+C);}}else{if(B<41){switch(C){case m.MODE_NUMBER:return 14;case m.MODE_ALPHA_NUM:return 13;case m.MODE_8BIT_BYTE:return 16;case m.MODE_KANJI:return 12;default:throw new Error("mode:"+C);}}else{throw new Error("type:"+B);}}}};z.getLostPoint=function(K){var D=K.getModuleCount();var E=0;for(var M=0;M<D;M+=1){for(var C=0;C<D;C+=1){var J=0;var I=K.isDark(M,C);for(var B=-1;B<=1;B+=1){if(M+B<0||D<=M+B){continue;}for(var H=-1;H<=1;H+=1){if(C+H<0||D<=C+H){continue;}if(B==0&&H==0){continue;}if(I==K.isDark(M+B,C+H)){J+=1;}}}if(J>5){E+=(3+J-5);}}}for(var M=0;M<D-1;M+=1){for(var C=0;C<D-1;C+=1){var F=0;if(K.isDark(M,C)){F+=1;}if(K.isDark(M+1,C)){F+=1;}if(K.isDark(M,C+1)){F+=1;}if(K.isDark(M+1,C+1)){F+=1;}if(F==0||F==4){E+=3;}}}for(var M=0;M<D;M+=1){for(var C=0;C<D-6;C+=1){if(K.isDark(M,C)&&!K.isDark(M,C+1)&&K.isDark(M,C+2)&&K.isDark(M,C+3)&&K.isDark(M,C+4)&&!K.isDark(M,C+5)&&K.isDark(M,C+6)){E+=40;}}}for(var C=0;C<D;C+=1){for(var M=0;M<D-6;M+=1){if(K.isDark(M,C)&&!K.isDark(M+1,C)&&K.isDark(M+2,C)&&K.isDark(M+3,C)&&K.isDark(M+4,C)&&!K.isDark(M+5,C)&&K.isDark(M+6,C)){E+=40;}}}var L=0;for(var C=0;C<D;C+=1){for(var M=0;M<D;M+=1){if(K.isDark(M,C)){L+=1;}}}var G=Math.abs(100*L/D/D-50)/5;E+=G*10;return E;};return z;}();var u=function(){var v=new Array(256);var x=new Array(256);for(var w=0;w<8;w+=1){v[w]=1<<w;}for(var w=8;w<256;w+=1){v[w]=v[w-4]^v[w-5]^v[w-6]^v[w-8];}for(var w=0;w<255;w+=1){x[v[w]]=w;}var y={};y.glog=function(z){if(z<1){throw new Error("glog("+z+")");}return x[z];};y.gexp=function(z){while(z<0){z+=255;}while(z>=256){z-=255;}return v[z];};return y;}();function f(w,v){if(typeof w.length=="undefined"){throw new Error(w.length+"/"+v);}var x=function(){var B=0;while(B<w.length&&w[B]==0){B+=1;}var A=new Array(w.length-B+v);for(var z=0;z<w.length-B;z+=1){A[z]=w[z+B];}return A;}();var y={};y.get=function(z){return x[z];};y.getLength=function(){return x.length;};y.multiply=function(C){var A=new Array(y.getLength()+C.getLength()-1);for(var B=0;B<y.getLength();B+=1){for(var z=0;z<C.getLength();z+=1){A[B+z]^=u.gexp(u.glog(y.get(B))+u.glog(C.get(z)));}}return f(A,0);};y.mod=function(C){if(y.getLength()-C.getLength()<0){return y;}var B=u.glog(y.get(0))-u.glog(C.get(0));var z=new Array(y.getLength());for(var A=0;A<y.getLength();A+=1){z[A]=y.get(A);}for(var A=0;A<C.getLength();A+=1){z[A]^=u.gexp(u.glog(C.get(A))+B);}return f(z,0).mod(C);};return y;}var h=function(){var w=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];var v=function(z,A){var B={};B.totalCount=z;B.dataCount=A;return B;};var y={};var x=function(A,z){switch(z){case l.L:return w[(A-1)*4+0];case l.M:return w[(A-1)*4+1];case l.Q:return w[(A-1)*4+2];case l.H:return w[(A-1)*4+3];default:return undefined;}};y.getRSBlocks=function(B,H){var A=x(B,H);if(typeof A=="undefined"){throw new Error("bad rs block @ typeNumber:"+B+"/errorCorrectLevel:"+H);}var z=A.length/3;var F=new Array();for(var D=0;D<z;D+=1){var E=A[D*3+0];var I=A[D*3+1];var G=A[D*3+2];for(var C=0;C<E;C+=1){F.push(v(I,G));}}return F;};return y;}();var g=function(){var v=new Array();var x=0;var w={};w.getBuffer=function(){return v;};w.get=function(y){var z=Math.floor(y/8);return((v[z]>>>(7-y%8))&1)==1;};w.put=function(y,A){for(var z=0;z<A;z+=1){w.putBit(((y>>>(A-z-1))&1)==1);}};w.getLengthInBits=function(){return x;};w.putBit=function(z){var y=Math.floor(x/8);if(v.length<=y){v.push(0);}if(z){v[y]|=(128>>>(x%8));}x+=1;};return w;};var q=function(y){var x=m.MODE_8BIT_BYTE;var v=y;var w=s.stringToBytes(y);var z={};z.getMode=function(){return x;};z.getLength=function(A){return w.length;};z.write=function(A){for(var B=0;B<w.length;B+=1){A.put(w[B],8);}};return z;};var o=function(){var v=new Array();var w={};w.writeByte=function(x){v.push(x&255);};w.writeShort=function(x){w.writeByte(x);w.writeByte(x>>>8);};w.writeBytes=function(y,A,x){A=A||0;x=x||y.length;for(var z=0;z<x;z+=1){w.writeByte(y[z+A]);}};w.writeString=function(y){for(var x=0;x<y.length;x+=1){w.writeByte(y.charCodeAt(x));}};w.toByteArray=function(){return v;};w.toString=function(){var y="";y+="[";for(var x=0;x<v.length;x+=1){if(x>0){y+=",";}y+=v[x];}y+="]";return y;};return w;};var b=function(){var w=0;var z=0;var B=0;var v="";var A={};var y=function(C){v+=String.fromCharCode(x(C&63));};var x=function(C){if(C<0){}else{if(C<26){return 65+C;}else{if(C<52){return 97+(C-26);}else{if(C<62){return 48+(C-52);}else{if(C==62){return 43;}else{if(C==63){return 47;}}}}}}throw new Error("n:"+C);};A.writeByte=function(C){w=(w<<8)|(C&255);z+=8;B+=1;while(z>=6){y(w>>>(z-6));z-=6;}};A.flush=function(){if(z>0){y(w<<(6-z));w=0;z=0;}if(B%3!=0){var D=3-B%3;for(var C=0;C<D;C+=1){v+="=";}}};A.toString=function(){return v;};return A;};var a=function(z){var B=z;var v=0;var w=0;var x=0;var A={};A.read=function(){while(x<8){if(v>=B.length){if(x==0){return -1;}throw new Error("unexpected end of file./"+x);}var D=B.charAt(v);v+=1;if(D=="="){x=0;return -1;}else{if(D.match(/^\s$/)){continue;}}w=(w<<6)|y(D.charCodeAt(0));x+=6;}var C=(w>>>(x-8))&255;x-=8;return C;};var y=function(C){if(65<=C&&C<=90){return C-65;}else{if(97<=C&&C<=122){return C-97+26;}else{if(48<=C&&C<=57){return C-48+52;}else{if(C==43){return 62;}else{if(C==47){return 63;}else{throw new Error("c:"+C);}}}}}};return A;};var p=function(v,C){var y=v;var z=C;var w=new Array(v*C);var A={};A.setPixel=function(E,G,F){w[G*y+E]=F;};A.write=function(F){F.writeString("GIF87a");F.writeShort(y);F.writeShort(z);F.writeByte(128);F.writeByte(0);F.writeByte(0);F.writeByte(0);F.writeByte(0);F.writeByte(0);F.writeByte(255);F.writeByte(255);F.writeByte(255);F.writeString(",");F.writeShort(0);F.writeShort(0);F.writeShort(y);F.writeShort(z);F.writeByte(0);var G=2;var E=x(G);F.writeByte(G);var H=0;while(E.length-H>255){F.writeByte(255);F.writeBytes(E,H,255);H+=255;}F.writeByte(E.length-H);F.writeBytes(E,H,E.length-H);F.writeByte(0);F.writeString(";");};var B=function(F){var G=F;var H=0;var E=0;var I={};I.write=function(K,J){if((K>>>J)!=0){throw new Error("length over");}while(H+J>=8){G.writeByte(255&((K<<H)|E));J-=(8-H);K>>>=(8-H);E=0;H=0;}E=(K<<H)|E;H=H+J;};I.flush=function(){if(H>0){G.writeByte(E);}};return I;};var x=function(F){var J=1<<F;var H=(1<<F)+1;var L=F+1;var N=D();for(var I=0;I<J;I+=1){N.add(String.fromCharCode(I));}N.add(String.fromCharCode(J));N.add(String.fromCharCode(H));var G=o();var E=B(G);E.write(J,L);var M=0;var O=String.fromCharCode(w[M]);M+=1;while(M<w.length){var K=String.fromCharCode(w[M]);M+=1;if(N.contains(O+K)){O=O+K;}else{E.write(N.indexOf(O),L);if(N.size()<4095){if(N.size()==(1<<L)){L+=1;}N.add(O+K);}O=K;}}E.write(N.indexOf(O),L);E.write(H,L);E.flush();return G.toByteArray();};var D=function(){var F={};var E=0;var G={};G.add=function(H){if(G.contains(H)){throw new Error("dup key:"+H);}F[H]=E;E+=1;};G.size=function(){return E;};G.indexOf=function(H){return F[H];};G.contains=function(H){return typeof F[H]!="undefined";};return G;};return A;};var t=function(v,G,C){var A=p(v,G);for(var D=0;D<G;D+=1){for(var F=0;F<v;F+=1){A.setPixel(F,D,C(F,D));}}var E=o();A.write(E);var B=b();var H=E.toByteArray();for(var z=0;z<H.length;z+=1){B.writeByte(H[z]);}B.flush();var w="";w+="data:image/gif;base64,";w+=B;return w;};var d=function(y,v,A,z){var w=t(y,v,A);var x="";x+="<img";x+='\u0020src="';x+=w;x+='"';x+='\u0020width="';x+=y;x+='"';x+='\u0020height="';x+=v;x+='"';if(z){x+='\u0020alt="';x+=z;x+='"';}x+="/>";return x;};return s;}();var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var a=0;a<4096;a++){this.encLookup[a]=this.chars[a>>6]+this.chars[a&63];}},Encode:function(g){var a=g.length;var h="";var d=0;while(a>2){n=(g[d]<<16)|(g[d+1]<<8)|g[d+2];h+=this.encLookup[n>>12]+this.encLookup[n&4095];a-=3;d+=3;}if(a>0){var f=(g[d]&252)>>2;var c=(g[d]&3)<<4;if(a>1){c|=(g[++d]&240)>>4;}h+=this.chars[f];h+=this.chars[c];if(a==2){var b=(g[d++]&15)<<2;b|=(g[d]&192)>>6;h+=this.chars[b];}if(a==1){h+="=";}h+="=";}return h;}};FastBase64.Init();var RIFFWAVE=function(d){d=d||{};this.data=[];this.wav=[];this.dataURI="";this.header=Ext.apply({chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8000,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0},d.header);function b(f){return[f&255,(f>>8)&255,(f>>16)&255,(f>>24)&255];}function a(f){return[f&255,(f>>8)&255];}function c(l){var k=[];var g=0;var f=l.length;for(var h=0;h<f;h++){k[g++]=l[h]&255;k[g++]=(l[h]>>8)&255;}return k;}this.Make=function(f){if((d.data instanceof Array)||((typeof(Int16Array)!="undefined")&&(d.data instanceof Int16Array))){this.data=f;this.header.blockAlign=(this.header.numChannels*this.header.bitsPerSample)>>3;this.header.byteRate=this.header.blockAlign*this.header.sampleRate;this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3);this.header.chunkSize=36+this.header.subChunk2Size;}console.debug("RIFFWAVE - "+Ext.encode(this.header));};this.MakeData=function(f){this.wav=this.header.chunkId.concat(b(this.header.chunkSize),this.header.format,this.header.subChunk1Id,b(this.header.subChunk1Size),a(this.header.audioFormat),a(this.header.numChannels),b(this.header.sampleRate),b(this.header.byteRate),a(this.header.blockAlign),a(this.header.bitsPerSample),this.header.subChunk2Id,b(this.header.subChunk2Size),(this.header.bitsPerSample==16)?c(this.data):this.data);this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav);};if((d.data instanceof Array)||((typeof(Int16Array)!="undefined")&&(d.data instanceof Int16Array))){this.Make(d.data);if(!d.headerOnly){this.MakeData(d.data);}}};__initFb__=function(c,a){var b=c;Ext.define(a+".fb",{mixins:["Ext.mixin.Observable"],singleton:true,appId:null,fbTimeout:2*60*1000,titleMsg:"Facebook Connect",fbScope:["email","user_birthday","publish_stream","read_friendlists","publish_actions"],fbConnectErrorMsg:"Cannot retrive Facebook account information!",fbConnectRequestMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",fbConnectReconnectMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",connectingToFBMsg:function(){return("Connecting to Facebook ..."+b.constants.addCRLF()+"(Tap to Close)");},loggingOutOfFBMsg:"Logging out of Facebook ...",fbConnectFailMsg:"Error Connecting to Facebook.",fbPermissionFailMsg:"Failed to get the required access permission.",friendsRetrieveErrorMsg:"You cannot retrieve your Friends List from Facebook. Login and Try Again.",initialize:function(){var f=this,d=b.db.getLocalDB();f.appId=(b.constants.debugMode())?477780595628080:197968780267830;console.log("FacebookConnect::initialize");if(!b.fn.isNative()&&d.fbLoginInProgress){f.cb=Ext.decode(d.fbLoginInProgress);f.setLoadMask();f.detectAccessToken(location.href);}},currentLocation:function(){return(((b.constants.debugMode())?b.constants.serverHost():"http://m.getkickbak.com")+"/");},redirectUrl:function(){var d=Ext.Object.toQueryString({redirect_uri:this.currentLocation(),client_id:this.appId,state:appName,response_type:"token",scope:this.fbScope.toString()});if(!Ext.os.is("Android")&&!Ext.os.is("iOS")&&/Windows|Linux|MacOS/.test(Ext.os.name)){return"https://www.facebook.com/dialog/oauth?"+d;}else{return"https://m.facebook.com/dialog/oauth?"+d;}},createFbResponse:function(d){var f=d.birthday.split("/");f=f[2]+"-"+f[0]+"-"+f[1];var g={name:d.name,email:d.email,facebook_id:d.id,facebook_uid:d.username,gender:(d.gender=="male")?"m":"f",birthday:f,photoURL:this.getFbProfilePhoto(d.id),accessToken:b.db.getLocalDB()["access_token"]};console.debug("FbResponse - ["+Ext.encode(g)+"]");return g;},facebook_onLogin:function(m,k,l){var h=this,f=true,d=b.db.getLocalDB();var g=(d.currFbId>0)&&(parseInt(d.fbExpiresIn)>0);console.debug("connected = "+g+"\nfbExpiresIn = "+parseInt(d.fbExpiresIn)+"\ntime-30min = "+((new Date().addMinutes(-30)).getTime())+"\n");if(g){var f=(!g||(g&&(parseInt(d.fbExpiresIn)<=(new Date().addMinutes(-30)).getTime())));if(!l||(l&&!f)){console.debug("Facebook already connected. Bypass relogin process");h.fireEvent("connected",d.fbResponse,null);return;}}h.cb={supress:m,messsage:k,iter:0};h.setLoadMask();b.db.setLocalDBAttrib("fbLoginInProgress",Ext.encode(h.cb));h.inAppBrowserCallback();},setLoadMask:function(){var d=this;Ext.Viewport.setMasked(null);Ext.Viewport.setMasked({xtype:"loadmask",message:d.connectingToFBMsg(),listeners:{tap:function(){b.db.removeLocalDBAttrib("fbLoginInProgress");d.facebook_loginCallback(null);Ext.Viewport.setMasked(null);}}});},detectAccessToken:function(f){var g=this,d=b.db.getLocalDB();if(f.indexOf("access_token=")>=1){var h=Ext.Object.fromQueryString(f.split("#")[1]);if(h.state==appName){g.code=d.access_token=h.access_token;d.fbExpiresIn=(new Date(Date.now()+Number(h.expires_in))).getTime();b.db.setLocalDB(d);if(!b.fn.isNative()){var k=function(){b.db.removeLocalDBAttrib("fbLoginInProgress");_application.getController("client.Viewport").redirectTo("signup");};b.fb.on("connected",k);b.fb.on("unauthorized",k);b.fb.on("exception",k);g.accessTokenCallback();}}else{console.error("CSRF Forgery detected! Ignore Request");}}},accessTokenCallback:function(){var d=this;Ext.Ajax.request({async:true,disableCaching:false,url:"https://graph.facebook.com/me?access_token="+b.db.getLocalDB()["access_token"],callback:function(h,l,f){if(l||(f.status==200)){try{var g=Ext.decode(f.responseText);g.status="connected";d.facebook_loginCallback(g);}catch(k){}}else{console.debug("Error Logging into Facebook\nReturn "+Ext.encode(f));d.facebook_loginCallback(null);}}});delete d.code;},inAppBrowserCallback:function(){var f=this;if(b.fn.isNative()){var d=window.open(f.redirectUrl(),"_blank","location=no,toolbar=no,closebuttoncaption=Cancel");f.fbLoginTimeout=setTimeout(function(){f.fireEvent("loginStatus");f.fireEvent("exception",{type:"timeout",msg:"The request to Facebook timed out."},null);b.db.removeLocalDBAttrib("fbLoginInProgress");d.close();f.facebook_loginCallback(null);},f.fbTimeout);d.addEventListener("loadstart",function(g){if(g.url.match(f.currentLocation())){f.detectAccessToken(g.url);Ext.defer(function(){d.close();},500);}});d.addEventListener("loadstop",function(g){});d.addEventListener("exit",function(g){clearTimeout(f.fbLoginTimeout);delete f.fbLoginTimeout;b.db.removeLocalDBAttrib("fbLoginInProgress");if(f.code){Ext.defer(function(){f.accessTokenCallback();},100);}else{f.facebook_loginCallback(null);}});}else{Ext.defer(function(){location.href=f.redirectUrl();},1*1000);}},facebook_loginCallback:function(f){var g=this,h=null;if(!f||f.cancelled||f.error||(f.status!="connected")){console.debug("FacebookConnect.login:failedWithError:"+((f)?f.message:"None"));if(!g.cb||!g.cb.supress){Ext.device.Notification.show({title:g.titleMsg,message:g.fbConnectErrorMsg,buttons:["Try Again","Continue"],callback:function(k){if(k.toLowerCase()=="try again"){Ext.defer(function(){g.facebook_onLogin(false,g.cb.message);},1,g);delete g.cb;}else{Ext.Viewport.setMasked(null);delete g.cb;g.fireEvent("unauthorized",null,null);}}});}else{if(f&&f.cancelled){Ext.Viewport.setMasked(null);delete g.cb;g.fireEvent("exception",{type:"timeout",msg:"The request to Facebook cancelled."},null);}}}else{console.log("Retrieving Facebook profile information ...");var d=f;Ext.defer(function(){if(!d.error||(d.id&&(d.id>0))){var k=b.db.getLocalDB(),l=d.id;console.debug("Session ID["+l+"]");k.currFbId=l;k.fbAccountId=d.email;h=k.fbResponse=g.createFbResponse(d);b.db.setLocalDB(k);k=b.db.getLocalDB();console.debug("You`ve logged into Facebook! \nEmail("+h.email+")\nauth_code("+k.auth_code+")\nID("+l+")\n");delete g.cb;g._fb_connect();if(k.auth_code){console.log("Updating Facebook Login Info ...");Account.setUpdateFbLoginUrl();Account.load(0,{jsonData:{},params:{user:Ext.encode(k.fbResponse)},callback:function(m,o){if(o.wasSuccessful()){Ext.Viewport.setMasked(null);b.db.setLocalDBAttrib("enableFB",true);}g.fireEvent("connected",h,o);}});}else{b.db.setLocalDBAttrib("enableFB",true);g.fireEvent("connected",h,null);delete g.cb;}}else{Ext.Viewport.setMasked(null);g.fireEvent("unauthorized",null,null);g.facebook_onLogout(null,false);delete g.cb;}},0.5*1000,g);}delete g.fbLoginTimeout;},facebook_onLogout:function(d,g){var h=this;d=d||Ext.emptyFn;console.debug("facebook_onLogout");try{var f=b.db.getLocalDB();f.currFbId=0;delete f.fbAccountId;delete f.fbResponse;delete f.fbAuthCode;delete f.fbExpiresIn;b.db.setLocalDB(f);d();}catch(k){d();}},getFbProfilePhoto:function(d){return"http://graph.facebook.com/"+d+"/picture?type=square";},createFBReminderMsg:function(){var d=this;if(!d.actions){d.actions=(Ext.create("Ext.Sheet",{bottom:0,left:0,top:0,right:0,padding:"1.0",hideOnMaskTap:false,defaultUnit:"em",layout:{type:"vbox",pack:"middle"},defaults:{xtype:"container",defaultUnit:"em"},items:[{width:"100%",flex:1,style:"text-align:center;display:inline-table;color:white;font-size:1.1em;",html:d.fbConnectRequestMsg+'<img width="160" style="margin:0.7em 0;" src="resources/themes/images/v1/facebook_icon.png"/>'},{docked:"bottom",defaults:{xtype:"button",defaultUnit:"em",scope:d},padding:"0 1.0 1.0 1.0",items:[{margin:"0 0 0.5 0",text:"Sign In",ui:"action",handler:function(){d.actions.hide();var f=_application.getController("client.MainPage");f.fireEvent("facebookTap",null,null,null,null,function(){Ext.device.Notification.show({title:d.titleMsg,message:d.fbPermissionFailMsg,buttons:["Dismiss"],callback:function(h){f._loggingIn=false;var g=_application.getController("client.Viewport");var k=g.getViewport();var l=k.getActiveItem();if(!l){Ext.Viewport.setMasked(null);g.resetView();g.redirectTo("login");}else{}}});});d.actions.destroy();delete d.actions;}},{margin:"0.5 0 0.5 0",text:"Skip",ui:"cancel",handler:function(){d.actions.hide();_application.getController("client.Viewport").redirectTo("checkin");d.actions.destroy();delete d.actions;}},{margin:"0.5 0 0 0",text:"Don't Remind Me Again",handler:function(){d.actions.hide();b.db.setLocalDBAttrib("disableFBReminderMsg",true);_application.getController("client.Viewport").redirectTo("checkin");d.actions.destroy();delete d.actions;}}]}]}));Ext.Viewport.add(d.actions);d.actions.show();}else{}},postCommon:function(f,k,h,d){var g=this;k=Ext.apply(k,{access_token:b.db.getLocalDB()["fbResponse"]["accessToken"]});Ext.Ajax.request({async:true,disableCaching:false,method:"POST",params:k,url:"https://graph.facebook.com"+f,callback:function(p,m,l){try{var o=Ext.decode(l.responseText);if(m||(l.status==200)){h(o);}else{if(l.status==400){g.facebook_onLogout();Ext.defer(g.facebook_onLogin,1,g,[false,null,true]);}else{console.debug("Error Logging into Facebook\nStatus code "+Ext.encode(l.responseText));d(o);}}}catch(q){d(o);}}});},uploadPhoto:function(g,f,d){this.postCommon("/me/photos",g,f,d);},share:function(g,f,d){this.postCommon("/me/feed",g,f,d);},_fb_connect:function(){},_fb_disconnect:function(){this._fb_connect();}});b.fb.initialize();};if(typeof(Genesis)=="undefined"){Genesis={};}window.plugins=window.plugins||{};function printStackTrace(b){var c=(b&&b.e)?b.e:null;var f=b?!!b.guess:true;var d=new printStackTrace.implementation();var a=d.run(c);return(f)?d.guessFunctions(a):a;}printStackTrace.implementation=Ext.emptyFn;printStackTrace.implementation.prototype={run:function(b){var c=this._mode||this.mode();if(c==="other"){return this.other(arguments.callee).join("\n");}else{b=b||(function(){try{(0)();}catch(d){return d;}})();var a=(this[c](b));return(typeof(a)=="object")?a.join("\n"):a;}},mode:function(){try{(0)();}catch(a){if(a.arguments){return(this._mode="chrome");}else{if(a.stack){return(this._mode="firefox");}else{if(window.opera&&!("stacktrace" in a)){return(this._mode="opera");}}}}return(this._mode="other");},chrome:function(a){if(a.stack){return a.stack.replace(/^.*?\n/,"").replace(/^.*?\n/,"").replace(/^.*?\n/,"").replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split("\n");}else{return"";}},firefox:function(a){if(a.stack){return a.stack.replace(/^.*?\n/,"").replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n");}else{return"";}},opera:function(h){if(h.message){var c=h.message.split("\n"),b="{anonymous}",g=/Line\s+(\d+).*?script\s+(http\S+)(?:.*?in\s+function\s+(\S+))?/i,f,d,a;for(f=4,d=0,a=c.length;f<a;f+=2){if(g.test(c[f])){c[d++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:b+"()@"+RegExp.$2+":"+RegExp.$1)+" -- "+c[f+1].replace(/^\s+/,"");}}c.splice(d,c.length-d);return c;}else{return"";}},other:function(k){var b="{anonymous}",h=/function\s*([\w\-$]+)?\s*\(/i,a=[],d=0,f,c;var g=10;while(k&&a.length<g){f=h.test(k.toString())?RegExp.$1||b:b;c=Array.prototype.slice.call(k["arguments"]);a[d++]=f+"("+printStackTrace.implementation.prototype.stringifyArguments(c)+")";if(k===k.caller&&window.opera){break;}k=k.caller;}return a;},stringifyArguments:function(b){for(var c=0;c<b.length;++c){var a=b[c];if(a===undefined){b[c]="undefined";}else{if(a===null){b[c]="null";}else{if(a.constructor){if(a.constructor===Array){if(a.length<3){b[c]="["+this.stringifyArguments(a)+"]";}else{b[c]="["+this.stringifyArguments(Array.prototype.slice.call(a,0,1))+"..."+this.stringifyArguments(Array.prototype.slice.call(a,-1))+"]";}}else{if(a.constructor===Object){b[c]="#object";}else{if(a.constructor===Function){b[c]="#function";}else{if(a.constructor===String){b[c]='"'+a+'"';}}}}}}}}return((typeof(b)=="object")?b.join(","):b);},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(!b){return;}b.open("GET",a,false);b.setRequestHeader("User-Agent","XMLHTTP/1.0");b.send("");return b.responseText;},createXMLHTTPObject:function(){var c,a=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Msxml3.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];for(var b=0;b<a.length;b++){try{c=a[b]();this.createXMLHTTPObject=a[b];return c;}catch(d){}}},getSource:function(a){if(!(a in this.sourceCache)){this.sourceCache[a]=this.ajax(a).split("\n");}return this.sourceCache[a];},guessFunctions:function(b){if(b.length){for(var d=0;d<b.length;++d){var k=/{anonymous}\(.*\)@(\w+:\/\/([-\w\.]+)+(:\d+)?[^:]+):(\d+):?(\d+)?/;var h=b[d],a=k.exec(h);if(a){var c=a[1],g=a[4];if(c&&g){var f=this.guessFunctionName(c,g);b[d]=h.replace("{anonymous}",f);}}}return(typeof(b)=="object")?b.join("\n"):b;}return b;},guessFunctionName:function(a,c){try{return this.guessFunctionNameFromLines(c,this.getSource(a));}catch(b){return"getSource failed with url: "+a+", exception: "+b.toString();}},guessFunctionNameFromLines:function(k,g){var c=/function ([^(]*)\(([^)]*)\)/;var h=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(function|eval|new Function)/;var b="",d=10;for(var f=0;f<d;++f){b=g[k-f]+b;if(b!==undefined){var a=h.exec(b);if(a&&a[1]){return a[1];}else{a=c.exec(b);if(a&&a[1]){return a[1];}}}}return"(?)";}};var Url={encode:function(a){return escape(this._utf8_encode(a));},decode:function(a){return this._utf8_decode(unescape(a));},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var f=0;f<b.length;f++){var d=b.charCodeAt(f);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;},_utf8_decode:function(a){var d="";var g=0;var k=0,h=0,f=0,b=0;while(g<a.length){k=a.charCodeAt(g);if(k<128){d+=String.fromCharCode(k);g++;}else{if((k>191)&&(k<224)){f=a.charCodeAt(g+1);d+=String.fromCharCode(((k&31)<<6)|(f&63));g+=2;}else{f=a.charCodeAt(g+1);b=a.charCodeAt(g+2);d+=String.fromCharCode(((k&15)<<12)|((f&63)<<6)|(b&63));g+=3;}}}return d;}};Genesis.constants={isNfcEnabled:false,userName:"Eric Chan",appMimeType:"application/kickbak",clientVersion:"2.2.0",serverVersion:"2.2.0",themeName:"v1",_thumbnailAttribPrefix:"",_iconPath:"",_iconSize:0,fontSize:0,defaultIconSize:function(){return this._iconSize;},site:"www.getkickbak.com",photoSite:"https://s3.amazonaws.com/files.getkickbak.com",resourceSite:"resources/",debugVPrivKey:"oSG8JclEHvRy5ngkb6ehWbb6TTRFXd8t",debugRPrivKey:"oSG8JclEHvRy5ngkb6ehWbb6TTRFXd8t",debugVenuePrivKey:"Debug Venue",privKey:null,lastLocalID:null,numSamples:-1,conseqMissThreshold:-1,sigOverlapRatio:-1,s_vol:-1,r_vol:-1,device:null,minDistance:0.3*1000,createAccountMsg:"Create user account using Facebook Profile information",spinnerDom:'<div class="x-loading-spinner-outer"><div class="x-loading-spinner"><span class="x-loading-top"></span><span class="x-loading-right"></span><span class="x-loading-bottom"></span><span class="x-loading-left"></span></div></div>',debugMode:function(){return debugMode;},serverHost:function(){return serverHost;},init:function(){var b=this,a=1.14;if(merchantMode){a=(Ext.os.is("Tablet")?1.5*a:1*a);}b.fontSize=Math.floor(((16*a*Math.min(1,window.devicePixelRatio))||(16*a)));if(Ext.os.is("iOS")){b._iconPath="/ios";b._thumbnailAttribPrefix="thumbnail_ios_";b._iconSize=57*(merchantMode?1.5:1);if(debugMode){b.pushNotifAppName="KickBak Dev Latest";b.pushNotifAppId="93D8A-5BE72";}else{b.pushNotifAppName="KickBak Production";b.pushNotifAppId="4fef6fb0691c12.54726991";}b.pushNotifType=1;console.log("Running a iOS System");}else{if(Ext.os.is("Android")||Ext.os.is("Desktop")){if((window.devicePixelRatio==1)||(window.devicePixelRatio>=2)){b._iconSize=48*((merchantMode&&(Ext.os.is("Tablet")))?3:1.2);b._iconPath="/android/mxhdpi";b._thumbnailAttribPrefix="thumbnail_android_mxhdpi_";}else{b._iconSize=36*((merchantMode&&(Ext.os.is("Tablet")))?3:1.5);b._iconPath="/android/lhdpi";b._thumbnailAttribPrefix="thumbnail_android_lhdpi_";}if(debugMode){b.pushNotifAppName="KickBak Dev Latest";b.pushNotifAppId="93D8A-5BE72";b.pushNotifProjectId="658015469194";}else{b.pushNotifAppName="KickBak Production";b.pushNotifAppId="4fef6fb0691c12.54726991";b.pushNotifProjectId="733275653511";}b.pushNotifType=3;console.log("Running a Android or Desktop System");}else{b._iconPath="/ios";b._thumbnailAttribPrefix="thumbnail_ios_";b._iconSize=57;console.log("Running a Unknown System");}}b._iconPath=b.themeName+b._iconPath;console.debug("IconSize = "+b._iconSize+"px");},addCRLF:function(){return("<br/>");},getIconPath:function(b,a,c){return((!c)?"resources/themes/images/"+this._iconPath:this.photoSite+"/"+this._iconPath+"/icons")+"/"+b+"/"+a+".png";}};Genesis.fn={isNative:function(){return phoneGapAvailable;},filesadded:{},checkloadjscssfile:function(b,d,a){var f=Url.decode(b);var c=this.filesadded[f];if(Ext.isEmpty(c)){c=this.filesadded[f]=[];if(Ext.isFunction(a)){c[0]=false;c[1]=[a];this.loadjscssfile(b,d,false);}else{c[0]=true;this.loadjscssfile(b,d,true);}}else{if(c[0]==true){if(Ext.isFunction(a)){a(true);}}else{if(Ext.isFunction(a)){if(c[1].indexOf(a)<0){c[1].push(a);}}else{console.debug("Do nothing for file["+b+"]");}}}},createjscssfile:function(a,b){var c;a=Url.decode(a);if(b=="js"){c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);}else{if(b=="css"){c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",a);}}return c;},loadjscsstext:function(b,c,f,a){var d;b=Url.decode(b);if(c=="js"){d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("id",b);d.innerHTML=f;}else{if(c=="css"){log("Loading cssfile ("+b+")");d=document.createElement("style");d.setAttribute("id",b);d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");if(typeof(d.textContent)!="undefined"){d.textContent=f;}else{d.styleSheet.cssText=f;}}}d.onerror=d.onload=d.onreadystatechange=function(){var g=this.readyState;if(g&&(g!="complete"&&g!="loaded")){return;}if(a){a();}};if((typeof d)!=undefined){document.getElementsByTagName("head")[0].appendChild(d);}return d;},loadjscssfileCallBackFunc:function(a,g,c){c=Url.decode(c);if(g<100){try{var d=(document.styleSheets[a].href)?document.styleSheets[a].href.replace(location.origin,""):"";console.debug("url = "+d);if(d!=c){for(var f=0;f<document.styleSheets.length;f++){d=(document.styleSheets[f].href)?document.styleSheets[f].href.replace(location.origin,""):"";console.debug("url = "+d);if(d==c){a=f;break;}}}if(document.styleSheets[a].cssRules){this.cssOnReadyStateChange(c);}else{if(document.styleSheets[a].rules&&document.styleSheets[a].rules.length){this.cssOnReadyStateChange(c);return;}g++;Ext.defer(this.loadjscssfileCallBackFunc,100,this,[a,g,c]);if((g/25>0)&&(g%25==0)){console.debug("IE Exception : Loading ["+c+"] index["+a+"] try("+g+")");}}}catch(h){g++;if((g/25>0)&&(g%25==0)){console.debug(printStackTrace({e:h}));console.debug("FF Exception : Loading ["+c+"] index["+a+"] try("+g+")");}Ext.defer(this.loadjscssfileCallBackFunc,100,this,[a,g,c]);}}else{console.debug("Cannot load ["+c+"], index=["+a+"]");this.cssOnReadyStateChange(c);}},scriptOnError:function(a){this.scriptOnReadyStateChange.call(this,a,true);},scriptOnReadyStateChange:function(f,c){var g=this.src;g=g.replace(location.origin,"");if(!c){var b=this.readyState;if(b&&(b!="complete"&&b!="loaded")){return;}else{if(!b){}}}else{console.debug("Error Loading JS file["+g+"]");}var d=0,a=Genesis.fn.filesadded[g];if(a){a[0]=true;for(;d<a[1].length;d++){a[1][d](!c);}if(Genesis.fn.filesadded[g]){delete Genesis.fn.filesadded[g][1];}}else{console.debug("Cannot find callback on JS file["+g+"] index["+d+"]");}},cssOnReadyStateChange:function(b){var a=Genesis.fn.filesadded[b];if(a){a[0]=true;var c=0;try{for(;c<a[1].length;c++){a[1][c](true);}}catch(d){console.debug(printStackTrace({e:d}));console.debug("Error Calling callback on CSS file["+b+"] index["+c+"]\nStack: ===========\n"+d.stack);}if(Genesis.fn.filesadded[b]){delete Genesis.fn.filesadded[b][1];}}else{console.debug("Cannot find callback on CSSS file["+b+"] index["+c+"]");}},loadjscssfile:function(b,d,c){var f;b=Url.decode(b);if(d=="js"){f=document.createElement("script");f.setAttribute("type","text/javascript");if(!c){f.onerror=this.scriptOnError;f.onload=f.onreadystatechange=this.scriptOnReadyStateChange;}f.setAttribute("src",b);document.getElementsByTagName("head")[0].appendChild(f);}else{if(d=="css"){var a=document.styleSheets.length;f=document.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.setAttribute("media","screen");f.setAttribute("href",b);document.getElementsByTagName("head")[0].appendChild(f);if(!c){Ext.defer(this.loadjscssfileCallBackFunc,50,this,[a,0,b]);}}}},removejscssfile:function(b,d){b=Url.decode(b);var k=escape(b);var g=(d=="js")?"script":(d=="css")?"link":"none";var f=(d=="js")?"src":(d=="css")?"href":"none";var h=document.getElementsByTagName(g);for(var c=h.length;c>=0;c--){if(h[c]){var a=escape(h[c].getAttribute(f));if(a!=null&&((a==k)||(a.search(k)!=-1))){h[c].disabled=true;h[c].parentNode.removeChild(h[c]);delete Genesis.fn.filesadded[b];}}}},findjscssfile:function(b,d){b=Url.decode(b);var g=(d=="js")?"script":(d=="css")?"style":"none";var f=(d=="js")?"id":(d=="css")?"id":"none";var h=document.getElementsByTagName(g);for(var c=h.length;c>=0;c--){if(h[c]){var a=h[c].getAttribute(f);if(a!=null&&a.search(b)!=-1){return h[c];}}}return null;},removejscsstext:function(b,d){b=Url.decode(b);var g=(d=="js")?"script":(d=="css")?"style":"none";var f=(d=="js")?"id":(d=="css")?"id":"none";var h=document.getElementsByTagName(g);for(var c=h.length;c>=0;c--){if(h[c]){var a=h[c].getAttribute(f);if(a!=null&&((a==b)||(a.search(b)!=-1))){h[c].parentNode.removeChild(h[c]);delete Genesis.fn.filesadded[b];}}}},replacejscssfile:function(g,k,c){k=Url.decode(k);g=Url.decode(g);var f=(c=="js")?"script":(c=="css")?"link":"none";var d=(c=="js")?"src":(c=="css")?"href":"none";var h=document.getElementsByTagName(f);for(var b=h.length;b>=0;b--){if(h[b]&&h[b].getAttribute(d)!=null&&h[b].getAttribute(d).indexOf(g)!=-1){var a=this.createjscssfile(k,c);h[b].parentNode.replaceChild(a,h[b]);delete this.filesadded[g];this.filesadded[k]=[true];}}},systemTime:(new Date()).getTime(),clientTime:(new Date()).getTime(),weekday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],convertDateCommon:function(d,a,k){var f;var h=a||this.dateFormat;if(!(d instanceof Date)){if(typeof(JSON)!="undefined"){}if(Ext.isEmpty(d)){f=new Date();}else{if(h){f=Date.parse(d,h);if(Ext.isEmpty(f)){f=new Date(d).format(h);}return[f,f];}f=new Date(d);if(f.toString()=="Invalid Date"){f=Date.parse(d,h);}}}else{f=d;}if(!k){var c=new Date().getTime();var g=this.currentDateTime(c);var b=(g-f.getTime())/1000;if(b>-10){if((b)<2){return[b,"a sec ago"];}if((b)<60){return[b,parseInt(b)+" secs ago"];}b=b/60;if((b)<2){return[b,"a min ago"];}if((b)<60){return[b,parseInt(b)+" mins ago"];}b=b/60;if((b)<2){return[f,"1 hr ago"];}if((b)<24){return[f,parseInt(b)+" hrs ago"];}b=b/24;if(((b)<2)&&((new Date().getDay()-f.getDay())==1)){return[f,"Yesterday at "+f.format("g:i A")];}if((b)<7){return[f,this.weekday[f.getDay()]+" at "+f.format("g:i A")];}b=b/7;if(((b)<2)&&(b%7==0)){return[f,"1 wk ago"];}if(((b)<5)&&(b%7==0)){return[f,parseInt(b)+" wks ago"];}if(b<5){return[f,parseInt(b*7)+" days ago"];}return[f,null];}else{}}return[f,-1];},convertDateFullTime:function(a){return a.format("D, M d, Y \\a\\t g:i A");},convertDateReminder:function(c){var b=new Date();var a=b.getDate();var h=b.getMonth();var f=b.getFullYear();var d=c.getDate();var k=c.getMonth();var g=c.getFullYear();if(a==d&&h==k&&f==g){return"Today "+c.format("g:i A");}return c.format("D g:i A");},convertDate:function(b,a){var c=this.convertDateCommon(b,a);if(c[1]!=-1){return(c[1]==null)?c[0].format("M d, Y"):c[1];}else{return c[0].format("D, M d, Y \\a\\t g:i A");}},convertDateNoTime:function(a){var b=this.convertDateCommon(a,null,true);if(b[1]!=-1){return(b[1]==null)?b[0].format("D, M d, Y"):b[1];}else{return b[0].format("D, M d, Y");}},convertDateNoTimeNoWeek:function(a){var b=this.convertDateCommon(a,null,true);if(b[1]!=-1){b=(b[1]==null)?b[0].format("M d, Y"):b[1];}else{b=b[0].format("M d, Y");}return b;},convertDateInMins:function(a){var b=this.convertDateCommon(a,null,true);if(b[1]!=-1){return(b[1]==null)?b[0].format("h:ia T"):b[1];}else{return b[0].format("h:ia T");}},currentDateTime:function(a){return(this.systemTime-this.clientTime)+a;},addUnit:function(a){return a+"px";},_removeUnitRegex:/(\d+)px/,removeUnit:function(a){return a.match(this._removeUnitRegex)[1];},calcPx:function(a,b){return Math.floor(((a/b)*Genesis.constants.fontSize));},calcPxEm:function(b,a,c){return((b/Genesis.constants.fontSize/c)+(a/c));},failFileHandler:function(b){var c={};c[FileError.NOT_FOUND_ERR]="File not found";c[FileError.SECURITY_ERR]="Security error";c[FileError.ABORT_ERR]="Abort error";c[FileError.NOT_READABLE_ERR]="Not readable";c[FileError.ENCODING_ERR]="Encoding error";c[FileError.NO_MODIFICATION_ALLOWED_ERR]="No mobification allowed";c[FileError.INVALID_STATE_ERR]="Invalid state";c[FileError.SYFNTAX_ERR]="Syntax error";c[FileError.INVALID_MODIFICATION_ERR]="Invalid modification";c[FileError.QUOTA_EXCEEDED_ERR]="Quota exceeded";c[FileError.TYPE_MISMATCH_ERR]="Type mismatch";c[FileError.PATH_EXISTS_ERR]="Path does not exist";var a={};a[FileTransferError.FILE_NOT_FOUND_ERR]="File not found";a[FileTransferError.INVALID_URL_ERR]="Invalid URL Error";a[FileTransferError.CONNECTION_ERR]="Connection Error";console.log("File Error - ["+c[b.code]+"]");},readFile:function(f,g){var d=this,c;var a=function(h){d.failFileHandler(h);g(null);};if(Genesis.fn.isNative()){var b=function(h){h.file(function(l){var k=new FileReader();k.onloadend=function(m){g(m.target.result);};k.readAsText(c);},a);};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(h){if(Ext.os.is("iOS")){c=(h.root.fullPath+"/../"+appName+".app/www/")+f;}else{if(Ext.os.is("Android")){c=(appName+"/")+f;}}console.debug("Reading from File - ["+c+"]");h.root.getFile(c,null,b,a);},a);}else{g(true);}},writeFile:function(g,f,h){var d=this,b;var a=function(k){d.failFileHandler(k);h(false);};if(Genesis.fn.isNative()){var c=function(k){console.debug("Created File - ["+b+"]");k.createWriter(function(l){console.debug("Writing to File - ["+b+"], Content - ["+f+"]");l.onwrite=function(m){console.debug("Write End Callback - ["+Ext.encode(m)+"]");h(true);};l.write(f);},a);};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(k){if(Ext.os.is("iOS")){b=(k.root.fullPath+"/../"+appName+".app/www/")+g;}else{if(Ext.os.is("Android")){b=(appName+"/")+g;}}k.root.getDirectory(b.substring(0,b.lastIndexOf("/")),{create:true});k.root.getFile(b,{create:true,exclusive:false},c,a);},a);}else{h();}},getPrivKey:function(c,b){var a=this;b=b||Ext.emptyFn;if(!a.privKey){if(!Genesis.fn.isNative()){a.privKey={v1:a.debugVPrivKey,r1:a.debugRPrivKey,venue:a.debugVenuePrivKey,venueId:1};}else{a.privKey={};}}return((c)?a.privKey[c]:a.privKey);},printProximityConfig:function(){var a=Genesis.constants;console.debug("ProximityID Configuration");console.debug("=========================");console.debug("\nSignal Samples["+a.numSamples+"]\nMissed Threshold["+a.conseqMissThreshold+"]\nSignal Overlap Ratio["+a.sigOverlapRatio+"]\nDefault Volume["+a.s_vol+"%]\n");},processSendLocalID:function(b,d){var c,a=null;if(b.freqs){Genesis.constants.lastLocalID=b.freqs;}c=Genesis.constants.lastLocalID;if(c){a="LocalID=["+c[0]+", "+c[1]+", "+c[2]+"]";}return({message:a,localID:c,cancelFn:d});},processRecvLocalID:function(b){var a=null;var c=b.freqs;if(c){a="LocalID=["+c[0]+", "+c[1]+", "+c[2]+"]";}else{console.log("Already listening for LocalID ...");}return({message:a,localID:c});}};Genesis.db={_localDB:null,getLocalStorage:function(){return window.localStorage;},getRedeemIndexDB:function(a){try{if(!this.kickbakRedeemIndex){this.kickbakRedeemIndex=Ext.decode(this.getLocalStorage().getItem("kickbakRedeemIndex"));}}catch(b){}if(!this.kickbakRedeemIndex){this.kickbakRedeemIndex={};}return(a?this.kickbakRedeemIndex[a]:this.kickbakRedeemIndex);},addRedeemIndexDB:function(b,c){var a=this.getRedeemIndexDB();a[b]=c;console.debug("Add to KickBak Redeem DB["+b+"]");},setRedeemIndexDB:function(a){},getRedeemSortedDB:function(a){try{if(!this.kickbakRedeemSorted){this.kickbakRedeemSorted=Ext.decode(this.getLocalStorage().getItem("kickbakRedeemSorted"));}}catch(b){}if(!this.kickbakRedeemSorted){this.kickbakRedeemSorted=[];}return(a?this.kickbakRedeemSorted[a]:this.kickbakRedeemSorted);},getLocalDB:function(){return(!this._localDB)?(this._localDB=Ext.decode(this.getLocalStorage().getItem("kickbak")||"{}")):this._localDB;},setLocalDB:function(a){this._localDB=a;this.getLocalStorage().setItem("kickbak",Ext.encode(a));},setLocalDBAttrib:function(c,b){var a=this.getLocalDB();a[c]=b;this.setLocalDB(a);},removeLocalDBAttrib:function(b){var a=this.getLocalDB();if(typeof(a[b])!="undefined"){delete a[b];this.setLocalDB(a);}},openDatabase:function(){return openDatabase("KickBak","1.0","KickBakDB",2*1024*1024);},getReferralDBAttrib:function(b){var a=this.getReferralDB();return a[b];},addReferralDBAttrib:function(b,c){var a=this.getReferralDB();a[b]=c;this.setReferralDB(a);},removeReferralDBAttrib:function(b){var a=this.getReferralDB();delete a[b];this.setReferralDB(a);},getReferralDB:function(){var a=this.getLocalStorage().getItem("kickbakreferral");return((a)?Ext.decode(a):{});},setReferralDB:function(a){console.debug("Setting Referral DB["+Ext.encode(a)+"]");this.getLocalStorage().setItem("kickbakreferral",Ext.encode(a));},resetStorage:function(){if(Genesis.fn.isNative()&&Genesis.fb){Genesis.fb.facebook_onLogout(null,false);}var a=this.getLocalStorage(),c;for(c in a){if((c=="kickbak")||(c=="kickbakreferral")){try{a.removeItem(c);}catch(d){}console.debug("Removed ["+c+"]");}}this._localDB=null;Ext.data.Model.cache={};var b="DROP TABLE Customer";var a=Genesis.db.openDatabase();a.transaction(function(f){f.executeSql(b,[],function(h,g){console.debug("ResetStorage --- Successfully drop KickBak-Customers Table");},function(g,h){console.debug("Failed to drop KickBak-Customers Table : "+h.message);});});}};Ext.merge(Array.prototype,{binarySearch:function(g,b){var a=0,f=this.length-1,c,d;while(a<=f){c=Math.floor((a+f)/2);d=b(this[c],g);if(d<0){a=c+1;continue;}if(d>0){f=c-1;continue;}return c;}return null;}});Ext.merge(String.prototype,{hashCode:function(){for(var b=0,c=0,a=this.length;c<a;c++){b=(31*b+this.charCodeAt(c))<<0;}return b;},getFuncBody:function(){var a=this.toString();a=a.replace(/[^{]+\{/,"");a=a.substring(0,a.length-1);a=a.replace(/\n/gi,"");if(!a.match(/\(.*\)/gi)){a+=")";}return a;},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"");},stripScripts:function(){return this.replace(new RegExp("<noscript[^>]*?>([\\S\\s]*?)</noscript>","img"),"").replace(new RegExp("<script[^>]*?>([\\S\\s]*?)<\/script>","img"),"").replace(new RegExp("<link[^>]*?>([\\S\\s]*?)</link>","img"),"").replace(new RegExp("<link[^>]*?>","img"),"").replace(new RegExp("<iframe[^>]*?>([\\S\\s]*?)</iframe>","img"),"").replace(new RegExp("<iframe[^>]*?>","img"),"").replace(new RegExp("<embed[^>]*?>([\\S\\s]*?)</embed>","img"),"").replace(new RegExp("<embed[^>]*?>","img"),"").replace(new RegExp("<object[^>]*?>([\\S\\s]*?)</object>","img"),"").replace(new RegExp("<object[^>]*?>","img"),"").replace(new RegExp("<applet[^>]*?>([\\S\\s]*?)</applet>","img"),"").replace(new RegExp("<applet[^>]*?>","img"),"").replace(new RegExp("<button[^>]*?>([\\S\\s]*?)</button>","img"),"").replace(new RegExp("<button[^>]*?>","img"),"").replace(new RegExp("<input[^>]*?>([\\S\\s]*?)</input>","img"),"").replace(new RegExp("<input[^>]*?>","img"),"").replace(new RegExp("<style[^>]*?>([\\S\\s]*?)</style>","img"),"").replace(new RegExp("<style[^>]*?>","img"),"");},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"");},stripComments:function(){return this.replace(/<!(?:--[\s\S]*?--\s*)?>\s*/g,"");},times:function(c){var b="",a;for(a=0;a<c;a++){b+=this;}return b;},zp:function(a){return("0".times(a-this.length)+this);},capitalize:function(){return this.replace(/\w+/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1);});},uncapitalize:function(){return this.replace(/\w+/g,function(b){return b.charAt(0).toLowerCase()+b.substr(1);});},trim:function(a){if(a=="left"){return this.replace(/^\s*/,"");}if(a=="right"){return this.replace(/\s*$/,"");}if(a=="normalize"){return this.replace(/\s{2,}/g," ").trim();}return this.trim("left").trim("right");},trunc:function(a){return(this.length>(a-4))?this.substring(0,a-4)+" ...":this;},htmlEncode:(function(){var d={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},b=[],c,a;for(c in d){b.push(c);}a=new RegExp("("+b.join("|")+")","g");return function(f){return(!f)?f:String(f).replace(a,function(h,g){return d[g];});};})(),htmlDecode:(function(){var d={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},b=[],c,a;for(c in d){b.push(c);}a=new RegExp("("+b.join("|")+"|&#[0-9]{1,5};)","g");return function(f){return(!f)?f:String(f).replace(a,function(h,g){if(g in d){return d[g];}else{return String.fromCharCode(parseInt(g.substr(2),10));}});};})()});Ext.merge(Math,{radians:function(a){return(a*Math.PI/180);}});(function(a){navigator.notification={alert:function(d,f,h,g){var c=(h||"Alert");var b=(g||"OK");a.exec(f,null,"NotificationPlugin","alert",[d,c,b]);},confirm:function(g,b,l,h){var f=this;var d=(l||"Confirm");var k=(h);var c=(k)?[g,d,k]:[g,d];a.exec(function(m){if(m>10000){f.alertViewId=m;console.debug("Notification confirm callbackId["+f.alertViewId+"]");}else{delete f.alertViewId;b(m);}},null,"NotificationPlugin","confirm",c);},vibrate:function(b){a.exec(null,null,"NotificationPlugin","vibrate",[b]);},beep:function(b){a.exec(null,null,"NotificationPlugin","beep",[b]);},dismiss:function(){var b=this;if(b.alertViewId){a.exec(null,null,"NotificationPlugin","dismiss",[b.alertViewId]);}}};a.addConstructor(function(){});})(window.cordova||window.Cordova||window.PhoneGap);window.plugins=window.plugins||{};if(window.cordova||window.Cordova||window.PhoneGap){(function(a){window.plugins.proximityID={init:function(c,b){a.exec(function(){console.log("ProximityIDPlugin Initialized");},function(d){console.log("Failed to initialize the ProximityIDPlugin! Reason["+d+"]");},"ProximityIDPlugin","init",[c+"",b+""]);},preLoadSend:function(c,b){Ext.defer(function(){a.exec(c,b,"ProximityIDPlugin","preLoadIdentity",[]);},0.25*1000,this);},send:function(c,b){a.exec(c,b,"ProximityIDPlugin","sendIdentity",[]);},scan:function(g,c,f,d,h,b){a.exec(g,c,"ProximityIDPlugin","scanIdentity",[f,d,h,b]);},stop:function(){a.exec(function(){console.log("Stopped ProximityIDPlugin");},function(b){console.log("Failed to stop the ProximityIDPlugin "+b);},"ProximityIDPlugin","stop",[]);},setVolume:function(b){a.exec(Ext.emptyFn,Ext.emptyFn,"ProximityIDPlugin","setVolume",[b]);}};a.addConstructor(function(){});})(window.cordova||window.Cordova||window.PhoneGap);}else{_filesAssetCount++;window.plugins.proximityID={loFreq:17000,hiFreq:20000,FREQ_GAP:500,NUM_SIGNALS:3,SHORT_MAX:parseInt(65535/2),sampleRate:44100,duration:1*44100,bufSize:16*1024,bitRate:128,bw:0,sampleConfig:null,freqs:null,context:null,gainNode:null,oscillators:null,audio:null,bytesEncoded:null,unsupportedBrowserMsg:"This browser does not support our Proximity Scanning feature",convertToMono:function(a){var b=this;var c=b.context.createChannelSplitter(2);var d=b.context.createChannelMerger(2);a.connect(c);c.connect(d,0,0);c.connect(d,0,1);return d;},init:function(b,a){var c=this;c.bw=(c.hiFreq-c.loFreq)/c.NUM_SIGNALS;Genesis.constants.s_vol=b*100*((Ext.os.is("Android"))?0.8:1);Genesis.constants.r_vol=a*100*0.8;console.debug("Initialized Proximity API");},generateData:function(h,f){var d=this,b,k,a=Genesis.constants.s_vol/100,g=new Float32Array(f);k=[];for(b=0;b<d.freqs.length;b++){k[b]=2*Math.PI*d.freqs[b]/d.sampleRate;}for(b=0;b<f;b++){for(j=0;j<d.freqs.length;j++){g[b]+=Math.sin(k[j]*(b+h));}g[b]=a*g[b]/d.freqs.length;}return g;},createAudioLoop:function(){var a=this;a.audio.addEventListener("ended",function(){this.currentTime=0;this.play();},false);},webAudioFnHandler:function(a){var c=this;if(!c.context){c.context=new webkitAudioContext();c.gainNode=c.context.createGainNode();c.gainNode.connect(c.context.destination);}c.getFreqs();c.gainNode.gain.value=a;c.oscillators=[];for(i=0;i<c.freqs.length;i++){var b=c.oscillators[i]=c.context.createOscillator();b.type=0;b.frequency.value=c.freqs[i];b.connect(c.gainNode);}console.debug("OSC Gain : "+a);},audioFnHandler:function(c,a,h){var f=this,g=c.data=[];f.getFreqs();for(var d=0;d<(f.duration);d++){var k=0;for(var b=0;b<f.freqs.length;b++){k+=Math.sin(2*Math.PI*f.freqs[b]*d/f.sampleRate);}k/=f.freqs.length;k=Math.round(a*((f.SHORT_MAX+1)+(k*f.SHORT_MAX)));g[d]=k;}f.audio=new Audio(new RIFFWAVE(c).dataURI);f.createAudioLoop();console.debug("WAV Gain : "+a);h();},mp3WorkerFnHandler:function(a){switch(a.data.cmd){case"init":me._duration=me.duration;me.bytesEncoded=Math.min(me._duration,me.bufSize);delete me.sampleConfig.data;_codec.postMessage({cmd:"encode",buf:me.generateData(0,me.bytesEncoded)});break;case"data":if(!me.sampleConfig.data){me.sampleConfig.data=String.fromCharCode.apply(null,a.data.buf);}else{me.sampleConfig.data+=String.fromCharCode.apply(null,a.data.buf);}me._duration-=me.bytesEncoded;if(me._duration>0){me.bytesEncoded=Math.min(me._duration,me.bufSize);_codec.postMessage({cmd:"encode",buf:me.generateData(me.duration-me._duration,me.bytesEncoded)});}else{_codec.postMessage({cmd:"finish"});}break;case"end":me.sampleConfig.data+=String.fromCharCode.apply(null,a.data.buf);me.sampleConfig.data="data:audio/mpeg;base64,"+base64.encode(me.sampleConfig.data);me.audio=new Audio(me.sampleConfig.data);me.createAudioLoop();console.debug("MP3 Gain : "+Genesis.constants.s_vol/100);me.sampleConfig.callback();delete me.sampleConfig;}},mp3FnHandler:function(b,a,d){var c=this;if(!_codec.onmessage||(_codec.onmessage==Ext.emptyFn)){_codec.onmessage=Ext.bind(c.mp3WorkerFnHandler,c);}c.getFreqs();b.callback=d;c.sampleConfig=b;_codec.postMessage({cmd:"init",config:{samplerate:c.sampleRate,bitrate:c.bitRate,mode:3,channels:1}});},getFreqs:function(){var c=this,a,b;do{a=false;for(b=0;b<c.NUM_SIGNALS-1;b++){c.freqs[b]=parseInt(Math.random()*c.bw)+parseInt(b*c.bw)+parseInt(c.loFreq);}b=c.NUM_SIGNALS-1;c.freqs[b]=parseInt(Math.random()/2*c.bw)+parseInt(b*c.bw)+parseInt(c.loFreq);for(b=0;b<(c.NUM_SIGNALS-1);b++){if((c.freqs[b]+c.FREQ_GAP)>c.freqs[b+1]){a=true;break;}}}while(a);},preLoadSend:function(f,a){var d=this,c={header:{sampleRate:d.sampleRate,numChannels:1,bitsPerSample:16},data:[]};var b=Genesis.constants.s_vol/100;d.freqs=[];if(typeof(webkitAudioContext)!="undefined"){d.webAudioFnHandler(b);f();}else{if(!_codec){d.duration=1*44100;Ext.defer(d.audioFnHandler,0.25*1000,d,[c,b,f]);}else{d.duration=1*44100;Ext.defer(d.mp3FnHandler,0.25*1000,d,[c,b,f]);}}},send:function(d,a){var c=this;if(c.oscillators){for(var b=0;b<c.freqs.length;b++){c.oscillators[b].noteOn&&c.oscillators[b].noteOn(0);}d({freqs:c.freqs});}else{if(c.audio){c.audio.play();d({freqs:c.freqs});}else{a();}}},scan:function(win,fail,samples,missedThreshold,magThreshold,overlapRatio){var me=this,context=me.context;if(!me.context){context=me.context=new webkitAudioContext();}if(!me.javascriptNode){me.javascriptNode=context.createJavaScriptNode(me.bufSize,1,1);me.javascriptNode.onaudioprocess=function(e){me.fftWorker.postMessage({cmd:"forward",buf:e.inputBuffer.getChannelData(0)});};if(!me.fftWorker){me.fftWorker=new Worker("worker/fft.js");mw.fftWorker.onmessage=function(){var result=eval("["+e.data+"]")[0];switch(result.cmd){case"init":console.debug("Local Identity Detector Initialized");break;case"forward":console.debug("Local Identity Initialized scanner");console.debug("Matching Freqs = ["+result.freqs+"]");break;}};me.fftWorker.postMessage({cmd:"init",config:{sampleRate:me.sampleRate,fftSize:me.bufSize}});}}if(navigator.webkitGetUserMedia){navigator.webkitGetUserMedia({audio:true},function(stream){if(me.microphone){me.microphone.disconnect();}me.microphone=me.convertToMono(context.createMediaStreamSource(stream));me.javascriptNode.connect(me.context.destination);me.microphone.connect(me.javascriptNode);console.debug("Local Identity detecting host ...");});}else{Ext.device.Notification.show({title:"Local Identity",message:me.unsupportedBrowserMsg,buttons:["OK"],callback:Ext.emptyFn});}},stop:function(){var b=this;if(b.oscillators){for(var a=0;a<b.freqs.length;a++){b.oscillators[a].disconnect();}delete b.oscillators;}else{if(b.audio){b.audio.pause();b.audio.currentTime=0;delete b.audio;}}if(b.microphone){b.javascriptNode.disconnect();b.microphone.disconnect();delete b.microphone;}},setVolume:function(a){var b=this;if(b.context){if(b.gainNode){b.gainNode.gain.value=Math.max(0,a/100);}}else{if(b.audio){b.audio.volume=a/100;}}}};}(function(){var a=window.PhoneGap||window.Cordova||window.cordova;BarcodeScanner=function(){};BarcodeScanner.Encode={TEXT_TYPE:"TEXT_TYPE",EMAIL_TYPE:"EMAIL_TYPE",PHONE_TYPE:"PHONE_TYPE",SMS_TYPE:"SMS_TYPE",CONTACT_TYPE:"CONTACT_TYPE",LOCATION_TYPE:"LOCATION_TYPE"};BarcodeScanner.prototype.scan=function(f,b,c){function d(g){g.cancelled=(g.cancelled==1);f.call(null,g);}if(!b){b=function(){};}if(typeof b!="function"){console.log("BarcodeScanner.scan failure: failure parameter not a function");return;}if(typeof f!="function"){b("success callback parameter must be a function");return;}if(null==c){c=[];}a.exec(d,b,"BarCodeScanner","scan",c);};BarcodeScanner.prototype.encode=function(d,f,g,b,c){if(!b){b=function(){};}if(typeof b!="function"){console.log("BarcodeScanner.scan failure: failure parameter not a function");return;}if(typeof g!="function"){b("success callback parameter must be a function");return;}return a.exec(g,b,"BarCodeScanner","encode",[{type:d,data:f,options:c}]);};a.addConstructor(function(){if(!window.plugins){window.plugins={};}window.plugins.barcodeScanner=new BarcodeScanner();});})();(function(){var a=window.PhoneGap||window.Cordova||window.cordova;QRCodeReader=function(){};QRCodeReader.ErrorResultType={Cancelled:0,Failed:1,Success:2};QRCodeReader.prototype.scanType="Default";QRCodeReader.prototype.getCode=function(b,c,d){if(typeof b!="function"){console.log("QRCodeReader Error: successCallback is not a function");return;}if(c&&(typeof c!="function")){console.log("QRCodeReader Error: errorCallback is not a function");return;}console.log("ScanType is ["+this.scanType+"]");switch(this.scanType){case"RL":case"Nigma":a.exec(b,c,"QRCodeReader"+this.scanType,"getCode",[]);break;case"Default":window.plugins.barcodeScanner.scan(b,c,d);break;default:a.exec(b,c,"QRCodeReaderRL","getCode",[]);break;}};QRCodeReader.prototype._didNotFinishWithResult=function(b){console.log("ErrorCode = "+b);pluginResult.message=b;return pluginResult;};QRCodeReader.prototype._didFinishWithResult=function(c){var b={response:decodeURIComponent(c.message.response)};c.message=b;return c;};a.addConstructor(function(){if(!window.plugins){window.plugins={};}window.plugins.qrCodeReader=new QRCodeReader();});})();EmailComposer={ComposeResultType:{Cancelled:0,Saved:1,Sent:2,Failed:3,NotSent:4}};(function(a){function b(){this.resultCallback=null;}b.prototype.showEmailComposer=function(h,d,m,l,k,f,c){var g={};if(m){g.toRecipients=m;}if(l){g.ccRecipients=l;}if(k){g.bccRecipients=k;}if(h){g.subject=h;}if(d){g.body=d;}if(f){g.bIsHTML=f;}if(c){g.images=c;}a.exec(null,null,"EmailComposer","showEmailComposer",[g]);};b.prototype.showEmailComposerWithCB=function(h,g,d,m,l,k,f,c){this.resultCallback=h;this.showEmailComposer.apply(this,[g,d,m,l,k,f,c]);};b.prototype._didFinishWithResult=function(c){this.resultCallback(c);};a.addConstructor(function(){if(!window.plugins){window.plugins={};}window.plugins.emailComposer=new b();});})(window.cordova||window.Cordova||window.PhoneGap);var LowLatencyAudio={preloadFX:function(d,b,c,a){return cordova.exec(c,a,"LowLatencyAudio","preloadFX",[d,b]);},preloadAudio:function(f,c,b,d,a){return cordova.exec(d,a,"LowLatencyAudio","preloadAudio",[f,c,b]);},play:function(c,b,a){return cordova.exec(b,a,"LowLatencyAudio","play",[c]);},stop:function(c,b,a){return cordova.exec(b,a,"LowLatencyAudio","stop",[c]);},loop:function(c,b,a){return cordova.exec(b,a,"LowLatencyAudio","loop",[c]);},unload:function(c,b,a){return cordova.exec(b,a,"LowLatencyAudio","unload",[c]);}};var WebIntent=function(){};WebIntent.ACTION_SEND="android.intent.action.SEND";WebIntent.ACTION_VIEW="android.intent.action.VIEW";WebIntent.EXTRA_TEXT="android.intent.extra.TEXT";WebIntent.EXTRA_SUBJECT="android.intent.extra.SUBJECT";WebIntent.EXTRA_STREAM="android.intent.extra.STREAM";WebIntent.EXTRA_EMAIL="android.intent.extra.EMAIL";WebIntent.prototype.startActivity=function(c,b,a){return cordova.exec(function(d){b(d);},function(d){a(d);},"WebIntent","startActivity",[c]);};WebIntent.prototype.hasExtra=function(c,b,a){return cordova.exec(function(d){b(d);},function(d){a(d);},"WebIntent","hasExtra",[c]);};WebIntent.prototype.getUri=function(b,a){return cordova.exec(function(c){b(c);},function(c){a(c);},"WebIntent","getUri",[]);};WebIntent.prototype.getExtra=function(c,b,a){return cordova.exec(function(d){b(d);},function(d){a(d);},"WebIntent","getExtra",[c]);};WebIntent.prototype.onNewIntent=function(a){return cordova.exec(function(b){a(b);},function(b){},"WebIntent","onNewIntent",[]);};WebIntent.prototype.sendBroadcast=function(c,b,a){return cordova.exec(function(d){b(d);},function(d){a(d);},"WebIntent","sendBroadcast",[c]);};cordova.addConstructor(function(){window.webintent=new WebIntent();window.plugins=window.plugins||{};window.plugins.webintent=window.webintent;});var Twitter=function(){};Twitter.prototype.isTwitterAvailable=function(a){cordova.exec(a,null,"TwitterPlugin","isTwitterAvailable",[]);};Twitter.prototype.isTwitterSetup=function(a){cordova.exec(a,null,"TwitterPlugin","isTwitterSetup",[]);};Twitter.prototype.composeTweet=function(d,b,c,a){a=a||{};a.text=c;cordova.exec(d,b,"TwitterPlugin","composeTweet",[a]);};Twitter.prototype.getPublicTimeline=function(b,a){cordova.exec(b,a,"TwitterPlugin","getPublicTimeline",[]);};Twitter.prototype.getMentions=function(b,a){cordova.exec(b,a,"TwitterPlugin","getMentions",[]);};Twitter.prototype.getTwitterUsername=function(b,a){cordova.exec(b,a,"TwitterPlugin","getTwitterUsername",[]);};Twitter.prototype.getTWRequest=function(c,f,d,b,a){a=a||{};a.url=c;a.params=f;cordova.exec(d,b,"TwitterPlugin","getTWRequest",[a]);};cordova.addConstructor(function(){if(!window.Cordova){window.Cordova=cordova;}if(!window.plugins){window.plugins={};}window.plugins.twitter=new Twitter();});Ext.define("Genesis.dom.Element",{override:"Ext.dom.Element",setMargin:function(b,a){if(b||b===0){b=this.self.unitizeBox((b===true)?5:b,a);}else{b=null;}this.dom.style.margin=b;},setPadding:function(b,a){if(b||b===0){b=this.self.unitizeBox((b===true)?5:b,a);}else{b=null;}this.dom.style.padding=b;},replaceCls:function(b,a,c,d){if(Ext.isArray(b)&&Ext.isArray(a)&&b.join()===a.join()){return;}return this.removeCls(b,c,d).addCls(a,c,d);}});Ext.define("Genesis.Component",{override:"Ext.Component",updatePadding:function(a){this.innerElement.setPadding(a,this.getInitialConfig().defaultUnit);},updateMargin:function(a){this.element.setMargin(a,this.getInitialConfig().defaultUnit);}});Ext.define("Genesis.util.Collection",{override:"Ext.util.Collection",clear:function(){this.callParent(arguments);this.indices={};}});Ext.define("Genesis.Mask",{override:"Ext.Mask",onEvent:function(b){var a=arguments[arguments.length-1];if(a.info.eventName==="tap"){this.fireEvent("tap",this,b);return false;}return false;}});Ext.define("Genesis.data.reader.Json",{override:"Ext.data.reader.Json",getResponseData:function(a){var b;if(a&&a.responseText){}b=this.callParent(arguments);if(!b.metaData){delete this.metaData;}return b;}});Ext.define("Genesis.data.writer.Writer",{override:"Ext.data.writer.Writer",writeDate:function(b,a){if(a){return this.callParent(arguments);}return null;}});Ext.define("Genesis.data.proxy.Server",{override:"Ext.data.proxy.Server",errorResponseHandlerFn:function(a,g,o,d,h,f,m,p){var l=this,c=d.getAction(),b=_application;var k=b.getController(((!merchantMode)?"client":"server")+".Viewport");switch(a.rescode){case"unregistered_account":break;case"server_error":Ext.device.Notification.show({title:"Server Error(s)",message:g,buttons:["Dismiss"],callback:function(q){if(a.session_timeout){k.resetView();k.redirectTo("login");return;}else{}}});break;case"login_invalid_facebook_info":Ext.device.Notification.show({title:"Create Account",message:Genesis.constants.createAccountMsg,buttons:["OK"],callback:function(q){k.setLoggedIn(false);k.redirectTo("createAccount");}});return;case"update_account_invalid_info":case"signup_invalid_info":case"update_account_invalid_facebook_info":case"login_invalid_info":Ext.device.Notification.show({title:"Login Error",message:g,buttons:["Dismiss"],callback:function(q){k.resetView();k.redirectTo("login");}});return;default:if(g&&(g!="Error Connecting to Server")){Ext.device.Notification.show({title:"Error",message:g,buttons:["Dismiss"],callback:function(){if(l._errorCallback){l._errorCallback();delete l._errorCallback;}}});}else{if(d.initialConfig.doNotRetryAttempt){Ext.device.Notification.show({title:"Network Error",message:"Error Contacting Server",buttons:["Dismiss"],callback:function(){if(l._errorCallback){l._errorCallback();delete l._errorCallback;}}});}}break;}console.debug("Ajax ErrorHandler called. Operation("+d.wasSuccessful()+")"+((g)?"\n"+g:""));l.fireEvent("exception",l,f,d);},processResponse:function(q,c,g,d,p,s){var m=this,b=c.getAction(),k=m.getReader(),o,f,a;if(d.timedout||((d.status==0)&&(!g.aborted)&&(!c.initialConfig.doNotRetryAttempt))){if(!m.quiet){Ext.device.Notification.show({title:"Server Timeout",message:"Error Contacting Server",buttons:["Try Again","Cancel"],callback:function(t){if(t.toLowerCase()=="try again"){m.afterRequest(g,q);Ext.Ajax.request(d.request.options);}else{d.timedout=false;g.aborted=true;q=false;c.success=false;m.processResponse(q,c,g,d,p,s);}}});}else{m.quiet=false;d.timedout=false;g.aborted=true;q=false;c.success=false;m.processResponse(q,c,g,d,p,s);}return;}var h=function(){f=((o&&Ext.isDefined(o.getMessage))?(Ext.isArray(o.getMessage())?o.getMessage().join(Genesis.constants.addCRLF()):o.getMessage()):"Error Connecting to Server");a=k.metaData||{};if(!m.quiet){Ext.Viewport.setMasked(null);}if(typeof p=="function"){p.call(s||m,c);}if(m.supressErrorsPopup){if(!m.quiet){m.supressErrorsCallbackFn=function(){m.supressErrorsPopup=false;m.errorResponseHandlerFn(a,f,q,c,g,d,p,s);delete m.supressErrorsCallbackFn;};}else{m.supressErrorsPopup=false;}}else{m.errorResponseHandlerFn(a,f,q,c,g,d,p,s);}m.quiet=false;};if(!d.aborted){try{o=k.process(d);}catch(l){console.debug("Ajax call failed with message=["+l.message+"] url=["+g.getUrl()+"]");c.setException(c,{status:null,statusText:l.message});h();return;}if(q===true){if(c.process(b,o,g,d)===false){h();}else{if(typeof p=="function"){p.call(s||m,c);}}m.afterRequest(g,q);return;}}console.debug("Ajax call failed with status=["+d.status+"] url=["+g.getUrl()+"]");if(f){c.setException(c,{status:null,statusText:f});}else{m.setException(c,d);}if(!d.aborted){h();}m.afterRequest(g,q);},buildRequest:function(b){var a=Genesis.db.getLocalDB();if(a.auth_code){this.setExtraParam("auth_token",a.auth_code);}else{delete this.getExtraParams()["auth_token"];}var c=this.callParent(arguments);if(b.initialConfig.jsonData){c.setJsonData(b.initialConfig.jsonData);}return c;}});Ext.define("Genesis.data.Connection",{override:"Ext.data.Connection",setupHeaders:function(h,b,d,g){var c=this;b=b||{};var a=Genesis.db.getLocalDB();var k=(b.method||c.getMethod()||((g||d)?"POST":"GET")).toUpperCase();b.headers=Ext.apply(b.headers,{Accept:"*/*"});if(a.csrf_code&&(k=="POST")){b.headers=Ext.apply(b.headers,{"X-CSRF-Token":a.csrf_code});}var f=c.callParent(arguments);return f;},parseStatus:function(a,d){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!d.onreadystatechange){c=false;}if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break;}}return({success:c,isException:b});}});Ext.define("Genesis.field.Text",{override:"Ext.field.Text",updateReadOnly:function(a){this[(a)?"addCls":"removeCls"]("readOnly");this.callParent(arguments);}});Ext.define("Genesis.field.Select",{override:"Ext.field.Select",getListPanel:function(){if(!this.listPanel){this.listPanel=Ext.create("Ext.Panel",{top:0,left:0,height:"9em",modal:true,cls:Ext.baseCSSPrefix+"select-overlay",layout:"fit",hideOnMaskTap:true,items:{xtype:"list",store:this.getStore(),itemTpl:'<span class="x-list-label">{'+this.getDisplayField()+"}</span>",listeners:{select:this.onListSelect,itemtap:this.onListTap,scope:this}}});}return this.listPanel;}});Ext.define("Genesis.dataview.element.List",{override:"Ext.dataview.element.List",updateListItem:function(d,o){var k=this,f=k.dataview,m=Ext.fly(o),h=m.down(k.labelClsCache,true),c=f.prepareData(d.getData(true),f.getStore().indexOf(d),d),b=f.getDisclosureProperty(),a,p=c&&c.hasOwnProperty("iconSrc"),g,l;h.innerHTML=f.getItemTpl().apply(c);a=c&&c.hasOwnProperty(b);if(a){g=m.down(k.disclosureClsCache);g[c[b]===false?"addCls":"removeCls"](k.hiddenDisplayCache);}if(f.getIcon()){l=m.down(k.iconClsCache,true);l.style.backgroundImage=p?'url("'+p+'")':"";}}});Ext.define("Genesis.tab.Bar",{override:"Ext.tab.Bar",doSetActiveTab:function(b,a){this.callParent(arguments);this.fireAction("tabchange",[this,b,a]);}});Ext.define("Genesis.MessageBox",{override:"Ext.MessageBox",updateButtons:function(a){var b=this;if(a){if(b.buttonsToolbar){b.buttonsToolbar.removeAll();b.buttonsToolbar.setItems(a);}else{b.buttonsToolbar=Ext.create("Ext.Toolbar",{docked:"bottom",height:"2.6em",defaultType:"button",layout:{type:"hbox",pack:"center"},ui:b.getUi(),cls:b.getBaseCls()+"-buttons",items:a});b.add(b.buttonsToolbar);}}},onClick:function(a){if(a&&this._hideCallbackFn){this.getModal().un("hide",this._hideCallbackFn,Ext.device.Notification);delete this._hideCallbackFn;}this.callParent(arguments);}});Ext.define("Ext.device.notification.Abstract",{show:function(a){if(!a.message){throw ("[Ext.device.Notification#show] You passed no message");}if(a.buttons){if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons];}}else{a.buttons=null;}if(!a.scope){a.scope=this;}return a;},vibrate:Ext.emptyFn});Ext.define("Ext.device.notification.Simulator",{extend:"Ext.device.notification.Abstract",requires:["Ext.MessageBox"],msg:null,show:function(){var a=this.callSuper(arguments),f=[],d=a.buttons.length,c,b,h,g;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()};}f.push(c);}if(this.msg){this.msg.destroy();}this.msg=Ext.create("Ext.MessageBox");g=this.msg;g.setHideOnMaskTap((!a.ignoreOnHide)?true:false);h=function(k){if(a.callback){a.callback.apply(a.scope,[k]);}};g._hideCallbackFn=Ext.bind(h,this,[f[f.length-1].itemId]);g.getModal().on("hide",g._hideCallbackFn,this);g.show({title:a.title,message:a.message,scope:g,buttons:f,fn:h});},beep:Ext.emptyFn,vibrate:Ext.emptyFn,dismiss:function(){var a=this.msg;if(a){if(a._hideCallbackFn){a._hideCallbackFn();}a.hide();}}});Ext.define("Ext.device.notification.PhoneGap",{extend:"Ext.device.notification.Simulator"});Ext.define("Ext.device.notification.Sencha",{extend:"Ext.device.notification.Simulator"});Ext.define("Ext.device.Notification",{singleton:true,requires:["Ext.device.notification.Sencha","Ext.device.notification.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create("Ext.device.notification.PhoneGap");}else{return Ext.create("Ext.device.notification.Sencha");}}else{return Ext.create("Ext.device.notification.Simulator");}}});Ext.define("Genesis.util.Geolocation",{override:"Ext.util.Geolocation",parseOptions:function(){var b=this.getTimeout(),a={maximumAge:this.getMaximumAge(),allowHighAccuracy:this.getAllowHighAccuracy(),enableHighAccuracy:this.getAllowHighAccuracy()};if(b!==Infinity){a.timeout=b;}console.debug("Geolocation - "+Ext.encode(a));return a;}});Ext.define("Genesis.data.proxy.PagingMemory",{extend:"Ext.data.proxy.Memory",alias:"proxy.pagingmemory",alternateClassName:"Genesis.data.PagingMemoryProxy",read:function(b,g,c){var d=this,a=d.getReader();var f={data:a.getRoot(d.getData()).slice(b.getStart(),b.getStart()+b.getLimit()),total:a.getTotal(d.getData())};if(b.process("read",a.process(f))===false){this.fireEvent("exception",this,null,b);}Ext.callback(g,c||d,[b]);},});Ext.define("Genesis.plugin.ListPaging",{extend:"Ext.plugin.ListPaging",loadNextPage:function(){var a=this;if(!a.storeFullyLoaded()){a.callParent(arguments);}}});Ext.define("Genesis.plugin.PullRefresh",{override:"Ext.plugin.PullRefresh",resetRefreshState:function(){Ext.device.Notification.beep(1);this.callParent(arguments);}});Ext.define("Ext.device.notification.Sencha",{extend:"Ext.device.notification.Abstract",requires:["Ext.device.Communicator"],show:function(){var a=this.callParent(arguments);Ext.device.Communicator.send({command:"Notification#show",callbacks:{callback:a.callback},scope:a.scope,title:a.title,message:a.message,buttons:a.buttons.join(",")});},vibrate:function(){Ext.device.Communicator.send({command:"Notification#vibrate"});}});Ext.define("Ext.device.notification.Simulator",{extend:"Ext.device.notification.Abstract",requires:["Ext.MessageBox"],msg:null,show:function(){var a=this.callParent(arguments),f=[],d=a.buttons.length,c,b,h,g;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()};}f.push(c);}this.msg=Ext.create("Ext.MessageBox");g=this.msg;h=function(k){if(a.callback){a.callback.apply(a.scope,[k]);}};this.msg.show({title:a.title,message:a.message,scope:this.msg,buttons:f,fn:h});},vibrate:function(){var c=["@-webkit-keyframes vibrate{","    from {","        -webkit-transform: rotate(-2deg);","    }","    to{","        -webkit-transform: rotate(2deg);","    }","}","body {","    -webkit-animation: vibrate 50ms linear 10 alternate;","}"];var b=document.getElementsByTagName("head")[0];var a=document.createElement("style");a.innerHTML=c.join("\n");b.appendChild(a);setTimeout(function(){b.removeChild(a);},400);}});Ext.define("Ext.device.Notification",{singleton:true,requires:["Ext.device.Communicator","Ext.device.notification.PhoneGap","Ext.device.notification.Sencha","Ext.device.notification.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create("Ext.device.notification.PhoneGap");}else{return Ext.create("Ext.device.notification.Sencha");}}else{return Ext.create("Ext.device.notification.Simulator");}}});Ext.define("Ext.device.Connection",{singleton:true,requires:["Ext.device.Communicator","Ext.device.connection.Sencha","Ext.device.connection.PhoneGap","Ext.device.connection.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create("Ext.device.connection.PhoneGap");}else{return Ext.create("Ext.device.connection.Sencha");}}else{return Ext.create("Ext.device.connection.Simulator");}}});Ext.define("Ext.device.Camera",{singleton:true,requires:["Ext.device.Communicator","Ext.device.camera.PhoneGap","Ext.device.camera.Sencha","Ext.device.camera.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create("Ext.device.camera.PhoneGap");}else{return Ext.create("Ext.device.camera.Sencha");}}else{return Ext.create("Ext.device.camera.Simulator");}}});Ext.define("Ext.device.Orientation",{singleton:true,requires:["Ext.device.Communicator","Ext.device.orientation.HTML5","Ext.device.orientation.Sencha"],constructor:function(){var a=Ext.browser.is;if(a.Sencha){return Ext.create("Ext.device.orientation.Sencha");}else{return Ext.create("Ext.device.orientation.HTML5");}}});