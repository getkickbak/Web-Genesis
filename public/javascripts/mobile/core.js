Ext.define("Ext.device.communicator.Default",{SERVER_URL:"http://localhost:3000",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:"0",generateId:function(){return String(++this.idSeed);},getId:function(a){var b=a.$callbackId;if(!b){a.$callbackId=b=this.generateId();}return b;},getCallbackId:function(h,d){var c=this.callbackIdMap,b=this.callbackDataMap,g,a,f,e;if(!d){a=this.globalScopeId;}else{if(d.isIdentifiable){a=d.getId();}else{a=this.getId(d);}}f=this.getId(h);if(!c[a]){c[a]={};}if(!c[a][f]){g=this.generateId();e={callback:h,scope:d};c[a][f]=g;b[g]=e;}return c[a][f];},getCallbackData:function(a){return this.callbackDataMap[a];},invoke:function(c,a){var b=this.getCallbackData(c);b.callback.apply(b.scope,a);},send:function(b){var d,c,a,e;if(!b){b={};}else{if(b.callbacks){d=b.callbacks;c=b.scope;delete b.callbacks;delete b.scope;for(a in d){if(d.hasOwnProperty(a)){e=d[a];if(typeof e=="function"){b[a]=this.getCallbackId(e,c);}}}}}this.doSend(b);},doSend:function(a){var b=new XMLHttpRequest();b.open("GET",this.SERVER_URL+"?"+Ext.Object.toQueryString(a),false);b.send(null);}});Ext.define("Ext.device.communicator.Android",{extend:"Ext.device.communicator.Default",doSend:function(a){window.Sencha.action(JSON.stringify(a));}});Ext.define("Ext.device.Communicator",{requires:["Ext.device.communicator.Default","Ext.device.communicator.Android"],singleton:true,constructor:function(){if(Ext.os.is.Android){return new Ext.device.communicator.Android();}return new Ext.device.communicator.Default();}});Ext.define("Ext.device.camera.Abstract",{source:{library:0,camera:1,album:2},destination:{data:0,file:1},encoding:{jpeg:0,jpg:0,png:1},capture:Ext.emptyFn});Ext.define("Ext.device.camera.PhoneGap",{extend:"Ext.device.camera.Abstract",capture:function(j){var h=j.success,d=j.failure,l=j.scope,b=this.source,f=this.destination,i=this.encoding,a=j.source,k=j.destination,c=j.encoding,m={};if(l){h=Ext.Function.bind(h,l);d=Ext.Function.bind(d,l);}if(a!==undefined){m.sourceType=b.hasOwnProperty(a)?b[a]:a;}if(k!==undefined){m.destinationType=f.hasOwnProperty(k)?f[k]:k;}if(c!==undefined){m.encodingType=i.hasOwnProperty(c)?i[c]:c;}if("quality" in j){m.quality=j.quality;}if("width" in j){m.targetWidth=j.width;}if("height" in j){m.targetHeight=j.height;}try{navigator.camera.getPicture(h,d,m);}catch(g){alert(g);}}});Ext.define("Ext.device.camera.Sencha",{extend:"Ext.device.camera.Abstract",requires:["Ext.device.Communicator"],capture:function(d){var c=this.source,b=this.destination,f=this.encoding,g=d.source,a=d.destination,e=d.encoding;if(c.hasOwnProperty(g)){g=c[g];}if(b.hasOwnProperty(a)){a=b[a];}if(f.hasOwnProperty(e)){e=f[e];}Ext.device.Communicator.send({command:"Camera#capture",callbacks:{success:d.success,failure:d.failure},scope:d.scope,quality:d.quality,width:d.width,height:d.height,source:g,destination:a,encoding:e});}});Ext.define("Ext.device.camera.Simulator",{extend:"Ext.device.camera.Abstract",config:{samples:[{success:"http://www.sencha.com/img/sencha-large.png"}]},constructor:function(a){this.initConfig(a);},updateSamples:function(a){this.sampleIndex=0;},capture:function(d){var c=this.sampleIndex,b=this.getSamples(),g=b.length,f=b[c],e=d.scope,h=d.success,a=d.failure;if("success" in f){if(h){h.call(e,f.success);}}else{if(a){a.call(e,f.failure);}}if(++c>g-1){c=0;}this.sampleIndex=c;}});Ext.define("Ext.device.connection.Abstract",{extend:"Ext.Evented",config:{online:false,type:null},UNKNOWN:"Unknown connection",ETHERNET:"Ethernet connection",WIFI:"WiFi connection",CELL_2G:"Cell 2G connection",CELL_3G:"Cell 3G connection",CELL_4G:"Cell 4G connection",NONE:"No network connection",isOnline:function(){return this.getOnline();}});Ext.define("Ext.device.connection.PhoneGap",{extend:"Ext.device.connection.Abstract",syncOnline:function(){var a=navigator.network.connection.type;this._type=a;this._online=a!=Connection.NONE;},getOnline:function(){this.syncOnline();return this._online;},getType:function(){this.syncOnline();return this._type;}});Ext.define("Ext.device.connection.Sencha",{extend:"Ext.device.connection.Abstract",initialize:function(){Ext.device.Communicator.send({command:"Connection#watch",callbacks:{callback:this.onConnectionChange},scope:this});},onConnectionChange:function(a){this.setOnline(Boolean(a.online));this.setType(this[a.type]);this.fireEvent("onlinechange",this.getOnline(),this.getType());}});Ext.define("Ext.device.connection.Simulator",{extend:"Ext.device.connection.Abstract",getOnline:function(){this._online=navigator.onLine;this._type=Ext.device.Connection.UNKNOWN;return this._online;}});Ext.define("Ext.device.notification.Abstract",{show:function(a){if(!a.message){throw ("[Ext.device.Notification#show] You passed no message");}if(!a.buttons){a.buttons="OK";}if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons];}if(!a.scope){a.scope=this;}return a;},vibrate:Ext.emptyFn});Ext.define("Ext.device.notification.PhoneGap",{extend:"Ext.device.notification.Abstract",requires:["Ext.device.Communicator"],show:function(){var b=this.callParent(arguments),c=(b.buttons)?b.buttons.join(","):null,a=function(d){if(b.callback){b.callback.apply(b.scope,(b.buttons)?[b.buttons[d-1]]:[]);}};navigator.notification.confirm(b.message,a,b.title,c);},vibrate:function(){navigator.notification.vibrate(2000);}});Ext.define("Ext.device.notification.Sencha",{extend:"Ext.device.notification.Abstract",requires:["Ext.device.Communicator"],show:function(){var a=this.callParent(arguments);Ext.device.Communicator.send({command:"Notification#show",callbacks:{callback:a.callback},scope:a.scope,title:a.title,message:a.message,buttons:a.buttons.join(",")});},vibrate:function(){Ext.device.Communicator.send({command:"Notification#vibrate"});}});Ext.define("Ext.device.notification.Simulator",{extend:"Ext.device.notification.Abstract",requires:["Ext.MessageBox"],msg:null,show:function(){var a=this.callParent(arguments),e=[],d=a.buttons.length,c,b,g,f;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()};}e.push(c);}this.msg=Ext.create("Ext.MessageBox");f=this.msg;g=function(h){if(a.callback){a.callback.apply(a.scope,[h]);}};this.msg.show({title:a.title,message:a.message,scope:this.msg,buttons:e,fn:g});},vibrate:function(){var c=["@-webkit-keyframes vibrate{","    from {","        -webkit-transform: rotate(-2deg);","    }","    to{","        -webkit-transform: rotate(2deg);","    }","}","body {","    -webkit-animation: vibrate 50ms linear 10 alternate;","}"];var b=document.getElementsByTagName("head")[0];var a=document.createElement("style");a.innerHTML=c.join("\n");b.appendChild(a);setTimeout(function(){b.removeChild(a);},400);}});Ext.define("Ext.device.orientation.Abstract",{extend:"Ext.EventedBase",onDeviceOrientation:function(a){this.doFireEvent("orientationchange",[a]);}});Ext.define("Ext.device.orientation.HTML5",{extend:"Ext.device.orientation.Abstract",initialize:function(){this.onDeviceOrientation=Ext.Function.bind(this.onDeviceOrientation,this);window.addEventListener("deviceorientation",this.onDeviceOrientation,true);}});Ext.define("Ext.device.orientation.Sencha",{extend:"Ext.device.orientation.Abstract",requires:["Ext.device.Communicator"],initialize:function(){Ext.device.Communicator.send({command:"Orientation#watch",callbacks:{callback:this.onDeviceOrientation},scope:this});}});Ext.define("Ext.device.Notification",{singleton:true,requires:["Ext.device.Communicator","Ext.device.notification.PhoneGap","Ext.device.notification.Sencha","Ext.device.notification.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){console.log("Loading PhoneGap Notification");return Ext.create("Ext.device.notification.PhoneGap");}else{console.log("Loading Sencha Notification");return Ext.create("Ext.device.notification.Sencha");}}else{console.log("Loading Simulation Notification");return Ext.create("Ext.device.notification.Simulator");}}});Ext.define("Ext.device.Connection",{singleton:true,requires:["Ext.device.Communicator","Ext.device.connection.Sencha","Ext.device.connection.PhoneGap","Ext.device.connection.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create("Ext.device.connection.PhoneGap");}else{return Ext.create("Ext.device.connection.Sencha");}}else{return Ext.create("Ext.device.connection.Simulator");}}});Ext.define("Ext.device.Camera",{singleton:true,requires:["Ext.device.Communicator","Ext.device.camera.PhoneGap","Ext.device.camera.Sencha","Ext.device.camera.Simulator"],constructor:function(){var a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create("Ext.device.camera.PhoneGap");}else{return Ext.create("Ext.device.camera.Sencha");}}else{return Ext.create("Ext.device.camera.Simulator");}}});Ext.define("Ext.device.Orientation",{singleton:true,requires:["Ext.device.Communicator","Ext.device.orientation.HTML5","Ext.device.orientation.Sencha"],constructor:function(){var a=Ext.browser.is;if(a.Sencha){return Ext.create("Ext.device.orientation.Sencha");}else{return Ext.create("Ext.device.orientation.HTML5");}}});JFQRCodeReader=function(){};JFQRCodeReader.prototype.scanType="RL";JFQRCodeReader.prototype.getCode=function(d,e,a,b,c){if(!c.params){c.params={};}c.filePath=d;c.server=e;if(!c.fileKey){c.fileKey="file";}if(!c.fileName){c.fileName="image.jpg";}if(!c.mimeType){c.mimeType="image/jpeg";}if(!c.chunkedMode){c.chunkedMode=false;}if(typeof a!="function"){console.log("JFQRCodeReader Error: successCallback is not a function");return;}if(b&&(typeof b!="function")){console.log("JFQRCodeReader Error: errorCallback is not a function");return;}console.log("Uploading file to ["+e+"]\nfilePath is ["+d+"]");console.log("ScanType is ["+this.scanType+"]");switch(this.scanType){case"Nigma":PhoneGap.exec(a,b,"QRCodeReaderNigma","getCode",[c]);break;case"RL":PhoneGap.exec(a,b,"QRCodeReaderRL","getCode",[c]);break;}};JFQRCodeReader.prototype._castOpenCodeError=function(a){var b=new QRCodeReaderError(a.message);a.message=b;Ext.Msg.hide();return a;};JFQRCodeReader.prototype._castGetCodeResult=function(b){var a=new FileUploadResult();a.response=decodeURIComponent(b.message.response);b.message=a;Ext.Msg.hide();return b;};JFQRCodeReader.prototype._updateProgress=function(b){var a=b.message.progress;var c=b.message.total;console.log("Transferred "+a+" of "+c+" bytes");Ext.Msg.show({title:"",msg:"Transferred "+a+" of "+c+" bytes",width:300,buttons:[],fn:Ext.emptyFn});};PhoneGap.addConstructor(function(){if(typeof navigator.jfqrCodeReader=="undefined"){navigator.jfqrCodeReader=new JFQRCodeReader();}});JFFileTransfer=function(){};JFFileTransfer.prototype.upload=function(d,e,a,b,c){if(!c.params){c.params={};}c.filePath=d;c.server=e;if(!c.fileKey){c.fileKey="file";}if(!c.fileName){c.fileName="image.jpg";}if(!c.mimeType){c.mimeType="image/jpeg";}if(!c.chunkedMode){c.chunkedMode=false;}if(typeof a!="function"){console.log("JFFileTransfer Error: successCallback is not a function");return;}if(b&&(typeof b!="function")){console.log("JFFileTransfer Error: errorCallback is not a function");return;}console.log("Uploading file to ["+e+"]");console.log("filePath is ["+d+"]");PhoneGap.exec(a,b,"FileTransfer","upload",[c]);};JFFileTransfer.prototype._castTransferError=function(a){var b=new FileTransferError(a.message);a.message=b;Ext.Msg.hide();return a;};JFFileTransfer.prototype._castUploadResult=function(b){var a=new FileUploadResult();a.bytesSent=b.message.bytesSent;a.responseCode=b.message.responseCode;a.response=decodeURIComponent(b.message.response);b.message=a;Ext.Msg.hide();return b;};JFFileTransfer.prototype._updateProgress=function(b){var a=b.message.progress;var c=b.message.total;console.log("Transferred "+a+" of "+c+" bytes");Ext.Msg.show({title:"",msg:"Transferred "+a+" of "+c+" bytes",width:300,buttons:[],fn:Ext.emptyFn});};PhoneGap.addConstructor(function(){if(typeof navigator.jffileTransfer=="undefined"){navigator.jffileTransfer=new JFFileTransfer();}});Ext.ns("Genesis.constants");Genesis.contants={site:"www.justformyfriends.com",facebook_onLogout:function(){try{_fb_disconnect();_logout();FB.logout(function(b){Genesis.ajax(false,Genesis.sign_out_path,"GET",null,"json",function(){setTimeout(function(){window.location.reload(true);},0);});});}catch(a){Genesis.ajax(false,Genesis.sign_out_path,"GET",null,"json",function(){setTimeout(function(){window.location.reload(true);},0);});}},facebook_loginCallback:function(a){FB.api("/me",function(f){if(f.id==null){facebook_onLogout();return;}var c=f.id;var g=function(){$("#fb_login").css("display","none");$('#topbar .secondary-nav > li:not([id="fb_login"])').css("display","");$("#fb_login_img").html('<img src="http://graph.facebook.com/'+c+'/picture?type=square"/>');$("#fb_login_img").css("display","");_fb_connect();_login();var k=$("#notice").text();if(k){Genesis.showWarningMsg(k,null,true);}};if(Genesis.popupDialog.data().modal.isShown){Genesis.popupDialog.modal("hide");}if(!$("#fb_account")[0]||(Genesis.currFbId!=c)||a){var b=f.name;var h=f.email;var e=f.username;var i=f.gender=="male"?"m":"f";var j=f.birthday.split("/");j=j[2]+"-"+j[0]+"-"+j[1];var d="name="+b+"&email="+h+"&facebook_id="+c+"&facebook_uid="+e+"&gender="+i+"&birthday="+j;Genesis.ajax(false,Genesis.sign_in_path,"POST",d,"json",function(k){if(!$("#fb_account")[0]||a){setTimeout(function(){window.location.reload(true);},0);}else{Genesis.currFbId=c;if($("#fb_account")[0]){g();}}});}else{g();}});},facebook_onLogin:function(b){$("#fb_login").css("display","none");if($("#fb_account")[0]){facebook_loginCallback(b);}else{var a=function(){FB.login(function(c){if((c.status=="connected")&&c.authResponse){Genesis.access_token=c.authResponse.accessToken;facebook_loginCallback(b);}},{scope:Genesis.perms});};if($.client.browser=="Safari"){FB.getLoginStatus(function(c){if((c.status=="connected")&&c.authResponse){Genesis.access_token=c.authResponse.accessToken;facebook_loginCallback(b);}else{a();}});}else{a();}}},_fb_connect:function(){}};Genesis.contants._fb_disconnect=Genesis.constants._fb_connect;Genesis.fn={addUnit:function(a){return a+"px";},_removeUnitRegex:/(\d+)px/,removeUnit:function(a){return a.match(this._removeUnitRegex)[1];}};Ext.define("Genesis.dom.Element",{override:"Ext.dom.Element",setMargin:function(b,a){if(b||b===0){b=this.self.unitizeBox((b===true)?5:b,a);}else{b=null;}this.dom.style.margin=b;},setPadding:function(b,a){if(b||b===0){b=this.self.unitizeBox((b===true)?5:b,a);}else{b=null;}this.dom.style.padding=b;},});Ext.define("Genesis.Component",{override:"Ext.Component",updatePadding:function(a){this.innerElement.setPadding(a,this.getInitialConfig().defaultUnit);},updateMargin:function(a){this.element.setMargin(a,this.getInitialConfig().defaultUnit);}});Ext.define("Genesis.data.proxy.OfflineServer",{override:"Ext.data.proxy.Server",processResponse:function(k,b,d,c,j,l){var h=this,a=b.getAction(),f,i;if((k===true)||(phoneGapAvailable===true)){f=h.getReader();try{i=f.process(c);}catch(g){console.log("Ajax call is failed message=["+g.message+"] url=["+d.getUrl()+"]");b.setException(b,{status:null,statusText:g.message});h.fireEvent("exception",this,c,b);return;}if(b.process(a,i,d,c)===false){this.fireEvent("exception",this,c,b);}}else{console.log("Ajax call is failed status=["+c.status+"] url=["+d.getUrl()+"]");h.setException(b,c);h.fireEvent("exception",this,c,b);}if(typeof j=="function"){j.call(l||h,b);}h.afterRequest(d,k);}});Ext.define("Genesis.data.Connection",{override:"Ext.data.Connection",parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(phoneGapAvailable&&(a===0)){c=true;}if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break;}}return({success:c,isException:b});}});Ext.define("Genesis.data.association.BelongsTo",{override:"Ext.data.association.BelongsTo",read:function(b,a,c){b[this.getInstanceName()]=a.read(c).getRecords()[0];}});Ext.define("Genesis.field.Select",{override:"Ext.field.Select",getListPanel:function(){if(!this.listPanel){this.listPanel=Ext.create("Ext.Panel",{top:0,left:0,height:"9em",modal:true,cls:Ext.baseCSSPrefix+"select-overlay",layout:"fit",hideOnMaskTap:true,items:{xtype:"list",store:this.getStore(),itemTpl:'<span class="x-list-label">{'+this.getDisplayField()+"}</span>",listeners:{select:this.onListSelect,itemtap:this.onListTap,scope:this}}});}return this.listPanel;}});Ext.define("Genesis.dataview.element.List",{override:"Ext.dataview.element.List",updateListItem:function(b,j){var g=this,c=g.dataview,i=Ext.fly(j),f=i.down(g.labelClsCache,true),a=b.getData(true),d=a&&a.hasOwnProperty("disclosure"),k=a&&a.hasOwnProperty("iconSrc"),e,h;f.innerHTML=c.getItemTpl().apply(a);if(d&&c.getOnItemDisclosure()){e=i.down(g.disclosureClsCache);e[d?"removeCls":"addCls"](g.hiddenDisplayCache);}if(c.getIcon()){h=i.down(g.iconClsCache,true);h.style.backgroundImage=k?'url("'+k+'")':"";}}});Ext.define("Genesis.tab.Bar",{override:"Ext.tab.Bar",doSetActiveTab:function(b,a){this.callParent(arguments);this.fireAction("tabchange",[this,b,a]);}});