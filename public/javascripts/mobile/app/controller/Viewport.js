Ext.define('Genesis.controller.Viewport',
{
   extend : 'Genesis.controller.ControllerBase',
   /*
   requires : ['Genesis.controller.MainPage'
   //,'Genesis.controller.LoginPage'
   ],
   */
   statics :
   {
   },
   // Top Toolbar
   refs : [
   {
      ref : 'shareButton',
      selector : '#shareButton'
   },
   {
      ref : 'toptoolbar',
      selector : 'navigationBarTop'
   },
   {
      ref : 'loadingIcon',
      selector : 'button[iconCls=x-loading-spinner]'
   }],
   //Postfix convention
   //Browse - Feature Browse
   //Mode - Modes supported by the Feature
   //Page - Home Page for Feature
   views : ['MainPage'],
   /*
    onBack : function()
    {
    this.getViewport().pop();
    console.log("Going back ...");
    },
    */
   onShareMerchantTap : function()
   {
   },
   onInfoTap : function()
   {
      // Open Info ActiveSheet
      //this.getViewPort().pushView(vp.getInfo());
   },
   onHomeButtonTap : function(b, e, eOpts)
   {
      this.getController('MainPage').openMainPage(true);
      console.log("Going back to HomePage ...");
   },
   init : function(app)
   {
      this.openMainPage();
      this.callParent(arguments);
      this.control(
      {
         // AutoGenerated
         /*,
          '#backButton' :
          {
          tap : this.onBack
          },
          /
          '#loadingIcon' : {
          tap : this.onHomeButtomTap
          }
          */
         'button[iconCls=share]' :
         {
            tap : this.onShareMerchantTap
         },
         'button[iconCls=info]' :
         {
            tap : this.onInfoTap
         }
         /*,
          * There is a bug in Sencha Touch not allowing us to add this into the controller
          *
          ,'#homeButton' :
          {
          tap : this.onHomeButtomTap
          }
          */
      });
      this.getViewport().on(
      {
         delegate : 'button[iconCls=home]',
         tap : this.onHomeButtonTap,
         scope : this
      });
      console.log("Viewport Init");
   },
   openMainPage : function()
   {
      this.getController('MainPage').openMainPage();
   }
});
