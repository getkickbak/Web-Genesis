/*ecfc6486c6a94eaf49a6989fe367dac2ab45e11f*/Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var h=Date,i=h.prototype,m=h.CultureInfo,j=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)};i.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};i.setTimeToNow=function(){var a=new Date();this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};h.today=function(){return new Date().clearTime()};h.compare=function(a,b){if(isNaN(a)||isNaN(b)){throw new Error(a+" - "+b)}else{if(a instanceof Date&&b instanceof Date){return(a<b)?-1:(a>b)?1:0}else{throw new TypeError(a+" - "+b)}}};h.equals=function(a,b){return(a.compareTo(b)===0)};h.getDayNumberFromName=function(c){var e=m.dayNames,d=m.abbreviatedDayNames,f=m.shortestDayNames,a=c.toLowerCase();for(var b=0;b<e.length;b++){if(e[b].toLowerCase()==a||d[b].toLowerCase()==a||f[b].toLowerCase()==a){return b}}return -1};h.getMonthNumberFromName=function(c){var e=m.monthNames,d=m.abbreviatedMonthNames,a=c.toLowerCase();for(var b=0;b<e.length;b++){if(e[b].toLowerCase()==a||d[b].toLowerCase()==a){return b}}return -1};h.isLeapYear=function(a){return((a%4===0&&a%100!==0)||a%400===0)};h.getDaysInMonth=function(b,a){return[31,(h.isLeapYear(b)?29:28),31,30,31,30,31,31,30,31,30,31][a]};h.getTimezoneAbbreviation=function(a){var b=m.timezones,c;for(var d=0;d<b.length;d++){if(b[d].offset===a){return b[d].name}}return null};h.getTimezoneOffset=function(d){var a=m.timezones,b;for(var c=0;c<a.length;c++){if(a[c].name===d.toUpperCase()){return a[c].offset}}return null};i.clone=function(){return new Date(this.getTime())};i.compareTo=function(a){return Date.compare(this,a)};i.equals=function(a){return Date.equals(this,a||new Date())};i.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};i.isAfter=function(a){return this.compareTo(a||new Date())===1};i.isBefore=function(a){return(this.compareTo(a||new Date())===-1)};i.isToday=function(){return this.isSameDay(new Date())};i.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())};i.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};i.addSeconds=function(a){return this.addMilliseconds(a*1000)};i.addMinutes=function(a){return this.addMilliseconds(a*60000)};i.addHours=function(a){return this.addMilliseconds(a*3600000)};i.addDays=function(a){this.setDate(this.getDate()+a);return this};i.addWeeks=function(a){return this.addDays(a*7)};i.addMonths=function(b){var a=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(a,h.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};i.addYears=function(a){return this.addMonths(a*12)};i.add=function(a){if(typeof a=="number"){this._orient=a;return this}var b=a;if(b.milliseconds){this.addMilliseconds(b.milliseconds)}if(b.seconds){this.addSeconds(b.seconds)}if(b.minutes){this.addMinutes(b.minutes)}if(b.hours){this.addHours(b.hours)}if(b.weeks){this.addWeeks(b.weeks)}if(b.months){this.addMonths(b.months)}if(b.years){this.addYears(b.years)}if(b.days){this.addDays(b.days)}return this};var l,k,o;i.getWeek=function(){var b,c,d,e,f,g,s,u,v,a;l=(!l)?this.getFullYear():l;k=(!k)?this.getMonth()+1:k;o=(!o)?this.getDate():o;if(k<=2){b=l-1;c=(b/4|0)-(b/100|0)+(b/400|0);d=((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0);v=c-d;f=0;g=o-1+(31*(k-1))}else{b=l;c=(b/4|0)-(b/100|0)+(b/400|0);d=((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0);v=c-d;f=v+1;g=o+((153*(k-3)+2)/5)+58+v}s=(b+c)%7;e=(g+s-f)%7;u=(g+3-e)|0;if(u<0){a=53-((s-v)/5|0)}else{if(u>364+v){a=1}else{a=(u/7|0)+1}}l=k=o=null;return a};i.getISOWeek=function(){l=this.getUTCFullYear();k=this.getUTCMonth()+1;o=this.getUTCDate();return j(this.getWeek())};i.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};h._validate=function(a,b,d,c){if(typeof a=="undefined"){return false}else{if(typeof a!="number"){throw new TypeError(a+" is not a Number.")}else{if(a<b||a>d){throw new RangeError(a+" is not a valid value for "+c+".")}}}return true};h.validateMillisecond=function(a){return h._validate(a,0,999,"millisecond")};h.validateSecond=function(a){return h._validate(a,0,59,"second")};h.validateMinute=function(a){return h._validate(a,0,59,"minute")};h.validateHour=function(a){return h._validate(a,0,23,"hour")};h.validateDay=function(b,c,a){return h._validate(b,1,h.getDaysInMonth(c,a),"day")};h.validateMonth=function(a){return h._validate(a,0,11,"month")};h.validateYear=function(a){return h._validate(a,0,9999,"year")};i.set=function(a){if(h.validateMillisecond(a.millisecond)){this.addMilliseconds(a.millisecond-this.getMilliseconds())}if(h.validateSecond(a.second)){this.addSeconds(a.second-this.getSeconds())}if(h.validateMinute(a.minute)){this.addMinutes(a.minute-this.getMinutes())}if(h.validateHour(a.hour)){this.addHours(a.hour-this.getHours())}if(h.validateMonth(a.month)){this.addMonths(a.month-this.getMonth())}if(h.validateYear(a.year)){this.addYears(a.year-this.getFullYear())}if(h.validateDay(a.day,this.getFullYear(),this.getMonth())){this.addDays(a.day-this.getDate())}if(a.timezone){this.setTimezone(a.timezone)}if(a.timezoneOffset){this.setTimezoneOffset(a.timezoneOffset)}if(a.week&&h._validate(a.week,0,53,"week")){this.setWeek(a.week)}return this};i.moveToFirstDayOfMonth=function(){return this.set({day:1})};i.moveToLastDayOfMonth=function(){return this.set({day:h.getDaysInMonth(this.getFullYear(),this.getMonth())})};i.moveToNthOccurrence=function(b,a){var c=0;if(a>0){c=a-1}else{if(a===-1){this.moveToLastDayOfMonth();if(this.getDay()!==b){this.moveToDayOfWeek(b,-1)}return this}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(b,+1).addWeeks(c)};i.moveToDayOfWeek=function(c,b){var a=(c-this.getDay()+7*(b||+1))%7;return this.addDays((a===0)?a+=7*(b||+1):a)};i.moveToMonth=function(a,c){var b=(a-this.getMonth()+12*(c||+1))%12;return this.addMonths((b===0)?b+=12*(c||+1):b)};i.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1};i.getTimezone=function(){return h.getTimezoneAbbreviation(this.getUTCOffset())};i.setTimezoneOffset=function(a){var c=this.getTimezoneOffset(),b=Number(a)*-6/10;return this.addMinutes(b-c)};i.setTimezone=function(a){return this.setTimezoneOffset(h.getTimezoneOffset(a))};i.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset())};i.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset())};i.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;if(a<0){b=(a-10000).toString();return b.charAt(0)+b.substr(2)}else{b=(a+10000).toString();return"+"+b.substr(1)}};i.getElapsed=function(a){return(a||new Date())-this};if(!i.toISOString){i.toISOString=function(){function a(b){return b<10?"0"+b:b}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}}i._toString=i.toString;i.toString=function(b){var d=this;if(b&&b.length==1){var a=m.formatPatterns;d.t=d.toString;switch(b){case"d":return d.t(a.shortDate);case"D":return d.t(a.longDate);case"F":return d.t(a.fullDateTime);case"m":return d.t(a.monthDay);case"r":return d.t(a.rfc1123);case"s":return d.t(a.sortableDateTime);case"t":return d.t(a.shortTime);case"T":return d.t(a.longTime);case"u":return d.t(a.universalSortableDateTime);case"y":return d.t(a.yearMonth)}}var c=function(e){switch(e*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return b?b.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if(e.charAt(0)==="\\"){return e.replace("\\","")}d.h=d.getHours;switch(e){case"hh":return j(d.h()<13?(d.h()===0?12:d.h()):(d.h()-12));case"h":return d.h()<13?(d.h()===0?12:d.h()):(d.h()-12);case"HH":return j(d.h());case"H":return d.h();case"mm":return j(d.getMinutes());case"m":return d.getMinutes();case"ss":return j(d.getSeconds());case"s":return d.getSeconds();case"yyyy":return j(d.getFullYear(),4);case"yy":return j(d.getFullYear());case"dddd":return m.dayNames[d.getDay()];case"ddd":return m.abbreviatedDayNames[d.getDay()];case"dd":return j(d.getDate());case"d":return d.getDate();case"MMMM":return m.monthNames[d.getMonth()];case"MMM":return m.abbreviatedMonthNames[d.getMonth()];case"MM":return j((d.getMonth()+1));case"M":return d.getMonth()+1;case"t":return d.h()<12?m.amDesignator.substring(0,1):m.pmDesignator.substring(0,1);case"tt":return d.h()<12?m.amDesignator:m.pmDesignator;case"S":return c(d.getDate());default:return e}}):this._toString()}}());(function(){var l=Date,L=l.prototype,k=l.CultureInfo,H=Number.prototype;L._orient=+1;L._nth=null;L._is=false;L._same=false;L._isSecond=false;H._dateElement="day";L.next=function(){this._orient=+1;return this};l.next=function(){return l.today().next()};L.last=L.prev=L.previous=function(){this._orient=-1;return this};l.last=l.prev=l.previous=function(){return l.today().last()};L.is=function(){this._is=true;return this};L.same=function(){this._same=true;this._isSecond=false;return this};L.today=function(){return this.same().day()};L.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun())}return false};L.at=function(a){return(typeof a==="string")?l.parse(this.toString("d")+" "+a):this.set(a)};H.fromNow=H.after=function(b){var a={};a[this._dateElement]=this;return((!b)?new Date():b.clone()).add(a)};H.ago=H.before=function(b){var a={};a[this._dateElement]=this*-1;return((!b)?new Date():b.clone()).add(a)};var N=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),K=("january february march april may june july august september october november december").split(/\s/),I=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),F=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),Q=("final first second third fourth fifth").split(/\s/),i;L.toObject=function(){var a={};for(var b=0;b<I.length;b++){a[I[b].toLowerCase()]=this["get"+F[b]]()}return a};l.fromObject=function(a){a.week=null;return Date.today().set(a)};var j=function(a){return function(){if(this._is){this._is=false;return this.getDay()==a}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1)}this._isSecond=false;var b=this._nth;this._nth=null;var c=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(a,b);if(this>c){throw new RangeError(l.getDayName(a)+" does not occur "+b+" times in the month of "+l.getMonthName(c.getMonth())+" "+c.getFullYear()+".")}return this}return this.moveToDayOfWeek(a,this._orient)}};var M=function(a){return function(){var b=l.today(),c=a-b.getDay();if(a===0&&k.firstDayOfWeek===1&&b.getDay()!==0){c=c+7}return b.addDays(c)}};for(var B=0;B<N.length;B++){l[N[B].toUpperCase()]=l[N[B].toUpperCase().substring(0,3)]=B;l[N[B]]=l[N[B].substring(0,3)]=M(B);L[N[B]]=L[N[B].substring(0,3)]=j(B)}var G=function(a){return function(){if(this._is){this._is=false;return this.getMonth()===a}return this.moveToMonth(a,this._orient)}};var J=function(a){return function(){return l.today().set({month:a,day:1})}};for(var C=0;C<K.length;C++){l[K[C].toUpperCase()]=l[K[C].toUpperCase().substring(0,3)]=C;l[K[C]]=l[K[C].substring(0,3)]=J(C);L[K[C]]=L[K[C].substring(0,3)]=G(C)}var P=function(a){return function(){if(this._isSecond){this._isSecond=false;return this}if(this._same){this._same=this._is=false;var d=this.toObject(),e=(arguments[0]||new Date()).toObject(),f="",b=a.toLowerCase();for(var c=(I.length-1);c>-1;c--){f=I[c].toLowerCase();if(d[f]!=e[f]){return false}if(b==f){break}}return true}if(a.substring(a.length-1)!="s"){a+="s"}return this["add"+a](this._orient)}};var O=function(a){return function(){this._dateElement=a;return this}};for(var D=0;D<I.length;D++){i=I[D].toLowerCase();L[i]=L[i+"s"]=P(I[D]);H[i]=H[i+"s"]=O(i)}L._ss=P("Second");var R=function(a){return function(b){if(this._same){return this._ss(arguments[0])}if(b||b===0){return this.moveToNthOccurrence(b,a)}this._nth=a;if(a===2&&(b===undefined||b===null)){this._isSecond=true;return this.addSeconds(this._orient)}return this}};for(var E=0;E<Q.length;E++){L[Q[E]]=(E===0)?R(-1):R(E)}}());(function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var j=Date.Parsing;var q=j.Operators={rtoken:function(a){return function(c){var b=c.match(a);if(b){return([b[0],c.substring(b[0].length)])}else{throw new j.Exception(c)}}},token:function(a){return function(b){return q.rtoken(new RegExp("^s*"+b+"s*"))(b)}},stoken:function(a){return q.rtoken(new RegExp("^"+a))},until:function(a){return function(e){var d=[],b=null;while(e.length){try{b=a.call(this,e)}catch(c){d.push(b[0]);e=b[1];continue}break}return[d,e]}},many:function(a){return function(e){var b=[],d=null;while(e.length){try{d=a.call(this,e)}catch(c){return[b,e]}b.push(d[0]);e=d[1]}return[b,e]}},optional:function(a){return function(d){var c=null;try{c=a.call(this,d)}catch(b){return[null,d]}return[c[0],c[1]]}},not:function(a){return function(c){try{a.call(this,c)}catch(b){return[null,c]}throw new j.Exception(c)}},ignore:function(a){return a?function(c){var b=null;b=a.call(this,c);return[null,b[1]]}:null},product:function(){var c=arguments[0],b=Array.prototype.slice.call(arguments,1),a=[];for(var d=0;d<c.length;d++){a.push(q.each(c[d],b))}return a},cache:function(a){var c={},b=null;return function(e){try{b=c[e]=(c[e]||a.call(this,e))}catch(d){b=c[e]=d}if(b instanceof j.Exception){throw b}else{return b}}},any:function(){var a=arguments;return function(d){var c=null;for(var e=0;e<a.length;e++){if(a[e]==null){continue}try{c=(a[e].call(this,d))}catch(b){c=null}if(c){return c}}throw new j.Exception(d)}},each:function(){var a=arguments;return function(d){var f=[],c=null;for(var e=0;e<a.length;e++){if(a[e]==null){continue}try{c=(a[e].call(this,d))}catch(b){throw new j.Exception(d)}f.push(c[0]);d=c[1]}return[f,d]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,b,a){b=b||q.rtoken(/^\s*/);a=a||null;if(c.length==1){return c[0]}return function(x){var s=null,h=null;var f=[];for(var y=0;y<c.length;y++){try{s=c[y].call(this,x)}catch(g){break}f.push(s[0]);try{h=b.call(this,s[1])}catch(d){h=null;break}x=h[1]}if(!s){throw new j.Exception(x)}if(h){throw new j.Exception(h[1])}if(a){try{s=a.call(this,s[1])}catch(e){throw new j.Exception(s[1])}}return[f,(s?s[1]:x)]}},between:function(c,b,d){d=d||c;var a=q.each(q.ignore(c),b,q.ignore(d));return function(e){var f=a.call(this,e);return[[f[0][0],r[0][2]],f[1]]}},list:function(c,b,a){b=b||q.rtoken(/^\s*/);a=a||null;return(c instanceof Array?q.each(q.product(c.slice(0,-1),q.ignore(b)),c.slice(-1),q.ignore(a)):q.each(q.many(q.each(c,q.ignore(b))),px,q.ignore(a)))},set:function(c,b,a){b=b||q.rtoken(/^\s*/);a=a||null;return function(d){var s=null,g=null,h=null,J=null,I=[[],d],e=false;for(var G=0;G<c.length;G++){h=null;g=null;s=null;e=(c.length==1);try{s=c[G].call(this,d)}catch(D){continue}J=[[s[0]],s[1]];if(s[1].length>0&&!e){try{h=b.call(this,s[1])}catch(f){e=true}}else{e=true}if(!e&&h[1].length===0){e=true}if(!e){var F=[];for(var H=0;H<c.length;H++){if(G!=H){F.push(c[H])}}g=q.set(F,b).call(this,h[1]);if(g[0].length>0){J[0]=J[0].concat(g[0]);J[1]=g[1]}}if(J[1].length<I[1].length){I=J}if(I[1].length===0){break}}if(I[0].length===0){return I}if(a){try{h=a.call(this,I[1])}catch(E){throw new j.Exception(I[1])}I[1]=h[1]}return I}},forward:function(b,a){return function(c){return b[a].call(this,c)}},replace:function(a,b){return function(d){var c=a.call(this,d);return[b,c[1]]}},process:function(a,b){return function(d){var c=a.call(this,d);return[b.call(this,c[0]),c[1]]}},min:function(b,a){return function(d){var c=a.call(this,d);if(c[0].length<b){throw new j.Exception(d)}return c}}};var k=function(a){return function(){var e=null,b=[];if(arguments.length>1){e=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){e=arguments[0]}}if(e){for(var c=0,d=e.shift();c<d.length;c++){e.unshift(d[c]);b.push(a.apply(null,e));e.shift();return b}}else{return a.apply(null,arguments)}}};var l="optional not ignore cache".split(/\s/);for(var p=0;p<l.length;p++){q[l[p]]=k(q[l[p]])}var m=function(a){return function(){if(arguments[0] instanceof Array){return a.apply(null,arguments[0])}else{return a.apply(null,arguments)}}};var o="each any all".split(/\s/);for(var i=0;i<o.length;i++){q[o[i]]=m(q[o[i]])}}());(function(){var t=Date,g=t.prototype,s=t.CultureInfo;var q=function(a){var c=[];for(var b=0;b<a.length;b++){if(a[b] instanceof Array){c=c.concat(q(a[b]))}else{if(a[b]){c.push(a[b])}}}return c};t.Grammar={};t.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");if(b.length){this.timezoneOffset=Number(b)}else{this.timezone=a.toLowerCase()}}},day:function(b){var a=b[0];return function(){this.day=Number(a.match(/\d+/)[0])}},month:function(a){return function(){this.month=(a.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=((a.length>2)?b:(b+(((b+2000)<s.twoDigitYearMax)?2000:1900)))}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(b){b=(b instanceof Array)?b:[b];for(var d=0;d<b.length;d++){if(b[d]){b[d].call(this)}}var a=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=a.getDate()}if(!this.year){this.year=a.getFullYear()}if(!this.month&&this.month!==0){this.month=a.getMonth()}if(!this.day){this.day=1}if(!this.hour){this.hour=0}if(!this.minute){this.minute=0}if(!this.second){this.second=0}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.day>t.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var c=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){c.set({timezone:this.timezone})}else{if(this.timezoneOffset){c.set({timezoneOffset:this.timezoneOffset})}}return c},finish:function(e){e=(e instanceof Array)?q(e):[e];if(e.length===0){return null}for(var d=0;d<e.length;d++){if(typeof e[d]=="function"){e[d].call(this)}}var i=t.today();if(this.now&&!this.unit&&!this.operator){return new Date()}else{if(this.now){i=new Date()}}var c=!!(this.days&&this.days!==null||this.orient||this.operator);var b,f,h;h=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){i.setTimeToNow()}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;c=true}}if(!c&&this.weekday&&!this.day&&!this.days){var a=Date[this.weekday]();this.day=a.getDate();if(!this.month){this.month=a.getMonth()}this.year=a.getFullYear()}if(c&&this.weekday&&this.unit!="month"){this.unit="day";b=(t.getDayNumberFromName(this.weekday)-i.getDay());f=7;this.days=b?((b+(h*f))%f):(h*f)}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1}if(this.month&&!this.day&&this.value){i.set({day:this.value*1});if(!c){this.day=this.value*1}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;c=true}if(c&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";b=(this.month-i.getMonth());f=12;this.months=b?((b+(h*f))%f):(h*f);this.month=null}if(!this.unit){this.unit="day"}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*h}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}this[this.unit+"s"]=this.value*h}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.weekday&&!this.day&&!this.days){var a=Date[this.weekday]();this.day=a.getDate();if(a.getMonth()!==i.getMonth()){this.month=a.getMonth()}}if((this.month||this.month===0)&&!this.day){this.day=1}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value)}if(c&&this.timezone&&this.day&&this.days){this.day=this.days}return(c)?i.add(this):i.set(this)}};var p=t.Parsing.Operators,u=t.Grammar,m=t.Translator,w;u.datePartDelimiter=p.rtoken(/^([\s\-\.\,\/\x27]+)/);u.timePartDelimiter=p.stoken(":");u.whiteSpace=p.rtoken(/^\s*/);u.generalDelimiter=p.rtoken(/^(([\s\,]|at|@|on)+)/);var x={};u.ctoken=function(d){var e=x[d];if(!e){var b=s.regexPatterns;var f=d.split(/\s+/),a=[];for(var c=0;c<f.length;c++){a.push(p.replace(p.rtoken(b[f[c]]),f[c]))}e=x[d]=p.any.apply(null,a)}return e};u.ctoken2=function(a){return p.rtoken(s.regexPatterns[a])};u.h=p.cache(p.process(p.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),m.hour));u.hh=p.cache(p.process(p.rtoken(/^(0[0-9]|1[0-2])/),m.hour));u.H=p.cache(p.process(p.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),m.hour));u.HH=p.cache(p.process(p.rtoken(/^([0-1][0-9]|2[0-3])/),m.hour));u.m=p.cache(p.process(p.rtoken(/^([0-5][0-9]|[0-9])/),m.minute));u.mm=p.cache(p.process(p.rtoken(/^[0-5][0-9]/),m.minute));u.s=p.cache(p.process(p.rtoken(/^([0-5][0-9]|[0-9])/),m.second));u.ss=p.cache(p.process(p.rtoken(/^[0-5][0-9]/),m.second));u.hms=p.cache(p.sequence([u.H,u.m,u.s],u.timePartDelimiter));u.t=p.cache(p.process(u.ctoken2("shortMeridian"),m.meridian));u.tt=p.cache(p.process(u.ctoken2("longMeridian"),m.meridian));u.z=p.cache(p.process(p.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),m.timezone));u.zz=p.cache(p.process(p.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),m.timezone));u.zzz=p.cache(p.process(u.ctoken2("timezone"),m.timezone));u.timeSuffix=p.each(p.ignore(u.whiteSpace),p.set([u.tt,u.zzz]));u.time=p.each(p.optional(p.ignore(p.stoken("T"))),u.hms,u.timeSuffix);u.d=p.cache(p.process(p.each(p.rtoken(/^([0-2]\d|3[0-1]|\d)/),p.optional(u.ctoken2("ordinalSuffix"))),m.day));u.dd=p.cache(p.process(p.each(p.rtoken(/^([0-2]\d|3[0-1])/),p.optional(u.ctoken2("ordinalSuffix"))),m.day));u.ddd=u.dddd=p.cache(p.process(u.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));u.M=p.cache(p.process(p.rtoken(/^(1[0-2]|0\d|\d)/),m.month));u.MM=p.cache(p.process(p.rtoken(/^(1[0-2]|0\d)/),m.month));u.MMM=u.MMMM=p.cache(p.process(u.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),m.month));u.y=p.cache(p.process(p.rtoken(/^(\d\d?)/),m.year));u.yy=p.cache(p.process(p.rtoken(/^(\d\d)/),m.year));u.yyy=p.cache(p.process(p.rtoken(/^(\d\d?\d?\d?)/),m.year));u.yyyy=p.cache(p.process(p.rtoken(/^(\d\d\d\d)/),m.year));w=function(){return p.each(p.any.apply(null,arguments),p.not(u.ctoken2("timeContext")))};u.day=w(u.d,u.dd);u.month=w(u.M,u.MMM);u.year=w(u.yyyy,u.yy);u.orientation=p.process(u.ctoken("past future"),function(a){return function(){this.orient=a}});u.operator=p.process(u.ctoken("add subtract"),function(a){return function(){this.operator=a}});u.rday=p.process(u.ctoken("yesterday tomorrow today now"),m.rday);u.unit=p.process(u.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});u.value=p.process(p.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});u.expression=p.set([u.rday,u.operator,u.value,u.unit,u.orientation,u.ddd,u.MMM]);w=function(){return p.set(arguments,u.datePartDelimiter)};u.mdy=w(u.ddd,u.month,u.day,u.year);u.ymd=w(u.ddd,u.year,u.month,u.day);u.dmy=w(u.ddd,u.day,u.month,u.year);u.date=function(a){return((u[s.dateElementOrder]||u.mdy).call(this,a))};u.format=p.process(p.many(p.any(p.process(p.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(u[a]){return u[a]}else{throw t.Parsing.Exception(a)}}),p.process(p.rtoken(/^[^dMyhHmstz]+/),function(a){return p.ignore(p.stoken(a))}))),function(a){return p.process(p.each.apply(null,a),m.finishExact)});var o={};var v=function(a){return o[a]=(o[a]||u.format(a)[0])};u.formats=function(a){if(a instanceof Array){var c=[];for(var b=0;b<a.length;b++){c.push(v(a[b]))}return p.any.apply(null,c)}else{return v(a)}};u._formats=u.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);u._start=p.process(p.set([u.date,u.time,u.expression],u.generalDelimiter,u.whiteSpace),m.finish);u.start=function(b){try{var a=u._formats.call({},b);if(a[1].length===0){return a}}catch(c){}return u._start.call({},b)};t._parse=t.parse;t.parse=function(b){var a=null;if(!b){return null}if(b instanceof Date){return b}try{a=t.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(c){return null}return((a[1].length===0)?a[0]:null)};t.getParseFunction=function(a){var b=t.Grammar.formats(a);return function(e){var d=null;try{d=b.call({},e)}catch(c){return null}return((d[1].length===0)?d[0]:null)}};t.parseExact=function(b,a){return t.getParseFunction(a)(b)}}());(function(){var j=Date,f=j.prototype,i=j.CultureInfo,g=[],h=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)};j.normalizeFormat=function(a){g=[];var b=new Date().$format(a);return g.join("")};j.strftime=function(a,b){return new Date(b*1000).$format(a)};j.strtotime=function(b){var a=j.parse(b);a.addMinutes(a.getTimezoneOffset()*-1);return Math.round(j.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())/1000)};f.$format=function(b){var d=this,a,c=function(e){g.push(e);return d.toString(e)};return b?b.replace(/(%|\\)?.|%%/g,function(p){if(p.charAt(0)==="\\"||p.substring(0,2)==="%%"){return p.replace("\\","").replace("%%","%")}switch(p){case"d":case"%d":return c("dd");case"D":case"%a":return c("ddd");case"j":case"%e":return c("d");case"l":case"%A":return c("dddd");case"N":case"%u":return d.getDay()+1;case"S":return c("S");case"w":case"%w":return d.getDay();case"z":return d.getOrdinalNumber();case"%j":return h(d.getOrdinalNumber(),3);case"%U":var q=d.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),e=d.clone().addDays(1).moveToDayOfWeek(0,-1);return(e<q)?"00":h((e.getOrdinalNumber()-q.getOrdinalNumber())/7+1);case"W":case"%V":return d.getISOWeek();case"%W":return h(d.getWeek());case"F":case"%B":return c("MMMM");case"m":case"%m":return c("MM");case"M":case"%b":case"%h":return c("MMM");case"n":return c("M");case"t":return j.getDaysInMonth(d.getFullYear(),d.getMonth());case"L":return(j.isLeapYear(d.getFullYear()))?1:0;case"o":case"%G":return d.setWeek(d.getISOWeek()).toString("yyyy");case"%g":return d.$format("%G").slice(-2);case"Y":case"%Y":return c("yyyy");case"y":case"%y":return c("yy");case"a":case"%p":return c("tt").toLowerCase();case"A":return c("tt").toUpperCase();case"g":case"%I":return c("h");case"G":return c("H");case"h":return c("hh");case"H":case"%H":return c("HH");case"i":case"%M":return c("mm");case"s":case"%S":return c("ss");case"u":return h(d.getMilliseconds(),3);case"I":return(d.isDaylightSavingTime())?1:0;case"O":return d.getUTCOffset();case"P":a=d.getUTCOffset();return a.substring(0,a.length-2)+":"+a.substring(a.length-2);case"e":case"T":case"%z":case"%Z":return d.getTimezone();case"Z":return d.getTimezoneOffset()*-60;case"B":var m=new Date();return Math.floor(((m.getHours()*3600)+(m.getMinutes()*60)+m.getSeconds()+(m.getTimezoneOffset()+60)*60)/86.4);case"c":return d.toISOString().replace(/\"/g,"");case"U":return j.strtotime("now");case"%c":return c("d")+" "+c("t");case"%C":return Math.floor(d.getFullYear()/100+1);case"%D":return c("MM/dd/yy");case"%n":return"\\n";case"%t":return"\\t";case"%r":return c("hh:mm tt");case"%R":return c("H:mm");case"%T":return c("H:mm:ss");case"%x":return c("d");case"%X":return c("t");default:g.push(p);return p}}):this._toString()};if(!f.format){f.format=f.$format}}());var QRCode=function(){var u=function(p,o){var a=236;var b=17;var f=p;var R=z[o];var j=null;var i=0;var N=null;var P=new Array();var g={};var m=function(I,J){i=f*4+17;j=function(K){var M=new Array(K);for(var L=0;L<K;L+=1){M[L]=new Array(K);for(var T=0;T<K;T+=1){M[L][T]=null}}return M}(i);Q(0,0);Q(i-7,0);Q(0,i-7);O();q();c(I,J);if(f>=7){d(I)}if(N==null){N=k(f,R,P)}l(N,J)};var Q=function(J,L){for(var K=-1;K<=7;K+=1){if(J+K<=-1||i<=J+K){continue}for(var I=-1;I<=7;I+=1){if(L+I<=-1||i<=L+I){continue}if((0<=K&&K<=6&&(I==0||I==6))||(0<=I&&I<=6&&(K==0||K==6))||(2<=K&&K<=4&&2<=I&&I<=4)){j[J+K][L+I]=true}else{j[J+K][L+I]=false}}}};var h=function(){var I=0;var J=0;for(var K=0;K<8;K+=1){m(true,K);var L=A.getLostPoint(g);if(K==0||I>L){I=L;J=K}}return J};var q=function(){for(var J=8;J<i-8;J+=1){if(j[J][6]!=null){continue}j[J][6]=(J%2==0)}for(var I=8;I<i-8;I+=1){if(j[6][I]!=null){continue}j[6][I]=(I%2==0)}};var O=function(){var I=A.getPatternPosition(f);for(var M=0;M<I.length;M+=1){for(var U=0;U<I.length;U+=1){var K=I[M];var V=I[U];if(j[K][V]!=null){continue}for(var L=-2;L<=2;L+=1){for(var J=-2;J<=2;J+=1){if(L==-2||L==2||J==-2||J==2||(L==0&&J==0)){j[K+L][V+J]=true}else{j[K+L][V+J]=false}}}}}};var d=function(I){var J=A.getBCHTypeNumber(f);for(var K=0;K<18;K+=1){var L=(!I&&((J>>K)&1)==1);j[Math.floor(K/3)][K%3+i-8-3]=L}for(var K=0;K<18;K+=1){var L=(!I&&((J>>K)&1)==1);j[K%3+i-8-3][Math.floor(K/3)]=L}};var c=function(I,J){var K=(R<<3)|J;var L=A.getBCHTypeInfo(K);for(var M=0;M<15;M+=1){var T=(!I&&((L>>M)&1)==1);if(M<6){j[M][8]=T}else{if(M<8){j[M+1][8]=T}else{j[i-15+M][8]=T}}}for(var M=0;M<15;M+=1){var T=(!I&&((L>>M)&1)==1);if(M<8){j[8][i-M-1]=T}else{if(M<9){j[8][15-M-1+1]=T}else{j[8][15-M-1]=T}}}j[i-8][8]=(!I)};var l=function(Y,ac){var aa=-1;var I=i-1;var Z=7;var ad=0;var K=A.getMaskFunction(ac);for(var ab=i-1;ab>0;ab-=2){if(ab==6){ab-=1}while(true){for(var L=0;L<2;L+=1){if(j[I][ab-L]==null){var M=false;if(ad<Y.length){M=(((Y[ad]>>>Z)&1)==1)}var J=K(I,ab-L);if(J){M=!M}j[I][ab-L]=M;Z-=1;if(Z==-1){ad+=1;Z=7}}}I+=aa;if(I<0||i<=I){I-=aa;aa=-aa;break}}}};var e=function(K,ar){var ak=0;var ao=0;var aq=0;var al=new Array(ar.length);var ah=new Array(ar.length);for(var M=0;M<ar.length;M+=1){var L=ar[M].dataCount;var am=ar[M].totalCount-L;ao=Math.max(ao,L);aq=Math.max(aq,am);al[M]=new Array(L);for(var J=0;J<al[M].length;J+=1){al[M][J]=255&K.getBuffer()[J+ak]}ak+=L;var ag=A.getErrorCorrectPolynomial(am);var ap=D(al[M],ag.getLength()-1);var aj=ap.mod(ag);ah[M]=new Array(ag.getLength()-1);for(var J=0;J<ah[M].length;J+=1){var af=J+aj.getLength()-ah[M].length;ah[M][J]=(af>=0)?aj.get(af):0}}var I=0;for(var J=0;J<ar.length;J+=1){I+=ar[J].totalCount}var an=new Array(I);var ai=0;for(var J=0;J<ao;J+=1){for(var M=0;M<ar.length;M+=1){if(J<al[M].length){an[ai]=al[M][J];ai+=1}}}for(var J=0;J<aq;J+=1){for(var M=0;M<ar.length;M+=1){if(J<ah[M].length){an[ai]=ah[M][J];ai+=1}}}return an};var k=function(I,J,M){var W=B.getRSBlocks(I,J);var X=C();for(var V=0;V<M.length;V+=1){var K=M[V];X.put(K.getMode(),4);X.put(K.getLength(),A.getLengthInBits(K.getMode(),I));K.write(X)}var L=0;for(var V=0;V<W.length;V+=1){L+=W[V].dataCount}if(X.getLengthInBits()>L*8){throw new Error("code length overflow. ("+X.getLengthInBits()+">"+L*8+")")}if(X.getLengthInBits()+4<=L*8){X.put(0,4)}while(X.getLengthInBits()%8!=0){X.putBit(false)}while(true){if(X.getLengthInBits()>=L*8){break}X.put(a,8);if(X.getLengthInBits()>=L*8){break}X.put(b,8)}return e(X,W)};g.addData=function(I){var J=v(I);P.push(J);N=null};g.isDark=function(I,J){if(I<0||i<=I||J<0||i<=J){throw new Error(I+","+J)}return j[I][J]};g.getModuleCount=function(){return i};g.make=function(){m(false,h())};g.createTableTag=function(I,K){I=I||2;K=(typeof K=="undefined")?I*4:K;var M="";M+='<table style="';M+=" border-width: 0px; border-style: none;";M+=" border-collapse: collapse;";M+=" padding: 0px; margin: "+K+"px;";M+='">';M+="<tbody>";for(var L=0;L<g.getModuleCount();L+=1){M+="<tr>";for(var J=0;J<g.getModuleCount();J+=1){M+='<td style="';M+=" border-width: 0px; border-style: none;";M+=" border-collapse: collapse;";M+=" padding: 0px; margin: 0px;";M+=" width: "+I+"px;";M+=" height: "+I+"px;";M+=" background-color: ";M+=g.isDark(L,J)?"#000000":"#ffffff";M+=";";M+='"/>'}M+="</tr>"}M+="</tbody>";M+="</table>";return M};g.createImgTag=function(I,J){I=I||2;J=(typeof J=="undefined")?I*4:J;var K=g.getModuleCount()*I+J*2;var L=J;var M=K-J;return E(K,K,function(Z,W){if(L<=Z&&Z<M&&L<=W&&W<M){var X=Math.floor((Z-L)/I);var Y=Math.floor((W-L)/I);return g.isDark(Y,X)?0:1}else{return 1}})};g.createBase64=function(I,J){I=I||2;J=(typeof J=="undefined")?I*4:J;var K=g.getModuleCount()*I+J*2;var L=J;var M=K-J;return[t(K,K,function(Z,W){if(L<=Z&&Z<M&&L<=W&&W<M){var X=Math.floor((Z-L)/I);var Y=Math.floor((W-L)/I);return g.isDark(Y,X)?0:1}else{return 1}}),K]};return g};u.stringToBytes=function(b){var d=new Array();for(var c=0;c<b.length;c+=1){var a=b.charCodeAt(c);d.push(a&255)}return d};u.createStringToBytes=function(a,b){var c=function(){var m=H(a);var l=function(){var p=m.read();if(p==-1){throw new Error()}return p};var j=0;var i={};while(true){var e=m.read();if(e==-1){break}var f=l();var g=l();var h=l();var k=String.fromCharCode((e<<8)|f);var o=(g<<8)|h;i[k]=o;j+=1}if(j!=b){throw new Error(j+" != "+b)}return i}();var d="?".charCodeAt(0);return function(h){var f=new Array();for(var i=0;i<h.length;i+=1){var e=h.charCodeAt(i);if(e<128){f.push(e)}else{var g=c[h.charAt(i)];if(typeof g=="number"){if((g&255)==g){f.push(g)}else{f.push(g>>>8);f.push(g&255)}}else{f.push(d)}}}return f}};var y={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var z={L:1,M:0,Q:3,H:2};var F={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var A=function(){var c=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var f=(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0);var a=(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0);var d=(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1);var b={};var e=function(h){var g=0;while(h!=0){g+=1;h>>>=1}return g};b.getBCHTypeInfo=function(h){var g=h<<10;while(e(g)-e(f)>=0){g^=(f<<(e(g)-e(f)))}return((h<<10)|g)^d};b.getBCHTypeNumber=function(h){var g=h<<12;while(e(g)-e(a)>=0){g^=(a<<(e(g)-e(a)))}return(h<<12)|g};b.getPatternPosition=function(g){return c[g-1]};b.getMaskFunction=function(g){switch(g){case F.PATTERN000:return function(h,i){return(h+i)%2==0};case F.PATTERN001:return function(h,i){return h%2==0};case F.PATTERN010:return function(h,i){return i%3==0};case F.PATTERN011:return function(h,i){return(h+i)%3==0};case F.PATTERN100:return function(h,i){return(Math.floor(h/2)+Math.floor(i/3))%2==0};case F.PATTERN101:return function(h,i){return(h*i)%2+(h*i)%3==0};case F.PATTERN110:return function(h,i){return((h*i)%2+(h*i)%3)%2==0};case F.PATTERN111:return function(h,i){return((h*i)%3+(h+i)%2)%2==0};default:throw new Error("bad maskPattern:"+g)}};b.getErrorCorrectPolynomial=function(h){var i=D([1],0);for(var g=0;g<h;g+=1){i=i.multiply(D([1,s.gexp(g)],0))}return i};b.getLengthInBits=function(g,h){if(1<=h&&h<10){switch(g){case y.MODE_NUMBER:return 10;case y.MODE_ALPHA_NUM:return 9;case y.MODE_8BIT_BYTE:return 8;case y.MODE_KANJI:return 8;default:throw new Error("mode:"+g)}}else{if(h<27){switch(g){case y.MODE_NUMBER:return 12;case y.MODE_ALPHA_NUM:return 11;case y.MODE_8BIT_BYTE:return 16;case y.MODE_KANJI:return 10;default:throw new Error("mode:"+g)}}else{if(h<41){switch(g){case y.MODE_NUMBER:return 14;case y.MODE_ALPHA_NUM:return 13;case y.MODE_8BIT_BYTE:return 16;case y.MODE_KANJI:return 12;default:throw new Error("mode:"+g)}}else{throw new Error("type:"+h)}}}};b.getLostPoint=function(p){var j=p.getModuleCount();var i=0;for(var m=0;m<j;m+=1){for(var k=0;k<j;k+=1){var q=0;var K=p.isDark(m,k);for(var l=-1;l<=1;l+=1){if(m+l<0||j<=m+l){continue}for(var L=-1;L<=1;L+=1){if(k+L<0||j<=k+L){continue}if(l==0&&L==0){continue}if(K==p.isDark(m+l,k+L)){q+=1}}}if(q>5){i+=(3+q-5)}}}for(var m=0;m<j-1;m+=1){for(var k=0;k<j-1;k+=1){var h=0;if(p.isDark(m,k)){h+=1}if(p.isDark(m+1,k)){h+=1}if(p.isDark(m,k+1)){h+=1}if(p.isDark(m+1,k+1)){h+=1}if(h==0||h==4){i+=3}}}for(var m=0;m<j;m+=1){for(var k=0;k<j-6;k+=1){if(p.isDark(m,k)&&!p.isDark(m,k+1)&&p.isDark(m,k+2)&&p.isDark(m,k+3)&&p.isDark(m,k+4)&&!p.isDark(m,k+5)&&p.isDark(m,k+6)){i+=40}}}for(var k=0;k<j;k+=1){for(var m=0;m<j-6;m+=1){if(p.isDark(m,k)&&!p.isDark(m+1,k)&&p.isDark(m+2,k)&&p.isDark(m+3,k)&&p.isDark(m+4,k)&&!p.isDark(m+5,k)&&p.isDark(m+6,k)){i+=40}}}var o=0;for(var k=0;k<j;k+=1){for(var m=0;m<j;m+=1){if(p.isDark(m,k)){o+=1}}}var g=Math.abs(100*o/j/j-50)/5;i+=g*10;return i};return b}();var s=function(){var d=new Array(256);var b=new Array(256);for(var c=0;c<8;c+=1){d[c]=1<<c}for(var c=8;c<256;c+=1){d[c]=d[c-4]^d[c-5]^d[c-6]^d[c-8]}for(var c=0;c<255;c+=1){b[d[c]]=c}var a={};a.glog=function(e){if(e<1){throw new Error("glog("+e+")")}return b[e]};a.gexp=function(e){while(e<0){e+=255}while(e>=256){e-=255}return d[e]};return a}();function D(c,d){if(typeof c.length=="undefined"){throw new Error(c.length+"/"+d)}var b=function(){var g=0;while(g<c.length&&c[g]==0){g+=1}var e=new Array(c.length-g+d);for(var f=0;f<c.length-g;f+=1){e[f]=c[f+g]}return e}();var a={};a.get=function(e){return b[e]};a.getLength=function(){return b.length};a.multiply=function(g){var e=new Array(a.getLength()+g.getLength()-1);for(var h=0;h<a.getLength();h+=1){for(var f=0;f<g.getLength();f+=1){e[h+f]^=s.gexp(s.glog(a.get(h))+s.glog(g.get(f)))}}return D(e,0)};a.mod=function(g){if(a.getLength()-g.getLength()<0){return a}var h=s.glog(a.get(0))-s.glog(g.get(0));var f=new Array(a.getLength());for(var e=0;e<a.getLength();e+=1){f[e]=a.get(e)}for(var e=0;e<g.getLength();e+=1){f[e]^=s.gexp(s.glog(g.get(e))+h)}return D(f,0).mod(g)};return a}var B=function(){var c=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];var d=function(f,e){var g={};g.totalCount=f;g.dataCount=e;return g};var a={};var b=function(e,f){switch(f){case z.L:return c[(e-1)*4+0];case z.M:return c[(e-1)*4+1];case z.Q:return c[(e-1)*4+2];case z.H:return c[(e-1)*4+3];default:return undefined}};a.getRSBlocks=function(j,o){var k=b(j,o);if(typeof k=="undefined"){throw new Error("bad rs block @ typeNumber:"+j+"/errorCorrectLevel:"+o)}var l=k.length/3;var f=new Array();for(var h=0;h<l;h+=1){var g=k[h*3+0];var m=k[h*3+1];var e=k[h*3+2];for(var i=0;i<g;i+=1){f.push(d(m,e))}}return f};return a}();var C=function(){var c=new Array();var a=0;var b={};b.getBuffer=function(){return c};b.get=function(e){var d=Math.floor(e/8);return((c[d]>>>(7-e%8))&1)==1};b.put=function(f,d){for(var e=0;e<d;e+=1){b.putBit(((f>>>(d-e-1))&1)==1)}};b.getLengthInBits=function(){return a};b.putBit=function(d){var e=Math.floor(a/8);if(c.length<=e){c.push(0)}if(d){c[e]|=(128>>>(a%8))}a+=1};return b};var v=function(b){var c=y.MODE_8BIT_BYTE;var e=b;var d=u.stringToBytes(b);var a={};a.getMode=function(){return c};a.getLength=function(f){return d.length};a.write=function(f){for(var g=0;g<d.length;g+=1){f.put(d[g],8)}};return a};var x=function(){var b=new Array();var a={};a.writeByte=function(c){b.push(c&255)};a.writeShort=function(c){a.writeByte(c);a.writeByte(c>>>8)};a.writeBytes=function(e,c,f){c=c||0;f=f||e.length;for(var d=0;d<f;d+=1){a.writeByte(e[d+c])}};a.writeString=function(c){for(var d=0;d<c.length;d+=1){a.writeByte(c.charCodeAt(d))}};a.toByteArray=function(){return b};a.toString=function(){var c="";c+="[";for(var d=0;d<b.length;d+=1){if(d>0){c+=","}c+=b[d]}c+="]";return c};return a};var G=function(){var e=0;var b=0;var g=0;var f="";var a={};var c=function(h){f+=String.fromCharCode(d(h&63))};var d=function(h){if(h<0){}else{if(h<26){return 65+h}else{if(h<52){return 97+(h-26)}else{if(h<62){return 48+(h-52)}else{if(h==62){return 43}else{if(h==63){return 47}}}}}}throw new Error("n:"+h)};a.writeByte=function(h){e=(e<<8)|(h&255);b+=8;g+=1;while(b>=6){c(e>>>(b-6));b-=6}};a.flush=function(){if(b>0){c(e<<(6-b));e=0;b=0}if(g%3!=0){var h=3-g%3;for(var i=0;i<h;i+=1){f+="="}}};a.toString=function(){return f};return a};var H=function(b){var g=b;var f=0;var e=0;var d=0;var a={};a.read=function(){while(d<8){if(f>=g.length){if(d==0){return -1}throw new Error("unexpected end of file./"+d)}var h=g.charAt(f);f+=1;if(h=="="){d=0;return -1}else{if(h.match(/^\s$/)){continue}}e=(e<<6)|c(h.charCodeAt(0));d+=6}var i=(e>>>(d-8))&255;d-=8;return i};var c=function(h){if(65<=h&&h<=90){return h-65}else{if(97<=h&&h<=122){return h-97+26}else{if(48<=h&&h<=57){return h-48+52}else{if(h==43){return 62}else{if(h==47){return 63}else{throw new Error("c:"+h)}}}}}};return a};var w=function(i,b){var f=i;var e=b;var h=new Array(i*b);var d={};d.setPixel=function(l,j,k){h[j*f+l]=k};d.write=function(l){l.writeString("GIF87a");l.writeShort(f);l.writeShort(e);l.writeByte(128);l.writeByte(0);l.writeByte(0);l.writeByte(0);l.writeByte(0);l.writeByte(0);l.writeByte(255);l.writeByte(255);l.writeByte(255);l.writeString(",");l.writeShort(0);l.writeShort(0);l.writeShort(f);l.writeShort(e);l.writeByte(0);var k=2;var m=g(k);l.writeByte(k);var j=0;while(m.length-j>255){l.writeByte(255);l.writeBytes(m,j,255);j+=255}l.writeByte(m.length-j);l.writeBytes(m,j,m.length-j);l.writeByte(0);l.writeString(";")};var c=function(m){var l=m;var k=0;var o=0;var j={};j.write=function(p,q){if((p>>>q)!=0){throw new Error("length over")}while(k+q>=8){l.writeByte(255&((p<<k)|o));q-=(8-k);p>>>=(8-k);o=0;k=0}o=(p<<k)|o;k=k+q};j.flush=function(){if(k>0){l.writeByte(o)}};return j};var g=function(k){var N=1<<k;var P=(1<<k)+1;var q=k+1;var o=a();for(var O=0;O<N;O+=1){o.add(String.fromCharCode(O))}o.add(String.fromCharCode(N));o.add(String.fromCharCode(P));var j=x();var l=c(j);l.write(N,q);var p=0;var m=String.fromCharCode(h[p]);p+=1;while(p<h.length){var M=String.fromCharCode(h[p]);p+=1;if(o.contains(m+M)){m=m+M}else{l.write(o.indexOf(m),q);if(o.size()<4095){if(o.size()==(1<<q)){q+=1}o.add(m+M)}m=M}}l.write(o.indexOf(m),q);l.write(P,q);l.flush();return j.toByteArray()};var a=function(){var k={};var l=0;var j={};j.add=function(m){if(j.contains(m)){throw new Error("dup key:"+m)}k[m]=l;l+=1};j.size=function(){return l};j.indexOf=function(m){return k[m]};j.contains=function(m){return typeof k[m]!="undefined"};return j};return d};var t=function(k,a,e){var g=w(k,a);for(var d=0;d<a;d+=1){for(var b=0;b<k;b+=1){g.setPixel(b,d,e(b,d))}}var c=x();g.write(c);var f=G();var j=c.toByteArray();for(var h=0;h<j.length;h+=1){f.writeByte(j[h])}f.flush();var i="";i+="data:image/gif;base64,";i+=f;return i};var E=function(c,f,a,b){var e=t(c,f,a);var d="";d+="<img";d+='\u0020src="';d+=e;d+='"';d+='\u0020width="';d+=c;d+='"';d+='\u0020height="';d+=f;d+='"';if(b){d+='\u0020alt="';d+=b;d+='"'}d+="/>";return d};return u}();var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var b=0;b<4096;b++){this.encLookup[b]=this.chars[b>>6]+this.chars[b&63]}},Encode:function(k){var i=k.length;var j="";var m=0;while(i>2){n=(k[m]<<16)|(k[m+1]<<8)|k[m+2];j+=this.encLookup[n>>12]+this.encLookup[n&4095];i-=3;m+=3}if(i>0){var l=(k[m]&252)>>2;var o=(k[m]&3)<<4;if(i>1){o|=(k[++m]&240)>>4}j+=this.chars[l];j+=this.chars[o];if(i==2){var h=(k[m++]&15)<<2;h|=(k[m]&192)>>6;j+=this.chars[h]}if(i==1){j+="="}j+="="}return j}};FastBase64.Init();var RIFFWAVE=function(g){g=g||{};this.data=[];this.wav=[];this.dataURI="";this.header=Ext.apply({chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8000,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0},g.header);function e(a){return[a&255,(a>>8)&255,(a>>16)&255,(a>>24)&255]}function f(a){return[a&255,(a>>8)&255]}function h(a){var b=[];var d=0;var i=a.length;for(var c=0;c<i;c++){b[d++]=a[c]&255;b[d++]=(a[c]>>8)&255}return b}this.Make=function(a){if(a instanceof Array){this.data=a}this.header.blockAlign=(this.header.numChannels*this.header.bitsPerSample)>>3;this.header.byteRate=this.header.blockAlign*this.sampleRate;this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3);this.header.chunkSize=36+this.header.subChunk2Size;console.log("RIFFWAVE - "+Ext.encode(this.header));this.wav=this.header.chunkId.concat(e(this.header.chunkSize),this.header.format,this.header.subChunk1Id,e(this.header.subChunk1Size),f(this.header.audioFormat),f(this.header.numChannels),e(this.header.sampleRate),e(this.header.byteRate),f(this.header.blockAlign),f(this.header.bitsPerSample),this.header.subChunk2Id,e(this.header.subChunk2Size),(this.header.bitsPerSample==16)?h(this.data):this.data);this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav)};if(g.data instanceof Array){this.Make(g.data)}};if(this.console&&this.console.log){if(typeof(MessageChannel)!="undefined"){this._Worker=Worker;Object.defineProperty(this,"Worker",{writable:true});this.Worker=function Worker(d){var e=new _Worker("../lib/core/WebWorkerConsole.js#"+d);var f=new MessageChannel();e.postMessage("console",[f.port2]);f.port1.onmessage=function(a){var b=a.data;b.unshift(d+": ");console.log.apply(console,b)};return e}}}else{self.onmessage=function(f){if(f.data==="console"){self.console={_port:f.ports[0],log:function d(){var a=Array.prototype.slice.call(arguments);console._port.postMessage(a)},debug:function d(){var a=Array.prototype.slice.call(arguments);console._port.postMessage(a)}};onmessage=null;var e=location.hash.substring(1);importScripts("../../mobile/"+e)}}}window.plugins=window.plugins||{};if(window.cordova||window.Cordova||window.PhoneGap){(function(b){window.plugins.proximityID={init:function(d,a){b.exec(function(){console.log("ProximityIDPlugin Initialized")},function(c){console.log("Failed to initialize the ProximityIDPlugin! Reason["+c+"]")},"ProximityIDPlugin","init",[d+"",a+""])},preLoadSend:function(d,a){Ext.defer(function(){b.exec(d,a,"ProximityIDPlugin","preLoadIdentity",[])},0.25*1000,this)},send:function(d,a){b.exec(d,a,"ProximityIDPlugin","sendIdentity",[])},scan:function(i,l,j,k,h,a){b.exec(i,l,"ProximityIDPlugin","scanIdentity",[j,k,h,a])},stop:function(){b.exec(function(){console.log("Stopped ProximityIDPlugin")},function(a){console.log("Failed to stop the ProximityIDPlugin "+a)},"ProximityIDPlugin","stop",[])},setVolume:function(a){b.exec(Ext.emptyFn,Ext.emptyFn,"ProximityIDPlugin","setVolume",[a])}};b.addConstructor(function(){})})(window.cordova||window.Cordova||window.PhoneGap)}else{window.plugins.proximityID={loFreq:17000,hiFreq:20000,FREQ_GAP:500,NUM_SIGNALS:3,SHORT_MAX:parseInt(65535/2),sampleRate:44100,duration:5*44100,bw:0,audio:null,freqs:null,init:function(d,e){var f=this;f.bw=(f.hiFreq-f.loFreq)/f.NUM_SIGNALS;console.debug("Initialized Proximity API")},preLoadSend:function(o,t){var j=this,q,s,u,v={header:{sampleRate:j.sampleRate,numChannels:1,bitsPerSample:16},data:[]};var m=function(){do{u=false;for(q=0;q<j.NUM_SIGNALS-1;q++){j.freqs[q]=parseInt(Math.random()*j.bw)+parseInt(q*j.bw)+parseInt(j.loFreq)}q=j.NUM_SIGNALS-1;j.freqs[q]=parseInt(Math.random()/2*j.bw)+parseInt(q*j.bw)+parseInt(j.loFreq);for(q=0;q<(j.NUM_SIGNALS-1);q++){if((j.freqs[q]+j.FREQ_GAP)>j.freqs[q+1]){u=true;break}}}while(u)};j.freqs=[];if(typeof(webkitAudioContext)!="undefined"){if(!j.context){j.context=new webkitAudioContext();j.gainNode=j.context.createGainNode();j.gainNode.connect(j.context.destination)}m();var p=(Ext.os.is("Desktop"))?(Genesis.constants.s_vol/100):1;j.gainNode.gain.value=p;j.oscillators=[];for(q=0;q<j.freqs.length;q++){var i=j.oscillators[q]=j.context.createOscillator();i.type=0;i.frequency.value=j.freqs[q];i.connect(j.gainNode)}o()}else{Ext.defer(function(){m();for(q=0;q<j.duration;q++){var a=0;for(s=0;s<j.freqs.length;s++){a+=Math.sin(2*Math.PI*j.freqs[s]*q/j.sampleRate)}a/=j.freqs.length;var b=(Ext.os.is("Desktop"))?(Genesis.constants.s_vol/100):1;v.data[q]=Math.round(b*((j.SHORT_MAX+1)+(a*j.SHORT_MAX)))}j.audio=new Audio(new RIFFWAVE(v).dataURI);if(typeof j.audio.loop=="boolean"){j.audio.loop=true}else{j.audio.addEventListener("ended",function(){this.currentTime=0;this.play()},false)}o()},0.25*1000,this)}},send:function(g,f){var h=this;if(h.audio){h.audio.play();g({freqs:h.freqs})}else{if(h.oscillators){for(var e=0;e<h.freqs.length;e++){h.oscillators[e].noteOn&&h.oscillators[e].noteOn(0)}g({freqs:h.freqs})}else{f()}}},stop:function(){var c=this;if(c.audio){c.audio.pause();c.audio.currentTime=0;delete c.audio}else{if(c.oscillators){for(var d=0;d<c.freqs.length;d++){c.oscillators[d].disconnect()}delete c.oscillators}}},setVolume:function(d){var c=this;if(c.audio){c.audio.volume=d/100}else{if(c.context){}}}}}__initFb__=function(){Ext.define("Genesis.fb",{mixins:["Ext.mixin.Observable"],singleton:true,appId:null,fbTimeout:2*60*1000,titleMsg:"Facebook Connect",fbScope:["email","user_birthday","publish_stream","read_friendlists","publish_actions"],fbConnectErrorMsg:"Cannot retrive Facebook account information!",fbConnectRequestMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",fbConnectReconnectMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",connectingToFBMsg:function(){return("Connecting to Facebook ..."+Genesis.constants.addCRLF()+"(Tap to Close)")},loggingOutOfFBMsg:"Logging out of Facebook ...",fbConnectFailMsg:"Error Connecting to Facebook.",fbPermissionFailMsg:"Failed to get the required access permission.",friendsRetrieveErrorMsg:"You cannot retrieve your Friends List from Facebook. Login and Try Again.",initialize:function(){var b=this;b.appId=(Genesis.constants.debugMode())?477780595628080:197968780267830;console.log("FacebookConnect::initialize")},currentLocation:function(){return(((Genesis.constants.debugMode())?Genesis.constants.serverHost():"http://m.getkickbak.com")+"/")},redirectUrl:function(){var b=Ext.Object.toQueryString({redirect_uri:this.currentLocation(),client_id:this.appId,state:appName,response_type:"token",scope:this.fbScope.toString()});if(!Ext.os.is("Android")&&!Ext.os.is("iOS")&&/Windows|Linux|MacOS/.test(Ext.os.name)){return"https://www.facebook.com/dialog/oauth?"+b}else{return"https://m.facebook.com/dialog/oauth?"+b}},createFbResponse:function(e){var d=e.birthday.split("/");d=d[2]+"-"+d[0]+"-"+d[1];var f={name:e.name,email:e.email,facebook_id:e.id,facebook_uid:e.username,gender:(e.gender=="male")?"m":"f",birthday:d,photoURL:this.getFbProfilePhoto(e.id),accessToken:Genesis.db.getLocalDB()["access_token"]};console.log("FbResponse - ["+Ext.encode(f)+"]");return f},facebook_onLogin:function(j,l,k){var m=this,h=true,i=Genesis.db.getLocalDB();var o=(i.currFbId>0)&&(parseInt(i.fbExpiresIn)>0);console.log("connected = "+o+"\nfbExpiresIn = "+parseInt(i.fbExpiresIn)+"\ntime-30min = "+((new Date().addMinutes(-30)).getTime())+"\n");if(o){var h=(!o||(o&&(parseInt(i.fbExpiresIn)<=(new Date().addMinutes(-30)).getTime())));if(!k||(k&&!h)){console.log("Facebook already connected. Bypass relogin process");m.fireEvent("connected",i.fbResponse,null);return}}m.cb={supress:j,messsage:l,iter:0};Ext.Viewport.setMasked(null);Ext.Viewport.setMasked({xtype:"loadmask",message:m.connectingToFBMsg(),listeners:{tap:function(){Ext.Viewport.setMasked(null);m.facebook_loginCallback(null)}}});Genesis.db.setLocalDBAttrib("fbLoginInProgress",true);m.inAppBrowserCallback()},inAppBrowserCallback:function(){var c=this,d=window.open(c.redirectUrl(),"_blank","location=no,toolbar=no,closebuttoncaption=Cancel");c.fbLoginTimeout=setTimeout(function(){c.fireEvent("loginStatus");c.fireEvent("exception",{type:"timeout",msg:"The request to Facebook timed out."},null);Genesis.db.removeLocalDBAttrib("fbLoginInProgress");d.close();c.facebook_loginCallback(null)},c.fbTimeout);d.addEventListener("loadstart",function(b){if(b.url.match(c.currentLocation())){if(b.url.indexOf("access_token=")>=1){var a=Ext.Object.fromQueryString(b.url.split("#")[1]);if(a.state==appName){var f=Genesis.db.getLocalDB();c.code=f.access_token=a.access_token;f.fbExpiresIn=(new Date(Date.now()+Number(a.expires_in))).getTime();Genesis.db.setLocalDB(f)}else{console.error("CSRF Forgery detected! Ignore Request")}}Ext.defer(function(){d.close()},500)}});d.addEventListener("loadstop",function(a){});d.addEventListener("exit",function(a){clearTimeout(c.fbLoginTimeout);delete c.fbLoginTimeout;Genesis.db.removeLocalDBAttrib("fbLoginInProgress");if(c.code){Ext.defer(function(){Ext.Ajax.request({async:true,disableCaching:false,url:"https://graph.facebook.com/me?access_token="+Genesis.db.getLocalDB()["access_token"],callback:function(j,b,l){if(b||(l.status==200)){try{var k=Ext.decode(l.responseText);k.status="connected";c.facebook_loginCallback(k)}catch(e){}}else{console.log("Error Logging into Facebook\nReturn "+Ext.encode(l));c.facebook_loginCallback(null)}}});delete c.code},100)}else{c.facebook_loginCallback(null)}})},facebook_loginCallback:function(e){var h=this,g=null;if(!e||e.cancelled||e.error||(e.status!="connected")){console.log("FacebookConnect.login:failedWithError:"+((e)?e.message:"None"));if(!h.cb||!h.cb.supress){Ext.device.Notification.show({title:h.titleMsg,message:h.fbConnectErrorMsg,buttons:["Try Again","Continue"],callback:function(a){if(a.toLowerCase()=="try again"){Ext.defer(function(){h.facebook_onLogin(false,h.cb.message)},1,h);delete h.cb}else{Ext.Viewport.setMasked(null);delete h.cb;h.fireEvent("unauthorized",null,null)}}})}else{if(e&&e.cancelled){Ext.Viewport.setMasked(null);delete h.cb;h.fireEvent("exception",{type:"timeout",msg:"The request to Facebook cancelled."},null)}}}else{console.log("Retrieving Facebook profile information ...");var f=e;Ext.defer(function(){if(!f.error||(f.id&&(f.id>0))){var b=Genesis.db.getLocalDB(),a=f.id;console.log("Session ID["+a+"]");b.currFbId=a;b.fbAccountId=f.email;g=b.fbResponse=h.createFbResponse(f);Genesis.db.setLocalDB(b);b=Genesis.db.getLocalDB();console.log("You`ve logged into Facebook! \nEmail("+g.email+")\nauth_code("+b.auth_code+")\nID("+a+")\n");delete h.cb;h._fb_connect();if(b.auth_code){console.log("Updating Facebook Login Info ...");Account.setUpdateFbLoginUrl();Account.load(0,{jsonData:{},params:{user:Ext.encode(b.fbResponse)},callback:function(d,c){if(c.wasSuccessful()){Ext.Viewport.setMasked(null);Genesis.db.setLocalDBAttrib("enableFB",true)}h.fireEvent("connected",g,c)}})}else{Genesis.db.setLocalDBAttrib("enableFB",true);h.fireEvent("connected",g,null);delete h.cb}}else{Ext.Viewport.setMasked(null);h.fireEvent("unauthorized",null,null);h.facebook_onLogout(null,false);delete h.cb}},0.5*1000,h)}delete h.fbLoginTimeout},facebook_onLogout:function(g,j){var i=this;g=g||Ext.emptyFn;console.log("facebook_onLogout");try{var e=Genesis.db.getLocalDB();e.currFbId=0;delete e.fbAccountId;delete e.fbResponse;delete e.fbAuthCode;delete e.fbExpiresIn;Genesis.db.setLocalDB(e);g()}catch(h){g()}},getFbProfilePhoto:function(b){return"http://graph.facebook.com/"+b+"/picture?type=square"},createFBReminderMsg:function(){var b=this;if(!b.actions){b.actions=(Ext.create("Ext.Sheet",{bottom:0,left:0,top:0,right:0,padding:"1.0",hideOnMaskTap:false,defaultUnit:"em",layout:{type:"vbox",pack:"middle"},defaults:{xtype:"container",defaultUnit:"em"},items:[{width:"100%",flex:1,style:"text-align:center;display:inline-table;color:white;font-size:1.1em;",html:b.fbConnectRequestMsg+'<img width="160" style="margin:0.7em 0;" src="resources/themes/images/v1/facebook_icon.png"/>'},{docked:"bottom",defaults:{xtype:"button",defaultUnit:"em",scope:b},padding:"0 1.0 1.0 1.0",items:[{margin:"0 0 0.5 0",text:"Sign In",ui:"action",handler:function(){b.actions.hide();var a=_application.getController("client.MainPage");a.fireEvent("facebookTap",null,null,null,null,function(){Ext.device.Notification.show({title:b.titleMsg,message:b.fbPermissionFailMsg,buttons:["Dismiss"],callback:function(i){a._loggingIn=false;var j=_application.getController("client.Viewport");var h=j.getViewport();var g=h.getActiveItem();if(!g){Ext.Viewport.setMasked(null);j.resetView();j.redirectTo("login")}else{}}})});b.actions.destroy();delete b.actions}},{margin:"0.5 0 0.5 0",text:"Skip",ui:"cancel",handler:function(){b.actions.hide();_application.getController("client.Viewport").redirectTo("checkin");b.actions.destroy();delete b.actions}},{margin:"0.5 0 0 0",text:"Don't Remind Me Again",handler:function(){b.actions.hide();Genesis.db.setLocalDBAttrib("disableFBReminderMsg",true);_application.getController("client.Viewport").redirectTo("checkin");b.actions.destroy();delete b.actions}}]}]}));Ext.Viewport.add(b.actions);b.actions.show()}else{}},postCommon:function(f,h,i,g){var j=this;h=Ext.apply(h,{access_token:Genesis.db.getLocalDB()["fbResponse"]["accessToken"]});Ext.Ajax.request({async:true,disableCaching:false,method:"POST",params:h,url:"https://graph.facebook.com"+f,callback:function(b,d,e){try{var c=Ext.decode(e.responseText);if(d||(e.status==200)){i(c)}else{if(e.status==400){j.facebook_onLogout();Ext.defer(j.facebook_onLogin,1,j,[false,null,true])}else{console.log("Error Logging into Facebook\nStatus code "+Ext.encode(e.responseText));g(c)}}}catch(a){g(c)}}})},uploadPhoto:function(f,d,e){this.postCommon("/me/photos",f,d,e)},share:function(f,d,e){this.postCommon("/me/feed",f,d,e)},_fb_connect:function(){},_fb_disconnect:function(){this._fb_connect()}});Genesis.fb.initialize()};