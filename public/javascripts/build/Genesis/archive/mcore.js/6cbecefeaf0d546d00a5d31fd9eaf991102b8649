/*6cbecefeaf0d546d00a5d31fd9eaf991102b8649*/(function(g,k,l,h){if(typeof l.module!=="undefined"&&l.module.exports){if(h&&l.require){for(var f=0;f<h.length;f++){l[h[f]]=l.require(h[f])}}l.module.exports=k.apply(l)}else{if(typeof l.define!=="undefined"&&l.define==="function"&&l.define.amd){define(g,(h||[]),k)}else{l[g]=k.apply(l)}}})("utf8",function(){return{encode:function(h){if(typeof h!=="string"){return h}else{h=h.replace(/\r\n/g,"\n")}var e="",g=0,f;for(g;g<h.length;g++){f=h.charCodeAt(g);if(f<128){e+=String.fromCharCode(f)}else{if((f>127)&&(f<2048)){e+=String.fromCharCode((f>>6)|192),e+=String.fromCharCode((f&63)|128)}else{e+=String.fromCharCode((f>>12)|224),e+=String.fromCharCode(((f>>6)&63)|128),e+=String.fromCharCode((f&63)|128)}}}return e},decode:function(h){if(typeof h!=="string"){return h}var e="",g=0,f=0;while(g<h.length){f=h.charCodeAt(g);if(f<128){e+=String.fromCharCode(f),g++}else{if((f>191)&&(f<224)){e+=String.fromCharCode(((f&31)<<6)|(h.charCodeAt(g+1)&63)),g+=2}else{e+=String.fromCharCode(((f&15)<<12)|((h.charCodeAt(g+1)&63)<<6)|(h.charCodeAt(g+2)&63)),g+=3}}}return e}}},this);(function(g,k,l,h){if(typeof l.module!=="undefined"&&l.module.exports){if(h&&l.require){for(var f=0;f<h.length;f++){l[h[f]]=l.require(h[f])}}l.module.exports=k.apply(l)}else{if(typeof l.define!=="undefined"&&l.define==="function"&&l.define.amd){define(g,(h||[]),k)}else{l[g]=k()}}})("base64",function(f){var h=this;var g=f||this.utf8;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(z){if(typeof h.btoa!=="undefined"){return h.btoa(z)}if(typeof g==="undefined"){throw {error:"MissingMethod",message:"UTF8 Module is missing."}}if(typeof z!=="string"){return z}else{z=g.encode(z)}var x="",y,A,a,b,c,d,v,w=0;while(w<z.length){y=z.charCodeAt(w++);A=z.charCodeAt(w++);a=z.charCodeAt(w++);b=y>>2;c=((y&3)<<4)|(A>>4);d=((A&15)<<2)|(a>>6);v=a&63;if(isNaN(A)){d=v=64}else{if(isNaN(a)){v=64}}x+=e.charAt(b)+e.charAt(c)+e.charAt(d)+e.charAt(v)}return x},decode:function(z){if(typeof h.atob!=="undefined"){return h.atob(z)}if(typeof g==="undefined"){throw {error:"MissingMethod",message:"UTF8 Module is missing."}}if(typeof z!=="string"){return z}else{z.replace(/[^A-Za-z0-9\+\/\=]/g,"")}var x="",y,A,a,b,c,d,v,w=0;while(w<z.length){b=e.indexOf(z.charAt(w++));c=e.indexOf(z.charAt(w++));d=e.indexOf(z.charAt(w++));v=e.indexOf(z.charAt(w++));y=(b<<2)|(c>>4);A=((c&15)<<4)|(d>>2);a=((d&3)<<6)|v;x+=String.fromCharCode(y);if(d!=64){x+=String.fromCharCode(A)}if(v!=64){x+=String.fromCharCode(a)}}return g.decode(x)}}},this,["utf8"]);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var h=Date,k=h.prototype,p=h.CultureInfo,l=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)};k.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};k.setTimeToNow=function(){var a=new Date();this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};h.today=function(){return new Date().clearTime()};h.compare=function(a,b){if(isNaN(a)||isNaN(b)){throw new Error(a+" - "+b)}else{if(a instanceof Date&&b instanceof Date){return(a<b)?-1:(a>b)?1:0}else{throw new TypeError(a+" - "+b)}}};h.equals=function(a,b){return(a.compareTo(b)===0)};h.getDayNumberFromName=function(b){var c=p.dayNames,d=p.abbreviatedDayNames,e=p.shortestDayNames,f=b.toLowerCase();for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==f||d[a].toLowerCase()==f||e[a].toLowerCase()==f){return a}}return -1};h.getMonthNumberFromName=function(b){var d=p.monthNames,c=p.abbreviatedMonthNames,e=b.toLowerCase();for(var a=0;a<d.length;a++){if(d[a].toLowerCase()==e||c[a].toLowerCase()==e){return a}}return -1};h.isLeapYear=function(a){return((a%4===0&&a%100!==0)||a%400===0)};h.getDaysInMonth=function(b,a){return[31,(h.isLeapYear(b)?29:28),31,30,31,30,31,31,30,31,30,31][a]};h.getTimezoneAbbreviation=function(a){var b=p.timezones,c;for(var d=0;d<b.length;d++){if(b[d].offset===a){return b[d].name}}return null};h.getTimezoneOffset=function(d){var a=p.timezones,b;for(var c=0;c<a.length;c++){if(a[c].name===d.toUpperCase()){return a[c].offset}}return null};k.clone=function(){return new Date(this.getTime())};k.compareTo=function(a){return Date.compare(this,a)};k.equals=function(a){return Date.equals(this,a||new Date())};k.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};k.isAfter=function(a){return this.compareTo(a||new Date())===1};k.isBefore=function(a){return(this.compareTo(a||new Date())===-1)};k.isToday=function(){return this.isSameDay(new Date())};k.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())};k.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};k.addSeconds=function(a){return this.addMilliseconds(a*1000)};k.addMinutes=function(a){return this.addMilliseconds(a*60000)};k.addHours=function(a){return this.addMilliseconds(a*3600000)};k.addDays=function(a){this.setDate(this.getDate()+a);return this};k.addWeeks=function(a){return this.addDays(a*7)};k.addMonths=function(b){var a=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(a,h.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};k.addYears=function(a){return this.addMonths(a*12)};k.add=function(a){if(typeof a=="number"){this._orient=a;return this}var b=a;if(b.milliseconds){this.addMilliseconds(b.milliseconds)}if(b.seconds){this.addSeconds(b.seconds)}if(b.minutes){this.addMinutes(b.minutes)}if(b.hours){this.addHours(b.hours)}if(b.weeks){this.addWeeks(b.weeks)}if(b.months){this.addMonths(b.months)}if(b.years){this.addYears(b.years)}if(b.days){this.addDays(b.days)}return this};var o,m,q;k.getWeek=function(){var x,a,b,c,d,e,f,g,s,w;o=(!o)?this.getFullYear():o;m=(!m)?this.getMonth()+1:m;q=(!q)?this.getDate():q;if(m<=2){x=o-1;a=(x/4|0)-(x/100|0)+(x/400|0);b=((x-1)/4|0)-((x-1)/100|0)+((x-1)/400|0);s=a-b;d=0;e=q-1+(31*(m-1))}else{x=o;a=(x/4|0)-(x/100|0)+(x/400|0);b=((x-1)/4|0)-((x-1)/100|0)+((x-1)/400|0);s=a-b;d=s+1;e=q+((153*(m-3)+2)/5)+58+s}f=(x+a)%7;c=(e+f-d)%7;g=(e+3-c)|0;if(g<0){w=53-((f-s)/5|0)}else{if(g>364+s){w=1}else{w=(g/7|0)+1}}o=m=q=null;return w};k.getISOWeek=function(){o=this.getUTCFullYear();m=this.getUTCMonth()+1;q=this.getUTCDate();return l(this.getWeek())};k.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};h._validate=function(a,b,d,c){if(typeof a=="undefined"){return false}else{if(typeof a!="number"){throw new TypeError(a+" is not a Number.")}else{if(a<b||a>d){throw new RangeError(a+" is not a valid value for "+c+".")}}}return true};h.validateMillisecond=function(a){return h._validate(a,0,999,"millisecond")};h.validateSecond=function(a){return h._validate(a,0,59,"second")};h.validateMinute=function(a){return h._validate(a,0,59,"minute")};h.validateHour=function(a){return h._validate(a,0,23,"hour")};h.validateDay=function(b,c,a){return h._validate(b,1,h.getDaysInMonth(c,a),"day")};h.validateMonth=function(a){return h._validate(a,0,11,"month")};h.validateYear=function(a){return h._validate(a,0,9999,"year")};k.set=function(a){if(h.validateMillisecond(a.millisecond)){this.addMilliseconds(a.millisecond-this.getMilliseconds())}if(h.validateSecond(a.second)){this.addSeconds(a.second-this.getSeconds())}if(h.validateMinute(a.minute)){this.addMinutes(a.minute-this.getMinutes())}if(h.validateHour(a.hour)){this.addHours(a.hour-this.getHours())}if(h.validateMonth(a.month)){this.addMonths(a.month-this.getMonth())}if(h.validateYear(a.year)){this.addYears(a.year-this.getFullYear())}if(h.validateDay(a.day,this.getFullYear(),this.getMonth())){this.addDays(a.day-this.getDate())}if(a.timezone){this.setTimezone(a.timezone)}if(a.timezoneOffset){this.setTimezoneOffset(a.timezoneOffset)}if(a.week&&h._validate(a.week,0,53,"week")){this.setWeek(a.week)}return this};k.moveToFirstDayOfMonth=function(){return this.set({day:1})};k.moveToLastDayOfMonth=function(){return this.set({day:h.getDaysInMonth(this.getFullYear(),this.getMonth())})};k.moveToNthOccurrence=function(b,a){var c=0;if(a>0){c=a-1}else{if(a===-1){this.moveToLastDayOfMonth();if(this.getDay()!==b){this.moveToDayOfWeek(b,-1)}return this}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(b,+1).addWeeks(c)};k.moveToDayOfWeek=function(c,b){var a=(c-this.getDay()+7*(b||+1))%7;return this.addDays((a===0)?a+=7*(b||+1):a)};k.moveToMonth=function(a,c){var b=(a-this.getMonth()+12*(c||+1))%12;return this.addMonths((b===0)?b+=12*(c||+1):b)};k.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1};k.getTimezone=function(){return h.getTimezoneAbbreviation(this.getUTCOffset())};k.setTimezoneOffset=function(a){var c=this.getTimezoneOffset(),b=Number(a)*-6/10;return this.addMinutes(b-c)};k.setTimezone=function(a){return this.setTimezoneOffset(h.getTimezoneOffset(a))};k.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset())};k.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset())};k.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;if(a<0){b=(a-10000).toString();return b.charAt(0)+b.substr(2)}else{b=(a+10000).toString();return"+"+b.substr(1)}};k.getElapsed=function(a){return(a||new Date())-this};if(!k.toISOString){k.toISOString=function(){function a(b){return b<10?"0"+b:b}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}}k._toString=k.toString;k.toString=function(b){var d=this;if(b&&b.length==1){var a=p.formatPatterns;d.t=d.toString;switch(b){case"d":return d.t(a.shortDate);case"D":return d.t(a.longDate);case"F":return d.t(a.fullDateTime);case"m":return d.t(a.monthDay);case"r":return d.t(a.rfc1123);case"s":return d.t(a.sortableDateTime);case"t":return d.t(a.shortTime);case"T":return d.t(a.longTime);case"u":return d.t(a.universalSortableDateTime);case"y":return d.t(a.yearMonth)}}var c=function(e){switch(e*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return b?b.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if(e.charAt(0)==="\\"){return e.replace("\\","")}d.h=d.getHours;switch(e){case"hh":return l(d.h()<13?(d.h()===0?12:d.h()):(d.h()-12));case"h":return d.h()<13?(d.h()===0?12:d.h()):(d.h()-12);case"HH":return l(d.h());case"H":return d.h();case"mm":return l(d.getMinutes());case"m":return d.getMinutes();case"ss":return l(d.getSeconds());case"s":return d.getSeconds();case"yyyy":return l(d.getFullYear(),4);case"yy":return l(d.getFullYear());case"dddd":return p.dayNames[d.getDay()];case"ddd":return p.abbreviatedDayNames[d.getDay()];case"dd":return l(d.getDate());case"d":return d.getDate();case"MMMM":return p.monthNames[d.getMonth()];case"MMM":return p.abbreviatedMonthNames[d.getMonth()];case"MM":return l((d.getMonth()+1));case"M":return d.getMonth()+1;case"t":return d.h()<12?p.amDesignator.substring(0,1):p.pmDesignator.substring(0,1);case"tt":return d.h()<12?p.amDesignator:p.pmDesignator;case"S":return c(d.getDate());default:return e}}):this._toString()}}());(function(){var C=Date,N=C.prototype,B=C.CultureInfo,J=Number.prototype;N._orient=+1;N._nth=null;N._is=false;N._same=false;N._isSecond=false;J._dateElement="day";N.next=function(){this._orient=+1;return this};C.next=function(){return C.today().next()};N.last=N.prev=N.previous=function(){this._orient=-1;return this};C.last=C.prev=C.previous=function(){return C.today().last()};N.is=function(){this._is=true;return this};N.same=function(){this._same=true;this._isSecond=false;return this};N.today=function(){return this.same().day()};N.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun())}return false};N.at=function(a){return(typeof a==="string")?C.parse(this.toString("d")+" "+a):this.set(a)};J.fromNow=J.after=function(b){var a={};a[this._dateElement]=this;return((!b)?new Date():b.clone()).add(a)};J.ago=J.before=function(b){var a={};a[this._dateElement]=this*-1;return((!b)?new Date():b.clone()).add(a)};var P=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),M=("january february march april may june july august september october november december").split(/\s/),K=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),H=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),S=("final first second third fourth fifth").split(/\s/),k;N.toObject=function(){var a={};for(var b=0;b<K.length;b++){a[K[b].toLowerCase()]=this["get"+H[b]]()}return a};C.fromObject=function(a){a.week=null;return Date.today().set(a)};var l=function(a){return function(){if(this._is){this._is=false;return this.getDay()==a}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1)}this._isSecond=false;var c=this._nth;this._nth=null;var b=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(a,c);if(this>b){throw new RangeError(C.getDayName(a)+" does not occur "+c+" times in the month of "+C.getMonthName(b.getMonth())+" "+b.getFullYear()+".")}return this}return this.moveToDayOfWeek(a,this._orient)}};var O=function(a){return function(){var c=C.today(),b=a-c.getDay();if(a===0&&B.firstDayOfWeek===1&&c.getDay()!==0){b=b+7}return c.addDays(b)}};for(var D=0;D<P.length;D++){C[P[D].toUpperCase()]=C[P[D].toUpperCase().substring(0,3)]=D;C[P[D]]=C[P[D].substring(0,3)]=O(D);N[P[D]]=N[P[D].substring(0,3)]=l(D)}var I=function(a){return function(){if(this._is){this._is=false;return this.getMonth()===a}return this.moveToMonth(a,this._orient)}};var L=function(a){return function(){return C.today().set({month:a,day:1})}};for(var E=0;E<M.length;E++){C[M[E].toUpperCase()]=C[M[E].toUpperCase().substring(0,3)]=E;C[M[E]]=C[M[E].substring(0,3)]=L(E);N[M[E]]=N[M[E].substring(0,3)]=I(E)}var R=function(a){return function(){if(this._isSecond){this._isSecond=false;return this}if(this._same){this._same=this._is=false;var c=this.toObject(),d=(arguments[0]||new Date()).toObject(),e="",f=a.toLowerCase();for(var b=(K.length-1);b>-1;b--){e=K[b].toLowerCase();if(c[e]!=d[e]){return false}if(f==e){break}}return true}if(a.substring(a.length-1)!="s"){a+="s"}return this["add"+a](this._orient)}};var Q=function(a){return function(){this._dateElement=a;return this}};for(var F=0;F<K.length;F++){k=K[F].toLowerCase();N[k]=N[k+"s"]=R(K[F]);J[k]=J[k+"s"]=Q(k)}N._ss=R("Second");var T=function(a){return function(b){if(this._same){return this._ss(arguments[0])}if(b||b===0){return this.moveToNthOccurrence(b,a)}this._nth=a;if(a===2&&(b===undefined||b===null)){this._isSecond=true;return this.addSeconds(this._orient)}return this}};for(var G=0;G<S.length;G++){N[S[G]]=(G===0)?T(-1):T(G)}}());(function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var l=Date.Parsing;var t=l.Operators={rtoken:function(a){return function(c){var b=c.match(a);if(b){return([b[0],c.substring(b[0].length)])}else{throw new l.Exception(c)}}},token:function(a){return function(b){return t.rtoken(new RegExp("^s*"+b+"s*"))(b)}},stoken:function(a){return t.rtoken(new RegExp("^"+a))},until:function(a){return function(c){var b=[],d=null;while(c.length){try{d=a.call(this,c)}catch(e){b.push(d[0]);c=d[1];continue}break}return[b,c]}},many:function(a){return function(c){var d=[],b=null;while(c.length){try{b=a.call(this,c)}catch(e){return[d,c]}d.push(b[0]);c=b[1]}return[d,c]}},optional:function(a){return function(c){var b=null;try{b=a.call(this,c)}catch(d){return[null,c]}return[b[0],b[1]]}},not:function(a){return function(c){try{a.call(this,c)}catch(b){return[null,c]}throw new l.Exception(c)}},ignore:function(a){return a?function(c){var b=null;b=a.call(this,c);return[null,b[1]]}:null},product:function(){var b=arguments[0],a=Array.prototype.slice.call(arguments,1),d=[];for(var c=0;c<b.length;c++){d.push(t.each(b[c],a))}return d},cache:function(a){var c={},b=null;return function(e){try{b=c[e]=(c[e]||a.call(this,e))}catch(d){b=c[e]=d}if(b instanceof l.Exception){throw b}else{return b}}},any:function(){var a=arguments;return function(b){var e=null;for(var c=0;c<a.length;c++){if(a[c]==null){continue}try{e=(a[c].call(this,b))}catch(d){e=null}if(e){return e}}throw new l.Exception(b)}},each:function(){var a=arguments;return function(b){var d=[],f=null;for(var c=0;c<a.length;c++){if(a[c]==null){continue}try{f=(a[c].call(this,b))}catch(e){throw new l.Exception(b)}d.push(f[0]);b=f[1]}return[d,b]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,b,a){b=b||t.rtoken(/^\s*/);a=a||null;if(c.length==1){return c[0]}return function(g){var f=null,e=null;var B=[];for(var h=0;h<c.length;h++){try{f=c[h].call(this,g)}catch(d){break}B.push(f[0]);try{e=b.call(this,f[1])}catch(z){e=null;break}g=e[1]}if(!f){throw new l.Exception(g)}if(e){throw new l.Exception(e[1])}if(a){try{f=a.call(this,f[1])}catch(A){throw new l.Exception(f[1])}}return[B,(f?f[1]:g)]}},between:function(b,a,c){c=c||b;var d=t.each(t.ignore(b),a,t.ignore(c));return function(f){var e=d.call(this,f);return[[e[0][0],r[0][2]],e[1]]}},list:function(c,b,a){b=b||t.rtoken(/^\s*/);a=a||null;return(c instanceof Array?t.each(t.product(c.slice(0,-1),t.ignore(b)),c.slice(-1),t.ignore(a)):t.each(t.many(t.each(c,t.ignore(b))),px,t.ignore(a)))},set:function(c,b,a){b=b||t.rtoken(/^\s*/);a=a||null;return function(M){var h=null,K=null,L=null,J=null,I=[[],M],d=false;for(var G=0;G<c.length;G++){L=null;K=null;h=null;d=(c.length==1);try{h=c[G].call(this,M)}catch(f){continue}J=[[h[0]],h[1]];if(h[1].length>0&&!d){try{L=b.call(this,h[1])}catch(e){d=true}}else{d=true}if(!d&&L[1].length===0){d=true}if(!d){var F=[];for(var H=0;H<c.length;H++){if(G!=H){F.push(c[H])}}K=t.set(F,b).call(this,L[1]);if(K[0].length>0){J[0]=J[0].concat(K[0]);J[1]=K[1]}}if(J[1].length<I[1].length){I=J}if(I[1].length===0){break}}if(I[0].length===0){return I}if(a){try{L=a.call(this,I[1])}catch(g){throw new l.Exception(I[1])}I[1]=L[1]}return I}},forward:function(b,a){return function(c){return b[a].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,a){return function(c){var d=a.call(this,c);if(d[0].length<b){throw new l.Exception(c)}return d}}};var m=function(a){return function(){var c=null,d=[];if(arguments.length>1){c=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){c=arguments[0]}}if(c){for(var e=0,b=c.shift();e<b.length;e++){c.unshift(b[e]);d.push(a.apply(null,c));c.shift();return d}}else{return a.apply(null,arguments)}}};var o="optional not ignore cache".split(/\s/);for(var s=0;s<o.length;s++){t[o[s]]=m(t[o[s]])}var p=function(a){return function(){if(arguments[0] instanceof Array){return a.apply(null,arguments[0])}else{return a.apply(null,arguments)}}};var q="each any all".split(/\s/);for(var k=0;k<q.length;k++){t[q[k]]=p(t[q[k]])}}());(function(){var v=Date,g=v.prototype,u=v.CultureInfo;var t=function(c){var b=[];for(var a=0;a<c.length;a++){if(c[a] instanceof Array){b=b.concat(t(c[a]))}else{if(c[a]){b.push(c[a])}}}return b};v.Grammar={};v.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");if(b.length){this.timezoneOffset=Number(b)}else{this.timezone=a.toLowerCase()}}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=(a.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=((a.length>2)?b:(b+(((b+2000)<u.twoDigitYearMax)?2000:1900)))}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(b){b=(b instanceof Array)?b:[b];for(var c=0;c<b.length;c++){if(b[c]){b[c].call(this)}}var d=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=d.getDate()}if(!this.year){this.year=d.getFullYear()}if(!this.month&&this.month!==0){this.month=d.getMonth()}if(!this.day){this.day=1}if(!this.hour){this.hour=0}if(!this.minute){this.minute=0}if(!this.second){this.second=0}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.day>v.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var a=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){a.set({timezone:this.timezone})}else{if(this.timezoneOffset){a.set({timezoneOffset:this.timezoneOffset})}}return a},finish:function(f){f=(f instanceof Array)?t(f):[f];if(f.length===0){return null}for(var c=0;c<f.length;c++){if(typeof f[c]=="function"){f[c].call(this)}}var h=v.today();if(this.now&&!this.unit&&!this.operator){return new Date()}else{if(this.now){h=new Date()}}var b=!!(this.days&&this.days!==null||this.orient||this.operator);var a,d,e;e=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){h.setTimeToNow()}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;b=true}}if(!b&&this.weekday&&!this.day&&!this.days){var k=Date[this.weekday]();this.day=k.getDate();if(!this.month){this.month=k.getMonth()}this.year=k.getFullYear()}if(b&&this.weekday&&this.unit!="month"){this.unit="day";a=(v.getDayNumberFromName(this.weekday)-h.getDay());d=7;this.days=a?((a+(e*d))%d):(e*d)}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1}if(this.month&&!this.day&&this.value){h.set({day:this.value*1});if(!b){this.day=this.value*1}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;b=true}if(b&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";a=(this.month-h.getMonth());d=12;this.months=a?((a+(e*d))%d):(e*d);this.month=null}if(!this.unit){this.unit="day"}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*e}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}this[this.unit+"s"]=this.value*e}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.weekday&&!this.day&&!this.days){var k=Date[this.weekday]();this.day=k.getDate();if(k.getMonth()!==h.getMonth()){this.month=k.getMonth()}}if((this.month||this.month===0)&&!this.day){this.day=1}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value)}if(b&&this.timezone&&this.day&&this.days){this.day=this.days}return(b)?h.add(this):h.set(this)}};var s=v.Parsing.Operators,w=v.Grammar,p=v.Translator,y;w.datePartDelimiter=s.rtoken(/^([\s\-\.\,\/\x27]+)/);w.timePartDelimiter=s.stoken(":");w.whiteSpace=s.rtoken(/^\s*/);w.generalDelimiter=s.rtoken(/^(([\s\,]|at|@|on)+)/);var z={};w.ctoken=function(b){var c=z[b];if(!c){var a=u.regexPatterns;var e=b.split(/\s+/),f=[];for(var d=0;d<e.length;d++){f.push(s.replace(s.rtoken(a[e[d]]),e[d]))}c=z[b]=s.any.apply(null,f)}return c};w.ctoken2=function(a){return s.rtoken(u.regexPatterns[a])};w.h=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),p.hour));w.hh=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2])/),p.hour));w.H=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),p.hour));w.HH=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3])/),p.hour));w.m=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),p.minute));w.mm=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),p.minute));w.s=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),p.second));w.ss=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),p.second));w.hms=s.cache(s.sequence([w.H,w.m,w.s],w.timePartDelimiter));w.t=s.cache(s.process(w.ctoken2("shortMeridian"),p.meridian));w.tt=s.cache(s.process(w.ctoken2("longMeridian"),p.meridian));w.z=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),p.timezone));w.zz=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),p.timezone));w.zzz=s.cache(s.process(w.ctoken2("timezone"),p.timezone));w.timeSuffix=s.each(s.ignore(w.whiteSpace),s.set([w.tt,w.zzz]));w.time=s.each(s.optional(s.ignore(s.stoken("T"))),w.hms,w.timeSuffix);w.d=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1]|\d)/),s.optional(w.ctoken2("ordinalSuffix"))),p.day));w.dd=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1])/),s.optional(w.ctoken2("ordinalSuffix"))),p.day));w.ddd=w.dddd=s.cache(s.process(w.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));w.M=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d|\d)/),p.month));w.MM=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d)/),p.month));w.MMM=w.MMMM=s.cache(s.process(w.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),p.month));w.y=s.cache(s.process(s.rtoken(/^(\d\d?)/),p.year));w.yy=s.cache(s.process(s.rtoken(/^(\d\d)/),p.year));w.yyy=s.cache(s.process(s.rtoken(/^(\d\d?\d?\d?)/),p.year));w.yyyy=s.cache(s.process(s.rtoken(/^(\d\d\d\d)/),p.year));y=function(){return s.each(s.any.apply(null,arguments),s.not(w.ctoken2("timeContext")))};w.day=y(w.d,w.dd);w.month=y(w.M,w.MMM);w.year=y(w.yyyy,w.yy);w.orientation=s.process(w.ctoken("past future"),function(a){return function(){this.orient=a}});w.operator=s.process(w.ctoken("add subtract"),function(a){return function(){this.operator=a}});w.rday=s.process(w.ctoken("yesterday tomorrow today now"),p.rday);w.unit=s.process(w.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});w.value=s.process(s.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});w.expression=s.set([w.rday,w.operator,w.value,w.unit,w.orientation,w.ddd,w.MMM]);y=function(){return s.set(arguments,w.datePartDelimiter)};w.mdy=y(w.ddd,w.month,w.day,w.year);w.ymd=y(w.ddd,w.year,w.month,w.day);w.dmy=y(w.ddd,w.day,w.month,w.year);w.date=function(a){return((w[u.dateElementOrder]||w.mdy).call(this,a))};w.format=s.process(s.many(s.any(s.process(s.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(w[a]){return w[a]}else{throw v.Parsing.Exception(a)}}),s.process(s.rtoken(/^[^dMyhHmstz]+/),function(a){return s.ignore(s.stoken(a))}))),function(a){return s.process(s.each.apply(null,a),p.finishExact)});var q={};var x=function(a){return q[a]=(q[a]||w.format(a)[0])};w.formats=function(c){if(c instanceof Array){var b=[];for(var a=0;a<c.length;a++){b.push(x(c[a]))}return s.any.apply(null,b)}else{return x(c)}};w._formats=w.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);w._start=s.process(s.set([w.date,w.time,w.expression],w.generalDelimiter,w.whiteSpace),p.finish);w.start=function(a){try{var c=w._formats.call({},a);if(c[1].length===0){return c}}catch(b){}return w._start.call({},a)};v._parse=v.parse;v.parse=function(a){var c=null;if(!a){return null}if(a instanceof Date){return a}try{c=v.Grammar.start.call({},a.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(b){return null}return((c[1].length===0)?c[0]:null)};v.getParseFunction=function(b){var a=v.Grammar.formats(b);return function(e){var d=null;try{d=a.call({},e)}catch(c){return null}return((d[1].length===0)?d[0]:null)}};v.parseExact=function(a,b){return v.getParseFunction(b)(a)}}());(function(){var l=Date,f=l.prototype,k=l.CultureInfo,g=[],h=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)};l.normalizeFormat=function(a){g=[];var b=new Date().$format(a);return g.join("")};l.strftime=function(a,b){return new Date(b*1000).$format(a)};l.strtotime=function(b){var a=l.parse(b);a.addMinutes(a.getTimezoneOffset()*-1);return Math.round(l.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())/1000)};f.$format=function(b){var d=this,a,c=function(e){g.push(e);return d.toString(e)};return b?b.replace(/(%|\\)?.|%%/g,function(e){if(e.charAt(0)==="\\"||e.substring(0,2)==="%%"){return e.replace("\\","").replace("%%","%")}switch(e){case"d":case"%d":return c("dd");case"D":case"%a":return c("ddd");case"j":case"%e":return c("d");case"l":case"%A":return c("dddd");case"N":case"%u":return d.getDay()+1;case"S":return c("S");case"w":case"%w":return d.getDay();case"z":return d.getOrdinalNumber();case"%j":return h(d.getOrdinalNumber(),3);case"%U":var m=d.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),s=d.clone().addDays(1).moveToDayOfWeek(0,-1);return(s<m)?"00":h((s.getOrdinalNumber()-m.getOrdinalNumber())/7+1);case"W":case"%V":return d.getISOWeek();case"%W":return h(d.getWeek());case"F":case"%B":return c("MMMM");case"m":case"%m":return c("MM");case"M":case"%b":case"%h":return c("MMM");case"n":return c("M");case"t":return l.getDaysInMonth(d.getFullYear(),d.getMonth());case"L":return(l.isLeapYear(d.getFullYear()))?1:0;case"o":case"%G":return d.setWeek(d.getISOWeek()).toString("yyyy");case"%g":return d.$format("%G").slice(-2);case"Y":case"%Y":return c("yyyy");case"y":case"%y":return c("yy");case"a":case"%p":return c("tt").toLowerCase();case"A":return c("tt").toUpperCase();case"g":case"%I":return c("h");case"G":return c("H");case"h":return c("hh");case"H":case"%H":return c("HH");case"i":case"%M":return c("mm");case"s":case"%S":return c("ss");case"u":return h(d.getMilliseconds(),3);case"I":return(d.isDaylightSavingTime())?1:0;case"O":return d.getUTCOffset();case"P":a=d.getUTCOffset();return a.substring(0,a.length-2)+":"+a.substring(a.length-2);case"e":case"T":case"%z":case"%Z":return d.getTimezone();case"Z":return d.getTimezoneOffset()*-60;case"B":var t=new Date();return Math.floor(((t.getHours()*3600)+(t.getMinutes()*60)+t.getSeconds()+(t.getTimezoneOffset()+60)*60)/86.4);case"c":return d.toISOString().replace(/\"/g,"");case"U":return l.strtotime("now");case"%c":return c("d")+" "+c("t");case"%C":return Math.floor(d.getFullYear()/100+1);case"%D":return c("MM/dd/yy");case"%n":return"\\n";case"%t":return"\\t";case"%r":return c("hh:mm tt");case"%R":return c("H:mm");case"%T":return c("H:mm:ss");case"%x":return c("d");case"%X":return c("t");default:g.push(e);return e}}):this._toString()};if(!f.format){f.format=f.$format}}());var QRCode=function(){var u=function(p,o){var a=236;var b=17;var T=p;var R=z[o];var h=null;var g=0;var t=null;var P=new Array();var e={};var m=function(K,L){g=T*4+17;h=function(M){var O=new Array(M);for(var N=0;N<M;N+=1){O[N]=new Array(M);for(var V=0;V<M;V+=1){O[N][V]=null}}return O}(g);Q(0,0);Q(g-7,0);Q(0,g-7);s();q();c(K,L);if(T>=7){S(K)}if(t==null){t=k(T,R,P)}l(t,L)};var Q=function(L,N){for(var M=-1;M<=7;M+=1){if(L+M<=-1||g<=L+M){continue}for(var K=-1;K<=7;K+=1){if(N+K<=-1||g<=N+K){continue}if((0<=M&&M<=6&&(K==0||K==6))||(0<=K&&K<=6&&(M==0||M==6))||(2<=M&&M<=4&&2<=K&&K<=4)){h[L+M][N+K]=true}else{h[L+M][N+K]=false}}}};var f=function(){var K=0;var L=0;for(var M=0;M<8;M+=1){m(true,M);var N=A.getLostPoint(e);if(M==0||K>N){K=N;L=M}}return L};var q=function(){for(var L=8;L<g-8;L+=1){if(h[L][6]!=null){continue}h[L][6]=(L%2==0)}for(var K=8;K<g-8;K+=1){if(h[6][K]!=null){continue}h[6][K]=(K%2==0)}};var s=function(){var K=A.getPatternPosition(T);for(var O=0;O<K.length;O+=1){for(var W=0;W<K.length;W+=1){var M=K[O];var X=K[W];if(h[M][X]!=null){continue}for(var N=-2;N<=2;N+=1){for(var L=-2;L<=2;L+=1){if(N==-2||N==2||L==-2||L==2||(N==0&&L==0)){h[M+N][X+L]=true}else{h[M+N][X+L]=false}}}}}};var S=function(K){var L=A.getBCHTypeNumber(T);for(var M=0;M<18;M+=1){var N=(!K&&((L>>M)&1)==1);h[Math.floor(M/3)][M%3+g-8-3]=N}for(var M=0;M<18;M+=1){var N=(!K&&((L>>M)&1)==1);h[M%3+g-8-3][Math.floor(M/3)]=N}};var c=function(K,L){var M=(R<<3)|L;var N=A.getBCHTypeInfo(M);for(var O=0;O<15;O+=1){var V=(!K&&((N>>O)&1)==1);if(O<6){h[O][8]=V}else{if(O<8){h[O+1][8]=V}else{h[g-15+O][8]=V}}}for(var O=0;O<15;O+=1){var V=(!K&&((N>>O)&1)==1);if(O<8){h[8][g-O-1]=V}else{if(O<9){h[8][15-O-1+1]=V}else{h[8][15-O-1]=V}}}h[g-8][8]=(!K)};var l=function(aa,ae){var ac=-1;var K=g-1;var ab=7;var af=0;var M=A.getMaskFunction(ae);for(var ad=g-1;ad>0;ad-=2){if(ad==6){ad-=1}while(true){for(var N=0;N<2;N+=1){if(h[K][ad-N]==null){var O=false;if(af<aa.length){O=(((aa[af]>>>ab)&1)==1)}var L=M(K,ad-N);if(L){O=!O}h[K][ad-N]=O;ab-=1;if(ab==-1){af+=1;ab=7}}}K+=ac;if(K<0||g<=K){K-=ac;ac=-ac;break}}}};var d=function(K,ar){var ak=0;var ao=0;var aq=0;var al=new Array(ar.length);var ah=new Array(ar.length);for(var M=0;M<ar.length;M+=1){var L=ar[M].dataCount;var am=ar[M].totalCount-L;ao=Math.max(ao,L);aq=Math.max(aq,am);al[M]=new Array(L);for(var au=0;au<al[M].length;au+=1){al[M][au]=255&K.getBuffer()[au+ak]}ak+=L;var O=A.getErrorCorrectPolynomial(am);var ap=D(al[M],O.getLength()-1);var aj=ap.mod(O);ah[M]=new Array(O.getLength()-1);for(var au=0;au<ah[M].length;au+=1){var N=au+aj.getLength()-ah[M].length;ah[M][au]=(N>=0)?aj.get(N):0}}var at=0;for(var au=0;au<ar.length;au+=1){at+=ar[au].totalCount}var an=new Array(at);var ai=0;for(var au=0;au<ao;au+=1){for(var M=0;M<ar.length;M+=1){if(au<al[M].length){an[ai]=al[M][au];ai+=1}}}for(var au=0;au<aq;au+=1){for(var M=0;M<ar.length;M+=1){if(au<ah[M].length){an[ai]=ah[M][au];ai+=1}}}return an};var k=function(K,L,O){var Y=B.getRSBlocks(K,L);var Z=C();for(var X=0;X<O.length;X+=1){var M=O[X];Z.put(M.getMode(),4);Z.put(M.getLength(),A.getLengthInBits(M.getMode(),K));M.write(Z)}var N=0;for(var X=0;X<Y.length;X+=1){N+=Y[X].dataCount}if(Z.getLengthInBits()>N*8){throw new Error("code length overflow. ("+Z.getLengthInBits()+">"+N*8+")")}if(Z.getLengthInBits()+4<=N*8){Z.put(0,4)}while(Z.getLengthInBits()%8!=0){Z.putBit(false)}while(true){if(Z.getLengthInBits()>=N*8){break}Z.put(a,8);if(Z.getLengthInBits()>=N*8){break}Z.put(b,8)}return d(Z,Y)};e.addData=function(K){var L=v(K);P.push(L);t=null};e.isDark=function(K,L){if(K<0||g<=K||L<0||g<=L){throw new Error(K+","+L)}return h[K][L]};e.getModuleCount=function(){return g};e.make=function(){m(false,f())};e.createTableTag=function(K,M){K=K||2;M=(typeof M=="undefined")?K*4:M;var O="";O+='<table style="';O+=" border-width: 0px; border-style: none;";O+=" border-collapse: collapse;";O+=" padding: 0px; margin: "+M+"px;";O+='">';O+="<tbody>";for(var N=0;N<e.getModuleCount();N+=1){O+="<tr>";for(var L=0;L<e.getModuleCount();L+=1){O+='<td style="';O+=" border-width: 0px; border-style: none;";O+=" border-collapse: collapse;";O+=" padding: 0px; margin: 0px;";O+=" width: "+K+"px;";O+=" height: "+K+"px;";O+=" background-color: ";O+=e.isDark(N,L)?"#000000":"#ffffff";O+=";";O+='"/>'}O+="</tr>"}O+="</tbody>";O+="</table>";return O};e.createImgTag=function(K,L){K=K||2;L=(typeof L=="undefined")?K*4:L;var M=e.getModuleCount()*K+L*2;var N=L;var O=M-L;return E(M,M,function(aa,ab){if(N<=aa&&aa<O&&N<=ab&&ab<O){var Y=Math.floor((aa-N)/K);var Z=Math.floor((ab-N)/K);return e.isDark(Z,Y)?0:1}else{return 1}})};e.createBase64=function(K,L){K=K||2;L=(typeof L=="undefined")?K*4:L;var M=e.getModuleCount()*K+L*2;var N=L;var O=M-L;return[J(M,M,function(aa,ab){if(N<=aa&&aa<O&&N<=ab&&ab<O){var Y=Math.floor((aa-N)/K);var Z=Math.floor((ab-N)/K);return e.isDark(Z,Y)?0:1}else{return 1}}),M]};return e};u.stringToBytes=function(b){var d=new Array();for(var c=0;c<b.length;c+=1){var a=b.charCodeAt(c);d.push(a&255)}return d};u.createStringToBytes=function(a,b){var c=function(){var m=H(a);var l=function(){var s=m.read();if(s==-1){throw new Error()}return s};var h=0;var g={};while(true){var p=m.read();if(p==-1){break}var q=l();var e=l();var f=l();var k=String.fromCharCode((p<<8)|q);var o=(e<<8)|f;g[k]=o;h+=1}if(h!=b){throw new Error(h+" != "+b)}return g}();var d="?".charCodeAt(0);return function(k){var g=new Array();for(var e=0;e<k.length;e+=1){var f=k.charCodeAt(e);if(f<128){g.push(f)}else{var h=c[k.charAt(e)];if(typeof h=="number"){if((h&255)==h){g.push(h)}else{g.push(h>>>8);g.push(h&255)}}else{g.push(d)}}}return g}};var y={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var z={L:1,M:0,Q:3,H:2};var F={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var A=function(){var a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var d=(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0);var e=(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0);var b=(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1);var f={};var c=function(g){var h=0;while(g!=0){h+=1;g>>>=1}return h};f.getBCHTypeInfo=function(g){var h=g<<10;while(c(h)-c(d)>=0){h^=(d<<(c(h)-c(d)))}return((g<<10)|h)^b};f.getBCHTypeNumber=function(g){var h=g<<12;while(c(h)-c(e)>=0){h^=(e<<(c(h)-c(e)))}return(g<<12)|h};f.getPatternPosition=function(g){return a[g-1]};f.getMaskFunction=function(g){switch(g){case F.PATTERN000:return function(h,k){return(h+k)%2==0};case F.PATTERN001:return function(h,k){return h%2==0};case F.PATTERN010:return function(h,k){return k%3==0};case F.PATTERN011:return function(h,k){return(h+k)%3==0};case F.PATTERN100:return function(h,k){return(Math.floor(h/2)+Math.floor(k/3))%2==0};case F.PATTERN101:return function(h,k){return(h*k)%2+(h*k)%3==0};case F.PATTERN110:return function(h,k){return((h*k)%2+(h*k)%3)%2==0};case F.PATTERN111:return function(h,k){return((h*k)%3+(h+k)%2)%2==0};default:throw new Error("bad maskPattern:"+g)}};f.getErrorCorrectPolynomial=function(k){var g=D([1],0);for(var h=0;h<k;h+=1){g=g.multiply(D([1,I.gexp(h)],0))}return g};f.getLengthInBits=function(h,g){if(1<=g&&g<10){switch(h){case y.MODE_NUMBER:return 10;case y.MODE_ALPHA_NUM:return 9;case y.MODE_8BIT_BYTE:return 8;case y.MODE_KANJI:return 8;default:throw new Error("mode:"+h)}}else{if(g<27){switch(h){case y.MODE_NUMBER:return 12;case y.MODE_ALPHA_NUM:return 11;case y.MODE_8BIT_BYTE:return 16;case y.MODE_KANJI:return 10;default:throw new Error("mode:"+h)}}else{if(g<41){switch(h){case y.MODE_NUMBER:return 14;case y.MODE_ALPHA_NUM:return 13;case y.MODE_8BIT_BYTE:return 16;case y.MODE_KANJI:return 12;default:throw new Error("mode:"+h)}}else{throw new Error("type:"+g)}}}};f.getLostPoint=function(p){var h=p.getModuleCount();var g=0;for(var m=0;m<h;m+=1){for(var k=0;k<h;k+=1){var q=0;var s=p.isDark(m,k);for(var l=-1;l<=1;l+=1){if(m+l<0||h<=m+l){continue}for(var t=-1;t<=1;t+=1){if(k+t<0||h<=k+t){continue}if(l==0&&t==0){continue}if(s==p.isDark(m+l,k+t)){q+=1}}}if(q>5){g+=(3+q-5)}}}for(var m=0;m<h-1;m+=1){for(var k=0;k<h-1;k+=1){var N=0;if(p.isDark(m,k)){N+=1}if(p.isDark(m+1,k)){N+=1}if(p.isDark(m,k+1)){N+=1}if(p.isDark(m+1,k+1)){N+=1}if(N==0||N==4){g+=3}}}for(var m=0;m<h;m+=1){for(var k=0;k<h-6;k+=1){if(p.isDark(m,k)&&!p.isDark(m,k+1)&&p.isDark(m,k+2)&&p.isDark(m,k+3)&&p.isDark(m,k+4)&&!p.isDark(m,k+5)&&p.isDark(m,k+6)){g+=40}}}for(var k=0;k<h;k+=1){for(var m=0;m<h-6;m+=1){if(p.isDark(m,k)&&!p.isDark(m+1,k)&&p.isDark(m+2,k)&&p.isDark(m+3,k)&&p.isDark(m+4,k)&&!p.isDark(m+5,k)&&p.isDark(m+6,k)){g+=40}}}var o=0;for(var k=0;k<h;k+=1){for(var m=0;m<h;m+=1){if(p.isDark(m,k)){o+=1}}}var M=Math.abs(100*o/h/h-50)/5;g+=M*10;return g};return f}();var I=function(){var d=new Array(256);var b=new Array(256);for(var c=0;c<8;c+=1){d[c]=1<<c}for(var c=8;c<256;c+=1){d[c]=d[c-4]^d[c-5]^d[c-6]^d[c-8]}for(var c=0;c<255;c+=1){b[d[c]]=c}var a={};a.glog=function(e){if(e<1){throw new Error("glog("+e+")")}return b[e]};a.gexp=function(e){while(e<0){e+=255}while(e>=256){e-=255}return d[e]};return a}();function D(c,d){if(typeof c.length=="undefined"){throw new Error(c.length+"/"+d)}var b=function(){var e=0;while(e<c.length&&c[e]==0){e+=1}var f=new Array(c.length-e+d);for(var g=0;g<c.length-e;g+=1){f[g]=c[g+e]}return f}();var a={};a.get=function(e){return b[e]};a.getLength=function(){return b.length};a.multiply=function(h){var f=new Array(a.getLength()+h.getLength()-1);for(var e=0;e<a.getLength();e+=1){for(var g=0;g<h.getLength();g+=1){f[e+g]^=I.gexp(I.glog(a.get(e))+I.glog(h.get(g)))}}return D(f,0)};a.mod=function(h){if(a.getLength()-h.getLength()<0){return a}var e=I.glog(a.get(0))-I.glog(h.get(0));var g=new Array(a.getLength());for(var f=0;f<a.getLength();f+=1){g[f]=a.get(f)}for(var f=0;f<h.getLength();f+=1){g[f]^=I.gexp(I.glog(h.get(f))+e)}return D(g,0).mod(h)};return a}var B=function(){var c=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];var d=function(g,f){var e={};e.totalCount=g;e.dataCount=f;return e};var a={};var b=function(e,f){switch(f){case z.L:return c[(e-1)*4+0];case z.M:return c[(e-1)*4+1];case z.Q:return c[(e-1)*4+2];case z.H:return c[(e-1)*4+3];default:return undefined}};a.getRSBlocks=function(h,o){var k=b(h,o);if(typeof k=="undefined"){throw new Error("bad rs block @ typeNumber:"+h+"/errorCorrectLevel:"+o)}var l=k.length/3;var q=new Array();for(var f=0;f<l;f+=1){var e=k[f*3+0];var m=k[f*3+1];var p=k[f*3+2];for(var g=0;g<e;g+=1){q.push(d(m,p))}}return q};return a}();var C=function(){var c=new Array();var a=0;var b={};b.getBuffer=function(){return c};b.get=function(d){var e=Math.floor(d/8);return((c[e]>>>(7-d%8))&1)==1};b.put=function(d,e){for(var f=0;f<e;f+=1){b.putBit(((d>>>(e-f-1))&1)==1)}};b.getLengthInBits=function(){return a};b.putBit=function(e){var d=Math.floor(a/8);if(c.length<=d){c.push(0)}if(e){c[d]|=(128>>>(a%8))}a+=1};return b};var v=function(a){var b=y.MODE_8BIT_BYTE;var d=a;var c=u.stringToBytes(a);var e={};e.getMode=function(){return b};e.getLength=function(f){return c.length};e.write=function(g){for(var f=0;f<c.length;f+=1){g.put(c[f],8)}};return e};var x=function(){var b=new Array();var a={};a.writeByte=function(c){b.push(c&255)};a.writeShort=function(c){a.writeByte(c);a.writeByte(c>>>8)};a.writeBytes=function(c,e,d){e=e||0;d=d||c.length;for(var f=0;f<d;f+=1){a.writeByte(c[f+e])}};a.writeString=function(c){for(var d=0;d<c.length;d+=1){a.writeByte(c.charCodeAt(d))}};a.toByteArray=function(){return b};a.toString=function(){var c="";c+="[";for(var d=0;d<b.length;d+=1){if(d>0){c+=","}c+=b[d]}c+="]";return c};return a};var G=function(){var d=0;var g=0;var b=0;var e="";var f={};var a=function(h){e+=String.fromCharCode(c(h&63))};var c=function(h){if(h<0){}else{if(h<26){return 65+h}else{if(h<52){return 97+(h-26)}else{if(h<62){return 48+(h-52)}else{if(h==62){return 43}else{if(h==63){return 47}}}}}}throw new Error("n:"+h)};f.writeByte=function(h){d=(d<<8)|(h&255);g+=8;b+=1;while(g>=6){a(d>>>(g-6));g-=6}};f.flush=function(){if(g>0){a(d<<(6-g));d=0;g=0}if(b%3!=0){var h=3-b%3;for(var k=0;k<h;k+=1){e+="="}}};f.toString=function(){return e};return f};var H=function(g){var b=g;var e=0;var d=0;var c=0;var f={};f.read=function(){while(c<8){if(e>=b.length){if(c==0){return -1}throw new Error("unexpected end of file./"+c)}var h=b.charAt(e);e+=1;if(h=="="){c=0;return -1}else{if(h.match(/^\s$/)){continue}}d=(d<<6)|a(h.charCodeAt(0));c+=6}var k=(d>>>(c-8))&255;c-=8;return k};var a=function(h){if(65<=h&&h<=90){return h-65}else{if(97<=h&&h<=122){return h-97+26}else{if(48<=h&&h<=57){return h-48+52}else{if(h==43){return 62}else{if(h==47){return 63}else{throw new Error("c:"+h)}}}}}};return f};var w=function(k,b){var f=k;var e=b;var h=new Array(k*b);var d={};d.setPixel=function(o,l,m){h[l*f+o]=m};d.write=function(o){o.writeString("GIF87a");o.writeShort(f);o.writeShort(e);o.writeByte(128);o.writeByte(0);o.writeByte(0);o.writeByte(0);o.writeByte(0);o.writeByte(0);o.writeByte(255);o.writeByte(255);o.writeByte(255);o.writeString(",");o.writeShort(0);o.writeShort(0);o.writeShort(f);o.writeShort(e);o.writeByte(0);var m=2;var p=g(m);o.writeByte(m);var l=0;while(p.length-l>255){o.writeByte(255);o.writeBytes(p,l,255);l+=255}o.writeByte(p.length-l);o.writeBytes(p,l,p.length-l);o.writeByte(0);o.writeString(";")};var c=function(p){var o=p;var m=0;var q=0;var l={};l.write=function(s,t){if((s>>>t)!=0){throw new Error("length over")}while(m+t>=8){o.writeByte(255&((s<<m)|q));t-=(8-m);s>>>=(8-m);q=0;m=0}q=(s<<m)|q;m=m+t};l.flush=function(){if(m>0){o.writeByte(q)}};return l};var g=function(R){var t=1<<R;var P=(1<<R)+1;var q=R+1;var o=a();for(var O=0;O<t;O+=1){o.add(String.fromCharCode(O))}o.add(String.fromCharCode(t));o.add(String.fromCharCode(P));var Q=x();var l=c(Q);l.write(t,q);var p=0;var m=String.fromCharCode(h[p]);p+=1;while(p<h.length){var s=String.fromCharCode(h[p]);p+=1;if(o.contains(m+s)){m=m+s}else{l.write(o.indexOf(m),q);if(o.size()<4095){if(o.size()==(1<<q)){q+=1}o.add(m+s)}m=s}}l.write(o.indexOf(m),q);l.write(P,q);l.flush();return Q.toByteArray()};var a=function(){var m={};var o=0;var l={};l.add=function(p){if(l.contains(p)){throw new Error("dup key:"+p)}m[p]=o;o+=1};l.size=function(){return o};l.indexOf=function(p){return m[p]};l.contains=function(p){return typeof m[p]!="undefined"};return l};return d};var J=function(k,l,c){var e=w(k,l);for(var b=0;b<l;b+=1){for(var m=0;m<k;m+=1){e.setPixel(m,b,c(m,b))}}var a=x();e.write(a);var d=G();var h=a.toByteArray();for(var f=0;f<h.length;f+=1){d.writeByte(h[f])}d.flush();var g="";g+="data:image/gif;base64,";g+=d;return g};var E=function(a,d,e,f){var c=J(a,d,e);var b="";b+="<img";b+='\u0020src="';b+=c;b+='"';b+='\u0020width="';b+=a;b+='"';b+='\u0020height="';b+=d;b+='"';if(f){b+='\u0020alt="';b+=f;b+='"'}b+="/>";return b};return u}();var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var b=0;b<4096;b++){this.encLookup[b]=this.chars[b>>6]+this.chars[b&63]}},Encode:function(m){var k=m.length;var l="";var p=0;while(k>2){n=(m[p]<<16)|(m[p+1]<<8)|m[p+2];l+=this.encLookup[n>>12]+this.encLookup[n&4095];k-=3;p+=3}if(k>0){var o=(m[p]&252)>>2;var q=(m[p]&3)<<4;if(k>1){q|=(m[++p]&240)>>4}l+=this.chars[o];l+=this.chars[q];if(k==2){var h=(m[p++]&15)<<2;h|=(m[p]&192)>>6;l+=this.chars[h]}if(k==1){l+="="}l+="="}return l}};FastBase64.Init();var RIFFWAVE=function(g){g=g||{};this.data=[];this.wav=[];this.dataURI="";this.header=Ext.apply({chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8000,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0},g.header);function e(a){return[a&255,(a>>8)&255,(a>>16)&255,(a>>24)&255]}function f(a){return[a&255,(a>>8)&255]}function h(a){var b=[];var d=0;var l=a.length;for(var c=0;c<l;c++){b[d++]=a[c]&255;b[d++]=(a[c]>>8)&255}return b}this.Make=function(a){if((g.data instanceof Array)||((typeof(Int16Array)!="undefined")&&(g.data instanceof Int16Array))){this.data=a;this.header.blockAlign=(this.header.numChannels*this.header.bitsPerSample)>>3;this.header.byteRate=this.header.blockAlign*this.header.sampleRate;this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3);this.header.chunkSize=36+this.header.subChunk2Size}console.debug("RIFFWAVE - "+Ext.encode(this.header))};this.MakeData=function(a){this.wav=this.header.chunkId.concat(e(this.header.chunkSize),this.header.format,this.header.subChunk1Id,e(this.header.subChunk1Size),f(this.header.audioFormat),f(this.header.numChannels),e(this.header.sampleRate),e(this.header.byteRate),f(this.header.blockAlign),f(this.header.bitsPerSample),this.header.subChunk2Id,e(this.header.subChunk2Size),(this.header.bitsPerSample==16)?h(this.data):this.data);this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav)};if((g.data instanceof Array)||((typeof(Int16Array)!="undefined")&&(g.data instanceof Int16Array))){this.Make(g.data);if(!g.headerOnly){this.MakeData(g.data)}}};window.plugins=window.plugins||{};if(window.cordova||window.Cordova||window.PhoneGap){(function(b){window.plugins.proximityID={init:function(d,a){b.exec(function(){console.log("ProximityIDPlugin Initialized")},function(c){console.log("Failed to initialize the ProximityIDPlugin! Reason["+c+"]")},"ProximityIDPlugin","init",[d+"",a+""])},preLoadSend:function(d,a){Ext.defer(function(){b.exec(d,a,"ProximityIDPlugin","preLoadIdentity",[])},0.25*1000,this)},send:function(d,a){b.exec(d,a,"ProximityIDPlugin","sendIdentity",[])},scan:function(k,o,l,m,h,a){b.exec(k,o,"ProximityIDPlugin","scanIdentity",[l,m,h,a])},stop:function(){b.exec(function(){console.log("Stopped ProximityIDPlugin")},function(a){console.log("Failed to stop the ProximityIDPlugin "+a)},"ProximityIDPlugin","stop",[])},setVolume:function(a){b.exec(Ext.emptyFn,Ext.emptyFn,"ProximityIDPlugin","setVolume",[a])}};b.addConstructor(function(){})})(window.cordova||window.Cordova||window.PhoneGap)}else{_filesAssetCount++;window.plugins.proximityID={loFreq:17000,hiFreq:20000,FREQ_GAP:500,NUM_SIGNALS:3,SHORT_MAX:parseInt(65535/2),sampleRate:44100,duration:1*44100,bufSize:16*1024,bitRate:128,bw:0,sampleConfig:null,freqs:null,context:null,gainNode:null,oscillators:null,audio:null,bytesEncoded:null,init:function(d,e){var f=this;f.bw=(f.hiFreq-f.loFreq)/f.NUM_SIGNALS;Genesis.constants.s_vol=d*100*((Ext.os.is("Android"))?0.8:1);Genesis.constants.r_vol=e*100*0.8;console.debug("Initialized Proximity API")},generateData:function(m,p){var q=this,c,l,k=Genesis.constants.s_vol/100,o=new Float32Array(p);l=[];for(c=0;c<q.freqs.length;c++){l[c]=2*Math.PI*q.freqs[c]/q.sampleRate}for(c=0;c<p;c++){for(j=0;j<q.freqs.length;j++){o[c]+=Math.sin(l[j]*(c+m))}o[c]=k*o[c]/q.freqs.length}return o},createAudioLoop:function(){var b=this;b.audio.addEventListener("ended",function(){this.currentTime=0;this.play()},false)},webAudioFnHandler:function(e){var f=this;if(!f.context){f.context=new webkitAudioContext();f.gainNode=f.context.createGainNode();f.gainNode.connect(f.context.destination)}f.getFreqs();f.gainNode.gain.value=e;f.oscillators=[];for(i=0;i<f.freqs.length;i++){var d=f.oscillators[i]=f.context.createOscillator();d.type=0;d.frequency.value=f.freqs[i];d.connect(f.gainNode)}console.debug("OSC Gain : "+e)},audioFnHandler:function(t,l,o){var q=this,p=t.data=[];q.getFreqs();for(var s=0;s<(q.duration);s++){var m=0;for(var k=0;k<q.freqs.length;k++){m+=Math.sin(2*Math.PI*q.freqs[k]*s/q.sampleRate)}m/=q.freqs.length;m=Math.round(l*((q.SHORT_MAX+1)+(m*q.SHORT_MAX)));p[s]=m}q.audio=new Audio(new RIFFWAVE(t).dataURI);q.createAudioLoop();console.debug("WAV Gain : "+l);o()},mp3WorkerFnHandler:function(b){switch(b.data.cmd){case"init":me._duration=me.duration;me.bytesEncoded=Math.min(me._duration,me.bufSize);delete me.sampleConfig.data;_codec.postMessage({cmd:"encode",buf:me.generateData(0,me.bytesEncoded)});break;case"data":if(!me.sampleConfig.data){me.sampleConfig.data=String.fromCharCode.apply(null,b.data.buf)}else{me.sampleConfig.data+=String.fromCharCode.apply(null,b.data.buf)}me._duration-=me.bytesEncoded;if(me._duration>0){me.bytesEncoded=Math.min(me._duration,me.bufSize);_codec.postMessage({cmd:"encode",buf:me.generateData(me.duration-me._duration,me.bytesEncoded)})}else{_codec.postMessage({cmd:"finish"})}break;case"end":me.sampleConfig.data+=String.fromCharCode.apply(null,b.data.buf);me.sampleConfig.data="data:audio/mpeg;base64,"+base64.encode(me.sampleConfig.data);me.audio=new Audio(me.sampleConfig.data);me.createAudioLoop();console.debug("MP3 Gain : "+Genesis.constants.s_vol/100);me.sampleConfig.callback();delete me.sampleConfig}},mp3FnHandler:function(e,f,g){var h=this;if(!_codec.onmessage||(_codec.onmessage==Ext.emptyFn)){_codec.onmessage=Ext.bind(h.mp3WorkerFnHandler,h)}h.getFreqs();e.callback=g;h.sampleConfig=e;_codec.postMessage({cmd:"init",config:{samplerate:h.sampleRate,bitrate:h.bitRate,mode:3,channels:1}})},getFreqs:function(){var f=this,e,d;do{e=false;for(d=0;d<f.NUM_SIGNALS-1;d++){f.freqs[d]=parseInt(Math.random()*f.bw)+parseInt(d*f.bw)+parseInt(f.loFreq)}d=f.NUM_SIGNALS-1;f.freqs[d]=parseInt(Math.random()/2*f.bw)+parseInt(d*f.bw)+parseInt(f.loFreq);for(d=0;d<(f.NUM_SIGNALS-1);d++){if((f.freqs[d]+f.FREQ_GAP)>f.freqs[d+1]){e=true;break}}}while(e)},preLoadSend:function(h,g){var k=this,l={header:{sampleRate:k.sampleRate,numChannels:1,bitsPerSample:16},data:[]};var f=Genesis.constants.s_vol/100;k.freqs=[];if(typeof(webkitAudioContext)!="undefined"){k.webAudioFnHandler(f);h()}else{if(!_codec){k.duration=1*44100;Ext.defer(k.audioFnHandler,0.25*1000,k,[l,f,h])}else{k.duration=1*44100;Ext.defer(k.mp3FnHandler,0.25*1000,k,[l,f,h])}}},send:function(g,f){var h=this;if(h.oscillators){for(var e=0;e<h.freqs.length;e++){h.oscillators[e].noteOn&&h.oscillators[e].noteOn(0)}g({freqs:h.freqs})}else{if(h.audio){h.audio.play();g({freqs:h.freqs})}else{f()}}},stop:function(){var c=this;if(c.oscillators){for(var d=0;d<c.freqs.length;d++){c.oscillators[d].disconnect()}delete c.oscillators}else{if(c.audio){c.audio.pause();c.audio.currentTime=0;delete c.audio}}},setVolume:function(d){var c=this;if(c.context){c.gainNode.gain.value=Math.max(0,d/100)}else{if(c.audio){c.audio.volume=d/100}}}}}__initFb__=function(){Ext.define("Genesis.fb",{mixins:["Ext.mixin.Observable"],singleton:true,appId:null,fbTimeout:2*60*1000,titleMsg:"Facebook Connect",fbScope:["email","user_birthday","publish_stream","read_friendlists","publish_actions"],fbConnectErrorMsg:"Cannot retrive Facebook account information!",fbConnectRequestMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",fbConnectReconnectMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",connectingToFBMsg:function(){return("Connecting to Facebook ..."+Genesis.constants.addCRLF()+"(Tap to Close)")},loggingOutOfFBMsg:"Logging out of Facebook ...",fbConnectFailMsg:"Error Connecting to Facebook.",fbPermissionFailMsg:"Failed to get the required access permission.",friendsRetrieveErrorMsg:"You cannot retrieve your Friends List from Facebook. Login and Try Again.",initialize:function(){var c=this,d=Genesis.db.getLocalDB();c.appId=(Genesis.constants.debugMode())?477780595628080:197968780267830;console.log("FacebookConnect::initialize");if(!Genesis.fn.isNative()&&d.fbLoginInProgress){c.cb=Ext.decode(d.fbLoginInProgress);c.setLoadMask();Genesis.db.removeLocalDBAttrib("fbLoginInProgress");c.detectAccessToken(location.href)}},currentLocation:function(){return(((Genesis.constants.debugMode())?Genesis.constants.serverHost():"http://m.getkickbak.com")+"/")},redirectUrl:function(){var b=Ext.Object.toQueryString({redirect_uri:this.currentLocation(),client_id:this.appId,state:appName,response_type:"token",scope:this.fbScope.toString()});if(!Ext.os.is("Android")&&!Ext.os.is("iOS")&&/Windows|Linux|MacOS/.test(Ext.os.name)){return"https://www.facebook.com/dialog/oauth?"+b}else{return"https://m.facebook.com/dialog/oauth?"+b}},createFbResponse:function(e){var d=e.birthday.split("/");d=d[2]+"-"+d[0]+"-"+d[1];var f={name:e.name,email:e.email,facebook_id:e.id,facebook_uid:e.username,gender:(e.gender=="male")?"m":"f",birthday:d,photoURL:this.getFbProfilePhoto(e.id),accessToken:Genesis.db.getLocalDB()["access_token"]};console.debug("FbResponse - ["+Ext.encode(f)+"]");return f},facebook_onLogin:function(l,o,m){var p=this,h=true,k=Genesis.db.getLocalDB();var q=(k.currFbId>0)&&(parseInt(k.fbExpiresIn)>0);console.debug("connected = "+q+"\nfbExpiresIn = "+parseInt(k.fbExpiresIn)+"\ntime-30min = "+((new Date().addMinutes(-30)).getTime())+"\n");if(q){var h=(!q||(q&&(parseInt(k.fbExpiresIn)<=(new Date().addMinutes(-30)).getTime())));if(!m||(m&&!h)){console.debug("Facebook already connected. Bypass relogin process");p.fireEvent("connected",k.fbResponse,null);return}}p.cb={supress:l,messsage:o,iter:0};p.setLoadMask();Genesis.db.setLocalDBAttrib("fbLoginInProgress",Ext.encode(p.cb));p.inAppBrowserCallback()},setLoadMask:function(){var b=this;Ext.Viewport.setMasked(null);Ext.Viewport.setMasked({xtype:"loadmask",message:b.connectingToFBMsg(),listeners:{tap:function(){Ext.Viewport.setMasked(null);b.facebook_loginCallback(null)}}})},detectAccessToken:function(e){var h=this,f=Genesis.db.getLocalDB();if(e.indexOf("access_token=")>=1){var g=Ext.Object.fromQueryString(e.split("#")[1]);if(g.state==appName){h.code=f.access_token=g.access_token;f.fbExpiresIn=(new Date(Date.now()+Number(g.expires_in))).getTime();Genesis.db.setLocalDB(f);if(!Genesis.fn.isNative()){h.accessTokenCallback()}}else{console.error("CSRF Forgery detected! Ignore Request")}}},accessTokenCallback:function(){var b=this;Ext.Ajax.request({async:true,disableCaching:false,url:"https://graph.facebook.com/me?access_token="+Genesis.db.getLocalDB()["access_token"],callback:function(k,e,a){if(e||(a.status==200)){try{var l=Ext.decode(a.responseText);l.status="connected";b.facebook_loginCallback(l)}catch(h){}}else{console.log("Error Logging into Facebook\nReturn "+Ext.encode(a));b.facebook_loginCallback(null)}}});delete b.code},inAppBrowserCallback:function(){var c=this;if(Genesis.fn.isNative()){var d=window.open(c.redirectUrl(),"_blank","location=no,toolbar=no,closebuttoncaption=Cancel");c.fbLoginTimeout=setTimeout(function(){c.fireEvent("loginStatus");c.fireEvent("exception",{type:"timeout",msg:"The request to Facebook timed out."},null);Genesis.db.removeLocalDBAttrib("fbLoginInProgress");d.close();c.facebook_loginCallback(null)},c.fbTimeout);d.addEventListener("loadstart",function(a){if(a.url.match(c.currentLocation())){c.detectAccessToken(a.url);Ext.defer(function(){d.close()},500)}});d.addEventListener("loadstop",function(a){});d.addEventListener("exit",function(a){clearTimeout(c.fbLoginTimeout);delete c.fbLoginTimeout;Genesis.db.removeLocalDBAttrib("fbLoginInProgress");if(c.code){Ext.defer(function(){c.accessTokenCallback()},100)}else{c.facebook_loginCallback(null)}})}else{location.href=c.redirectUrl()}},facebook_loginCallback:function(e){var h=this,g=null;if(!e||e.cancelled||e.error||(e.status!="connected")){console.log("FacebookConnect.login:failedWithError:"+((e)?e.message:"None"));if(!h.cb||!h.cb.supress){Ext.device.Notification.show({title:h.titleMsg,message:h.fbConnectErrorMsg,buttons:["Try Again","Continue"],callback:function(a){if(a.toLowerCase()=="try again"){Ext.defer(function(){h.facebook_onLogin(false,h.cb.message)},1,h);delete h.cb}else{Ext.Viewport.setMasked(null);delete h.cb;h.fireEvent("unauthorized",null,null)}}})}else{if(e&&e.cancelled){Ext.Viewport.setMasked(null);delete h.cb;h.fireEvent("exception",{type:"timeout",msg:"The request to Facebook cancelled."},null)}}}else{console.log("Retrieving Facebook profile information ...");var f=e;Ext.defer(function(){if(!f.error||(f.id&&(f.id>0))){var b=Genesis.db.getLocalDB(),a=f.id;console.log("Session ID["+a+"]");b.currFbId=a;b.fbAccountId=f.email;g=b.fbResponse=h.createFbResponse(f);Genesis.db.setLocalDB(b);b=Genesis.db.getLocalDB();console.log("You`ve logged into Facebook! \nEmail("+g.email+")\nauth_code("+b.auth_code+")\nID("+a+")\n");delete h.cb;h._fb_connect();if(b.auth_code){console.log("Updating Facebook Login Info ...");Account.setUpdateFbLoginUrl();Account.load(0,{jsonData:{},params:{user:Ext.encode(b.fbResponse)},callback:function(d,c){if(c.wasSuccessful()){Ext.Viewport.setMasked(null);Genesis.db.setLocalDBAttrib("enableFB",true)}h.fireEvent("connected",g,c)}})}else{Genesis.db.setLocalDBAttrib("enableFB",true);h.fireEvent("connected",g,null);delete h.cb}}else{Ext.Viewport.setMasked(null);h.fireEvent("unauthorized",null,null);h.facebook_onLogout(null,false);delete h.cb}},0.5*1000,h)}delete h.fbLoginTimeout},facebook_onLogout:function(g,l){var k=this;g=g||Ext.emptyFn;console.log("facebook_onLogout");try{var e=Genesis.db.getLocalDB();e.currFbId=0;delete e.fbAccountId;delete e.fbResponse;delete e.fbAuthCode;delete e.fbExpiresIn;Genesis.db.setLocalDB(e);g()}catch(h){g()}},getFbProfilePhoto:function(b){return"http://graph.facebook.com/"+b+"/picture?type=square"},createFBReminderMsg:function(){var b=this;if(!b.actions){b.actions=(Ext.create("Ext.Sheet",{bottom:0,left:0,top:0,right:0,padding:"1.0",hideOnMaskTap:false,defaultUnit:"em",layout:{type:"vbox",pack:"middle"},defaults:{xtype:"container",defaultUnit:"em"},items:[{width:"100%",flex:1,style:"text-align:center;display:inline-table;color:white;font-size:1.1em;",html:b.fbConnectRequestMsg+'<img width="160" style="margin:0.7em 0;" src="resources/themes/images/v1/facebook_icon.png"/>'},{docked:"bottom",defaults:{xtype:"button",defaultUnit:"em",scope:b},padding:"0 1.0 1.0 1.0",items:[{margin:"0 0 0.5 0",text:"Sign In",ui:"action",handler:function(){b.actions.hide();var a=_application.getController("client.MainPage");a.fireEvent("facebookTap",null,null,null,null,function(){Ext.device.Notification.show({title:b.titleMsg,message:b.fbPermissionFailMsg,buttons:["Dismiss"],callback:function(k){a._loggingIn=false;var l=_application.getController("client.Viewport");var h=l.getViewport();var g=h.getActiveItem();if(!g){Ext.Viewport.setMasked(null);l.resetView();l.redirectTo("login")}else{}}})});b.actions.destroy();delete b.actions}},{margin:"0.5 0 0.5 0",text:"Skip",ui:"cancel",handler:function(){b.actions.hide();_application.getController("client.Viewport").redirectTo("checkin");b.actions.destroy();delete b.actions}},{margin:"0.5 0 0 0",text:"Don't Remind Me Again",handler:function(){b.actions.hide();Genesis.db.setLocalDBAttrib("disableFBReminderMsg",true);_application.getController("client.Viewport").redirectTo("checkin");b.actions.destroy();delete b.actions}}]}]}));Ext.Viewport.add(b.actions);b.actions.show()}else{}},postCommon:function(f,h,k,g){var l=this;h=Ext.apply(h,{access_token:Genesis.db.getLocalDB()["fbResponse"]["accessToken"]});Ext.Ajax.request({async:true,disableCaching:false,method:"POST",params:h,url:"https://graph.facebook.com"+f,callback:function(b,d,e){try{var c=Ext.decode(e.responseText);if(d||(e.status==200)){k(c)}else{if(e.status==400){l.facebook_onLogout();Ext.defer(l.facebook_onLogin,1,l,[false,null,true])}else{console.log("Error Logging into Facebook\nStatus code "+Ext.encode(e.responseText));g(c)}}}catch(a){g(c)}}})},uploadPhoto:function(f,d,e){this.postCommon("/me/photos",f,d,e)},share:function(f,d,e){this.postCommon("/me/feed",f,d,e)},_fb_connect:function(){},_fb_disconnect:function(){this._fb_connect()}});Genesis.fb.initialize()};