/*a98c5c449681b3294900289521c0143904111008*/(function(g,i,k,h){if(typeof k.module!=="undefined"&&k.module.exports){if(h&&k.require){for(var f=0;f<h.length;f++){k[h[f]]=k.require(h[f])}}k.module.exports=i.apply(k)}else{if(typeof k.define!=="undefined"&&k.define==="function"&&k.define.amd){define(g,(h||[]),i)}else{k[g]=i.apply(k)}}})("utf8",function(){return{encode:function(h){if(typeof h!=="string"){return h}else{h=h.replace(/\r\n/g,"\n")}var e="",g=0,f;for(g;g<h.length;g++){f=h.charCodeAt(g);if(f<128){e+=String.fromCharCode(f)}else{if((f>127)&&(f<2048)){e+=String.fromCharCode((f>>6)|192),e+=String.fromCharCode((f&63)|128)}else{e+=String.fromCharCode((f>>12)|224),e+=String.fromCharCode(((f>>6)&63)|128),e+=String.fromCharCode((f&63)|128)}}}return e},decode:function(h){if(typeof h!=="string"){return h}var e="",g=0,f=0;while(g<h.length){f=h.charCodeAt(g);if(f<128){e+=String.fromCharCode(f),g++}else{if((f>191)&&(f<224)){e+=String.fromCharCode(((f&31)<<6)|(h.charCodeAt(g+1)&63)),g+=2}else{e+=String.fromCharCode(((f&15)<<12)|((h.charCodeAt(g+1)&63)<<6)|(h.charCodeAt(g+2)&63)),g+=3}}}return e}}},this);(function(g,i,k,h){if(typeof k.module!=="undefined"&&k.module.exports){if(h&&k.require){for(var f=0;f<h.length;f++){k[h[f]]=k.require(h[f])}}k.module.exports=i.apply(k)}else{if(typeof k.define!=="undefined"&&k.define==="function"&&k.define.amd){define(g,(h||[]),i)}else{k[g]=i()}}})("base64",function(f){var h=this;var g=f||this.utf8;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(y){if(typeof h.btoa!=="undefined"){return h.btoa(y)}if(typeof g==="undefined"){throw {error:"MissingMethod",message:"UTF8 Module is missing."}}if(typeof y!=="string"){return y}else{y=g.encode(y)}var w="",x,z,a,b,c,d,i,v=0;while(v<y.length){x=y.charCodeAt(v++);z=y.charCodeAt(v++);a=y.charCodeAt(v++);b=x>>2;c=((x&3)<<4)|(z>>4);d=((z&15)<<2)|(a>>6);i=a&63;if(isNaN(z)){d=i=64}else{if(isNaN(a)){i=64}}w+=e.charAt(b)+e.charAt(c)+e.charAt(d)+e.charAt(i)}return w},decode:function(y){if(typeof h.atob!=="undefined"){return h.atob(y)}if(typeof g==="undefined"){throw {error:"MissingMethod",message:"UTF8 Module is missing."}}if(typeof y!=="string"){return y}else{y.replace(/[^A-Za-z0-9\+\/\=]/g,"")}var w="",x,z,a,b,c,d,i,v=0;while(v<y.length){b=e.indexOf(y.charAt(v++));c=e.indexOf(y.charAt(v++));d=e.indexOf(y.charAt(v++));i=e.indexOf(y.charAt(v++));x=(b<<2)|(c>>4);z=((c&15)<<4)|(d>>2);a=((d&3)<<6)|i;w+=String.fromCharCode(x);if(d!=64){w+=String.fromCharCode(z)}if(i!=64){w+=String.fromCharCode(a)}}return g.decode(w)}}},this,["utf8"]);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var h=Date,i=h.prototype,o=h.CultureInfo,k=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)};i.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};i.setTimeToNow=function(){var a=new Date();this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};h.today=function(){return new Date().clearTime()};h.compare=function(a,b){if(isNaN(a)||isNaN(b)){throw new Error(a+" - "+b)}else{if(a instanceof Date&&b instanceof Date){return(a<b)?-1:(a>b)?1:0}else{throw new TypeError(a+" - "+b)}}};h.equals=function(a,b){return(a.compareTo(b)===0)};h.getDayNumberFromName=function(b){var c=o.dayNames,d=o.abbreviatedDayNames,e=o.shortestDayNames,f=b.toLowerCase();for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==f||d[a].toLowerCase()==f||e[a].toLowerCase()==f){return a}}return -1};h.getMonthNumberFromName=function(b){var d=o.monthNames,c=o.abbreviatedMonthNames,e=b.toLowerCase();for(var a=0;a<d.length;a++){if(d[a].toLowerCase()==e||c[a].toLowerCase()==e){return a}}return -1};h.isLeapYear=function(a){return((a%4===0&&a%100!==0)||a%400===0)};h.getDaysInMonth=function(b,a){return[31,(h.isLeapYear(b)?29:28),31,30,31,30,31,31,30,31,30,31][a]};h.getTimezoneAbbreviation=function(a){var b=o.timezones,c;for(var d=0;d<b.length;d++){if(b[d].offset===a){return b[d].name}}return null};h.getTimezoneOffset=function(d){var a=o.timezones,b;for(var c=0;c<a.length;c++){if(a[c].name===d.toUpperCase()){return a[c].offset}}return null};i.clone=function(){return new Date(this.getTime())};i.compareTo=function(a){return Date.compare(this,a)};i.equals=function(a){return Date.equals(this,a||new Date())};i.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};i.isAfter=function(a){return this.compareTo(a||new Date())===1};i.isBefore=function(a){return(this.compareTo(a||new Date())===-1)};i.isToday=function(){return this.isSameDay(new Date())};i.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())};i.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};i.addSeconds=function(a){return this.addMilliseconds(a*1000)};i.addMinutes=function(a){return this.addMilliseconds(a*60000)};i.addHours=function(a){return this.addMilliseconds(a*3600000)};i.addDays=function(a){this.setDate(this.getDate()+a);return this};i.addWeeks=function(a){return this.addDays(a*7)};i.addMonths=function(b){var a=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(a,h.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};i.addYears=function(a){return this.addMonths(a*12)};i.add=function(a){if(typeof a=="number"){this._orient=a;return this}var b=a;if(b.milliseconds){this.addMilliseconds(b.milliseconds)}if(b.seconds){this.addSeconds(b.seconds)}if(b.minutes){this.addMinutes(b.minutes)}if(b.hours){this.addHours(b.hours)}if(b.weeks){this.addWeeks(b.weeks)}if(b.months){this.addMonths(b.months)}if(b.years){this.addYears(b.years)}if(b.days){this.addDays(b.days)}return this};var m,l,p;i.getWeek=function(){var a,b,c,d,e,f,g,s,v,w;m=(!m)?this.getFullYear():m;l=(!l)?this.getMonth()+1:l;p=(!p)?this.getDate():p;if(l<=2){a=m-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);v=b-c;e=0;f=p-1+(31*(l-1))}else{a=m;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);v=b-c;e=v+1;f=p+((153*(l-3)+2)/5)+58+v}g=(a+b)%7;d=(f+g-e)%7;s=(f+3-d)|0;if(s<0){w=53-((g-v)/5|0)}else{if(s>364+v){w=1}else{w=(s/7|0)+1}}m=l=p=null;return w};i.getISOWeek=function(){m=this.getUTCFullYear();l=this.getUTCMonth()+1;p=this.getUTCDate();return k(this.getWeek())};i.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};h._validate=function(a,b,d,c){if(typeof a=="undefined"){return false}else{if(typeof a!="number"){throw new TypeError(a+" is not a Number.")}else{if(a<b||a>d){throw new RangeError(a+" is not a valid value for "+c+".")}}}return true};h.validateMillisecond=function(a){return h._validate(a,0,999,"millisecond")};h.validateSecond=function(a){return h._validate(a,0,59,"second")};h.validateMinute=function(a){return h._validate(a,0,59,"minute")};h.validateHour=function(a){return h._validate(a,0,23,"hour")};h.validateDay=function(b,c,a){return h._validate(b,1,h.getDaysInMonth(c,a),"day")};h.validateMonth=function(a){return h._validate(a,0,11,"month")};h.validateYear=function(a){return h._validate(a,0,9999,"year")};i.set=function(a){if(h.validateMillisecond(a.millisecond)){this.addMilliseconds(a.millisecond-this.getMilliseconds())}if(h.validateSecond(a.second)){this.addSeconds(a.second-this.getSeconds())}if(h.validateMinute(a.minute)){this.addMinutes(a.minute-this.getMinutes())}if(h.validateHour(a.hour)){this.addHours(a.hour-this.getHours())}if(h.validateMonth(a.month)){this.addMonths(a.month-this.getMonth())}if(h.validateYear(a.year)){this.addYears(a.year-this.getFullYear())}if(h.validateDay(a.day,this.getFullYear(),this.getMonth())){this.addDays(a.day-this.getDate())}if(a.timezone){this.setTimezone(a.timezone)}if(a.timezoneOffset){this.setTimezoneOffset(a.timezoneOffset)}if(a.week&&h._validate(a.week,0,53,"week")){this.setWeek(a.week)}return this};i.moveToFirstDayOfMonth=function(){return this.set({day:1})};i.moveToLastDayOfMonth=function(){return this.set({day:h.getDaysInMonth(this.getFullYear(),this.getMonth())})};i.moveToNthOccurrence=function(b,a){var c=0;if(a>0){c=a-1}else{if(a===-1){this.moveToLastDayOfMonth();if(this.getDay()!==b){this.moveToDayOfWeek(b,-1)}return this}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(b,+1).addWeeks(c)};i.moveToDayOfWeek=function(c,b){var a=(c-this.getDay()+7*(b||+1))%7;return this.addDays((a===0)?a+=7*(b||+1):a)};i.moveToMonth=function(a,c){var b=(a-this.getMonth()+12*(c||+1))%12;return this.addMonths((b===0)?b+=12*(c||+1):b)};i.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1};i.getTimezone=function(){return h.getTimezoneAbbreviation(this.getUTCOffset())};i.setTimezoneOffset=function(a){var c=this.getTimezoneOffset(),b=Number(a)*-6/10;return this.addMinutes(b-c)};i.setTimezone=function(a){return this.setTimezoneOffset(h.getTimezoneOffset(a))};i.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset())};i.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset())};i.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;if(a<0){b=(a-10000).toString();return b.charAt(0)+b.substr(2)}else{b=(a+10000).toString();return"+"+b.substr(1)}};i.getElapsed=function(a){return(a||new Date())-this};if(!i.toISOString){i.toISOString=function(){function a(b){return b<10?"0"+b:b}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}}i._toString=i.toString;i.toString=function(b){var d=this;if(b&&b.length==1){var a=o.formatPatterns;d.t=d.toString;switch(b){case"d":return d.t(a.shortDate);case"D":return d.t(a.longDate);case"F":return d.t(a.fullDateTime);case"m":return d.t(a.monthDay);case"r":return d.t(a.rfc1123);case"s":return d.t(a.sortableDateTime);case"t":return d.t(a.shortTime);case"T":return d.t(a.longTime);case"u":return d.t(a.universalSortableDateTime);case"y":return d.t(a.yearMonth)}}var c=function(e){switch(e*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return b?b.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if(e.charAt(0)==="\\"){return e.replace("\\","")}d.h=d.getHours;switch(e){case"hh":return k(d.h()<13?(d.h()===0?12:d.h()):(d.h()-12));case"h":return d.h()<13?(d.h()===0?12:d.h()):(d.h()-12);case"HH":return k(d.h());case"H":return d.h();case"mm":return k(d.getMinutes());case"m":return d.getMinutes();case"ss":return k(d.getSeconds());case"s":return d.getSeconds();case"yyyy":return k(d.getFullYear(),4);case"yy":return k(d.getFullYear());case"dddd":return o.dayNames[d.getDay()];case"ddd":return o.abbreviatedDayNames[d.getDay()];case"dd":return k(d.getDate());case"d":return d.getDate();case"MMMM":return o.monthNames[d.getMonth()];case"MMM":return o.abbreviatedMonthNames[d.getMonth()];case"MM":return k((d.getMonth()+1));case"M":return d.getMonth()+1;case"t":return d.h()<12?o.amDesignator.substring(0,1):o.pmDesignator.substring(0,1);case"tt":return d.h()<12?o.amDesignator:o.pmDesignator;case"S":return c(d.getDate());default:return e}}):this._toString()}}());(function(){var B=Date,M=B.prototype,l=B.CultureInfo,I=Number.prototype;M._orient=+1;M._nth=null;M._is=false;M._same=false;M._isSecond=false;I._dateElement="day";M.next=function(){this._orient=+1;return this};B.next=function(){return B.today().next()};M.last=M.prev=M.previous=function(){this._orient=-1;return this};B.last=B.prev=B.previous=function(){return B.today().last()};M.is=function(){this._is=true;return this};M.same=function(){this._same=true;this._isSecond=false;return this};M.today=function(){return this.same().day()};M.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun())}return false};M.at=function(a){return(typeof a==="string")?B.parse(this.toString("d")+" "+a):this.set(a)};I.fromNow=I.after=function(b){var a={};a[this._dateElement]=this;return((!b)?new Date():b.clone()).add(a)};I.ago=I.before=function(b){var a={};a[this._dateElement]=this*-1;return((!b)?new Date():b.clone()).add(a)};var O=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),L=("january february march april may june july august september october november december").split(/\s/),J=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),G=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),R=("final first second third fourth fifth").split(/\s/),i;M.toObject=function(){var a={};for(var b=0;b<J.length;b++){a[J[b].toLowerCase()]=this["get"+G[b]]()}return a};B.fromObject=function(a){a.week=null;return Date.today().set(a)};var k=function(a){return function(){if(this._is){this._is=false;return this.getDay()==a}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1)}this._isSecond=false;var b=this._nth;this._nth=null;var c=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(a,b);if(this>c){throw new RangeError(B.getDayName(a)+" does not occur "+b+" times in the month of "+B.getMonthName(c.getMonth())+" "+c.getFullYear()+".")}return this}return this.moveToDayOfWeek(a,this._orient)}};var N=function(a){return function(){var b=B.today(),c=a-b.getDay();if(a===0&&l.firstDayOfWeek===1&&b.getDay()!==0){c=c+7}return b.addDays(c)}};for(var C=0;C<O.length;C++){B[O[C].toUpperCase()]=B[O[C].toUpperCase().substring(0,3)]=C;B[O[C]]=B[O[C].substring(0,3)]=N(C);M[O[C]]=M[O[C].substring(0,3)]=k(C)}var H=function(a){return function(){if(this._is){this._is=false;return this.getMonth()===a}return this.moveToMonth(a,this._orient)}};var K=function(a){return function(){return B.today().set({month:a,day:1})}};for(var D=0;D<L.length;D++){B[L[D].toUpperCase()]=B[L[D].toUpperCase().substring(0,3)]=D;B[L[D]]=B[L[D].substring(0,3)]=K(D);M[L[D]]=M[L[D].substring(0,3)]=H(D)}var Q=function(a){return function(){if(this._isSecond){this._isSecond=false;return this}if(this._same){this._same=this._is=false;var c=this.toObject(),d=(arguments[0]||new Date()).toObject(),e="",f=a.toLowerCase();for(var b=(J.length-1);b>-1;b--){e=J[b].toLowerCase();if(c[e]!=d[e]){return false}if(f==e){break}}return true}if(a.substring(a.length-1)!="s"){a+="s"}return this["add"+a](this._orient)}};var P=function(a){return function(){this._dateElement=a;return this}};for(var E=0;E<J.length;E++){i=J[E].toLowerCase();M[i]=M[i+"s"]=Q(J[E]);I[i]=I[i+"s"]=P(i)}M._ss=Q("Second");var S=function(a){return function(b){if(this._same){return this._ss(arguments[0])}if(b||b===0){return this.moveToNthOccurrence(b,a)}this._nth=a;if(a===2&&(b===undefined||b===null)){this._isSecond=true;return this.addSeconds(this._orient)}return this}};for(var F=0;F<R.length;F++){M[R[F]]=(F===0)?S(-1):S(F)}}());(function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var k=Date.Parsing;var s=k.Operators={rtoken:function(a){return function(c){var b=c.match(a);if(b){return([b[0],c.substring(b[0].length)])}else{throw new k.Exception(c)}}},token:function(a){return function(b){return s.rtoken(new RegExp("^s*"+b+"s*"))(b)}},stoken:function(a){return s.rtoken(new RegExp("^"+a))},until:function(a){return function(d){var c=[],e=null;while(d.length){try{e=a.call(this,d)}catch(b){c.push(e[0]);d=e[1];continue}break}return[c,d]}},many:function(a){return function(d){var e=[],c=null;while(d.length){try{c=a.call(this,d)}catch(b){return[e,d]}e.push(c[0]);d=c[1]}return[e,d]}},optional:function(a){return function(d){var c=null;try{c=a.call(this,d)}catch(b){return[null,d]}return[c[0],c[1]]}},not:function(a){return function(c){try{a.call(this,c)}catch(b){return[null,c]}throw new k.Exception(c)}},ignore:function(a){return a?function(c){var b=null;b=a.call(this,c);return[null,b[1]]}:null},product:function(){var b=arguments[0],a=Array.prototype.slice.call(arguments,1),d=[];for(var c=0;c<b.length;c++){d.push(s.each(b[c],a))}return d},cache:function(a){var c={},b=null;return function(d){try{b=c[d]=(c[d]||a.call(this,d))}catch(e){b=c[d]=e}if(b instanceof k.Exception){throw b}else{return b}}},any:function(){var a=arguments;return function(c){var b=null;for(var d=0;d<a.length;d++){if(a[d]==null){continue}try{b=(a[d].call(this,c))}catch(e){b=null}if(b){return b}}throw new k.Exception(c)}},each:function(){var a=arguments;return function(c){var e=[],b=null;for(var d=0;d<a.length;d++){if(a[d]==null){continue}try{b=(a[d].call(this,c))}catch(f){throw new k.Exception(c)}e.push(b[0]);c=b[1]}return[e,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,b,a){b=b||s.rtoken(/^\s*/);a=a||null;if(c.length==1){return c[0]}return function(y){var h=null,g=null;var e=[];for(var z=0;z<c.length;z++){try{h=c[z].call(this,y)}catch(f){break}e.push(h[0]);try{g=b.call(this,h[1])}catch(A){g=null;break}y=g[1]}if(!h){throw new k.Exception(y)}if(g){throw new k.Exception(g[1])}if(a){try{h=a.call(this,h[1])}catch(d){throw new k.Exception(h[1])}}return[e,(h?h[1]:y)]}},between:function(c,b,d){d=d||c;var a=s.each(s.ignore(c),b,s.ignore(d));return function(f){var e=a.call(this,f);return[[e[0][0],r[0][2]],e[1]]}},list:function(c,b,a){b=b||s.rtoken(/^\s*/);a=a||null;return(c instanceof Array?s.each(s.product(c.slice(0,-1),s.ignore(b)),c.slice(-1),s.ignore(a)):s.each(s.many(s.each(c,s.ignore(b))),px,s.ignore(a)))},set:function(c,b,a){b=b||s.rtoken(/^\s*/);a=a||null;return function(d){var E=null,L=null,h=null,K=null,J=[[],d],e=false;for(var H=0;H<c.length;H++){h=null;L=null;E=null;e=(c.length==1);try{E=c[H].call(this,d)}catch(g){continue}K=[[E[0]],E[1]];if(E[1].length>0&&!e){try{h=b.call(this,E[1])}catch(f){e=true}}else{e=true}if(!e&&h[1].length===0){e=true}if(!e){var G=[];for(var I=0;I<c.length;I++){if(H!=I){G.push(c[I])}}L=s.set(G,b).call(this,h[1]);if(L[0].length>0){K[0]=K[0].concat(L[0]);K[1]=L[1]}}if(K[1].length<J[1].length){J=K}if(J[1].length===0){break}}if(J[0].length===0){return J}if(a){try{h=a.call(this,J[1])}catch(F){throw new k.Exception(J[1])}J[1]=h[1]}return J}},forward:function(b,a){return function(c){return b[a].call(this,c)}},replace:function(a,b){return function(d){var c=a.call(this,d);return[b,c[1]]}},process:function(a,b){return function(d){var c=a.call(this,d);return[b.call(this,c[0]),c[1]]}},min:function(b,a){return function(d){var c=a.call(this,d);if(c[0].length<b){throw new k.Exception(d)}return c}}};var l=function(a){return function(){var d=null,e=[];if(arguments.length>1){d=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){d=arguments[0]}}if(d){for(var b=0,c=d.shift();b<c.length;b++){d.unshift(c[b]);e.push(a.apply(null,d));d.shift();return e}}else{return a.apply(null,arguments)}}};var m="optional not ignore cache".split(/\s/);for(var q=0;q<m.length;q++){s[m[q]]=l(s[m[q]])}var o=function(a){return function(){if(arguments[0] instanceof Array){return a.apply(null,arguments[0])}else{return a.apply(null,arguments)}}};var p="each any all".split(/\s/);for(var i=0;i<p.length;i++){s[p[i]]=o(s[p[i]])}}());(function(){var u=Date,g=u.prototype,t=u.CultureInfo;var s=function(c){var b=[];for(var a=0;a<c.length;a++){if(c[a] instanceof Array){b=b.concat(s(c[a]))}else{if(c[a]){b.push(c[a])}}}return b};u.Grammar={};u.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");if(b.length){this.timezoneOffset=Number(b)}else{this.timezone=a.toLowerCase()}}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=(a.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=((a.length>2)?b:(b+(((b+2000)<t.twoDigitYearMax)?2000:1900)))}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(a){a=(a instanceof Array)?a:[a];for(var c=0;c<a.length;c++){if(a[c]){a[c].call(this)}}var d=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=d.getDate()}if(!this.year){this.year=d.getFullYear()}if(!this.month&&this.month!==0){this.month=d.getMonth()}if(!this.day){this.day=1}if(!this.hour){this.hour=0}if(!this.minute){this.minute=0}if(!this.second){this.second=0}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.day>u.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){b.set({timezone:this.timezone})}else{if(this.timezoneOffset){b.set({timezoneOffset:this.timezoneOffset})}}return b},finish:function(e){e=(e instanceof Array)?s(e):[e];if(e.length===0){return null}for(var c=0;c<e.length;c++){if(typeof e[c]=="function"){e[c].call(this)}}var h=u.today();if(this.now&&!this.unit&&!this.operator){return new Date()}else{if(this.now){h=new Date()}}var b=!!(this.days&&this.days!==null||this.orient||this.operator);var a,d,f;f=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){h.setTimeToNow()}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;b=true}}if(!b&&this.weekday&&!this.day&&!this.days){var i=Date[this.weekday]();this.day=i.getDate();if(!this.month){this.month=i.getMonth()}this.year=i.getFullYear()}if(b&&this.weekday&&this.unit!="month"){this.unit="day";a=(u.getDayNumberFromName(this.weekday)-h.getDay());d=7;this.days=a?((a+(f*d))%d):(f*d)}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1}if(this.month&&!this.day&&this.value){h.set({day:this.value*1});if(!b){this.day=this.value*1}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;b=true}if(b&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";a=(this.month-h.getMonth());d=12;this.months=a?((a+(f*d))%d):(f*d);this.month=null}if(!this.unit){this.unit="day"}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*f}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}this[this.unit+"s"]=this.value*f}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.weekday&&!this.day&&!this.days){var i=Date[this.weekday]();this.day=i.getDate();if(i.getMonth()!==h.getMonth()){this.month=i.getMonth()}}if((this.month||this.month===0)&&!this.day){this.day=1}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value)}if(b&&this.timezone&&this.day&&this.days){this.day=this.days}return(b)?h.add(this):h.set(this)}};var q=u.Parsing.Operators,v=u.Grammar,o=u.Translator,x;v.datePartDelimiter=q.rtoken(/^([\s\-\.\,\/\x27]+)/);v.timePartDelimiter=q.stoken(":");v.whiteSpace=q.rtoken(/^\s*/);v.generalDelimiter=q.rtoken(/^(([\s\,]|at|@|on)+)/);var y={};v.ctoken=function(b){var d=y[b];if(!d){var a=t.regexPatterns;var e=b.split(/\s+/),f=[];for(var c=0;c<e.length;c++){f.push(q.replace(q.rtoken(a[e[c]]),e[c]))}d=y[b]=q.any.apply(null,f)}return d};v.ctoken2=function(a){return q.rtoken(t.regexPatterns[a])};v.h=q.cache(q.process(q.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour));v.hh=q.cache(q.process(q.rtoken(/^(0[0-9]|1[0-2])/),o.hour));v.H=q.cache(q.process(q.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour));v.HH=q.cache(q.process(q.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour));v.m=q.cache(q.process(q.rtoken(/^([0-5][0-9]|[0-9])/),o.minute));v.mm=q.cache(q.process(q.rtoken(/^[0-5][0-9]/),o.minute));v.s=q.cache(q.process(q.rtoken(/^([0-5][0-9]|[0-9])/),o.second));v.ss=q.cache(q.process(q.rtoken(/^[0-5][0-9]/),o.second));v.hms=q.cache(q.sequence([v.H,v.m,v.s],v.timePartDelimiter));v.t=q.cache(q.process(v.ctoken2("shortMeridian"),o.meridian));v.tt=q.cache(q.process(v.ctoken2("longMeridian"),o.meridian));v.z=q.cache(q.process(q.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone));v.zz=q.cache(q.process(q.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone));v.zzz=q.cache(q.process(v.ctoken2("timezone"),o.timezone));v.timeSuffix=q.each(q.ignore(v.whiteSpace),q.set([v.tt,v.zzz]));v.time=q.each(q.optional(q.ignore(q.stoken("T"))),v.hms,v.timeSuffix);v.d=q.cache(q.process(q.each(q.rtoken(/^([0-2]\d|3[0-1]|\d)/),q.optional(v.ctoken2("ordinalSuffix"))),o.day));v.dd=q.cache(q.process(q.each(q.rtoken(/^([0-2]\d|3[0-1])/),q.optional(v.ctoken2("ordinalSuffix"))),o.day));v.ddd=v.dddd=q.cache(q.process(v.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));v.M=q.cache(q.process(q.rtoken(/^(1[0-2]|0\d|\d)/),o.month));v.MM=q.cache(q.process(q.rtoken(/^(1[0-2]|0\d)/),o.month));v.MMM=v.MMMM=q.cache(q.process(v.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month));v.y=q.cache(q.process(q.rtoken(/^(\d\d?)/),o.year));v.yy=q.cache(q.process(q.rtoken(/^(\d\d)/),o.year));v.yyy=q.cache(q.process(q.rtoken(/^(\d\d?\d?\d?)/),o.year));v.yyyy=q.cache(q.process(q.rtoken(/^(\d\d\d\d)/),o.year));x=function(){return q.each(q.any.apply(null,arguments),q.not(v.ctoken2("timeContext")))};v.day=x(v.d,v.dd);v.month=x(v.M,v.MMM);v.year=x(v.yyyy,v.yy);v.orientation=q.process(v.ctoken("past future"),function(a){return function(){this.orient=a}});v.operator=q.process(v.ctoken("add subtract"),function(a){return function(){this.operator=a}});v.rday=q.process(v.ctoken("yesterday tomorrow today now"),o.rday);v.unit=q.process(v.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});v.value=q.process(q.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});v.expression=q.set([v.rday,v.operator,v.value,v.unit,v.orientation,v.ddd,v.MMM]);x=function(){return q.set(arguments,v.datePartDelimiter)};v.mdy=x(v.ddd,v.month,v.day,v.year);v.ymd=x(v.ddd,v.year,v.month,v.day);v.dmy=x(v.ddd,v.day,v.month,v.year);v.date=function(a){return((v[t.dateElementOrder]||v.mdy).call(this,a))};v.format=q.process(q.many(q.any(q.process(q.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(v[a]){return v[a]}else{throw u.Parsing.Exception(a)}}),q.process(q.rtoken(/^[^dMyhHmstz]+/),function(a){return q.ignore(q.stoken(a))}))),function(a){return q.process(q.each.apply(null,a),o.finishExact)});var p={};var w=function(a){return p[a]=(p[a]||v.format(a)[0])};v.formats=function(c){if(c instanceof Array){var b=[];for(var a=0;a<c.length;a++){b.push(w(c[a]))}return q.any.apply(null,b)}else{return w(c)}};v._formats=v.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);v._start=q.process(q.set([v.date,v.time,v.expression],v.generalDelimiter,v.whiteSpace),o.finish);v.start=function(a){try{var c=v._formats.call({},a);if(c[1].length===0){return c}}catch(b){}return v._start.call({},a)};u._parse=u.parse;u.parse=function(a){var c=null;if(!a){return null}if(a instanceof Date){return a}try{c=u.Grammar.start.call({},a.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(b){return null}return((c[1].length===0)?c[0]:null)};u.getParseFunction=function(b){var a=u.Grammar.formats(b);return function(e){var d=null;try{d=a.call({},e)}catch(c){return null}return((d[1].length===0)?d[0]:null)}};u.parseExact=function(a,b){return u.getParseFunction(b)(a)}}());(function(){var k=Date,f=k.prototype,i=k.CultureInfo,g=[],h=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)};k.normalizeFormat=function(a){g=[];var b=new Date().$format(a);return g.join("")};k.strftime=function(a,b){return new Date(b*1000).$format(a)};k.strtotime=function(b){var a=k.parse(b);a.addMinutes(a.getTimezoneOffset()*-1);return Math.round(k.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())/1000)};f.$format=function(b){var d=this,a,c=function(e){g.push(e);return d.toString(e)};return b?b.replace(/(%|\\)?.|%%/g,function(m){if(m.charAt(0)==="\\"||m.substring(0,2)==="%%"){return m.replace("\\","").replace("%%","%")}switch(m){case"d":case"%d":return c("dd");case"D":case"%a":return c("ddd");case"j":case"%e":return c("d");case"l":case"%A":return c("dddd");case"N":case"%u":return d.getDay()+1;case"S":return c("S");case"w":case"%w":return d.getDay();case"z":return d.getOrdinalNumber();case"%j":return h(d.getOrdinalNumber(),3);case"%U":var q=d.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),s=d.clone().addDays(1).moveToDayOfWeek(0,-1);return(s<q)?"00":h((s.getOrdinalNumber()-q.getOrdinalNumber())/7+1);case"W":case"%V":return d.getISOWeek();case"%W":return h(d.getWeek());case"F":case"%B":return c("MMMM");case"m":case"%m":return c("MM");case"M":case"%b":case"%h":return c("MMM");case"n":return c("M");case"t":return k.getDaysInMonth(d.getFullYear(),d.getMonth());case"L":return(k.isLeapYear(d.getFullYear()))?1:0;case"o":case"%G":return d.setWeek(d.getISOWeek()).toString("yyyy");case"%g":return d.$format("%G").slice(-2);case"Y":case"%Y":return c("yyyy");case"y":case"%y":return c("yy");case"a":case"%p":return c("tt").toLowerCase();case"A":return c("tt").toUpperCase();case"g":case"%I":return c("h");case"G":return c("H");case"h":return c("hh");case"H":case"%H":return c("HH");case"i":case"%M":return c("mm");case"s":case"%S":return c("ss");case"u":return h(d.getMilliseconds(),3);case"I":return(d.isDaylightSavingTime())?1:0;case"O":return d.getUTCOffset();case"P":a=d.getUTCOffset();return a.substring(0,a.length-2)+":"+a.substring(a.length-2);case"e":case"T":case"%z":case"%Z":return d.getTimezone();case"Z":return d.getTimezoneOffset()*-60;case"B":var e=new Date();return Math.floor(((e.getHours()*3600)+(e.getMinutes()*60)+e.getSeconds()+(e.getTimezoneOffset()+60)*60)/86.4);case"c":return d.toISOString().replace(/\"/g,"");case"U":return k.strtotime("now");case"%c":return c("d")+" "+c("t");case"%C":return Math.floor(d.getFullYear()/100+1);case"%D":return c("MM/dd/yy");case"%n":return"\\n";case"%t":return"\\t";case"%r":return c("hh:mm tt");case"%R":return c("H:mm");case"%T":return c("H:mm:ss");case"%x":return c("d");case"%X":return c("t");default:g.push(m);return m}}):this._toString()};if(!f.format){f.format=f.$format}}());var QRCode=function(){var u=function(p,o){var a=236;var b=17;var e=p;var R=z[o];var i=null;var h=0;var O=null;var P=new Array();var f={};var m=function(J,K){h=e*4+17;i=function(L){var N=new Array(L);for(var M=0;M<L;M+=1){N[M]=new Array(L);for(var U=0;U<L;U+=1){N[M][U]=null}}return N}(h);Q(0,0);Q(h-7,0);Q(0,h-7);s();q();c(J,K);if(e>=7){S(J)}if(O==null){O=k(e,R,P)}l(O,K)};var Q=function(K,M){for(var L=-1;L<=7;L+=1){if(K+L<=-1||h<=K+L){continue}for(var J=-1;J<=7;J+=1){if(M+J<=-1||h<=M+J){continue}if((0<=L&&L<=6&&(J==0||J==6))||(0<=J&&J<=6&&(L==0||L==6))||(2<=L&&L<=4&&2<=J&&J<=4)){i[K+L][M+J]=true}else{i[K+L][M+J]=false}}}};var g=function(){var J=0;var K=0;for(var L=0;L<8;L+=1){m(true,L);var M=A.getLostPoint(f);if(L==0||J>M){J=M;K=L}}return K};var q=function(){for(var K=8;K<h-8;K+=1){if(i[K][6]!=null){continue}i[K][6]=(K%2==0)}for(var J=8;J<h-8;J+=1){if(i[6][J]!=null){continue}i[6][J]=(J%2==0)}};var s=function(){var J=A.getPatternPosition(e);for(var N=0;N<J.length;N+=1){for(var V=0;V<J.length;V+=1){var L=J[N];var W=J[V];if(i[L][W]!=null){continue}for(var M=-2;M<=2;M+=1){for(var K=-2;K<=2;K+=1){if(M==-2||M==2||K==-2||K==2||(M==0&&K==0)){i[L+M][W+K]=true}else{i[L+M][W+K]=false}}}}}};var S=function(J){var K=A.getBCHTypeNumber(e);for(var L=0;L<18;L+=1){var M=(!J&&((K>>L)&1)==1);i[Math.floor(L/3)][L%3+h-8-3]=M}for(var L=0;L<18;L+=1){var M=(!J&&((K>>L)&1)==1);i[L%3+h-8-3][Math.floor(L/3)]=M}};var c=function(J,K){var L=(R<<3)|K;var M=A.getBCHTypeInfo(L);for(var N=0;N<15;N+=1){var U=(!J&&((M>>N)&1)==1);if(N<6){i[N][8]=U}else{if(N<8){i[N+1][8]=U}else{i[h-15+N][8]=U}}}for(var N=0;N<15;N+=1){var U=(!J&&((M>>N)&1)==1);if(N<8){i[8][h-N-1]=U}else{if(N<9){i[8][15-N-1+1]=U}else{i[8][15-N-1]=U}}}i[h-8][8]=(!J)};var l=function(Z,ad){var ab=-1;var J=h-1;var aa=7;var ae=0;var L=A.getMaskFunction(ad);for(var ac=h-1;ac>0;ac-=2){if(ac==6){ac-=1}while(true){for(var M=0;M<2;M+=1){if(i[J][ac-M]==null){var N=false;if(ae<Z.length){N=(((Z[ae]>>>aa)&1)==1)}var K=L(J,ac-M);if(K){N=!N}i[J][ac-M]=N;aa-=1;if(aa==-1){ae+=1;aa=7}}}J+=ab;if(J<0||h<=J){J-=ab;ab=-ab;break}}}};var d=function(K,ar){var ak=0;var ao=0;var aq=0;var al=new Array(ar.length);var ah=new Array(ar.length);for(var M=0;M<ar.length;M+=1){var L=ar[M].dataCount;var am=ar[M].totalCount-L;ao=Math.max(ao,L);aq=Math.max(aq,am);al[M]=new Array(L);for(var J=0;J<al[M].length;J+=1){al[M][J]=255&K.getBuffer()[J+ak]}ak+=L;var ag=A.getErrorCorrectPolynomial(am);var ap=D(al[M],ag.getLength()-1);var aj=ap.mod(ag);ah[M]=new Array(ag.getLength()-1);for(var J=0;J<ah[M].length;J+=1){var N=J+aj.getLength()-ah[M].length;ah[M][J]=(N>=0)?aj.get(N):0}}var at=0;for(var J=0;J<ar.length;J+=1){at+=ar[J].totalCount}var an=new Array(at);var ai=0;for(var J=0;J<ao;J+=1){for(var M=0;M<ar.length;M+=1){if(J<al[M].length){an[ai]=al[M][J];ai+=1}}}for(var J=0;J<aq;J+=1){for(var M=0;M<ar.length;M+=1){if(J<ah[M].length){an[ai]=ah[M][J];ai+=1}}}return an};var k=function(J,K,N){var X=B.getRSBlocks(J,K);var Y=C();for(var W=0;W<N.length;W+=1){var L=N[W];Y.put(L.getMode(),4);Y.put(L.getLength(),A.getLengthInBits(L.getMode(),J));L.write(Y)}var M=0;for(var W=0;W<X.length;W+=1){M+=X[W].dataCount}if(Y.getLengthInBits()>M*8){throw new Error("code length overflow. ("+Y.getLengthInBits()+">"+M*8+")")}if(Y.getLengthInBits()+4<=M*8){Y.put(0,4)}while(Y.getLengthInBits()%8!=0){Y.putBit(false)}while(true){if(Y.getLengthInBits()>=M*8){break}Y.put(a,8);if(Y.getLengthInBits()>=M*8){break}Y.put(b,8)}return d(Y,X)};f.addData=function(J){var K=v(J);P.push(K);O=null};f.isDark=function(J,K){if(J<0||h<=J||K<0||h<=K){throw new Error(J+","+K)}return i[J][K]};f.getModuleCount=function(){return h};f.make=function(){m(false,g())};f.createTableTag=function(J,L){J=J||2;L=(typeof L=="undefined")?J*4:L;var N="";N+='<table style="';N+=" border-width: 0px; border-style: none;";N+=" border-collapse: collapse;";N+=" padding: 0px; margin: "+L+"px;";N+='">';N+="<tbody>";for(var M=0;M<f.getModuleCount();M+=1){N+="<tr>";for(var K=0;K<f.getModuleCount();K+=1){N+='<td style="';N+=" border-width: 0px; border-style: none;";N+=" border-collapse: collapse;";N+=" padding: 0px; margin: 0px;";N+=" width: "+J+"px;";N+=" height: "+J+"px;";N+=" background-color: ";N+=f.isDark(M,K)?"#000000":"#ffffff";N+=";";N+='"/>'}N+="</tr>"}N+="</tbody>";N+="</table>";return N};f.createImgTag=function(J,K){J=J||2;K=(typeof K=="undefined")?J*4:K;var L=f.getModuleCount()*J+K*2;var M=K;var N=L-K;return E(L,L,function(aa,X){if(M<=aa&&aa<N&&M<=X&&X<N){var Y=Math.floor((aa-M)/J);var Z=Math.floor((X-M)/J);return f.isDark(Z,Y)?0:1}else{return 1}})};f.createBase64=function(J,K){J=J||2;K=(typeof K=="undefined")?J*4:K;var L=f.getModuleCount()*J+K*2;var M=K;var N=L-K;return[t(L,L,function(aa,X){if(M<=aa&&aa<N&&M<=X&&X<N){var Y=Math.floor((aa-M)/J);var Z=Math.floor((X-M)/J);return f.isDark(Z,Y)?0:1}else{return 1}}),L]};return f};u.stringToBytes=function(b){var d=new Array();for(var c=0;c<b.length;c+=1){var a=b.charCodeAt(c);d.push(a&255)}return d};u.createStringToBytes=function(a,b){var c=function(){var m=H(a);var l=function(){var q=m.read();if(q==-1){throw new Error()}return q};var i=0;var h={};while(true){var p=m.read();if(p==-1){break}var e=l();var f=l();var g=l();var k=String.fromCharCode((p<<8)|e);var o=(f<<8)|g;h[k]=o;i+=1}if(i!=b){throw new Error(i+" != "+b)}return h}();var d="?".charCodeAt(0);return function(f){var i=new Array();for(var g=0;g<f.length;g+=1){var h=f.charCodeAt(g);if(h<128){i.push(h)}else{var e=c[f.charAt(g)];if(typeof e=="number"){if((e&255)==e){i.push(e)}else{i.push(e>>>8);i.push(e&255)}}else{i.push(d)}}}return i}};var y={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var z={L:1,M:0,Q:3,H:2};var F={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var A=function(){var b=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var e=(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0);var f=(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0);var c=(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1);var a={};var d=function(h){var g=0;while(h!=0){g+=1;h>>>=1}return g};a.getBCHTypeInfo=function(h){var g=h<<10;while(d(g)-d(e)>=0){g^=(e<<(d(g)-d(e)))}return((h<<10)|g)^c};a.getBCHTypeNumber=function(h){var g=h<<12;while(d(g)-d(f)>=0){g^=(f<<(d(g)-d(f)))}return(h<<12)|g};a.getPatternPosition=function(g){return b[g-1]};a.getMaskFunction=function(g){switch(g){case F.PATTERN000:return function(i,h){return(i+h)%2==0};case F.PATTERN001:return function(i,h){return i%2==0};case F.PATTERN010:return function(i,h){return h%3==0};case F.PATTERN011:return function(i,h){return(i+h)%3==0};case F.PATTERN100:return function(i,h){return(Math.floor(i/2)+Math.floor(h/3))%2==0};case F.PATTERN101:return function(i,h){return(i*h)%2+(i*h)%3==0};case F.PATTERN110:return function(i,h){return((i*h)%2+(i*h)%3)%2==0};case F.PATTERN111:return function(i,h){return((i*h)%3+(i+h)%2)%2==0};default:throw new Error("bad maskPattern:"+g)}};a.getErrorCorrectPolynomial=function(g){var h=D([1],0);for(var i=0;i<g;i+=1){h=h.multiply(D([1,I.gexp(i)],0))}return h};a.getLengthInBits=function(g,h){if(1<=h&&h<10){switch(g){case y.MODE_NUMBER:return 10;case y.MODE_ALPHA_NUM:return 9;case y.MODE_8BIT_BYTE:return 8;case y.MODE_KANJI:return 8;default:throw new Error("mode:"+g)}}else{if(h<27){switch(g){case y.MODE_NUMBER:return 12;case y.MODE_ALPHA_NUM:return 11;case y.MODE_8BIT_BYTE:return 16;case y.MODE_KANJI:return 10;default:throw new Error("mode:"+g)}}else{if(h<41){switch(g){case y.MODE_NUMBER:return 14;case y.MODE_ALPHA_NUM:return 13;case y.MODE_8BIT_BYTE:return 16;case y.MODE_KANJI:return 12;default:throw new Error("mode:"+g)}}else{throw new Error("type:"+h)}}}};a.getLostPoint=function(p){var i=p.getModuleCount();var h=0;for(var m=0;m<i;m+=1){for(var k=0;k<i;k+=1){var q=0;var s=p.isDark(m,k);for(var l=-1;l<=1;l+=1){if(m+l<0||i<=m+l){continue}for(var L=-1;L<=1;L+=1){if(k+L<0||i<=k+L){continue}if(l==0&&L==0){continue}if(s==p.isDark(m+l,k+L)){q+=1}}}if(q>5){h+=(3+q-5)}}}for(var m=0;m<i-1;m+=1){for(var k=0;k<i-1;k+=1){var g=0;if(p.isDark(m,k)){g+=1}if(p.isDark(m+1,k)){g+=1}if(p.isDark(m,k+1)){g+=1}if(p.isDark(m+1,k+1)){g+=1}if(g==0||g==4){h+=3}}}for(var m=0;m<i;m+=1){for(var k=0;k<i-6;k+=1){if(p.isDark(m,k)&&!p.isDark(m,k+1)&&p.isDark(m,k+2)&&p.isDark(m,k+3)&&p.isDark(m,k+4)&&!p.isDark(m,k+5)&&p.isDark(m,k+6)){h+=40}}}for(var k=0;k<i;k+=1){for(var m=0;m<i-6;m+=1){if(p.isDark(m,k)&&!p.isDark(m+1,k)&&p.isDark(m+2,k)&&p.isDark(m+3,k)&&p.isDark(m+4,k)&&!p.isDark(m+5,k)&&p.isDark(m+6,k)){h+=40}}}var o=0;for(var k=0;k<i;k+=1){for(var m=0;m<i;m+=1){if(p.isDark(m,k)){o+=1}}}var M=Math.abs(100*o/i/i-50)/5;h+=M*10;return h};return a}();var I=function(){var d=new Array(256);var b=new Array(256);for(var c=0;c<8;c+=1){d[c]=1<<c}for(var c=8;c<256;c+=1){d[c]=d[c-4]^d[c-5]^d[c-6]^d[c-8]}for(var c=0;c<255;c+=1){b[d[c]]=c}var a={};a.glog=function(e){if(e<1){throw new Error("glog("+e+")")}return b[e]};a.gexp=function(e){while(e<0){e+=255}while(e>=256){e-=255}return d[e]};return a}();function D(c,d){if(typeof c.length=="undefined"){throw new Error(c.length+"/"+d)}var b=function(){var f=0;while(f<c.length&&c[f]==0){f+=1}var g=new Array(c.length-f+d);for(var e=0;e<c.length-f;e+=1){g[e]=c[e+f]}return g}();var a={};a.get=function(e){return b[e]};a.getLength=function(){return b.length};a.multiply=function(f){var h=new Array(a.getLength()+f.getLength()-1);for(var g=0;g<a.getLength();g+=1){for(var e=0;e<f.getLength();e+=1){h[g+e]^=I.gexp(I.glog(a.get(g))+I.glog(f.get(e)))}}return D(h,0)};a.mod=function(f){if(a.getLength()-f.getLength()<0){return a}var g=I.glog(a.get(0))-I.glog(f.get(0));var e=new Array(a.getLength());for(var h=0;h<a.getLength();h+=1){e[h]=a.get(h)}for(var h=0;h<f.getLength();h+=1){e[h]^=I.gexp(I.glog(f.get(h))+g)}return D(e,0).mod(f)};return a}var B=function(){var c=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];var d=function(e,g){var f={};f.totalCount=e;f.dataCount=g;return f};var a={};var b=function(f,e){switch(e){case z.L:return c[(f-1)*4+0];case z.M:return c[(f-1)*4+1];case z.Q:return c[(f-1)*4+2];case z.H:return c[(f-1)*4+3];default:return undefined}};a.getRSBlocks=function(i,o){var k=b(i,o);if(typeof k=="undefined"){throw new Error("bad rs block @ typeNumber:"+i+"/errorCorrectLevel:"+o)}var l=k.length/3;var e=new Array();for(var g=0;g<l;g+=1){var f=k[g*3+0];var m=k[g*3+1];var p=k[g*3+2];for(var h=0;h<f;h+=1){e.push(d(m,p))}}return e};return a}();var C=function(){var c=new Array();var a=0;var b={};b.getBuffer=function(){return c};b.get=function(e){var d=Math.floor(e/8);return((c[d]>>>(7-e%8))&1)==1};b.put=function(e,f){for(var d=0;d<f;d+=1){b.putBit(((e>>>(f-d-1))&1)==1)}};b.getLengthInBits=function(){return a};b.putBit=function(d){var e=Math.floor(a/8);if(c.length<=e){c.push(0)}if(d){c[e]|=(128>>>(a%8))}a+=1};return b};var v=function(b){var c=y.MODE_8BIT_BYTE;var e=b;var d=u.stringToBytes(b);var a={};a.getMode=function(){return c};a.getLength=function(f){return d.length};a.write=function(g){for(var f=0;f<d.length;f+=1){g.put(d[f],8)}};return a};var x=function(){var b=new Array();var a={};a.writeByte=function(c){b.push(c&255)};a.writeShort=function(c){a.writeByte(c);a.writeByte(c>>>8)};a.writeBytes=function(d,f,e){f=f||0;e=e||d.length;for(var c=0;c<e;c+=1){a.writeByte(d[c+f])}};a.writeString=function(c){for(var d=0;d<c.length;d+=1){a.writeByte(c.charCodeAt(d))}};a.toByteArray=function(){return b};a.toString=function(){var c="";c+="[";for(var d=0;d<b.length;d+=1){if(d>0){c+=","}c+=b[d]}c+="]";return c};return a};var G=function(){var d=0;var a=0;var f=0;var e="";var g={};var b=function(h){e+=String.fromCharCode(c(h&63))};var c=function(h){if(h<0){}else{if(h<26){return 65+h}else{if(h<52){return 97+(h-26)}else{if(h<62){return 48+(h-52)}else{if(h==62){return 43}else{if(h==63){return 47}}}}}}throw new Error("n:"+h)};g.writeByte=function(h){d=(d<<8)|(h&255);a+=8;f+=1;while(a>=6){b(d>>>(a-6));a-=6}};g.flush=function(){if(a>0){b(d<<(6-a));d=0;a=0}if(f%3!=0){var i=3-f%3;for(var h=0;h<i;h+=1){e+="="}}};g.toString=function(){return e};return g};var H=function(a){var f=a;var e=0;var d=0;var c=0;var g={};g.read=function(){while(c<8){if(e>=f.length){if(c==0){return -1}throw new Error("unexpected end of file./"+c)}var i=f.charAt(e);e+=1;if(i=="="){c=0;return -1}else{if(i.match(/^\s$/)){continue}}d=(d<<6)|b(i.charCodeAt(0));c+=6}var h=(d>>>(c-8))&255;c-=8;return h};var b=function(h){if(65<=h&&h<=90){return h-65}else{if(97<=h&&h<=122){return h-97+26}else{if(48<=h&&h<=57){return h-48+52}else{if(h==43){return 62}else{if(h==47){return 63}else{throw new Error("c:"+h)}}}}}};return g};var w=function(i,b){var f=i;var e=b;var h=new Array(i*b);var d={};d.setPixel=function(m,k,l){h[k*f+m]=l};d.write=function(m){m.writeString("GIF87a");m.writeShort(f);m.writeShort(e);m.writeByte(128);m.writeByte(0);m.writeByte(0);m.writeByte(0);m.writeByte(0);m.writeByte(0);m.writeByte(255);m.writeByte(255);m.writeByte(255);m.writeString(",");m.writeShort(0);m.writeShort(0);m.writeShort(f);m.writeShort(e);m.writeByte(0);var l=2;var o=g(l);m.writeByte(l);var k=0;while(o.length-k>255){m.writeByte(255);m.writeBytes(o,k,255);k+=255}m.writeByte(o.length-k);m.writeBytes(o,k,o.length-k);m.writeByte(0);m.writeString(";")};var c=function(o){var m=o;var l=0;var p=0;var k={};k.write=function(q,s){if((q>>>s)!=0){throw new Error("length over")}while(l+s>=8){m.writeByte(255&((q<<l)|p));s-=(8-l);q>>>=(8-l);p=0;l=0}p=(q<<l)|p;l=l+s};k.flush=function(){if(l>0){m.writeByte(p)}};return k};var g=function(k){var N=1<<k;var P=(1<<k)+1;var q=k+1;var o=a();for(var O=0;O<N;O+=1){o.add(String.fromCharCode(O))}o.add(String.fromCharCode(N));o.add(String.fromCharCode(P));var Q=x();var l=c(Q);l.write(N,q);var p=0;var m=String.fromCharCode(h[p]);p+=1;while(p<h.length){var s=String.fromCharCode(h[p]);p+=1;if(o.contains(m+s)){m=m+s}else{l.write(o.indexOf(m),q);if(o.size()<4095){if(o.size()==(1<<q)){q+=1}o.add(m+s)}m=s}}l.write(o.indexOf(m),q);l.write(P,q);l.flush();return Q.toByteArray()};var a=function(){var l={};var m=0;var k={};k.add=function(o){if(k.contains(o)){throw new Error("dup key:"+o)}l[o]=m;m+=1};k.size=function(){return m};k.indexOf=function(o){return l[o]};k.contains=function(o){return typeof l[o]!="undefined"};return k};return d};var t=function(k,l,d){var f=w(k,l);for(var c=0;c<l;c+=1){for(var a=0;a<k;a+=1){f.setPixel(a,c,d(a,c))}}var b=x();f.write(b);var e=G();var i=b.toByteArray();for(var g=0;g<i.length;g+=1){e.writeByte(i[g])}e.flush();var h="";h+="data:image/gif;base64,";h+=e;return h};var E=function(b,e,f,a){var d=t(b,e,f);var c="";c+="<img";c+='\u0020src="';c+=d;c+='"';c+='\u0020width="';c+=b;c+='"';c+='\u0020height="';c+=e;c+='"';if(a){c+='\u0020alt="';c+=a;c+='"'}c+="/>";return c};return u}();var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var b=0;b<4096;b++){this.encLookup[b]=this.chars[b>>6]+this.chars[b&63]}},Encode:function(l){var i=l.length;var k="";var o=0;while(i>2){n=(l[o]<<16)|(l[o+1]<<8)|l[o+2];k+=this.encLookup[n>>12]+this.encLookup[n&4095];i-=3;o+=3}if(i>0){var m=(l[o]&252)>>2;var p=(l[o]&3)<<4;if(i>1){p|=(l[++o]&240)>>4}k+=this.chars[m];k+=this.chars[p];if(i==2){var h=(l[o++]&15)<<2;h|=(l[o]&192)>>6;k+=this.chars[h]}if(i==1){k+="="}k+="="}return k}};FastBase64.Init();var RIFFWAVE=function(g){g=g||{};this.data=[];this.wav=[];this.dataURI="";this.header=Ext.apply({chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8000,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0},g.header);function e(a){return[a&255,(a>>8)&255,(a>>16)&255,(a>>24)&255]}function f(a){return[a&255,(a>>8)&255]}function h(a){var b=[];var d=0;var i=a.length;for(var c=0;c<i;c++){b[d++]=a[c]&255;b[d++]=(a[c]>>8)&255}return b}this.Make=function(a){if((g.data instanceof Array)||((typeof(Int16Array)!="undefined")&&(g.data instanceof Int16Array))){this.data=a;this.header.blockAlign=(this.header.numChannels*this.header.bitsPerSample)>>3;this.header.byteRate=this.header.blockAlign*this.header.sampleRate;this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3);this.header.chunkSize=36+this.header.subChunk2Size}console.debug("RIFFWAVE - "+Ext.encode(this.header))};this.MakeData=function(a){this.wav=this.header.chunkId.concat(e(this.header.chunkSize),this.header.format,this.header.subChunk1Id,e(this.header.subChunk1Size),f(this.header.audioFormat),f(this.header.numChannels),e(this.header.sampleRate),e(this.header.byteRate),f(this.header.blockAlign),f(this.header.bitsPerSample),this.header.subChunk2Id,e(this.header.subChunk2Size),(this.header.bitsPerSample==16)?h(this.data):this.data);this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav)};if((g.data instanceof Array)||((typeof(Int16Array)!="undefined")&&(g.data instanceof Int16Array))){this.Make(g.data);if(!g.headerOnly){this.MakeData(g.data)}}};window.plugins=window.plugins||{};if(window.cordova||window.Cordova||window.PhoneGap){(function(b){window.plugins.proximityID={init:function(d,a){b.exec(function(){console.log("ProximityIDPlugin Initialized")},function(c){console.log("Failed to initialize the ProximityIDPlugin! Reason["+c+"]")},"ProximityIDPlugin","init",[d+"",a+""])},preLoadSend:function(d,a){Ext.defer(function(){b.exec(d,a,"ProximityIDPlugin","preLoadIdentity",[])},0.25*1000,this)},send:function(d,a){b.exec(d,a,"ProximityIDPlugin","sendIdentity",[])},scan:function(i,m,k,l,h,a){b.exec(i,m,"ProximityIDPlugin","scanIdentity",[k,l,h,a])},stop:function(){b.exec(function(){console.log("Stopped ProximityIDPlugin")},function(a){console.log("Failed to stop the ProximityIDPlugin "+a)},"ProximityIDPlugin","stop",[])},setVolume:function(a){b.exec(Ext.emptyFn,Ext.emptyFn,"ProximityIDPlugin","setVolume",[a])}};b.addConstructor(function(){})})(window.cordova||window.Cordova||window.PhoneGap)}else{window.plugins.proximityID={loFreq:17000,hiFreq:20000,FREQ_GAP:500,NUM_SIGNALS:3,SHORT_MAX:parseInt(65535/2),sampleRate:44100,duration:1*44100,bufSize:16*1024,bitRate:128,bw:0,audio:null,freqs:null,init:function(d,e){var f=this;f.bw=(f.hiFreq-f.loFreq)/f.NUM_SIGNALS;Genesis.constants.s_vol=d*100;Genesis.constants.r_vol=e*100;if(_codec){_codec.onmessage=function(a){switch(a.data.cmd){case"init":f._duration=f.duration;f.bytesEncoded=Math.min(f._duration,f.bufSize);console.debug("Gain : "+Genesis.constants.s_vol/100);delete f.sampleConfig.data;console.debug("MP3 Init");_codec.postMessage({cmd:"encode",buf:f.generateData(0,f.bytesEncoded)});break;case"data":if(!f.sampleConfig.data){f.sampleConfig.data=String.fromCharCode.apply(null,a.data.buf)}else{f.sampleConfig.data+=String.fromCharCode.apply(null,a.data.buf)}f._duration-=f.bytesEncoded;if(f._duration>0){f.bytesEncoded=Math.min(f._duration,f.bufSize);_codec.postMessage({cmd:"encode",buf:f.generateData(f.duration-f._duration,f.bytesEncoded)})}else{_codec.postMessage({cmd:"finish"})}break;case"end":f.sampleConfig.data+=String.fromCharCode.apply(null,a.data.buf);f.sampleConfig.data="data:audio/mpeg;base64,"+base64.encode(f.sampleConfig.data);console.debug("Final MP3 File Length = "+f.sampleConfig.data.length);f.audio=new Audio(f.sampleConfig.data);f.createAudioStream();console.debug("MP3 Complete");f.sampleConfig.callback();delete f.sampleConfig}}}console.debug("Initialized Proximity API")},generateData:function(l,o){var p=this,c,k,i=Genesis.constants.s_vol/100,m=new Float32Array(o);k=[];for(c=0;c<p.freqs.length;c++){k[c]=2*Math.PI*p.freqs[c]/p.sampleRate}for(c=0;c<o;c++){for(j=0;j<p.freqs.length;j++){m[c]+=Math.sin(k[j]*(c+l))}m[c]=i*m[c]/p.freqs.length}return m},createAudioStream:function(){var b=this;if(typeof b.audio.loop=="boolean"){b.audio.loop=true}else{b.audio.addEventListener("ended",function(){this.currentTime=0;this.play()},false)}},preLoadSend:function(s,w){var o=this,t,v,x,y={header:{sampleRate:o.sampleRate,numChannels:1,bitsPerSample:16},data:[]};var q=Genesis.constants.s_vol/100;var p=function(){do{x=false;for(t=0;t<o.NUM_SIGNALS-1;t++){o.freqs[t]=parseInt(Math.random()*o.bw)+parseInt(t*o.bw)+parseInt(o.loFreq)}t=o.NUM_SIGNALS-1;o.freqs[t]=parseInt(Math.random()/2*o.bw)+parseInt(t*o.bw)+parseInt(o.loFreq);for(t=0;t<(o.NUM_SIGNALS-1);t++){if((o.freqs[t]+o.FREQ_GAP)>o.freqs[t+1]){x=true;break}}}while(x)};o.freqs=[];if((typeof(webkitAudioContext)!="undefined")&&!debugMode){if(!o.context){o.context=new webkitAudioContext();o.gainNode=o.context.createGainNode();o.gainNode.connect(o.context.destination)}p();o.gainNode.gain.value=q;o.oscillators=[];for(t=0;t<o.freqs.length;t++){var i=o.oscillators[t]=o.context.createOscillator();i.type=0;i.frequency.value=o.freqs[t];i.connect(o.gainNode)}console.debug("Gain : "+q);s()}else{if(!_codec){var u=y.data=[];Ext.defer(function(){p();for(t=0;t<(o.duration);t++){var a=0;for(v=0;v<o.freqs.length;v++){a+=Math.sin(2*Math.PI*o.freqs[v]*t/o.sampleRate)}a/=o.freqs.length;a=Math.round(q*((o.SHORT_MAX+1)+(a*o.SHORT_MAX)));u[t]=a}o.audio=new Audio(new RIFFWAVE(y).dataURI);o.createAudioStream(y);console.debug("Gain : "+q)},0.25*1000,this)}else{Ext.defer(function(){p();y.callback=s;o.sampleConfig=y;_codec.postMessage({cmd:"init",config:{samplerate:o.sampleRate,bitrate:o.bitRate,mode:3,channels:1}})},0.25*1000,this)}}},send:function(g,f){var h=this;if(h.oscillators){for(var e=0;e<h.freqs.length;e++){h.oscillators[e].noteOn&&h.oscillators[e].noteOn(0)}g({freqs:h.freqs})}else{if(h.audio){h.audio.play();g({freqs:h.freqs})}else{f()}}},stop:function(){var c=this;if(c.oscillators){for(var d=0;d<c.freqs.length;d++){c.oscillators[d].disconnect()}delete c.oscillators}else{if(c.audio){c.audio.pause();c.audio.currentTime=0;delete c.audio}}},setVolume:function(d){var c=this;if(c.context){c.gainNode.gain.value=Math.max(0,d/100)}else{if(c.audio){c.audio.volume=d/100}}}}}__initFb__=function(){Ext.define("Genesis.fb",{mixins:["Ext.mixin.Observable"],singleton:true,appId:null,fbTimeout:2*60*1000,titleMsg:"Facebook Connect",fbScope:["email","user_birthday","publish_stream","read_friendlists","publish_actions"],fbConnectErrorMsg:"Cannot retrive Facebook account information!",fbConnectRequestMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",fbConnectReconnectMsg:"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!",connectingToFBMsg:function(){return("Connecting to Facebook ..."+Genesis.constants.addCRLF()+"(Tap to Close)")},loggingOutOfFBMsg:"Logging out of Facebook ...",fbConnectFailMsg:"Error Connecting to Facebook.",fbPermissionFailMsg:"Failed to get the required access permission.",friendsRetrieveErrorMsg:"You cannot retrieve your Friends List from Facebook. Login and Try Again.",initialize:function(){var b=this;b.appId=(Genesis.constants.debugMode())?477780595628080:197968780267830;console.log("FacebookConnect::initialize")},currentLocation:function(){return(((Genesis.constants.debugMode())?Genesis.constants.serverHost():"http://m.getkickbak.com")+"/")},redirectUrl:function(){var b=Ext.Object.toQueryString({redirect_uri:this.currentLocation(),client_id:this.appId,state:appName,response_type:"token",scope:this.fbScope.toString()});if(!Ext.os.is("Android")&&!Ext.os.is("iOS")&&/Windows|Linux|MacOS/.test(Ext.os.name)){return"https://www.facebook.com/dialog/oauth?"+b}else{return"https://m.facebook.com/dialog/oauth?"+b}},createFbResponse:function(e){var d=e.birthday.split("/");d=d[2]+"-"+d[0]+"-"+d[1];var f={name:e.name,email:e.email,facebook_id:e.id,facebook_uid:e.username,gender:(e.gender=="male")?"m":"f",birthday:d,photoURL:this.getFbProfilePhoto(e.id),accessToken:Genesis.db.getLocalDB()["access_token"]};console.log("FbResponse - ["+Ext.encode(f)+"]");return f},facebook_onLogin:function(k,m,l){var o=this,h=true,i=Genesis.db.getLocalDB();var p=(i.currFbId>0)&&(parseInt(i.fbExpiresIn)>0);console.log("connected = "+p+"\nfbExpiresIn = "+parseInt(i.fbExpiresIn)+"\ntime-30min = "+((new Date().addMinutes(-30)).getTime())+"\n");if(p){var h=(!p||(p&&(parseInt(i.fbExpiresIn)<=(new Date().addMinutes(-30)).getTime())));if(!l||(l&&!h)){console.log("Facebook already connected. Bypass relogin process");o.fireEvent("connected",i.fbResponse,null);return}}o.cb={supress:k,messsage:m,iter:0};Ext.Viewport.setMasked(null);Ext.Viewport.setMasked({xtype:"loadmask",message:o.connectingToFBMsg(),listeners:{tap:function(){Ext.Viewport.setMasked(null);o.facebook_loginCallback(null)}}});Genesis.db.setLocalDBAttrib("fbLoginInProgress",true);o.inAppBrowserCallback()},inAppBrowserCallback:function(){var c=this,d=window.open(c.redirectUrl(),"_blank","location=no,toolbar=no,closebuttoncaption=Cancel");c.fbLoginTimeout=setTimeout(function(){c.fireEvent("loginStatus");c.fireEvent("exception",{type:"timeout",msg:"The request to Facebook timed out."},null);Genesis.db.removeLocalDBAttrib("fbLoginInProgress");d.close();c.facebook_loginCallback(null)},c.fbTimeout);d.addEventListener("loadstart",function(b){if(b.url.match(c.currentLocation())){if(b.url.indexOf("access_token=")>=1){var a=Ext.Object.fromQueryString(b.url.split("#")[1]);if(a.state==appName){var f=Genesis.db.getLocalDB();c.code=f.access_token=a.access_token;f.fbExpiresIn=(new Date(Date.now()+Number(a.expires_in))).getTime();Genesis.db.setLocalDB(f)}else{console.error("CSRF Forgery detected! Ignore Request")}}Ext.defer(function(){d.close()},500)}});d.addEventListener("loadstop",function(a){});d.addEventListener("exit",function(a){clearTimeout(c.fbLoginTimeout);delete c.fbLoginTimeout;Genesis.db.removeLocalDBAttrib("fbLoginInProgress");if(c.code){Ext.defer(function(){Ext.Ajax.request({async:true,disableCaching:false,url:"https://graph.facebook.com/me?access_token="+Genesis.db.getLocalDB()["access_token"],callback:function(k,b,m){if(b||(m.status==200)){try{var l=Ext.decode(m.responseText);l.status="connected";c.facebook_loginCallback(l)}catch(e){}}else{console.log("Error Logging into Facebook\nReturn "+Ext.encode(m));c.facebook_loginCallback(null)}}});delete c.code},100)}else{c.facebook_loginCallback(null)}})},facebook_loginCallback:function(e){var h=this,g=null;if(!e||e.cancelled||e.error||(e.status!="connected")){console.log("FacebookConnect.login:failedWithError:"+((e)?e.message:"None"));if(!h.cb||!h.cb.supress){Ext.device.Notification.show({title:h.titleMsg,message:h.fbConnectErrorMsg,buttons:["Try Again","Continue"],callback:function(a){if(a.toLowerCase()=="try again"){Ext.defer(function(){h.facebook_onLogin(false,h.cb.message)},1,h);delete h.cb}else{Ext.Viewport.setMasked(null);delete h.cb;h.fireEvent("unauthorized",null,null)}}})}else{if(e&&e.cancelled){Ext.Viewport.setMasked(null);delete h.cb;h.fireEvent("exception",{type:"timeout",msg:"The request to Facebook cancelled."},null)}}}else{console.log("Retrieving Facebook profile information ...");var f=e;Ext.defer(function(){if(!f.error||(f.id&&(f.id>0))){var b=Genesis.db.getLocalDB(),a=f.id;console.log("Session ID["+a+"]");b.currFbId=a;b.fbAccountId=f.email;g=b.fbResponse=h.createFbResponse(f);Genesis.db.setLocalDB(b);b=Genesis.db.getLocalDB();console.log("You`ve logged into Facebook! \nEmail("+g.email+")\nauth_code("+b.auth_code+")\nID("+a+")\n");delete h.cb;h._fb_connect();if(b.auth_code){console.log("Updating Facebook Login Info ...");Account.setUpdateFbLoginUrl();Account.load(0,{jsonData:{},params:{user:Ext.encode(b.fbResponse)},callback:function(d,c){if(c.wasSuccessful()){Ext.Viewport.setMasked(null);Genesis.db.setLocalDBAttrib("enableFB",true)}h.fireEvent("connected",g,c)}})}else{Genesis.db.setLocalDBAttrib("enableFB",true);h.fireEvent("connected",g,null);delete h.cb}}else{Ext.Viewport.setMasked(null);h.fireEvent("unauthorized",null,null);h.facebook_onLogout(null,false);delete h.cb}},0.5*1000,h)}delete h.fbLoginTimeout},facebook_onLogout:function(g,k){var i=this;g=g||Ext.emptyFn;console.log("facebook_onLogout");try{var e=Genesis.db.getLocalDB();e.currFbId=0;delete e.fbAccountId;delete e.fbResponse;delete e.fbAuthCode;delete e.fbExpiresIn;Genesis.db.setLocalDB(e);g()}catch(h){g()}},getFbProfilePhoto:function(b){return"http://graph.facebook.com/"+b+"/picture?type=square"},createFBReminderMsg:function(){var b=this;if(!b.actions){b.actions=(Ext.create("Ext.Sheet",{bottom:0,left:0,top:0,right:0,padding:"1.0",hideOnMaskTap:false,defaultUnit:"em",layout:{type:"vbox",pack:"middle"},defaults:{xtype:"container",defaultUnit:"em"},items:[{width:"100%",flex:1,style:"text-align:center;display:inline-table;color:white;font-size:1.1em;",html:b.fbConnectRequestMsg+'<img width="160" style="margin:0.7em 0;" src="resources/themes/images/v1/facebook_icon.png"/>'},{docked:"bottom",defaults:{xtype:"button",defaultUnit:"em",scope:b},padding:"0 1.0 1.0 1.0",items:[{margin:"0 0 0.5 0",text:"Sign In",ui:"action",handler:function(){b.actions.hide();var a=_application.getController("client.MainPage");a.fireEvent("facebookTap",null,null,null,null,function(){Ext.device.Notification.show({title:b.titleMsg,message:b.fbPermissionFailMsg,buttons:["Dismiss"],callback:function(i){a._loggingIn=false;var k=_application.getController("client.Viewport");var h=k.getViewport();var g=h.getActiveItem();if(!g){Ext.Viewport.setMasked(null);k.resetView();k.redirectTo("login")}else{}}})});b.actions.destroy();delete b.actions}},{margin:"0.5 0 0.5 0",text:"Skip",ui:"cancel",handler:function(){b.actions.hide();_application.getController("client.Viewport").redirectTo("checkin");b.actions.destroy();delete b.actions}},{margin:"0.5 0 0 0",text:"Don't Remind Me Again",handler:function(){b.actions.hide();Genesis.db.setLocalDBAttrib("disableFBReminderMsg",true);_application.getController("client.Viewport").redirectTo("checkin");b.actions.destroy();delete b.actions}}]}]}));Ext.Viewport.add(b.actions);b.actions.show()}else{}},postCommon:function(f,h,i,g){var k=this;h=Ext.apply(h,{access_token:Genesis.db.getLocalDB()["fbResponse"]["accessToken"]});Ext.Ajax.request({async:true,disableCaching:false,method:"POST",params:h,url:"https://graph.facebook.com"+f,callback:function(b,d,e){try{var c=Ext.decode(e.responseText);if(d||(e.status==200)){i(c)}else{if(e.status==400){k.facebook_onLogout();Ext.defer(k.facebook_onLogin,1,k,[false,null,true])}else{console.log("Error Logging into Facebook\nStatus code "+Ext.encode(e.responseText));g(c)}}}catch(a){g(c)}}})},uploadPhoto:function(f,d,e){this.postCommon("/me/photos",f,d,e)},share:function(f,d,e){this.postCommon("/me/feed",f,d,e)},_fb_connect:function(){},_fb_disconnect:function(){this._fb_connect()}});Genesis.fb.initialize()};