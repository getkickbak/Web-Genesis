/*0ecb498b7aaf485885ef6c87b2c2b08b745a46bb*/KickBak={};window.plugins=window.plugins||{};KickBak.constants={isNfcEnabled:false,userName:"Eric Chan",appMimeType:"application/kickbak",clientVersion:"V1.0.0",serverVersion:"V1.0.0",themeName:"",_thumbnailAttribPrefix:"",_iconPath:"",_iconSize:0,defaultFontSize:(function(){var a=1.14;if(Ext.os.is("Tablet")){a=(window.innerHeight>640)?2*a:1.5*a}return Math.floor(((16*a*Math.min(1,window.devicePixelRatio))||(16*a)))})(),defaultIconSize:function(){return this._iconSize},site:"www.getkickbak.com",photoSite:"http://files.getkickbak.com",debugVPrivKey:"oSG8JclEHvRy5ngkb6ehWbb6TTRFXd8t",debugRPrivKey:"oSG8JclEHvRy5ngkb6ehWbb6TTRFXd8t",debugVenuePrivKey:"Debug Venue",privKey:null,lastLocalID:null,numSamples:-1,conseqMissThreshold:-1,sigOverlapRatio:-1,s_vol:-1,device:null,minDistance:0.3*1000,createAccountMsg:"Create user account using Facebook Profile information",spinnerDom:'<div class="x-loading-spinner-outer"><div class="x-loading-spinner"><span class="x-loading-top"></span><span class="x-loading-right"></span><span class="x-loading-bottom"></span><span class="x-loading-left"></span></div></div>',init:function(){var a=this;if(Ext.os.is("iOS")){a._iconPath="/ios";a._thumbnailAttribPrefix="thumbnail_ios_";a._iconSize=57;if(debugMode){a.pushNotifAppName="KickBak Dev Latest";a.pushNotifAppId="93D8A-5BE72"}else{a.pushNotifAppName="KickBak Production";a.pushNotifAppId="4fef6fb0691c12.54726991"}a.pushNotifType=1;console.log("Running a iOS System")}else{if(Ext.os.is("Android")){if((window.devicePixelRatio==1)||(window.devicePixelRatio>=2)){a._iconSize=48*((Ext.os.is("Tablet"))?3:1.2);a._iconPath="/android/mxhdpi";a._thumbnailAttribPrefix="thumbnail_android_mxhdpi_"}else{a._iconSize=36*((Ext.os.is("Tablet"))?3:1.5);a._iconPath="/android/lhdpi";a._thumbnailAttribPrefix="thumbnail_android_lhdpi_"}if(debugMode){a.pushNotifAppName="KickBak Dev Latest";a.pushNotifAppId="93D8A-5BE72";a.pushNotifProjectId="658015469194"}else{a.pushNotifAppName="KickBak Production";a.pushNotifAppId="4fef6fb0691c12.54726991";a.pushNotifProjectId="733275653511"}a.pushNotifType=3;console.log("Running a Android System")}else{a._iconPath="ios";a._thumbnailAttribPrefix="thumbnail_ios_";a._iconSize=57;console.log("Running a Unknown System")}}a._iconPath=a.themeName+a._iconPath;console.debug("IconSize = "+a._iconSize+"px")},addCRLF:function(){return("<br/>")},getIconPath:function(b,a,c){return((!c)?"resources/themes/images/"+this._iconPath:this.photoSite+"/"+this._iconPath+"/icons")+"/"+b+"/"+a+".png"}};KickBak.fn={systemTime:(new Date()).getTime(),clientTime:(new Date()).getTime(),weekday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],isNative:function(){return false},convertDateCommon:function(d,a,h){var e;var g=a||this.dateFormat;if(!(d instanceof Date)){if(typeof(JSON)!="undefined"){}if(Ext.isEmpty(d)){e=new Date()}else{if(g){e=Date.parse(d,g);if(Ext.isEmpty(e)){e=new Date(d).format(g)}return[e,e]}e=new Date(d);if(e.toString()=="Invalid Date"){e=Date.parse(d,g)}}}else{e=d}if(!h){var c=new Date().getTime();var f=this.currentDateTime(c);var b=(f-e.getTime())/1000;if(b>-10){if((b)<2){return[b,"a second ago"]}if((b)<60){return[b,parseInt(b)+" secs ago"]}b=b/60;if((b)<2){return[b,"a minute ago"]}if((b)<60){return[b,parseInt(b)+" minutes ago"]}b=b/60;if((b)<2){return[e,"an hour ago"]}if((b)<24){return[e,parseInt(b)+" hours ago"]}b=b/24;if(((b)<2)&&((new Date().getDay()-e.getDay())==1)){return[e,"Yesterday at "+e.format("g:i A")]}if((b)<7){return[e,this.weekday[e.getDay()]+" at "+e.format("g:i A")]}b=b/7;if(((b)<2)&&(b%7==0)){return[e,"a week ago"]}if(((b)<5)&&(b%7==0)){return[e,parseInt(b)+" weeks ago"]}if(b<5){return[e,parseInt(b*7)+" days ago"]}return[e,null]}else{}}return[e,-1]},convertDateFullTime:function(a){return a.format("D, M d, Y \\a\\t g:i A")},convertDateReminder:function(c){var b=new Date();var a=b.getDate();var g=b.getMonth();var e=b.getFullYear();var d=c.getDate();var h=c.getMonth();var f=c.getFullYear();if(a==d&&g==h&&e==f){return"Today "+c.format("g:i A")}return c.format("D g:i A")},convertDate:function(b,a){var c=this.convertDateCommon(b,a);if(c[1]!=-1){return(c[1]==null)?c[0].format("M d, Y"):c[1]}else{return c[0].format("D, M d, Y \\a\\t g:i A")}},convertDateNoTime:function(a){var b=this.convertDateCommon(a,null,true);if(b[1]!=-1){return(b[1]==null)?b[0].format("D, M d, Y"):b[1]}else{return b[0].format("D, M d, Y")}},convertDateNoTimeNoWeek:function(a){var b=this.convertDateCommon(a,null,true);if(b[1]!=-1){b=(b[1]==null)?b[0].format("M d, Y"):b[1]}else{b=b[0].format("M d, Y")}return b},convertDateInMins:function(a){var b=this.convertDateCommon(a,null,true);if(b[1]!=-1){return(b[1]==null)?b[0].format("h:ia T"):b[1]}else{return b[0].format("h:ia T")}},currentDateTime:function(a){return(this.systemTime-this.clientTime)+a},addUnit:function(a){return a+"px"},_removeUnitRegex:/(\d+)px/,removeUnit:function(a){return a.match(this._removeUnitRegex)[1]},calcPx:function(a,b){return Math.floor(((a/b)*KickBak.constants.defaultFontSize))},calcPxEm:function(b,a,c){return((b/KickBak.constants.defaultFontSize/c)+(a/c))},failFileHandler:function(b){var c={};c[FileError.NOT_FOUND_ERR]="File not found";c[FileError.SECURITY_ERR]="Security error";c[FileError.ABORT_ERR]="Abort error";c[FileError.NOT_READABLE_ERR]="Not readable";c[FileError.ENCODING_ERR]="Encoding error";c[FileError.NO_MODIFICATION_ALLOWED_ERR]="No mobification allowed";c[FileError.INVALID_STATE_ERR]="Invalid state";c[FileError.SYFNTAX_ERR]="Syntax error";c[FileError.INVALID_MODIFICATION_ERR]="Invalid modification";c[FileError.QUOTA_EXCEEDED_ERR]="Quota exceeded";c[FileError.TYPE_MISMATCH_ERR]="Type mismatch";c[FileError.PATH_EXISTS_ERR]="Path does not exist";var a={};a[FileTransferError.FILE_NOT_FOUND_ERR]="File not found";a[FileTransferError.INVALID_URL_ERR]="Invalid URL Error";a[FileTransferError.CONNECTION_ERR]="Connection Error";console.log("File Error - ["+c[b.code]+"]")},readFile:function(e,f){var d=this,c;var a=function(g){d.failFileHandler(g);f(null)};if(KickBak.fn.isNative()){var b=function(g){g.file(function(i){var h=new FileReader();h.onloadend=function(j){f(j.target.result)};h.readAsText(c)},a)};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(g){if(Ext.os.is("iOS")){c=(g.root.fullPath+"/../"+appName+".app/www/")+e}else{if(Ext.os.is("Android")){c=(appName+"/")+e}}console.debug("Reading from File - ["+c+"]");g.root.getFile(c,null,b,a)},a)}else{f(true)}},writeFile:function(f,e,g){var d=this,b;var a=function(h){d.failFileHandler(h);g(false)};if(KickBak.fn.isNative()){var c=function(h){console.debug("Created File - ["+b+"]");h.createWriter(function(i){console.debug("Writing to File - ["+b+"], Content - ["+e+"]");i.onwrite=function(j){console.debug("Write End Callback - ["+Ext.encode(j)+"]");g(true)};i.write(e)},a)};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(h){if(Ext.os.is("iOS")){b=(h.root.fullPath+"/../"+appName+".app/www/")+f}else{if(Ext.os.is("Android")){b=(appName+"/")+f}}h.root.getDirectory(b.substring(0,b.lastIndexOf("/")),{create:true});h.root.getFile(b,{create:true,exclusive:false},c,a)},a)}else{g()}},getPrivKey:function(c,b){var a=this;b=b||Ext.emptyFn;if(!a.privKey){if(!KickBak.fn.isNative()){a.privKey={v1:a.debugVPrivKey,r1:a.debugRPrivKey,venue:a.debugVenuePrivKey,venueId:1}}else{a.privKey={}}}return((c)?a.privKey[c]:a.privKey)},printProximityConfig:function(){var a=KickBak.constants;console.debug("ProximityID Configuration");console.debug("=========================");console.debug("\nSignal Samples["+a.numSamples+"]\nMissed Threshold["+a.conseqMissThreshold+"]\nSignal Overlap Ratio["+a.sigOverlapRatio+"]\nDefault Volume["+a.s_vol+"%]\n")},processSendLocalID:function(b,d){var c,a=null;if(b.freqs){KickBak.constants.lastLocalID=b.freqs}c=KickBak.constants.lastLocalID;if(c){a="LocalID=["+c[0]+", "+c[1]+", "+c[2]+"]"}return({message:a,localID:c,cancelFn:d})},processRecvLocalID:function(b){var a=null;var c=b.freqs;if(c){a="LocalID=["+c[0]+", "+c[1]+", "+c[2]+"]"}else{console.log("Already listening for LocalID ...")}return({message:a,localID:c})}};KickBak.db={_localDB:null,getLocalStorage:function(){return window.localStorage},getRedeemIndexDB:function(a){try{if(!this.kickbakRedeemIndex){this.kickbakRedeemIndex=Ext.decode(this.getLocalStorage().getItem("kickbakRedeemIndex"))}}catch(b){}if(!this.kickbakRedeemIndex){this.kickbakRedeemIndex={}}return(a?this.kickbakRedeemIndex[a]:this.kickbakRedeemIndex)},addRedeemIndexDB:function(b,c){var a=this.getRedeemIndexDB();a[b]=c;console.debug("Add to KickBak Redeem DB["+b+"]")},setRedeemIndexDB:function(a){},getRedeemSortedDB:function(a){try{if(!this.kickbakRedeemSorted){this.kickbakRedeemSorted=Ext.decode(this.getLocalStorage().getItem("kickbakRedeemSorted"))}}catch(b){}if(!this.kickbakRedeemSorted){this.kickbakRedeemSorted=[]}return(a?this.kickbakRedeemSorted[a]:this.kickbakRedeemSorted)},getLocalDB:function(){return(!this._localDB)?(this._localDB=Ext.decode(this.getLocalStorage().getItem("kickbak")||"{}")):this._localDB},setLocalDB:function(a){this._localDB=a;this.getLocalStorage().setItem("kickbak",Ext.encode(a))},setLocalDBAttrib:function(c,b){var a=this.getLocalDB();a[c]=b;this.setLocalDB(a)},removeLocalDBAttrib:function(b){var a=this.getLocalDB();if(typeof(a[b])!="undefined"){delete a[b];this.setLocalDB(a)}},getReferralDBAttrib:function(b){var a=this.getReferralDB();return a[b]},addReferralDBAttrib:function(b,c){var a=this.getReferralDB();a[b]=c;this.setReferralDB(a)},removeReferralDBAttrib:function(b){var a=this.getReferralDB();delete a[b];this.setReferralDB(a)},getReferralDB:function(){var a=this.getLocalStorage().getItem("kickbakreferral");return((a)?Ext.decode(a):{})},setReferralDB:function(a){console.debug("Setting Referral DB["+Ext.encode(a)+"]");this.getLocalStorage().setItem("kickbakreferral",Ext.encode(a))},resetStorage:function(){if(KickBak.fn.isNative()){KickBak.fb.facebook_onLogout(null,false)}var a=this.getLocalStorage(),b;for(b in a){if((b=="kickbak")||(b=="kickbakreferral")){try{a.removeItem(b)}catch(c){}console.debug("Removed ["+b+"]")}}this._localDB=null;Ext.data.Model.cache={}}};Ext.define("KickBak.dom.Element",{override:"Ext.dom.Element",setMargin:function(b,a){if(b||b===0){b=this.self.unitizeBox((b===true)?5:b,a)}else{b=null}this.dom.style.margin=b},setPadding:function(b,a){if(b||b===0){b=this.self.unitizeBox((b===true)?5:b,a)}else{b=null}this.dom.style.padding=b},replaceCls:function(b,a,c,d){if(Ext.isArray(b)&&Ext.isArray(a)&&b.join()===a.join()){return}return this.removeCls(b,c,d).addCls(a,c,d)}});Ext.define("KickBak.Component",{override:"Ext.Component",updatePadding:function(a){this.innerElement.setPadding(a,this.getInitialConfig().defaultUnit)},updateMargin:function(a){this.element.setMargin(a,this.getInitialConfig().defaultUnit)}});Ext.define("KickBak.util.Collection",{override:"Ext.util.Collection",clear:function(){this.callParent(arguments);this.indices={}}});Ext.define("KickBak.Mask",{override:"Ext.Mask",onEvent:function(b){var a=arguments[arguments.length-1];if(a.info.eventName==="tap"){this.fireEvent("tap",this,b);return false}return false}});Ext.define("KickBak.data.reader.Json",{override:"Ext.data.reader.Json",getResponseData:function(a){var b;if(a&&a.responseText){}b=this.callParent(arguments);if(!b.metaData){delete this.metaData}return b}});Ext.define("KickBak.data.writer.Writer",{override:"Ext.data.writer.Writer",writeDate:function(b,a){if(a){return this.callParent(arguments)}return null}});Ext.define("KickBak.data.proxy.Server",{override:"Ext.data.proxy.Server",errorResponseHandlerFn:function(a,f,k,d,g,e,j,l){var i=this,c=d.getAction(),b=_application;var h=b.getController(((!merchantMode)?"client":"server")+".Viewport");switch(a.rescode){case"unregistered_account":break;case"server_error":Ext.device.Notification.show({title:"Server Error(s)",message:f,buttons:["Dismiss"],callback:function(m){if(a.session_timeout){h.resetView();h.redirectTo("login");return}else{}}});break;case"login_invalid_facebook_info":Ext.device.Notification.show({title:"Create Account",message:KickBak.constants.createAccountMsg,buttons:["OK"],callback:function(m){h.setLoggedIn(false);h.redirectTo("createAccount")}});return;case"update_account_invalid_info":case"signup_invalid_info":case"update_account_invalid_facebook_info":case"login_invalid_info":Ext.device.Notification.show({title:"Login Error",message:f,buttons:["Dismiss"],callback:function(m){h.resetView();h.redirectTo("login")}});return;default:if(f&&(f!="Error Connecting to Server")){Ext.device.Notification.show({title:"Error",message:f,buttons:["Dismiss"],callback:function(){if(i._errorCallback){i._errorCallback();delete i._errorCallback}}})}else{if(d.initialConfig.doNotRetryAttempt){Ext.device.Notification.show({title:"Network Error",message:"Error Contacting Server",buttons:["Dismiss"],callback:function(){if(i._errorCallback){i._errorCallback();delete i._errorCallback}}})}}break}console.debug("Ajax ErrorHandler called. Operation("+d.wasSuccessful()+")"+((f)?"\n"+f:""));i.fireEvent("exception",i,e,d)},processResponse:function(n,c,g,d,m,o){var k=this,b=c.getAction(),i=k.getReader(),l,f,a;if(d.timedout||((d.status==0)&&(!g.aborted)&&(!c.initialConfig.doNotRetryAttempt))){Ext.device.Notification.show({title:"Server Timeout",message:"Error Contacting Server",buttons:["Try Again","Cancel"],callback:function(e){if(e.toLowerCase()=="try again"){k.afterRequest(g,n);Ext.Ajax.request(d.request.options)}else{d.timedout=false;g.aborted=true;n=false;c.success=false;k.processResponse(n,c,g,d,m,o)}}});return}var h=function(){f=((l&&Ext.isDefined(l.getMessage))?(Ext.isArray(l.getMessage())?l.getMessage().join(KickBak.constants.addCRLF()):l.getMessage()):"Error Connecting to Server");a=i.metaData||{};Ext.Viewport.setMasked(null);if(typeof m=="function"){m.call(o||k,c)}if(k.supressErrorsPopup){k.supressErrorsCallbackFn=function(){k.supressErrorsPopup=false;k.errorResponseHandlerFn(a,f,n,c,g,d,m,o);delete k.supressErrorsCallbackFn}}else{k.errorResponseHandlerFn(a,f,n,c,g,d,m,o)}};if(!d.aborted){try{l=i.process(d)}catch(j){console.debug("Ajax call failed with message=["+j.message+"] url=["+g.getUrl()+"]");c.setException(c,{status:null,statusText:j.message});h();return}if(n===true){if(c.process(b,l,g,d)===false){h()}else{if(typeof m=="function"){m.call(o||k,c)}}k.afterRequest(g,n);return}}console.debug("Ajax call failed with status=["+d.status+"] url=["+g.getUrl()+"]");if(f){c.setException(c,{status:null,statusText:f})}else{k.setException(c,d)}if(!d.aborted){h()}k.afterRequest(g,n)},buildRequest:function(b){var a=KickBak.db.getLocalDB();if(a.auth_code){this.setExtraParam("auth_token",a.auth_code)}else{delete this.getExtraParams()["auth_token"]}var c=this.callParent(arguments);if(b.initialConfig.jsonData){c.setJsonData(b.initialConfig.jsonData)}return c}});Ext.define("KickBak.data.Connection",{override:"Ext.data.Connection",setupHeaders:function(g,b,d,f){var c=this;b=b||{};var a=KickBak.db.getLocalDB();var h=(b.method||c.getMethod()||((f||d)?"POST":"GET")).toUpperCase();b.headers=Ext.apply(b.headers,{Accept:"*/*"});if(a.csrf_code&&(h=="POST")){b.headers=Ext.apply(b.headers,{"X-CSRF-Token":a.csrf_code})}var e=c.callParent(arguments);return e},parseStatus:function(a,d){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!d.onreadystatechange){c=false}if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return({success:c,isException:b})}});Ext.define("KickBak.field.Text",{override:"Ext.field.Text",updateReadOnly:function(a){this[(a)?"addCls":"removeCls"]("readOnly");this.callParent(arguments)}});Ext.define("KickBak.field.Select",{override:"Ext.field.Select",getListPanel:function(){if(!this.listPanel){this.listPanel=Ext.create("Ext.Panel",{top:0,left:0,height:"9em",modal:true,cls:Ext.baseCSSPrefix+"select-overlay",layout:"fit",hideOnMaskTap:true,items:{xtype:"list",store:this.getStore(),itemTpl:'<span class="x-list-label">{'+this.getDisplayField()+"}</span>",listeners:{select:this.onListSelect,itemtap:this.onListTap,scope:this}}})}return this.listPanel}});Ext.define("KickBak.dataview.element.List",{override:"Ext.dataview.element.List",updateListItem:function(d,k){var h=this,e=h.dataview,j=Ext.fly(k),g=j.down(h.labelClsCache,true),c=e.prepareData(d.getData(true),e.getStore().indexOf(d),d),b=e.getDisclosureProperty(),a,l=c&&c.hasOwnProperty("iconSrc"),f,i;g.innerHTML=e.getItemTpl().apply(c);a=c&&c.hasOwnProperty(b);if(a){f=j.down(h.disclosureClsCache);f[c[b]===false?"addCls":"removeCls"](h.hiddenDisplayCache)}if(e.getIcon()){i=j.down(h.iconClsCache,true);i.style.backgroundImage=l?'url("'+l+'")':""}}});Ext.define("KickBak.tab.Bar",{override:"Ext.tab.Bar",doSetActiveTab:function(b,a){this.callParent(arguments);this.fireAction("tabchange",[this,b,a])}});Ext.define("KickBak.device.connection.PhoneGap",{override:"Ext.device.connection.PhoneGap",syncOnline:function(){var a=navigator.connection.type;this._type=a;this._online=(a!=Connection.NONE)&&(a!=Connection.UNKNOWN)}});Ext.define("KickBak.MessageBox",{override:"Ext.MessageBox",updateButtons:function(a){var b=this;if(a){if(b.buttonsToolbar){b.buttonsToolbar.removeAll();b.buttonsToolbar.setItems(a)}else{b.buttonsToolbar=Ext.create("Ext.Toolbar",{docked:"bottom",height:"2.6em",defaultType:"button",layout:{type:"hbox",pack:"center"},ui:b.getUi(),cls:b.getBaseCls()+"-buttons",items:a});b.add(b.buttonsToolbar)}}},onClick:function(a){if(a&&this._hideCallbackFn){this.getModal().un("hide",this._hideCallbackFn,Ext.device.Notification);delete this._hideCallbackFn}this.callParent(arguments)}});Ext.define("Ext.device.notification.Abstract",{show:function(a){if(!a.message){throw ("[Ext.device.Notification#show] You passed no message")}if(a.buttons){if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons]}}else{a.buttons=null}if(!a.scope){a.scope=this}return a},vibrate:Ext.emptyFn});Ext.define("Ext.device.notification.Simulator",{extend:"Ext.device.notification.Abstract",requires:["Ext.MessageBox"],msg:null,show:function(){var a=this.callSuper(arguments),e=[],d=a.buttons.length,c,b,g,f;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()}}e.push(c)}if(this.msg){this.msg.destroy()}this.msg=Ext.create("Ext.MessageBox");f=this.msg;f.setHideOnMaskTap((!a.ignoreOnHide)?true:false);g=function(h){if(a.callback){a.callback.apply(a.scope,[h])}};f._hideCallbackFn=Ext.bind(g,this,[e[e.length-1].itemId]);f.getModal().on("hide",f._hideCallbackFn,this);f.show({title:a.title,message:a.message,scope:f,buttons:e,fn:g})},vibrate:function(){navigator.notification.vibrate(2000)},dismiss:function(){var a=this.msg;if(a){if(a._hideCallbackFn){a._hideCallbackFn()}a.hide()}}});Ext.define("Ext.device.notification.PhoneGap",{extend:"Ext.device.notification.Simulator"});Ext.define("KickBak.util.Geolocation",{override:"Ext.util.Geolocation",parseOptions:function(){var b=this.getTimeout(),a={maximumAge:this.getMaximumAge(),allowHighAccuracy:this.getAllowHighAccuracy(),enableHighAccuracy:this.getAllowHighAccuracy()};if(b!==Infinity){a.timeout=b}console.debug("Geolocation - "+Ext.encode(a));return a}});Ext.define("KickBak.data.proxy.PagingMemory",{extend:"Ext.data.proxy.Memory",alias:"proxy.pagingmemory",alternateClassName:"KickBak.data.PagingMemoryProxy",read:function(b,f,c){var d=this,a=d.getReader();var e={data:a.getRoot(d.getData()).slice(b.getStart(),b.getStart()+b.getLimit()),total:a.getTotal(d.getData())};if(b.process("read",a.process(e))===false){this.fireEvent("exception",this,null,b)}Ext.callback(f,c||d,[b])},});Ext.define("KickBak.plugin.ListPaging",{extend:"Ext.plugin.ListPaging",loadNextPage:function(){var a=this;if(!a.storeFullyLoaded()){a.callParent(arguments)}}});Ext.define("KickBak.plugin.PullRefresh",{override:"Ext.plugin.PullRefresh",resetRefreshState:function(){Ext.device.Notification.beep(1);this.callParent(arguments)}});Ext.merge(Array.prototype,{binarySearch:function(f,b){var a=0,e=this.length-1,c,d;while(a<=e){c=Math.floor((a+e)/2);d=b(this[c],f);if(d<0){a=c+1;continue}if(d>0){e=c-1;continue}return c}return null}});Ext.merge(String.prototype,{getFuncBody:function(){var a=this.toString();a=a.replace(/[^{]+\{/,"");a=a.substring(0,a.length-1);a=a.replace(/\n/gi,"");if(!a.match(/\(.*\)/gi)){a+=")"}return a},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripScripts:function(){return this.replace(new RegExp("<noscript[^>]*?>([\\S\\s]*?)</noscript>","img"),"").replace(new RegExp("<script[^>]*?>([\\S\\s]*?)<\/script>","img"),"").replace(new RegExp("<link[^>]*?>([\\S\\s]*?)</link>","img"),"").replace(new RegExp("<link[^>]*?>","img"),"").replace(new RegExp("<iframe[^>]*?>([\\S\\s]*?)</iframe>","img"),"").replace(new RegExp("<iframe[^>]*?>","img"),"").replace(new RegExp("<embed[^>]*?>([\\S\\s]*?)</embed>","img"),"").replace(new RegExp("<embed[^>]*?>","img"),"").replace(new RegExp("<object[^>]*?>([\\S\\s]*?)</object>","img"),"").replace(new RegExp("<object[^>]*?>","img"),"").replace(new RegExp("<applet[^>]*?>([\\S\\s]*?)</applet>","img"),"").replace(new RegExp("<applet[^>]*?>","img"),"").replace(new RegExp("<button[^>]*?>([\\S\\s]*?)</button>","img"),"").replace(new RegExp("<button[^>]*?>","img"),"").replace(new RegExp("<input[^>]*?>([\\S\\s]*?)</input>","img"),"").replace(new RegExp("<input[^>]*?>","img"),"").replace(new RegExp("<style[^>]*?>([\\S\\s]*?)</style>","img"),"").replace(new RegExp("<style[^>]*?>","img"),"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripComments:function(){return this.replace(/<!(?:--[\s\S]*?--\s*)?>\s*/g,"")},times:function(c){var b="",a;for(a=0;a<c;a++){b+=this}return b},zp:function(a){return("0".times(a-this.length)+this)},capitalize:function(){return this.replace(/\w+/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1)})},uncapitalize:function(){return this.replace(/\w+/g,function(b){return b.charAt(0).toLowerCase()+b.substr(1)})},trim:function(a){if(a=="left"){return this.replace(/^\s*/,"")}if(a=="right"){return this.replace(/\s*$/,"")}if(a=="normalize"){return this.replace(/\s{2,}/g," ").trim()}return this.trim("left").trim("right")},trunc:function(a){return(this.length>(a-4))?this.substring(0,a-4)+" ...":this},htmlEncode:(function(){var d={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},b=[],c,a;for(c in d){b.push(c)}a=new RegExp("("+b.join("|")+")","g");return function(e){return(!e)?e:String(e).replace(a,function(g,f){return d[f]})}})(),htmlDecode:(function(){var d={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},b=[],c,a;for(c in d){b.push(c)}a=new RegExp("("+b.join("|")+"|&#[0-9]{1,5};)","g");return function(e){return(!e)?e:String(e).replace(a,function(g,f){if(f in d){return d[f]}else{return String.fromCharCode(parseInt(f.substr(2),10))}})}})()});Ext.merge(Math,{radians:function(a){return(a*Math.PI/180)}});