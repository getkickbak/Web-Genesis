["/*461a5f05dca238381e3ce9fbea8d8ba2209b3943",42,272450,"util.Geolocation",234598,41,"[\"Ext.util.GeoLocation\"],config:{autoUpdate:true,frequency:10000,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:false,timeout:Infinity,maximumAge:0,provider:undefined},updateMaximumAge:function(){if(this.watchOperation){this.updateWatchOperation()}},updateTimeout:function(){if(this.watchOperation){this.updateWatchOperation()}},updateAllowHighAccuracy:function(){if(this.watchOperation){this.updateWatchOperation()}},applyProvide",307124,33,"Geolocation){if(!a){if(navigator&&navigator.geolocation){a=navigator.geolocation}else{if(window.google){a=google.gears.factory.create(\"beta.geolocation\")}}}}else{this.fireEvent(\"locationerror\",this,false,false,true,\"This device does not support Geolocation.\")}return a},updateAutoUpdate:function(a,b){var c=this,f=c.getProvider();if(b&&f){clearInterval(c.watchOperationId);c.watchOperationId=null}if(a){if(!f){c.fireEvent(\"locationerror\",c,false,false,true,null);return}try{c.updateWatchOperation()}catch(d){c.fireEvent(\"locationerror\",c,false,false,true,d.message)}}},updateWatchOperation:function(){var a=this,b=a.getProvider();if(a.watchOperationId){clearInterval(a.watchOperationId)}function c(){b.getCurrentPosition(Ext.bind(a.fireUpdate,a),Ext.bind(a.fireError,a),a.parseOptions())}c();a.watchOperationId=setInterval(c,this.getFrequency())},updateLocation:function(h,a,c){var b=this,g=b.getProvider();var f=function(i,e){if(e){b.fireError(e)}else{b.fireEvent(\"locationerror\",b,false,false,true,i)}if(h){h.call(a||b,null,b)}};if(!g){f(null);return}try{g.getCurrentPosition(function(e){b.fireUpdate(e);if(h){h.call(a||b,b,b)}},function(e){f(null,e)},c||b.parseOptions())}catch(d){f(d.message)}},fireUpdate:function(a){var b=this,c=a.coords;this.position=a;b.setConfig({timestamp:a.timestamp,latitude:c.latitude,longitude:c.longitude,accuracy:c.accuracy,altitude:c.altitude,altitudeAccuracy:c.altitudeAccuracy,heading:c.heading,speed:c.speed});b.fireEvent(\"locationupdate\",b)},fireError:function(a){var b=a.code;this.fireEvent(\"locationerror\",this,b==a.TIMEOUT,b==a.PERMISSION_DENIED,b==a.POSITION_UNAVAILABLE,a.message==undefined?null:a.message)},parseOptions:function(){var b=this.getTimeout(),a={maximumAge:this.getMaximumAge(),enableHighAccuracy:this.getAllowHighAccuracy()};if(b!==Infinity){a.timeout=b}return a},destroy:function(){this.setAutoUpdate(false",274824,27744,303897,91131,"mixin.Select",317278,47,"selectable\",hooks:{updateStore:\"updateStore\"}},config:{disableSelection:null,mode:\"SINGLE\",allowDeselect:false,lastSelected:null,lastFocused:null,deselectOnContainerClick:true},modes:{SINGLE:true,SIMPLE:true,MULTI:true},selectableEventHooks:{addrecords:\"onSelectionStoreAdd\",removerecords:\"onSelectionStoreRemove\",updaterecord:\"onSelectionStoreUpdate\",load:\"refreshSelection\",refresh:\"refreshSelection\"},constructor:function(){this.selected=new Ext.util.MixedCollection();this.callParent(arguments)},applyMode:function(a){a=a?a.toUpperCase():\"SINGLE\";return this.modes[a]?a:\"SINGLE\"},updateStore:function(a,c){var b=this,d=Ext.apply({},b.selectableEventHooks,{scope:b});if(c&&Ext.isObject(c)&&c.isStore){if(c.autoDestroy){c.destroy()}else{c.un(d);if(a){a.un(\"clear\",\"onSelectionStoreClear\",this)}}}if(a){a.on(d);a.onBefore(\"clear\",\"onSelectionStoreClear\",this);b.refreshSelection()}},selectAll:function(a){var e=this,c=e.getStore().getRange(),d=c.length,b=0;for(;b<d;b++){e.select(c[b],true,a)}},deselectAl",350897,32,"Store().getRange();b.deselect(a,c);b.selected.clear();b.setLastSelected(null);b.setLastFocused(null)},selectWithEvent:function(a){var c=this,b=c.isSelected(a);switch(c.getMode()){case\"MULTI\":case\"SIMPLE\":if(b){c.deselect(a)}else{c.select(a,true)}break;case\"SINGLE\":if(c.getAllowDeselect()&&b){c.deselect(a)}else{c.select(a,false)}break}},selectRange:function(c,g,h){var f=this,b=f.getStore(),a=[],e,d;if(f.getDisableSelection()){return}if(c>g){e=g;g=c;c=e}for(d=c;d<=g;d++){a.push(b.getAt(d))}this.doMultiSelect(a,h)},select:function(c,e,b){var d=this,a;if(d.getDisableSelection()){return}if(typeof c===\"number\"){c=[d.getStore().getAt(c)]}if(!c){return}if(d.getMode()==\"SINGLE\"&&c){a=c.length?c[0]:c;d.doSingleSelect(a,b)}else{d.doMultiSelect(c,e,b)}},doSingleSelect:function(a,b){var d=this,c=d.selected;if(d.getDisableSelection()){return}if(d.isSelected(a)){return}if(c.getCount()>0){d.deselect(d.getLastSelected(),b)}c.add(a);d.setLastSelected(a);d.onItemSelect(a,b);d.setLastFocused(a);if(!b){d.fireSelectionChange([a])}},doMultiSelect:function(a,j,h){if(a===null||this.getDisableSelection()){return}a=!Ext.isArray(a)?[a]:a;var f=this,b=f.selected,e=a.length,g=false,c=0,d;if(!j&&b.getCount()>0){g=true;f.deselect(f.getSelection(),true)}for(;c<e;c++){d=a[c];if(j&&f.isSelected(d)){continue}g=true;f.setLastSelected(d);b.add(d);if(!h){f.setLastFocused(d)}f.onItemSelect(d,h)}if(g&&!h){this.fireSelectionChange(a)}},deselect:function(a,j){var f=this;if(f.getDisableSelection()){return}a=Ext.isArray(a)?a:[a];var b=f.selected,g=false,c=0,h=f.getStore(),e=a.length,d;for(;c<e;c++){d=a[c];if(typeof d===\"number\"){d=h.getAt(d)}if(b.remove(d)){if(f.getLastSelected()==d){f.setLastSelected(b.last())}g=true}if(d){f.onItemDeselect(d,j)}}if(g&&!j){f.fireSelectionChange(a)}},updateLastFocused:function(b,a){this.onLastFocusChanged(a,b)},fireSelectionChange:function(a){var b=this;b.fireAction(\"selectionchange\",[b,a],\"getSelection\")},getSelection:function(){return this.selected.getRange()},isSelected:function(a){a=Ext.isNumber(a)?this.getStore().getAt(a):a;return this.selected.indexOf(a)!==-1},hasSelection:function(){return this.selected.getCount()>0},refreshSelection:function(){var b=this,a=b.getSelection();b.deselectAll(true);if(a.length){b.select(a,false,true)}},onSelectionStoreRemove:function(c,b){var g=this,e=g.selected,f=b.length,a,d;if(g.getDisableSelection()){return}for(d=0;d<f;d++){a=b[d];if(e.remove(a)){if(g.getLastSelected()==a){g.setLastSelected(null)}if(g.getLastFocused()==a){g.setLastFocused(null)}g.fireSelectionChange([a])}}},onSelectionStoreClear:function(b){var a=b.getData().items;this.onSelectionStoreRemove(b,a)},getSelectionCount:function(){return this.selected.getCount()},onSelectionStoreAdd:Ext.emptyFn,onSelectionStoreUpdate:Ext.emptyFn,onItemSelect:Ext.emptyFn,onItemDeselect:Ext.emptyFn,onLastFocusChanged:Ext.emptyFn,onEditorKey:Ext.emptyFn",157632,32,"dataview.component.DataItem\",{extend:Ext.Container,xtype:\"dataitem\"",281104,36,"data-item\",defaultType:\"component\",record:null,itemCls:null,dataMap:{},dataview:null,width:\"100%\",items:[{xtype:\"component\"}]",241921,40,";c.callParent(arguments)},updateItemCls:function(b,a){if(a){this.removeCls(a)}if(b){this.addCls(b)}},doMapData:function(d,g,f){var a,e,c,b;for(a in d){c=d[a];e=this[a]();if(e){for(b in c){if(g&&e[b]&&g[c[b]]!==undefined&&g[c[b]]!==null){e[b](g[c[b]])}}}}if(f){f.updateData(g)}},updateRecord:function(d){if(!d){return}this._record=d;var f=this,a=f.dataview||this.getDataview(),g=a.prepareData(d.getData(true),a.getStore().indexOf(d),d),c=f.getItems(),e=c.first(),b=f.getDataMap();if(!e){return}if(b){this.doMapData(b,g,e)}f.fireEvent(\"updatedata\",f,g)}});Ext.define(\"Ext.dataview.component.Container\",{extend:Ext.Container,constructor:function(){this.itemCache=[];this.callParent(arguments)},doInitialize:function(){this.innerElement.on({touchstart:\"onItemTouchStart\",touchend:\"onItemTouchEnd\",tap:\"onItemTap\",taphold:\"onItemTapHold\",touchmove:\"onItemTouchMove\",singletap:\"onItemSingleTap\",doubletap:\"onItemDoubleTap\",swipe:\"onItemSwipe\",delegate:\"> .\"+Ext.baseCSSPrefix+\"data-item\",scope:this})",239872,33,"Parent();this.doInitialize()},onItemTouchStart:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);a.on({touchmove:\"onItemTouchMove\",scope:b,single:true});b.fireEvent(\"itemtouchstart\",b,a,b.indexOf(a),d)},onItemTouchMove:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);b.fireEvent(\"itemtouchmove\",b,a,b.indexOf(a),d)},onItemTouchEnd:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);a.un({touchmove:\"onItemTouchMove\",scope:b});b.fireEvent(\"itemtouchend\",b,a,b.indexOf(a),d)},onItemTap:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);b.fireEvent(\"itemtap\",b,a,b.indexOf(a),d)},onItemTapHold:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);b.fireEvent(\"itemtaphold\",b,a,b.indexOf(a),d)},onItemSingleTap:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);b.fireEvent(\"itemsingletap\",b,a,b.indexOf(a),d)},onItemDoubleTap:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);b.fireEvent(\"itemdoubletap\",b,a,b.indexOf(a),d)},onItemSwipe:function(d){var b=this,c=d.getTarget(),a=Ext.getCmp(c.id);b.fireEvent(\"itemswipe\",b,a,b.indexOf(a),d)},moveItemsToCache:function(j,k){var h=this,c=h.dataview,a=c.getMaxItemCache(),g=h.getViewItems(),f=h.itemCache,e=f.length,l=c.getPressedCls(),d=c.getSelectedCls(),b=k-j,m;for(;b>=0;b--){m=g[j+b];if(e!==a){h.remove(m,false);m.removeCls([l,d]);f.push(m);e++}else{m.destroy()}}if(h.getViewItems().length==0){this.dataview.showEmptyText()}},moveItemsFromCache:function(b){var l=this,e=l.dataview,m=e.getStore(),k=b.length,a=e.getDefaultType(),h=e.getItemConfig(),g=l.itemCache,f=g.length,j=[],c,n,d;if(k){e.hideEmptyText()}for(c=0;c<k;c++){b[c]._tmpIndex=m.indexOf(b[c])}Ext.Array.sort(b,function(o,i){return o._tmpIndex>i._tmpIndex?1:-1});for(c=0;c<k;c++){d=b[c];if(f){f--;n=g.pop();this.updateListItem(d,n)}else{n=l.getDataItemConfig(a,d,h)}n=this.insert(d._tmpIndex,n);delete d._tmpIndex}return j},getViewItems:function(){return this.getInnerItems()},updateListItem:function(a,b){if(b.updateRecord){if(b.getRecord()===a){b.updateRecord(a)}else{b.setRecord(a)}}},getDataItemConfig:function(e,b,c){var a=this.dataview,d={xtype:e,record:b,itemCls:a.getItemCls(),defaults:c,dataview:a};return Ext.merge(d,c)},doRemoveItemCls:function(a){var b=this.getViewItems(),d=b.length,c=0;for(;c<d;c++){b[c].removeCls(a)}},doAddItemCls:function(a){var b=this.getViewItems(),d=b.length,c=0;for(;c<d;c++){b[c].addCls(a)}},updateAtNewIndex:function(c,b,a){this.moveItemsToCache(c,c);this.moveItemsFromCache([a]",177479,32,",b=d.itemCache,c=b.length,a=0;for(;a<c;a++){b[a].destroy()}",279855,37,"dataview.elemen",240476,35,"doInitialize:function(){this.element.on({touchstart:\"onItemTouchStart\",touchend:\"onItemTouchEnd\",tap:\"onItemTap\",taphold:\"onItemTapHold\",touchmove:\"onItemTouchMove\",singletap:\"onItemSingleTap\",doubletap:\"onItemDoubleTap\",swipe:\"onItemSwipe\",delegate:\"> div\",scope:this})",239872,33,"Parent();this.doInitialize()",241921,40,";c.callParent([a+\"-container\",b])},onItemTouchStart:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);Ext.get(c).on({touchmove:\"onItemTouchMove\",scope:b,single:true});b.fireEvent(\"itemtouchstart\",b,Ext.get(c),a,d)},onItemTouchEnd:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);Ext.get(c).un({touchmove:\"onItemTouchMove\",scope:b});b.fireEvent(\"itemtouchend\",b,Ext.get(c),a,d)},onItemTouchMove:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);b.fireEvent(\"itemtouchmove\",b,Ext.get(c),a,d)},onItemTap:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);b.fireEvent(\"itemtap\",b,Ext.get(c),a,d)},onItemTapHold:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);b.fireEvent(\"itemtaphold\",b,Ext.get(c),a,d)},onItemDoubleTap:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);b.fireEvent(\"itemdoubletap\",b,Ext.get(c),a,d)},onItemSingleTap:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);b.fireEvent(\"itemsingletap\",b,Ext.get(c),a,d)},onItemSwipe:function(d){var b=this,c=d.getTarget(),a=b.getViewItems().indexOf(c);b.fireEvent(\"itemswipe\",b,Ext.get(c),a,d)},updateListItem:function(b,f){var e=this,a=e.dataview,c=a.getStore(),d=c.indexOf(b),g=a.prepareData(b.getData(true),d,b);g.xcount=c.getCount();g.xindex=typeof g.xindex===\"number\"?g.xindex:d;f.innerHTML=a.getItemTpl().apply(g)},addListItem:function(e,c){var h=this,d=h.dataview,i=d.getStore(),a=d.prepareData(c.getData(true),e,c),b=h.element,j=b.dom.childNodes,g=j.length,f;a.xcount=typeof a.xcount===\"number\"?a.xcount:i.getCount();a.xindex=typeof a.xindex===\"number\"?a.xindex:e;f=Ext.Element.create(this.getItemElementConfig(e,a));if(!g||e==g){f.appendTo(b)}else{f.insertBefore(j[e])}},getItemElementConfig:function(c,e){var b=this.dataview,d=b.getItemCls(),a=b.getBaseCls()+\"-item\";if(d){a+=\" \"+d}return{cls:a,html:b.getItemTpl().apply(e)}},doRemoveItemCls:function(a){var d=this.getViewItems(),c=d.length,b=0;for(;b<c;b++){Ext.fly(d[b]).removeCls(a)}},doAddItemCls:function(a){var d=this.getViewItems(),c=d.length,b=0;for(;b<c;b++){Ext.fly(d[b]).addCls(a)}},moveItemsToCache:function(f,e){var d=this,a=d.getViewItems(),b=e-f,c;for(;b>=0;b--){c=a[f+b];Ext.get(c).destroy()}if(d.getViewItems().length==0){this.dataview.showEmptyText()}},moveItemsFromCache:function(d){var g=this,b=g.dataview,c=b.getStore(),f=d.length,e,a;if(f){b.hideEmptyText()}for(e=0;e<f;e++){d[e]._tmpIndex=c.indexOf(d[e])}Ext.Array.sort(d,function(i,h){return i._tmpIndex>h._tmpIndex?1:-1});for(e=0;e<f;e++){a=d[e];g.addListItem(a._tmpIndex,a);delete a._tmpIndex}},getViewItems:function(){return Array.prototype.slice.call(this.element.dom.childNodes)},updateAtNewIndex:function(c,b,a){this.moveItemsToCache(c,c);this.moveItemsFromCache([a]",230048,36,"ViewItems(),b=c.length,a=0;for(;a<b;a++){Ext.get(c[a]).destroy()}",279855,37,"dataview.DataView",252825,48,"DataView\",mixins:[Ext.mixin.Selectable],xtype:\"dataview\",config:{store:null,data:null,baseCls:Ext.baseCSSPrefix+\"dataview\",emptyText:null,deferEmptyText:true,itemTpl:\"<div>{text}</div>\",pressedCls:\"x-item-pressed\",itemCls:null,selectedCls:\"x-item-selected\",triggerEvent:\"itemtap\",triggerCtEvent:\"tap\",deselectOnContainerClick:true,scrollable:true,inline:null,pressedDelay:100,loadingText:\"Loading...\",useComponents:null,itemConfig:{},maxItemCache:20,defaultType:\"dataitem\",scrollToTopOnRefresh:true},constructor:function(a){var c=this,b;c.hasLoadedStore=false;c.mixins.selectable.constructor.apply(c,arguments);c.indexOffset=0;c.callParent(arguments)},updateItemCls",185716,35,";if(a){if(b){a.doRemoveItemCls(b)}if(c){a.doAddItemCls(c)}}},storeEventHooks:{beforeload:\"onBeforeLoad\",load:\"onLoad\",refresh:\"refresh\",addrecords:\"onStoreAdd\",removerecords:\"onStoreRemove\",updaterecord:\"onStoreUpdate",444560,43,"var b=this,a;b.on(b.getTriggerCtEvent(),b.onContainerTrigger,b);a=b.container=this.add(new Ext.dataview[b.getUseComponents()?\"component\":\"element\"].Container({baseCls:this.getBaseCls()}));a.dataview=b;b.on(b.getTriggerEvent(),b.onItemTrigger,b);a.on({itemtouchstart:\"onItemTouchStart\",itemtouchend:\"onItemTouchEnd\",itemtap:\"onItemTap\",itemtaphold:\"onItemTapHold\",itemtouchmove:\"onItemTouchMove\",itemsingletap:\"onItemSingleTap\",itemdoubletap:\"onItemDoubleTap\",itemswipe:\"onItemSwipe\",scope:b});if(b.getStore()){if(b.isPainted()){b.refresh()}else{b.on({painted:\"refresh\",single:true})}}},applyInline",249893,35,"Ext.apply({},a)}return a},updateInline:function(c,b){var a=this.getBaseCls();if(b){this.removeCls([a+\"-inlineblock\",a+\"-nowrap\"])}if(c){this.addCls(a+\"-inlineblock\");if(Ext.isObject(c)&&c.wrap===false){this.addCls(a+\"-nowrap\")}else{this.removeCls(a+\"-nowrap\")}}},prepareData:function(c,b,a){return c},onContainerTrigger:function(b){var a=this;if(b.target!=a.element.dom){return}if(a.getDeselectOnContainerClick()&&a.getStore()){a.deselectAll()}},onItemTrigger:function(b,a){this.selectWithEvent(this.getStore().getAt(a))},doAddPressedCls:function(a){var c=this,b=c.getItemAt(c.getStore().indexOf(a));if(Ext.isElement(b)){b=Ext.get(b)}if(b){if(b.isComponent){b.renderElement.addCls(c.getPressedCls())}else{b.addCls(c.getPressedCls())}}},onItemTouchStart:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);f.fireAction(\"itemtouchstart\",[f,d,h,a,g],\"doItemTouchStart\")},doItemTouchStart:function(c,b,e,a){var d=c.getPressedDelay();if(a){if(d>0){c.pressedTimeout=Ext.defer(c.doAddPressedCls,d,c,[a])}else{c.doAddPressedCls(a)}}},onItemTouchEnd:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);if(this",257843,48,"this.pressedTimeout);delete this.pressedTimeout}if(a&&h){if(h.isComponent){h.renderElement.removeCls(f.getPressedCls())}else{h.removeCls(f.getPressedCls())}}f.fireEvent(\"itemtouchend\",f,d,h,a,g)},onItemTouchMove:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);if(f",257843,48,"f.pressedTimeout);delete f.pressedTimeout}if(a&&h){if(h.isComponent){h.renderElement.removeCls(f.getPressedCls())}else{h.removeCls(f.getPressedCls())}}f.fireEvent(\"itemtouchmove\",f,d,h,a,g)},onItemTap:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);f.fireEvent(\"itemtap\",f,d,h,a,g)},onItemTapHold:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);f.fireEvent(\"itemtaphold\",f,d,h,a,g)},onItemSingleTap:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);f.fireEvent(\"itemsingletap\",f,d,h,a,g)},onItemDoubleTap:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);f.fireEvent(\"itemdoubletap\",f,d,h,a,g)},onItemSwipe:function(b,h,d,g){var f=this,c=f.getStore(),a=c&&c.getAt(d);f.fireEvent(\"itemswipe\",f,d,h,a,g)},onItemSelect:function(a,b){var c=this;if(b){c.doItemSelect(c,a)}else{c.fireAction(\"select\",[c,a],\"doItemSelect\")}},doItemSelect:function(c,a){if(c.container&&!c.isDestroyed){var b=c.getItemAt(c.getStore().indexOf(a));if(Ext.isElement(b)){b=Ext.get(b)}if(b){if(b.isComponent){b.renderElement.removeCls(c.getPressedCls());b.renderElement.addCls(c.getSelectedCls())}else{b.removeCls(c.getPressedCls());b.addCls(c.getSelectedCls())}}}},onItemDeselec",138459,34,"ntainer&&!c.isDestroyed){if(b){c.doItemDeselect(c,a)}else{c.fireAction(\"deselect\",[c,a,b],\"doItemDeselect\")}}},doItemDeselect:function(c,a){var b=c.getItemAt(c.getStore().indexOf(a));if(Ext.isElement(b)){b=Ext.get(b)}if(b){if(b.isComponent){b.renderElement.removeCls([c.getPressedCls(),c.getSelectedCls()])}else{b.removeCls([c.getPressedCls(),c.getSelectedCls()])}}},updateData:function(b){var a=this.getStore();if(!a){this.setStore(Ext.create(\"Ext.data.Store\",{data:b,autoDestroy:true}))}else{a.add(b)}},applyStore:function(b){var d=this,e=Ext.apply({},d.storeEventHooks,{scope:d}),c,a;if(b){b=Ext.data.StoreManager.lookup(b);if(b&&Ext.isObject(b)&&b.isStore){b.on(e);c=b.getProxy();if(c){a=c.getReader();if(a){a.on(\"exception\",\"handleException\",this)}}}}return b},handleException",241284,35,"updateStore:function(b,e){var d=this,f=Ext.apply({},d.storeEventHooks,{scope:d}),c,a;if(e&&Ext.isObject(e)&&e.isStore){e.un(f);if(!d.isDestroyed){d.onStoreClear()}if(e.getAutoDestroy()){e.destroy()}else{c=e.getProxy();if(c){a=c.getReader();if(a){a.un(\"exception\",\"handleException\",this)}}}}if(b){if(b.isLoaded()){this.hasLoadedStore=true}if(b.isLoading()){d.onBeforeLoad()}if(d.container){d.refresh()}}},onBeforeLoad:function(){var a=this.getLoadingText();if(a&&this.isPainted()){this.setMasked({xtype:\"loadmask\",message:a})}this.hideEmptyText()},updateEmptyText:function(c,d){var b=this,a;if(d&&b.emptyTextCmp){b.remove(b.emptyTextCmp,true);delete b.emptyTextCmp}if(c){b.emptyTextCmp=b.add({xtype:\"component\",cls:b.getBaseCls()+\"-emptytext\",html:c,hidden:true});a=b.getStore();if(a&&b.hasLoadedStore&&!a.getCount()){this.showEmptyText()}}},onLoad:function(a){this.hasLoadedStore=true;this.setMasked(false);if(!a.getCount()){this.showEmptyText()}},refresh:function(){var b=this,a=b.container;if(!b.getStore()){if(!b.hasLoadedStore&&!b.getDeferEmptyText()){b.showEmptyText()}return}if(a){b.fireAction(\"refresh\",[b],\"doRefresh\")}},applyItemTpl:function(a){return(Ext.isObject(a)&&a.isTemplate)?a:new Ext.XTemplate(a)},onAfterRende",216911,50,"updateStore(a.getStore())},getItemAt:function(a){return this.getViewItems()[a-this.indexOffset]},getItem",291583,32,"ViewItems().indexOf(b);return(a===-1)?a:this.indexOffset+a},getViewItems:function(){return this.container.getViewItems()},doRefresh:function(g){var a=g.container,l=g.getStore(),b=l.getRange(),f=g.getViewItems(),j=b.length,o=f.length,c=j-o,h=g.getScrollable(),d,m;if(this.getScrollToTopOnRefresh()&&h){h.getScroller().scrollToTop()}if(j<1){g.onStoreClear();return}else{g.hideEmptyText()}if(c<0){a.moveItemsToCache(o+c,o-1);f=g.getViewItems();o=f.length}else{if(c>0){a.moveItemsFromCache(l.getRange(o))}}for(d=0;d<o;d++){m=f[d];a.updateListItem(b[d],m)}if(this.hasSelection()){var k=this.getSelection(),n=this.getSelectionCount(),e;for(d=0;d<n;d++){e=k[d];this.doItemSelect(this,e)}}},showEmptyText:function(){if(this.getEmptyText()&&(this.hasLoadedStore||!this.getDeferEmptyText())){this.emptyTextCmp.show()}},hideEmptyText:function(){if(this.getEmptyText()){this.emptyTextCmp.hide()}",408429,32,"getStore(),c=(b&&b.getProxy()),a=(c&&c.getReader());if(a){a.clearListeners()}",279740,32,"setStore(null)},onStoreClear:function(){var c=this,a=c.container,b=c.getViewItems();a.moveItemsToCache(0,b.length-1);this.showEmptyText()},onStoreAdd:function(b,a){if(a){this.hideEmptyText();this.container.moveItemsFromCache(a)}},onStoreRemove:function(c,b,f){var a=this.container,e=b.length,d;for(d=0;d<e;d++){a.moveItemsToCache(f[d],f[d])}},onStoreUpdate:function(c,b,d,f){var e=this,a=e.container;f=(typeof f===\"undefined\")?d:f;if(f!==d){a.updateAtNewIndex(f,d,b);if(e.isSelected(b)){e.doItemSelect(e,b)}}else{a.updateListItem(b,e.getViewItems()[d])}}});Ext.define(\"Ext.dataview.IndexBa",240486,49,"IndexBar\"",281104,36,"indexbar\",direction:\"vertical\",letters:[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\"],ui:\"alphabet\",listPrefix:null},itemCls:Ext.baseCSSPrefix+\"\",updateDirection:function(a,c){var b=this.getBaseCls();this.element.replaceCls(b+\"-\"+c,b+\"-\"+a",240927,49,"wrapper\",classList:[\"x-centered\",\"x-indexbar-wrapper\"]",230686,32,"updateLetters:function(c){this.innerElement.setHtml(\"\");if(c){var b=c.length,a;for(a=0;a<b;a++){this.innerElement.createChild({html:c[a]})}}},updateListPrefix:function(a){if(a&&a.length){this.innerElement.createChild({html:a},0)}",239872,33,"Parent();this.innerElement.on({dragstart:this.onDragStart,dragend:this.onDragEnd,drag:this.onDrag,scope:this})},onDragStart:function(b,a){b.stopPropagation();this.innerElement.addCls(this.getBaseCls()+\"-pressed\");this.pageBox=this.innerElement.getPageBox();this.onDrag(b)},onDragEnd:function(b,a){this.innerElement.removeCls(this.getBaseCls()+\"-pressed\")},onDrag:function(c){var a=Ext.util.Point.fromEvent(c),b,d=this.pageBox;if(!d){d=this.pageBox=this.el.getPageBox()}if(this.getDirection()===\"vertical\"){if(a.y>d.bottom||a.y<d.top){return}b=Ext.Element.fromPoint(d.left+(d.width/2),a.y)}else{if(a.x>d.right||a.x<d.left){return}b=Ext.Element.fromPoint(a.x,d.top+(d.height/2))}if(b){this.fireEvent(\"index\",this,b.dom.innerHTML,",179737,34,",d=Array.prototype.slice.call(c.innerElement.dom.childNodes),b=d.length,a=0;for(;a<b;a++){Ext.removeNode(d[a])}this.callParent(",258240,34,"dataview.ListItemHeader\",{extend:Ext.Component,xtype:\"listitemheader\"",281104,36,"list-header\",docked:\"top\"}});Ext.define(\"Ext.dataview.component.ListItem\",{extend:Ext.dataview.component.DataItem,xtype:\"listitem\"",281104,36,"list-item\",dataMap:null,body:{xtype:\"component\",cls:\"x-list-item-body\"},disclosure:{xtype:\"component\",cls:\"x-list-disclosure\",hidden:true,docked:\"right\"},header:{xtype:\"component\",cls:\"x-list-header\",html:\" \"},tpl:null,items:null},applyBody:function(a){if(a&&!a.isComponent){a=",297199,33,"getBody())}return a},updateBody",297780,33,"else{if(b){b.destroy()}}},applyHeader:function(a){if(a&&!a.isComponent){a=",297199,33,"getHeader())}return a},updateHeader:function(b,a){if(a){a.destroy()}},applyDisclosure:function(a){if(a&&!a.isComponent){a=",297199,33,"getDisclosure())}return a},updateDisclosur",281528,34,"else{if(a){a.destroy()}}},updateTpl:function(a){this.getBody().setTpl(a)},updateRecord:function(d){var f=this,c=f.dataview||this.getDataview(),g=d&&c.prepareData(d.getData(true),c.getStore().indexOf(d),d),e=f.getDataMap(),b=this.getBody(),h=this.getDisclosure();f._record=d;if(e){f.doMapData(e,g,b)}else{if(b){b.updateData(g||null)}}if(h&&d&&c.getOnItemDisclosure()){var a=c.getDisclosureProperty();h[(g.hasOwnProperty(a)&&g[a]===false)?\"hide\":\"show\"]()}f.fireEvent(\"updatedata\",f,g)",202591,41,"Header",230316,32,");Ext.define(\"Ext.dataview.component.SimpleListItem\",{extend:Ext.Component,xtype:\"simplelistitem\"",281104,36,"list-item\",disclosure:{xtype:\"component\",cls:\"x-list-disclosure\",hidden:true},header:{xtype:\"component\",cls:\"x-list-header\",html:\" \"},dataview:null,record:null},initialize:function(",231066,39,"+\"-tpl\")},applyHeader:function(a){if(a&&!a.isComponent){a=",297199,33,"getHeader())}return a},updateHeader:function(b,a){if(a){a.destroy()}},applyDisclosure:function(a){if(a&&!a.isComponent){a=",297199,33,"getDisclosure())}return a},updateDisclosure:function(b,a){if(b){this.element.appendChild(b.renderElement)}else{if(a){a.destroy()}}},updateRecord:function(c){var d=this,b=d.dataview||this.getDataview(),e=c&&b.prepareData(c.getData(true),b.getStore().indexOf(c),c),f=this.getDisclosure();d.updateData(e||null);if(f&&c&&b.getOnItemDisclosure()){var a=b.getDisclosureProperty();f[(e.hasOwnProperty(a)&&e[a]===false)?\"hide\":\"show\"]()}d.fireEvent(\"updatedata\",d,e)",202591,41,"Header(),this.getDisclosur",230315,33,");Ext.define(\"Ext.util.PositionMap\",{config:{minimumHeight:",205224,33,"map=[];this.adjustments={};this.offset=0;this.initConfig(a)},populate:function(d,g){var f=this.map=this.map||[],a=this.getMinimumHeight(),b,e,c;d++;f.length=d;f[0]=0;for(b=g+1,c=d-1;b<=c;b++){e=b-1;f[b]=f[e]+a}this.adjustments={indices:[],heights:{}};this.offset=0;for(b=1,c=d-1;b<=c;b++){e=b-1;this.offset+=f[b]-f[e]-a}},setItemHeight:function(b,a){a=Math.max(a,this.getMinimumHeight());if(a!==this.getItemHeight(b)){var c=this.adjustments;c.indices.push(parseInt(b,10));c.heights[b]=a}},update:function(){var d=this.adjustments,n=d.indices,l=d.heights,a=this.map,k=n.length,o=this.getMinimumHeight(),c=0,f,e,m,h,g,b;if(!d.indices.length){return false}Ext.Array.sort(n,function(j,i){return j-i});for(f=0;f<k;f++){h=n[f];g=n[f+1]||a.length-1;b=(a[h+1]!==undefined)?(a[h+1]-a[h]+c):o;m=l[h];c+=m-b;for(e=h+1;e<=g;e++){a[e]+=c}}this.offset+=c;this.adjustments={indices:[],heights:{}};return true},getItemHeight:function(a){return this.map[a+1]-this.map[a]},getTotalHeight:function(){return((this.map.length-1)*this.getMinimumHeight())+this.offset},findIndex:function(a){return this.map.length?this.binarySearch(this.map,a):0},binarySearch:function(b,d){var f=0,a=b.length;if(d<b[0]){return 0}if(d>b[a-1]){return a-1}while(f+1<a){var c=(f+a)>>1,e=b[c];if(e==d){return c}else{if(e<d){f=c}else{a=c}}}return f}});Ext.define(\"Ext.dataview.List\",{alternateClassName:\"Ext.List\",extend:Ext.dataview.DataView,xtype:\"list\",mixins:[Ext.mixin.Bindable],config:{layout:\"fit\",indexBar:false,icon:null,preventSelectionOnDisclose:true,baseCls:Ext.baseCSSPrefix+\"list\",pinHeaders:true,grouped:false,onItemDisclosure:null,disclosureProperty:\"disclosure\",ui:\"normal\",defaultType:undefined,itemMap:{},itemHeight:47,variableHeights:false,refreshHeightOnUpdate:true,infinite:false,useSimpleItems:true,scrollable",288240,42,"itemHeight:44}],topItemIndex:0",396981,34,",a;b.callParent(arguments)},beforeInitialize:function(){var d=this,b,e,c,a;Ext.apply(d,{listItems:[],headerItems:[],updatedItems:[],headerMap:[],scrollDockItems:{top:[],bottom:[]}});this.translationMethod=Ext.browser.is.AndroidStock2?\"cssposition\":\"csstransform\";b=d.container=Ext.factory({xtype:\"container\",scrollable:{scroller:{autoRefresh:!d.getInfinite(),direction:\"vertical\"}}});d.add(b);e=b.getScrollable();c=d.scrollViewElement=e.getElement();d.scrollElement=e.getScroller().getElement();d.setScrollable(e);d.scrollableBehavior=b.getScrollableBehavior();a=d.pinnedHeader=Ext.factory({xtype:\"listitemheader\",html:\"&nbsp;\"",221503,33,"this.translationMethod},cls:[\"x-list-header\",\"x-list-header-swap\"]});a.translate(0,-10000);a.$position=-10000;c.insertFirst(a.renderElement);d.bind(e.getScroller().getTranslatable(),\"doTranslate\",\"onTranslate\")},initialize:function(){var d=this,a=d.container,c=d.scrollViewElement,b=d.getIndexBar();if(b){c.appendChild(b.renderElement)}d.on(d.getTriggerCtEvent(),d.onContainerTrigger,d);d.on(d.getTriggerEvent(),d.onItemTrigger,d);a.element.on({delegate:\".\"+d.getBaseCls()+\"-disclosure\",tap:\"handleItemDisclosure\",scope:d});a.element",155493,32,"scope:d});a.innerElement.on({touchstart:\"onItemTouchStart\",touchend:\"onItemTouchEnd\",tap:\"onItemTap\",taphold:\"onItemTapHold\",singletap:\"onItemSingleTap\",doubletap:\"onItemDoubleTap\",swipe:\"onItemSwipe\",delegate:\".\"+Ext.baseCSSPrefix+\"list-item\",scope:d});if(d.getStore()){d.refresh()}},onTranslate:function(b,h){var f=this,a=f.pinnedHeader,c=f.getStore(),g=c&&c.getCount(),d=f.getGrouped(),e=f.getInfinite();if(!g){f.showEmptyText();f.showEmptyScrollDock();a.$position=-10000;a.translate(0,-10000)}else{if(e&&f.itemsCount){f.handleItemUpdates(h);f.handleItemHeights();f.handleItemTransforms()}}if(d&&f.groups.length&&f.getPinHeaders()){f.handlePinnedHeader(h)}},handleItemUpdates:function(g){var f=this,c=f.listItems,l=c.length,h=f.topItemIndex,a=f.getListItemInfo(),d=f.getItemMap(),b,e,k,j;f.topItemIndex=j=Math.max(0,d.findIndex(-g)||0);if(h!==j){if(h>j){b=Math.min(l,h-j);for(e=b-1;e>=0;e--){k=c.pop();c.unshift(k);f.updateListItem(k,e+j,a)}}else{b=Math.min(l,j-h);for(e=0;e<b;e++){k=c.shift();c.push(k);f.updateListItem(k,e+j+l-b,a)}}}},handleItemHeights:function(){var t=this,k=t.updatedItems,d=k.length,o=t.getItemMap(),b=t.getUseSimpleItems(),q=t.container.getScrollable().getScroller(),c=o.getMinimumHeight(),p=t.headerIndices,g=t.headerMap,f=q.getTranslatable(),h=t.getVariableHeights(),s,n,m,a,r,l,e;for(n=0;n<d;n++){r=k[n];s=r.$dataIndex;if(s!==null){if(h){l=b?r.element.getHeight():r.element.getFirstChild().getHeight();l=Math.max(l,c)}else{l=c}r.$ownItemHeight=l;a=t.scrollDockItems.top.length;if(r.isFirst){t.totalScrollDockTopHeight=0;for(m=0;m<a;m++){e=t.scrollDockItems.top[m].$scrollDockHeight;l+=e;t.totalScrollDockTopHeight+=e}}a=t.scrollDockItems.bottom.length;if(r.isLast){for(m=0;m<a;m++){e=t.scrollDockItems.bottom[m].$scrollDockHeight;l+=e}}if(p&&p[s]){l+=t.headerHeight}o.setItemHeight(s,l);r.$height=l}}o.update();l=o.getTotalHeight();g.length=0;for(n in p){if(p.hasOwnProperty(n)){g.push(o.map[n])}}if(l!=q.givenSize){q.setSize(l);q.refreshMaxPosition();q.fireEvent(\"refresh\",q);if(f.isAnimating&&f.activeEasingY&&f.activeEasingY.setMinMomentumValue){f.activeEasingY.setMinMomentumValue(-q.getMaxPosition().y)}}t.updatedItems.length=0},handleItemTransforms:function(){var h=this,a=h.listItems,m=a.length,b=h.getItemMap(),k=h.scrollDockItems,f=h.getGrouped(),l,d,e,g,c;for(e=0;e<m;e++){l=a[e];d=b.map[l.$dataIndex];if(!l.$hidden&&l.$position!==d){l.$position=d;g=k.top.length;if(l.isFirst&&g){for(c=0;c<g;c++){k.top[c].translate(0,d);d+=k.top[c].$scrollDockHeight}}if(f&&h.headerIndices&&h.headerIndices[l.$dataIndex]){l.getHeader().translate(0,d);d+=h.headerHeight}l.translate(0,d);d+=l.$ownItemHeight;g=k.bottom.length;if(l.isLast&&g){for(c=0;c<g;c++){k.bottom[c].translate(0,d);d+=k.bottom[c].$scrollDockHeight}}}}},handlePinnedHeader:function(m){var l=this,c=l.pinnedHeader,f=l.getItemMap(),e=l.groups,k=l.headerMap,h=l.headerHeight,n=l.getStore(),d=l.totalScrollDockTopHeight,i,b,j,g,a;b=f.binarySearch(k,-m);i=e[b].children[0];if(i){j=m+k[b+1]-h;if(m>=0||(b===0&&d+m>=0)||(b===0&&-m<=k[b])){g=-10000}else{if(j<0){g=j}else{g=Math.max(0,m)}}a=n.getGroupString(i);if(c.$currentHeader!=a){c.setHtml(a);c.$currentHeader=a}if(c.$position!=g){c.translate(0,g);c.$position=g}}},createItem:function(c){var h=this,a=h.container,d=h.listItems,f=h.getInfinite(),g=h.scrollElement,i,e,b;i=Ext.factory(c);i.dataview=h;i.$height=c.minHeight;e=i.getHeader();if(!f){b=h.getBaseCls()+\"-item-relative\";i.addCls(b);e.addCls(b)}else{e.setTranslatable({translationMethod:this.translationMethod});e.translate(0,-10000);g.insertFirst(e.renderElement)}a.doAdd(i);d.push(i);return i},setItemsCount:function(a){var d=this,e=d.listItems,b=d.getListItemConfig(),f=a-e.length,c;for(c=0;c<f;c++){d.createItem(b)}for(c=f;c<0;c++){e.pop().destroy()}d.itemsCount=a;d.updateAllListItems();return d.listItems},updateUi:function(a,b){if(a&&a!=b&&a==\"round\"){this.setPinHeaders(false)}",204586,34,"ListItem:function(s,d,r){var u=this,a=r.store.getAt(d),o=u.headerIndices,b=u.footerIndices,m=s.getHeader(),p=u.scrollDockItems,h=u.updatedItems,g=s.renderElement.classList,k=m.renderElement.classList,e=u.getInfinite(),q=r.store.getCount(),t=[],j=[],n=[r.headerCls,r.footerCls,r.firstCls,r.lastCls,r.selectedCls],v=[r.headerCls,r.footerCls,r.firstCls,r.lastCls],f,l,c;if(e){s.$position=-10000}if(!a){s.setRecord(null);if(e){s.translate(0,-10000);m.translate(0,-10000)}else{s.hide();m.hide()}s.$hidden=true;return}else{if(s.$hidden){if(!e){s.show()}s.$hidden=false}}if(e){h.push(s)}if(s.isFirst&&d!==0&&p.top.length){for(l=0,f=p.top.length;l<f;l++){c=p.top[l];if(e){c.translate(0,-10000)}}s.isFirst=false}if(s.isLast&&d!==q-1&&p.bottom.length){for(l=0,f=p.bottom.length;l<f;l++){c=p.bottom[l];if(e){c.translate(0,-10000)}}s.isLast=false}if(s.$dataIndex!==d){s.$dataIndex=d;u.fireEvent(\"itemindexchange\",u,a,d,s)}if(s.getRecord()===a){s.updateRecord(a)}else{s.setRecord(a)}if(u.isSelected(a)){t.push(r.selectedCls)}if(r.grouped){if(o[d]){t.push(r.headerCls);j.push(r.headerCls);m.setHtml(r.store.getGroupString(a));if(!e){m.renderElement.insertBefore(s.renderElement);m.show()}}else{if(e){m.translate(0,-10000)}else{m.hide()}}if(b[d]){t.push(r.footerCls);j.push(r.footerCls)}}if(d===0){s.isFirst=true;t.push(r.firstCls);j.push(r.firstCls);if(!r.grouped){t.push(r.headerCls);j.push(r.headerCls)}if(!e){for(l=0,f=p.top.length;l<f;l++){c=p.top[l];c.renderElement.insertBefore(s.renderElement)}}}if(d===q-1){s.isLast=true;t.push(r.lastCls);j.push(r.lastCls);if(!r.grouped){t.push(r.footerCls);j.push(r.footerCls)}if(!e){for(l=0,f=p.bottom.length;l<f;l++){c=p.bottom[l];c.renderElement.insertAfter(s.renderElement)}}}if(g){for(l=0;l<n.length;l++){Ext.Array.remove(g,n[l])}t=Ext.Array.merge(t,g)}if(k){for(l=0;l<v.length;l++){Ext.Array.remove(k,v[l])}j=Ext.Array.merge(j,k)}s.renderElement.setCls(t);m.renderElement.setCls(j)},updateAllListItems:function(){var e=this,b=e.getStore(),a=e.listItems,f=e.getListItemInfo(),g=e.topItemIndex,c,d;if(b){for(c=0,d=a.length;c<d;c++){e.updateListItem(a[c],g+c,f)}}if(e.isPainted()){if(e.getInfinite()&&b&&b.getCount()){e.handleItemHeights()}e.refreshScroller()}},doRefresh:function(){var c=this,b=c.getInfinite(),a=c.container.getScrollable().getScroller(),d=c.getStore().getCount();if(b){c.getItemMap().populate(d,this.topItemIndex)}if(c.getGrouped()){c.refreshHeaderIndices()}if(d){c.hideScrollDockItems();c.hideEmptyText();if(!b){c.setItemsCount(d);if(c.getScrollToTopOnRefresh()){a.scrollTo(0,0)}}else{if(c.getScrollToTopOnRefresh()){c.topItemIndex=0;a.position.y=0}c.updateAllListItems()}}else{c.onStoreClear()}",155662,34,"var c=this;if(!c.headerHeight){c.headerHeight=parseInt(c.pinnedHeader.renderElement.getHeight(),10)}if(c.getInfinite()){c.setItemsCount(Math.ceil(b.height/c.getItemMap().getMinimumHeight())+1)}else{if(c.listItems.length&&c.getGrouped()&&c.getPinHeaders()){c.updateHeaderMap()}}},refreshScroller:function(){var a=this;if(a.isPainted()){if(!a.getInfinite()&&a.getGrouped()&&a.getPinHeaders()){a.updateHeaderMap()}a.container.getScrollable().getScroller().refresh()}},updateHeaderMap:function(){var c=this,b=c.headerMap,d=c.headerIndices,e,a;b.length=0",369803,37,"e=c.getItemAt(a).getHeader();b.push(e.renderElement.dom.offsetTop)}}},applyVariableHeights:function(a){if(!this.getInfinite()){return true}return a},applyDefaultType:function(a){if(!a){a=this.getUseSimpleItems()?\"simplelistitem\":\"listitem\"}return a},applyItemMap",148489,38,"util.PositionMap,this.getItemMap())},updateItemHeight:function(a){this.getItemMap().setMinimumHeight(a)},applyIndexBar",148489,38,"dataview.IndexBar,this.getIndexBar())},updatePinHeaders:function(a){if(this.isPainted()){this.pinnedHeader.translate(0,a?this.pinnedHeader.$position:-10000)}},updateItemTpl:function(f){var d=this,e=d.listItems,c=e.length||0,a,b;for(a=0;a<c;a++){b=e[a];b.setTpl(f)}d.updateAllListItems()},updateItemCls:function(f,c){var a=this.listItems,e=a.length,b,d;for(b=0;b<e;b++){d=a[b];d.removeCls(c);d.addCls(f)}},updateIndexBar:function(a,d){var c=this,b=c.scrollViewElement;if(d){d.un({index:\"onIndex\",scope:c});if(!a){c.element.removeCls(c.getBaseCls()+\"-indexed\")}if(b){b.removeChild(d.renderElement)}}if(a){a.on({index:\"onIndex\",scope:c});if(!d){c.element.addCls(c.getBaseCls()+\"-indexed\")}if(b){b.appendChild(a.renderElement)}}},updateGrouped:function(d){var f=this,c=this.getBaseCls(),a=f.pinnedHeader,b=c+\"-grouped\",e=c+\"-ungrouped\";if(a){a.translate(0,-10000)}if(d){f.addCls(b);f.removeCls(e)}else{f.addCls(e);f.removeCls(b)}f.updateAllListItems()},onStoreAdd:function(){this.doRefresh()},onStoreRemove:function(){this.doRefresh()},onStoreUpdate:function(){this.doRefresh()},onStoreClear:function(){var c=this,a=c.container.getScrollable().getScroller(),b=c.getInfinite();if(c.pinnedHeader){c.pinnedHeader.translate(0,-10000)}if(!b){c.setItemsCount(0);a.scrollTo(0,0)}else{c.topItemIndex=0;a.position.y=0;c.updateAllListItems()}},showEmptyScrollDock:function(){var e=this,d=e.getInfinite(),f=e.scrollDockItems,g=0,a,c,b;for(a=0,c=f.top.length;a<c;a++){b=f.top[a];if(d){b.translate(0,g);g+=b.$scrollDockHeight}else{this.scrollElement.appendChild(b.renderElement)}}for(a=0,c=f.bottom.length;a<c;a++){b=f.bottom[a];if(d){b.translate(0,g);g+=b.$scrollDockHeight}else{this.scrollElement.appendChild(b.renderElement)}}},hideScrollDockItems:function(){var e=this,d=e.getInfinite(),f=e.scrollDockItems,a,c,b;if(!d){return}for(a=0,c=f.top.length;a<c;a++){b=f.top[a];b.translate(0,-10000)}for(a=0,c=f.bottom.length;a<c;a++){b=f.bottom[a];b.translate(0,-10000)}},getItemAt:function(a){var e=this.listItems",295865,40,"if(c.$dataIndex==a){return c}}},getItemIndex:function(a){return a.$dataIndex},getViewItems:function(){return this.listItems},getListItemInfo:function(){var b=this,a=b.getBaseCls();return{store:b.getStore(),grouped:b.getGrouped(),baseCls:a,selectedCls:b.getSelectedCls(),headerCls:a+\"-header-wrap\",footerCls:a+\"-footer-wrap\",firstCls:a+\"-item-first\",lastCls:a+\"-item-last\",itemMap:b.getItemMap(),defaultItemHeight:b.getItemHeight()}},getListItemConfig:function(){var c=this,a=c.getItemMap().getMinimumHeight(),b={xtype:c.getDefaultType(),itemConfig:c.getItemConfig(),tpl:c.getItemTpl(),minHeight:a,cls:c.getItemCls()};if(c.getInfinite()){b.translatable={translationMethod:this.translationMethod}}if(!c.getVariableHeights()){b.height=a}return b},refreshHeaderIndices:function(){var g=this,h=g.getStore(),d=h&&h.getCount(),c=h.getGroups(),k=c.length,l=g.headerIndices={},j=g.footerIndices={},e,b,a,f;g.groups=c;for(e=0;e<k;e++){a=c[e].children[0];f=h.indexOf(a);l[f]=true;b=f-1;if(b>=0){j[b]=true}}j[d-1]=true;return l},onIndex:function(d,k){var m=this,p=k.toLowerCase(),n=m.getStore(),e=n.getGroups(),l=e.length,j=m.container.getScrollable().getScroller(),o,h,c,b;for(h=0;h<l;h++){o=e[h];b=o.name.toLowerCase();if(b>=p){c=o;break}else{c=o}}if(c){k=n.indexOf(c.children[0]);j.stopAnimation();var a=j.getContainerSize().y,q=j.getSize().y,f=q-a,g=m.getInfinite()?m.getItemMap().map[k]:m.listItems[k].getHeader().renderElement.dom.offsetTop;j.scrollTo(0,Math.min(g,f))}},onItemAdd:function(c){var b=this,a=c.config;if(a.scrollDock){if(a.scrollDock==\"bottom\"){b.scrollDockItems.bottom.push(c)}else{b.scrollDockItems.top.push(c)}if(b.getInfinite()){c.on({resize:\"onScrollDockItemResize\",scope:this});c.addCls(b.getBaseCls()+\"-scrolldockitem\");c.setTranslatable({translationMethod:this.translationMethod});c.translate(0,-10000);c.$scrollDockHeight=0}b.container.doAdd(c)}else{b.callParent(arguments)}},getScrollDockedItems:function(){return this.scrollDockItems.bottom.slice().concat(this.scrollDockItems.top.slice())},onScrollDockItemResize:function(g,c){var f=this,a=f.listItems,e=a.length,b,d;Ext.getCmp(g.id).$scrollDockHeight=c.height",247997,32,"Last){this.updatedItems.push(d);this.refreshScroller();break}}},onItemTouchStart:function(a){this.container.innerElement.on({touchmove:\"onItemTouchMove\",delegate:\".\"+Ext.baseCSSPrefix+\"list-item\",single:true,scope:this});this.callParent(this.parseEvent(a))},onItemTouchMove:function(a){this.callParent(this.parseEvent(a))},onItemTouchEnd:function(a){this.container.innerElement.un({touchmove:\"onItemTouchMove\",delegate:\".\"+Ext.baseCSSPrefix+\"list-item\",scope:this});this.callParent(this.parseEvent(a))},onItemTap:function(a){this.callParent(this.parseEvent(a))},onItemTapHold:function(a){this.callParent(this.parseEvent(a))},onItemSingleTap:function(a){this.callParent(this.parseEvent(a))},onItemDoubleTap:function(a){this.callParent(this.parseEvent(a))},onItemSwipe:function(a){this.callParent(this.parseEvent(a))},parseEvent:function(d){var b=this,c=Ext.fly(d.getTarget()).findParent(\".\"+Ext.baseCSSPrefix+\"list-item\",8),a=Ext.getCmp(c.id);return[b,a,a.$dataIndex,d]},applyOnItemDisclosure:function(a){if(Ext.isFunction(a)){return{scope:this,handler:a}}return a},handleItemDisclosure:function(f){var d=this,c=Ext.getCmp(Ext.get(f.getTarget()).up(\".x-list-item\").id),b=c.$dataIndex,a=d.getStore().getAt(b);d.fireAction(\"disclose\",[d,a,c,b,f],\"doDisclose\")},doDisclose:function(f,a,d,c,g){var b=f.getOnItemDisclosure();if(b&&b.handler){b.handler.call(b.scope||f,a,d,c,g)}},onItemTrigger:function(c,b,f,a,d){if(!(this.getPreventSelectionOnDisclose()&&Ext.fly(d.target).hasCls(this.getBaseCls()+\"-disclosure\"))){this.callParent(arguments)}}});Ext.define(\"Ext.device.communicator.Default\",{SERVER_URL:\"http://localhost:3000\",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:\"0\",generateId:function(){return String(++this.idSeed)},getId:function(a){var b=a.$callbackId;if(!b){a.$callbackId=b=this.generateId()}return b},getCallbackId:function(h,d){var c=this.callbackIdMap,b=this.callbackDataMap,g,a,f,e;if(!d){a=this.globalScopeId}else{if(d.isIdentifiable){a=d.getId()}else{a=this.getId(d)}}f=this.getId(h);if(!c[a]){c[a]={}}if(!c[a][f]){g=this.generateId();e={callback:h,scope:d};c[a][f]=g;b[g]=e}return c[a][f]},getCallbackData:function(a){return this.callbackDataMap[a]},invoke:function(c,a){var b=this.getCallbackData(c);b.callback.apply(b.scope,a)},send:function(c){var e,d,b,f;if(!c){c={}}else{if(c.callbacks){e=c.callbacks;d=c.scope;delete c.callbacks;delete c.scope;for(b in e){if(e.hasOwnProperty(b)){f=e[b];if(typeof f==\"function\"){c[b]=this.getCallbackId(f,d)}}}}}c.__source=document.location.href;var a=this.doSend(c);return(a&&a.length>0)?JSON.parse(a):null},doSend:function(a){var c=new XMLHttpRequest();c.open(\"GET\",this.SERVER_URL+\"?\"+Ext.Object.toQueryString(a)+\"&_dc=\"+new Date().getTime(),false);try{c.send(null);return c.responseText}catch(b){if(a.failure){this.invoke(a.failure)}else{if(a.callback){this.invoke(a.callback)}}}}});Ext.define(\"Ext.device.communicator.Android\",{extend:Ext.device.communicator.Default,doSend:function(a){a.__source=document.location.href;return window.Sencha.action(JSON.stringify(a))}});Ext.define(\"Ext.device.Communicator",267779,41,"if(Ext.os.is.Android){return new Ext.device.communicator.Android()}return new Ext.device.communicator.Default()}});Ext.define(\"Ext.device.notification.Abstract\",{show:function(a){if(!a.message){throw (\"[Ext.device.Notification#show] You passed no message\")}if(!a.buttons){a.buttons=\"OK\"}if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons]}if(!a.scope){a.scope=this}return a},vibrate",351178,32,"evice.notification.PhoneGap\",{extend:Ext.device.notification.Abstract,show:function(){var c=this.callParent(arguments),f=c.buttons,a=function(g){if(c.callback){c.callback.apply(c.scope,(c.buttons)?[c.buttons[g-1].itemId.toLowerCase()]:[])}};var e=f.length;if(e&&typeof f[0]!=\"string\"){var b=[],d;for(d=0;d<e;d++){b.push(f[d].text)}f=b.join(\",\")}navigator.notification.confirm(c.message,a,c.title,f)},vibrate:function(){navigator.notification.vibrate(2000)}});Ext.define(\"Ext.device.notification.Sencha\",{extend:Ext.device.notification.Abstract,show",233440,34,"arguments);Ext.device.Communicator.send({command:\"Notification#show\",callbacks:{callback:a.callback},scope:a.scope,title:a.title,message:a.message,buttons:a.buttons.join(\",\")})},vibrate:function(){Ext.device.Communicator.send({command:\"Notification#vibrate\"})}});Ext.define(\"Ext.device.notification.Simulator\",{extend:Ext.device.notification.Abstract,msg:null,show",233440,34,"arguments),e=[],d=a.buttons.length,c,b,g,f;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()}}e.push(c)}this.msg=Ext.create(\"Ext.MessageBox\");f=this.msg;g=function(h){if(a.callback){a.callback.apply(a.scope,[h])}};this.msg.show({title:a.title,message:a.message,scope:this.msg,buttons:e,fn:g})},vibrate:function(){var c=[\"@-webkit-keyframes vibrate{\",\"    from {\",\"        -webkit-transform: rotate(-2deg);\",\"    }\",\"    to{\",\"        -webkit-transform: rotate(2deg);\",\"    }\",\"}\",\"body {\",\"    -webkit-animation: vibrate 50ms linear 10 alternate;\",\"}\"];var b=",54493,40,";var a",57325,33,"a.innerHTML=c.join(\"\\n\");b.appendChild(a);setTimeout(function(){b.removeChild(a)},400)}});Ext.define(\"Ext.device.Notification",267779,45,"a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create(\"Ext.device.notification.PhoneGap\")}else{return Ext.create(\"Ext.device.notification.Sencha\")}}else{return Ext.create(\"Ext.device.notification.Simulator\")}",395008,38407,"ield.Checkbox\",{extend:Ext.field.Field,alternateClassName:\"Ext.form.Checkbox\",xtype:\"checkboxfield\",qsaLeftRe:/[\\[]/g,qsaRightRe:/[\\]]/g,isCheckbox:true,config:{ui:\"checkbox\",value:\"\",checked:false,tabIndex:-1",290163,32,"checkbox\",useMask:true,cls:Ext.baseCSSPrefix+\"input-checkbox",294686,39,"labelAlign:\"left\"",443614,53,"getComponent().on({scope:a,order:\"before\",masktap:\"onMaskTap\"});a.label.on({scope:a,tap:\"onMaskTap\"})},doInitValue:function(){var a=this,b=a.getInitialConfig();if(b.hasOwnProperty(\"value\")){a.originalState=b.value}if(b.hasOwnProperty(\"checked\")){a.originalState=b.checked}a.callParent(arguments",291426,148,"getChecked:function(){this._checked=this.getComponent().getChecked();return this._checked},getSubmitValue:function(){return(this.getChecked())?Ext.isEmpty(this._value)?true:this._value:null",285187,44,"a",285251,50,"getComponent().setChecked(a);if(",284001,32,")}},onMaskTap:function(a,c){var b=this,d=b.getComponent().input.dom;if(b.getDisabled()){return false}d.checked=!d.checked;b.onChange(c);return false},onChange:function(d){var c=this,b=c._checked,a=c.getChecked();if(b!=a){if(a){c.fireEvent(\"check\",c,d)}else{c.fireEvent(\"uncheck\",c,d)}c.fireEvent(\"change\",c,a,b)}},doChecked:Ext.emptyFn,doUnChecked:Ext.emptyFn,isChecked:function(){return this.getChecked()},check:function(){return this.setChecked(true)},uncheck:function(){return this.setChecked(false)},getSameGroupFields:function(){var j=this.up(\"formpanel\")||this.up(\"fieldset\"),b=this.getName(),g=this.qsaLeftRe,c=this.qsaRightRe,f=[],a,d,e,h;if(!j){j=Ext.Viewport}b=b.replace(g,\"\\\\[\");b=b.replace(c,\"\\\\]\");a=Ext.query(\"[name=\"+b+\"]\",j.element.dom);h=a.length;for(e=0;e<h;e++){d=a[e];d=Ext.fly(d).up(\".x-field\");if(d&&d.id){f.push(Ext.getCmp(d.id))}}return f},getGroupValues:function(){var a=[];this.getSameGroupFields().forEach(function(b){if(b.getChecked()){a.push(b.getValue())}});return a},setGroupValues:function(a){this.getSameGroupFields().forEach(function(b){b.setChecked((a.indexOf(b.getValue())!==-1))});return this},resetGroupValues:function(){this.getSameGroupFields().forEach(function(a){a.setChecked(a.originalState)});return this},reset:function(){this.setChecked(this.originalState)",395335,32,"picker.Slot\",{extend:Ext.dataview.DataView,xtype:\"pickerslot\",alternateClassName:\"Ext.Picker.Slot\",isSlot:true,config:{title:null,showTitle:true,cls:Ext.baseCSSPrefix+\"picker-slot\",name:null,value:null,flex:1,align:\"left\",displayField:\"text\",valueField:\"value\",itemTpl:null,scrollable:{direction:\"vertical\",indicators:false,momentumEasing:{minVelocity:2},slotSnapEasing:{duration:100}},verticallyCenterItems:true",294688,37,"title:\"choose an item\"}],constructor:function(){this.selectedIndex=0;this.callParent(arguments)},applyTitle:function(a){if(a){a=Ext.create(\"Ext.Component\",{cls:Ext.baseCSSPrefix+\"picker-slot-title\",docked:\"top\",html:a})}return a",281516,45,";this.setupBar()}if(a){this.remove(a)}},updateShowTitle:function(a){var c=this.getTitle(),b=a?\"show\":\"hide\";if(c){c.on(b,this.setupBar,this,{single:true,delay:50});c[a?\"show\":\"hide\"]()}},updateDisplayField:function(a){if(!this.config.itemTpl){this.setItemTpl('<div class=\"'+Ext.baseCSSPrefix+'picker-item {cls} <tpl if=\"extra\">'+Ext.baseCSSPrefix+'picker-invalid</tpl>\">{'+a+\"}</div>\")}},updateAlign:function(a,c){var b=this.element;b.addCls(Ext.baseCSSPrefix+\"picker-\"+a);b.removeCls(Ext.baseCSSPrefix+\"picker-\"+c)},applyData:function(d){var f=[],c=d&&d.length,a,b,e;if(d&&Ext.isArray(d)&&c){for(a=0;a<c;a++){b=d[a];e={};if(Ext.isArray(b)){e[this.valueField]=b[0];e[this.displayField]=b[1]}else{if(Ext.isString(b)){e[this.valueField]=b;e[this.displayField]=b}else{if(Ext.isObject(b)){e=b}}}f.push(e)}}return d",239872,33,"Parent();var a=this.getScrollable().getScroller();this.on({scope:this,painted:\"onPainted\",itemtap:\"doItemTap\"});a.on({scope:this,scrollend:\"onScrollEnd\"})},onPainted:function(){this.setupBar()},getPicker:function(){if(!this.picker){this.picker=this.getParent()}return this.picker},setupBa",449039,32,"return}var a=this.element,e=this.innerElement,f=this.getPicker(),g=f.bar,k=this.getValue(),b=this.getShowTitle(),j=this.getTitle(),h=this.getScrollable(),d=h.getScroller(),c=0,l,i;l=g.dom.getBoundingClientRect().height;if(b&&j){c=j.element.getHeight()}i=Math.ceil((a.getHeight()-c-l)/2);if(this.getVerticallyCenterItems()){e.setStyle({padding:i+\"px 0 \"+i+\"px\"})}d.refresh();d.setSlotSnapSize(l);this.setValue(k)},doItemTap:function(d,a,c,f){var b=this;b.selectedIndex=a;b.selectedNode=c;b.scrollToItem(c,true)},scrollToItem:function(e,d){var h=e.getY(),c=e.parent(),f=c.getY(),b=this.getScrollable(),a=b.getScroller(),g;g=h-f;a.scrollTo(0,g,d)},onScrollEnd:function(b,a,g){var f=this,d=Math.round(g/f.picker.bar.dom.getBoundingClientRect().height),c=f.getViewItems(),e=c[d];if(e){f.selectedIndex=d;f.selectedNode=e;f.fireEvent(\"slotpick\",f,f.getValue(),f.selectedNode)}},get",290693,32,"Store(),a,d;if(!b){return}if(!this.rendered||!c){return this._value}if(this._value===false){return null}a=b.getAt(this.selectedIndex);d=a?a.get(this.getValueField()):null;return d},set",93588,32,"SetValue(a)},setValueAnimated:function(a){return this.doSetValue(a,true)},doSetValue:function(g,f){if(!this.rendered){this._value=g;return}var b=this.getStore(),a=this.getViewItems(),d=this.getValueField(),c,e;c=b.findExact(d,g);if(c==-1){c=0}e=Ext.get(a[c]);this.selectedIndex=c;if(e){this.scrollToItem(e,(f)?{duration:100}:false);this.select(this.selectedIndex)}this._value=g}});Ext.define(\"Ext.picker.Picker\",{extend:Ext.Sheet,alias:\"widget.picker\",alternateClassName:\"Ext.Picker\",isPicke",281098,42,"picker\",doneButton:true,cancelButton:true,useTitles:false,slots:null,value:null,height:220,layout:{type:\"hbox\",align:\"stretch\"},centered:false,left:0,right:0,bottom:0,defaultType:\"pickerslot\",toolbarPosition:\"top\",toolbar:{xtype:\"titleba",294685,40,"height:\"100%\",toolbarPosition:\"bottom\",toolbar:{xtype:\"toolbar",296636,36,"},doneButton:{iconCls:\"check2\",ui:\"round\",text:\"\"},cancelButton:{iconCls:\"delete\",ui:\"round\",text:\"\"}}],initialize:function(){var b=this,a=Ext.baseCSSPrefix,c=this.innerElement;this.mask=c.createChild({cls:a+\"picker-mask\"});this.bar=this.mask.createChild({cls:a+\"picker-bar\"});b.on({scope:this,delegate:\"pickerslot\",slotpick:\"onSlotPick\"});b",295981,49,"oolb",445454,33,"Ext.applyIf(a,{docked:this.getToolbarPosition()});return Ext.factory(a,\"Ext.TitleBar\",this.getToolbar())},updateToolbar",297780,56,"applyDoneButton:function(a){if(a){if(Ext.isBoolean(a)){a={}}if(typeof a==\"string\"){a={text:a}}Ext.applyIf(a,{ui:\"action\",align:\"right\",text:\"Done\"})}return Ext.factory(a,\"Ext.Button\",this.getDoneButton())},updateDoneButton:function(c,a){var b=this.getToolbar();if(c){b.add(c);c.on(\"tap\",this.onDoneButtonTap,this)}else{if(a){b.remove(a)}}},applyCancelButton:function(a){if(a){if(Ext.isBoolean(a)){a={}}if(typeof a==\"string\"){a={text:a}}Ext.applyIf(a,{align:\"left\",text:\"Cancel\"})}return Ext.factory(a,\"Ext.Button\",this.getCancelButton())},updateCancelButton:function(b,a){var c=this.getToolbar();if(b){c.add(b);b.on(\"tap\",this.onCancelButtonTap,this)}else{if(a){c.remove(a)}}},updateUseTitles:function(d){var f=this.getInnerItems(),e=f.length,a=Ext.baseCSSPrefix+\"use-titles\",c,b;if(d",289381,40,"for(c=0;c<e;c++){b=f[c];if(b.isSlot){b.setShowTitle(d)}}},applySlots:function(b){if(b){var c=b.length,a;for(a=0;a<c;a++){b[a].picker=this}}return b},updateSlots:function(a){var b=Ext.baseCSSPrefix,c;this.removeAll();if(a){this.add(a)}c=this.getInnerItems();if(c.length>0){c[0].addCls(b+\"first\");c[c.length-1].addCls(b+\"last\")}this.updateUseTitles(this.getUseTitles())},onDoneButtonTap:function(){var a=this._value,b=this.getValue(true);if(b!=a){this.fireEvent(\"change\",this,b)}this.hide();",240039,33,"},onCancelButtonTap:function(){this.fireEvent(\"cancel\",this);this.hide();",240039,33,"},onSlotP",287063,32,"pick\",this,this.getValue(true),a)},show:function(){if(this.getParent()===undefined){Ext.Viewport.add(this",445144,32,"!this.isHidden()){this.setValue(this._value)}this.inputBlocker.blockInputs()},setValue:function(k,a){var f=this,d=f.getInnerItems(),e=d.length,j,h,c,b,g;if(!k){k={};for(b=0;b<e;b++){k[d[b].config.name]=null}}for(j in k){h=null;g=k[j];for(b=0;b<d.length;b++){c=d[b];if(c.config.name==j){h=c;break}}if(h){if(a){h.setValueAnimated(g)}else{h.setValue(g)}}}f._values=f._value=k;return f},setValueAnimated:function(a){this.setValue(a,true)},getValue:function(c){var b={},a=this.getItems().items,f=a.length,e,d;if(c){for(d=0;d<f;d++){e=a[d];if(e&&e.isSlot){b[e.getName()]=e.getValue(c)}}this._values=b}return this._values",119261,38,"Value()",208435,37,");Ext.destroy(this.mask,this.bar",258240,34,"picker.Date\",{extend:Ext.picker.Picker,xtype:\"datepicker\",alternateClassName:\"Ext.DatePicker\",config:{yearFrom:1980,yearTo:new Date().getFullYear(),monthText:\"Month\",dayText:\"Day\",yearText:\"Year\",slotOrder:[\"month\",\"day\",\"year\"],doneButton:true",294688,37,"doneButton:{iconCls:\"check2\",ui:\"round\",text:\"\"}",255321,48,"on({scope:this,delegate:\"> slot\",slotpick:this.onSlotPick});this.on({scope:this,show:this.onSlotPick})},setValue:function(b,a){if(Ext.isDate(b)){b={day:b.getDate(),month:b.getMonth()+1,year:b.getFullYear()}}this.callParent([b,a]);this.onSlotPick()},getValue:function(k){var h={},e=this.getItems().items,d=e.length,a,g,c,f,j,b;for(b=0;b<d;b++){j=e[b];if(j instanceof Ext.picker.Slot){h[j.getName()]=j.getValue(k)}}if(h.year===null&&h.month===null&&h.day===null){return null}f=Ext.isNumber(h.year)?h.year:1;c=Ext.isNumber(h.month)?h.month:1;g=Ext.isNumber(h.day)?h.day:1;if(c&&f&&c&&g){a=this.getDaysInMonth(c,f)}g=(a)?Math.min(g,a):g;return new Date(f,c-1,g)},updateYearFrom:function(){if(this.initialized){this.createSlots()}},updateYearTo:function(){if(this.initialized){this.createSlots()}},updateMonthText:function(a,b){var f=this.getInnerItems,e=f.length,d,c;if(this.initialized){for(c=0;c<e;c++){d=f[c];if((typeof d.title==\"string\"&&d.title==b)||(d.title.html==b)){d.setTitle(a)}}}},updateDayText:function(a,c){var f=this.getInnerItems,e=f.length,d,b;if(this.initialized){for(b=0;b<e;b++){d=f[b];if((typeof d.title==\"string\"&&d.title==c)||(d.title.html==c)){d.setTitle(a)}}}},updateYearText:function(e){var d=this.getInnerItems,c=d.length,b,a;if(this.initialized){for(a=0;a<c;a++){b=d[a];if(b.title==this.yearText){b.setTitle(e)}}}",400264,57,"createSlots()},createSlots:function(){var k=this,c=k.getSlotOrder(),m=k.getYearFrom(),e=k.getYearTo(),f=[],l=[],b=[],h=m>e,j,d,a;while(m){f.push({text:m,value:m});if(m===e){break}if(h){m--}else{m++}}a=k.getDaysInMonth(1,new Date().getFullYear());for(d=0;d<a;d++){l.push({text:d+1,value:d+1})}for(d=0,j=Ext.Date.monthNames.length;d<j;d++){b.push({text:Ext.Date.monthNames[d],value:d+1})}var g=[];c.forEach(function(i){g.push(k.createSlot(i,l,b,f))});k.setSlots(g)},createSlot:function(b,d,a,c){switch(b){case\"year\":return{name:\"year\",align:\"center\",data:c,title:this.getYearText(),flex:3};case\"month\":return{name:b,align:\"right\",data:a,title:this.getMonthText(),flex:4};case\"day\":return{name:\"day\",align:\"center\",data:d,title:this.getDayText(),flex:2}}},onSlotPick:function(){var g=this.getValue(true),f=this.getDaySlot(),e=g.getFullYear(),d=g.getMonth(),j=[],a,b;if(!g||!Ext.isDate(g)||!f){return}this.callParent(arguments);a=this.getDaysInMonth(d+1,e);for(b=0;b<a;b++){j.push({text:b+1,value:b+1})}if(f.getStore().getCount()==j.length){return}f.getStore().setData(j);var h=f.getStore(),m=f.getViewItems(),l=f.getValueField(),c,k;c=h.find(l,g.getDate());if(c==-1){return}k=Ext.get(m[c]);f.selectedIndex=c;f.scrollToItem(k);f.setValue(f.getValue(true))},getDaySlot:function(){var c=this.getInnerItems(),b=c.length,a,d;if(this.daySlot){return this.daySlot}for(a=0;a<b;a++){d=c[a];if(d.isSlot&&d.getName()==\"day\"){this.daySlot=d;return d}}return null},getDaysInMonth:function(c,b){var a",132232,46,"c==2&&this.isLeapYear(b)?29:a[c-1]},isLeapYear:function(a){return !!((a&3)===0&&(a%100||(a%400===0&&a)))},onDoneButtonTap:function(){var a=this._value,c=this.getValue(true),b=c;if(Ext.isDate(c)){b=c.toDateString()}if(Ext.isDate(a)){a=a.toDateString()}if(b!=a){this.fireEvent(\"change\",this,c)}this.hide();",240039,33,"}});Ext.define(\"Ext.field.DatePicker\",{extend:Ext.field.Text,alternateClassName:\"Ext.form.DatePicker\",xtype:\"datepickerfield\",config:{ui:\"select\",picker:true,clearIcon:false,destroyPickerOnHide:false,dateFormat:null,component:{useMask:true}},initialize:function(){var b=this,a=b.getComponent();b.callParent();a.on({scope:b,masktap:\"onMaskTap\"}",303468,35,"a.input.dom.disabled=true}},syncEmptyCls:Ext.emptyFn,applyValue:function(a){if(!Ext.isDate(a)&&!Ext.isObject(a)){return null}if(Ext.isObject(a)){return new Date(a.year,a.month-1,a.day)}return a},updateValue:function(d,b){var c=this,a=c._picker;if(a&&a.isPicker){a.setValue(d)}if(d!==null){c.getComponent().setValue(Ext.Date.format(d,c.getDateFormat()",137499,36,")}else{c.getComponent().setValue(\"\")}if(d!==b){c.fireEvent(\"change\",c,d,b)}},updateDateFormat:function(c,a){var b=this.getValue();if(c!=a&&Ext.isDate(b)){this.getComponent().setValue(Ext.Date.format(b,c",137499,36,")}},getValue:function(){if(this._picker&&this._picker instanceof Ext.picker.Date){return this._picker.getValue()}return this._value},getFormattedValue:function(b){var a=this.getValue();return(Ext.isDate(a))?Ext.Date.format(a,b||this.getDateFormat()",137499,36,":a},applyPicker:function(b,a){if(a&&a.isPicker){b=a.setConfig(b)}return b},getPicker:function(){var a=this._picker,b=this.getValue();if(a&&!a.isPicker){a=Ext.factory(a,Ext.picker.Date);if(b!=null){a.setValue(b)}}a.on({scope:this,change:\"onPickerChange\",hide:\"onPickerHide\"});this._picker=a;return a},onMaskTap",285560,48,"this.onFocus();return false},onPickerChange:function(b,d){var c=this,a=c.getValue();c.setValue(d);c.fireEvent(\"select\",c,d);c.onChange(c,d,a)},onChange:Ext.emptyFn,onPickerHide:function(){var b=this,a=b.getPicker();if(b.getDestroyPickerOnHide()&&a){a.destroy();b._picker=b.getInitialConfig().picker||true}",285667,56,"Focus",291588,39,"this.fireEvent(\"focus\",this,b);if(Ext.os.is.Android4){a.input.dom.focus()}a.input.dom.blur();if(this.getReadOnly()){return false}this.isFocused=true;this.getPicker().show",373661,33,"._picker;if(a&&a.isPicker){a.destroy()}",200511,46,"slider.Thumb",280754,32,"humb\"",281104,37,"humb\",draggable:{direction:\"horizontal\"}},platformConfig:[{platform:[\"ie10\"],draggable:{",221504,33,"csstransform\"}}}],elementWidth:0",255323,46,"getDraggable().onBefore(",154059,59,"scope:this});this.element.on(",225007,32,"},onDragStart:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onDrag:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onDragEnd:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)",155576,37,"elementWidth=b.width},getElem",411998,32,"elementWidth}});Ext.define(\"Ext.slider.Slide",281049,32,"slider\",config:{baseCls:\"x-slider\",thumbConfig:{draggable:{translatable:{easingX:{duration:300,type:\"ease-out\"}}}},increment:1,value:0,minValue:0,maxValue:100,allowThumbsOverlapping:false,animation:true,readOnly:false},elementWidth:0,offsetValueRatio:0,activeThumb:null",281263,38,"hasOwnProperty(\"values\")){a.value=a.values}this.callParent([a])},initialize:function(){var b=this.element;this.callParent();b.on({scope:this,tap:\"onTap\",resize:\"onResize\"});this.on({scope:this,delegate:\"> thumb\",tap:\"onTap\",dragstart:\"onThumbDragStart\",drag:\"onThumbDrag\",dragend:\"onThumbDragEnd\"});var a=this.getThumb(0);if(a){a.on(\"resize\",\"onThumbResize\",this)}},factoryThumb:function(){return Ext.factory(this.getThumbConfig(),Ext.slider.Thumb)},getThumb",247887,40,"Thumb:function(a){if(typeof a!=\"number\"){a=0}return this.innerItems[a]},refreshOffsetValueRatio:function(){var b=this.getMaxValue()-this.getMinValue(),a=this.elementWidth-this.thumbWidth;this.offsetValueRatio=a/b},onThumbResize:function(){var a=this.getThumb(0);if(a){this.thumbWidth=a.getElementWidth()}this.refresh()},onResize:function(a,b){this.elementWidth=b.width;this.refresh(",157267,34,"Value()},setActiveThumb:function(b){var a=this.activeThumb;if(a&&a!==b){a.setZIndex(null)}this.activeThumb=b;b.setZIndex(2);return this},onThumbDragStart:function(a,b){if(b.absDeltaX<=b.absDeltaY||this.getReadOnly()){return false}else{b.stopPropagation()}if(this.getAllowThumbsOverlapping()){this.setActiveThumb(a)}this.dragStartValue=this.getValue()[this.getThumbIndex(a)];this.fireEvent(\"dragstart\",this,a,this.dragStartValue,b)},onThumbDrag:function(c,g,a){var d=this.getThumbIndex(c),f=this.offsetValueRatio,b=this.constrainValue(this.getMinValue()+a/f);g.stopPropagation();this.setIndexValue(d,b);this.fireEvent(\"drag\",this,c,this.getValue(),g);return false},setIndexValue:function(d,g,f){var c=this.getThumb(d),b=this.getValue(),e=this.offsetValueRatio,a=c.getDraggable();a.setOffset((g-this.getMinValue())*e,null,f);b[d]=g},onThumbDragEnd:function(a,f){this.refreshThumbConstraints(a);var c=this.getThumbIndex(a),d=this.getValue()[c],b=this.dragStartValue",156713,38,"getValue(),f);if(b!==d){this.fireEvent(\"change\",this,a,d,b)}},getThumbIndex:function(a){return this.getThumbs().indexOf(a)},refreshThumbConstraints:function(d){var b=this.getAllowThumbsOverlapping(),a=d.getDraggable().getOffset().x,c=this.getThumbs(),e=this.getThumbIndex(d),g=c[e-1],h=c[e+1],f=this.thumbWidth;if(g){g.getDraggable().addExtraConstraint({max:{x:a-((b)?0:f)}})}if(h){h.getDraggable().addExtraConstraint({min:{x:a+((b)?0:f)}})}},onTap:function(j){if(this.isDisabled()){return}var k=Ext.get(j.target);if(!k||",417682,35,"k.hasCls(\"x-thumb\"))){return}var n=j.touch.point.x,h=this.element,c=h.getX(),d=n-c-(this.thumbWidth/2),o=this.constrainValue(this.getMinValue()+d/this.offsetValueRatio),r=this.getValue(),q=Infinity,m=r.length,g,f,l,p,b,a;if(m===1){p=0}else{for(g=0;g<m;g++){l=r[g];f=Math.abs(l-o);if(f<q){q=f;p=g}}}b=r[p];a=this.getThumb(p);this.setIndexValue(p,o,this.getAnimation());this.refreshThumbConstraints(a);if(b!==o){this.fireEvent(\"change\",this,a,o,b)}},updateThumbs:function(a){this.add(a)},applyValue:function(g){var d=Ext.Array.from(g||0),b=[],c=this.getMinValue(),a,e,f;for(e=0,f=d.length;e<f;e++){a=this.constrainValue(d[e]);if(a<c){a=c}b.push(a);c=a}return b},updateValue:function(f,b){var a=this.getThumbs(),d=f.length,e=this.getMinValue(),g=this.offsetValueRatio,c;this.setThumbsCount(d);for(c=0;c<d;c++){a[c].getDraggable().setExtraConstraint(null).setOffset((f[c]-e)*g)}for(c=0;c<d;c++){this.refreshThumbConstraints(a[c])}},refreshValue:function(){this.refreshOffsetValueRatio();this.setValue(this.getValue())},constrainValue:function(e){var b=this,d=b.getMinValue(),f=b.getMaxValue(),a=b.getIncrement(),c;e=parseFloat(e);if(isNaN(e)){e=d}c=(e-d)%a;e-=c;if(Math.abs(c)>=(a/2)){e+=(c>0)?a:-a}e=Math.max(d,e);e=Math.min(f,e);return e},setThumbsCount:function(e){var a=this.getThumbs(),f=a.length,c,d,b;if(f>e){for(c=0,d=f-e;c<d;c++){b=a[a.length-1];b.destroy()}}else{if(f<e){for(c=0,d=e-f;c<d;c++){this.add(this.factoryThumb())}}}return this},setValues:function(a){this.setValue(a",119260,39,"Value()},applyIncrement:function(a){if(a===0){a=1}return Math.abs(a)},updateAllowThumbsOverlapping:function(b,a){if(typeof a!=\"undefined\"){this.refreshValue()}},updateMinValue:function(b,a){if(typeof a!=\"undefined\"){this.refreshValue()}},updateMaxValue:function(b,a){if(typeof a!=\"undefined\"){this.refreshValue()}},updateIncrement:function(b,a){if(typeof a!=\"undefined\"){this.refreshValue()}},doSetDisabled:function(c",294172,43,"Items().items,d=a.length,b;for(b=0;b<d;b++){a[b].setDisabled(c",157629,35,"field.Slider",289951,33,"slider",293854,36,"Slider\"",153539,32,"slider-field\",tabIndex:-1,readOnly:false},proxyConfig:{increment:1,value:0,minValue:0,maxValue:100}",281263,38,"hasOwnProperty(\"values\")){a.value=a.values}this.callParent([a]);this.updateMultipleState()",239872,33,"Parent();this.getComponent().on({scope:this,change:\"onSliderChange\",dragstart:\"onSliderDragStart\",drag:\"onSliderDrag\",dragend:\"onSliderDragEnd\"})",278884,54,"slider.Slider)},updateCompon",241325,42,"a.setMinValue(this.getMinValue());a.setMaxValue(this.getMaxValue())},onSlider",273422,32,".apply(this,[].concat(\"change\",this,",430752,37,"))},onSliderDragStart:function(){this.fireEvent.apply(this,[].concat(\"dragstart\",this,",430752,37,"))},onSliderDrag:function(){this.fireEvent.apply(this,[].concat(\"drag\",this,",430752,37,"))},onSliderDragEnd:function(){this.fireEvent.apply(this,[].concat(\"dragend\",this,",430752,37,"))},setValues:function(a){this.setValue(a);this.updateMultipleState(",119260,39,"Value()},reset:function(){var b=this.config,a=(this.config.hasOwnProperty(\"values\"))?b.values:b.value;this.setValue(",285449,62,"getComponent().setDisabled",291308,32,291393,36,285553,62,"this.getValue()!==this.originalValue},updateMultipleState:function(){var a=this.getValue();if(a&&a.length>1",292741,33,"slider-multiple\")}}});Ext.define(\"Ext.slider.Toggle\",{extend:Ext.slider.Slider,config:{baseCls:\"x-toggle\",minValueCls:\"x-toggle-off\",maxValueCls:\"x-toggle-on",444560,52,"change:\"onChange\"})},applyMinValue:function(){return 0},applyMaxValue:function(){return 1},applyIncrement:function(){return 1},updateMinValueCls:function(c,b){var a=this.element;if(b&&a.hasCls(b)){a.replaceCls(b,c)}},updateMaxValueCls:function(c,b){var a=this.element;if(b&&a.hasCls(b)){a.replaceCls(b,c)}},setValue:function(b,a",400287,34,"onChange(this,this.getThumbs()[0],b,a)},onChange:function(d,a,f,c){var g=f>0,b=d.getMaxValueCls(),e=d.getMinValueCls();this.element.addCls(g?b:e);this.element.removeCls(g?e:b)},toggle:function(){var a=this.getValue();this.setValue((a==1)?0:1);return this},onTap:function(){if(this.isDisabled()||this.getReadOnly()){return}var b=this.getValue(),c=(b==1)?0:1,a=this.getThumb(0);this.setIndexValue(0,c,this.getAnimation());this.refreshThumbConstraints(a);this.fireEvent(\"change\",this,a,c,b)}});Ext.define(\"Ext.field.Toggle\",{extend:Ext.field.Slider,xtype:\"toggle",293854,37,"oggle\",config:{cls:\"x-toggle-field\",labelAlign:\"left\"",294688,37,"labelAlign:\"left\"}],proxyConfig:{minValueCls:\"x-toggle-off\",maxValueCls:\"x-toggle-on\"},toggleOnLabel:\"On\",toggleOffLabel:\"Off\"",278885,53,"slider.Toggle)},setValue:function(b){if(b===true){b=1}var a=this.getValue();if(a!=b){this.getComponent().setValue(b);this.fireEvent(\"change\",this,b,a)}return this},getValue:function(){return(this.getComponent().getValue()==1)?1:0},toggle:function(){var a=this.getValue();this.setValue((a==1)?0:1);return this},onChange:function(){this.setLabel((this.getValue()==1)?this.toggleOnLabel:this.toggleOffLabel)}});Ext.define(\"Ext.form.FieldSet\",{extend:Ext.Container,alias:\"widget.fieldset\"",281104,36,"form-fieldset\",title:null,instructions:null",296022,88,"baseC",296251,58,"itle,this._title",281515,53,"this.remove(a)}},getTitle:function(){var a=this._title;if(a&&a instanceof Ext.Title){return a.getTitle()}return a},applyInstructions",281407,46,"}}Ext.applyIf(a,{docked:\"bottom\",baseCls:this.getBaseCls()+\"-instructions\"});",281469,36,"_instructions)},updateInstructions",281529,39,"this.remove(a)}},getInstructions:function(){var a=this._instructions;if(a&&a instanceof Ext.Title){return a.getTitle()}return a",285451,33,"getFieldsAsArray().forEach(function(b){b.setDisabled(a)});return this},getFieldsAsArray:function(){var a=[],b=function(c){if(c.isField){a.push(c)}if(c.isContainer){c.getItems().each(b)}};this.getItems().each(b);return a}});Ext.define(\"Ext.form.Panel\",{alternateClassName:\"Ext.form.FormPanel\",extend:Ext.Panel,xtype:\"formpanel\"",281104,36,"form\",standardSubmit:false,url:null,baseParams:null,submitOnAction:false,record:null,method:\"post\",scrollable:{",221504,33,"scrollposition\"}},trackResetOnLoad:false",233422,56,"tag=\"form\";return a",272751,52,"element.on({submit:\"onSubmit\",scope:a})},updateRecord:function(c){var a,b,d;if(c&&(a=c.fields)){b=this.getValues()",371087,35,"&&a.containsKey(d)){c.set(d,b[d])}}}return this},setRecord:function(a){var b=this;if(a&&a.data){b.setValues(a.data)}b._record=a;return this},onSubmit:function(b){var a=this;if(b&&!a.getStandardSubmit()){b.stopEvent()}else{this.submit()}},updateSubmitOnAction:function(a){if(a){this.on({action:\"onFieldAction\",scope:this})}else{this.un({action:\"onFieldAction\",scope:this})}},onFieldAction:function(a){if(this.getSubmitOnAction()){a.blur();this.submit()}},submit:function(a){var c=this,b=c.element.dom||{},d;a=Ext.apply({url:c.getUrl()||b.action,submit:false,method:c.getMethod()||b.method||\"post\",autoAbort:false,params:null,waitMsg:null,headers:null,success:null,failure:null},a||{});d=c.getValues(c.getStandardSubmit()||!a.submitDisabled);return c.fireAction(\"beforesubmit\",[c,d,a],\"doBeforeSubmit\")},doBeforeSubmit:function(f,h,b){var e=f.element.dom||{};if(f.getStandardSubmit()){if(b.url&&Ext.isEmpty(e.action)){e.action=b.url}var a=this.query(\"spinnerfield\"),d=a.length,c,g;for(c=0;c<d;c++){g=a[c];if(!g.getDisabled()){g.getComponent().setDisabled(false)}}e.method=(b.method||e.method).toLowerCase();e.submit()}else{if(b.waitMsg){f.setMasked(b.waitMsg)}return Ext.Ajax.request({url:b.url,method:b.method,rawData:Ext.urlEncode(Ext.apply(Ext.apply({},f.getBaseParams()||{}),b.params||{},h)),autoAbort:b.autoAbort,headers:Ext.apply({\"Content-Type\"",259799,51,"},b.headers||{}),scope:f,callback:function(i,o,j){var m=this,n=j.responseText,l=Ext.Ajax.parseStatus(j.status,j),k;m.setMasked(false);k=function(){if(Ext.isFunction(b.failure)){b.failure.call(b.scope||m,m,j,n)}m.fireEvent(\"exception\",m,j)};if(o){if(l&&n.length==0){o=true}else{j=Ext.decode(n);o=!!j.success}if(o){if(Ext.isFunction(b.success)){b.success.call(b.scope||m,m,j,n)}m.fireEvent(\"submit\",m,j)}else{k()}}else{k()}}})}},setValues:function(k){var c=this.getFields(),g=this,a,h,j,e,b,d;k=k||{};for(a in k){if(k.hasOwnProperty(a)){h=c[a];j=k[a];if(h){if(Ext.isArray(h)){e=h.length;for(b=0;b<e;b++){d=h[b];if(d.isRadio){d.setGroupValue(j);break}else{if(d.isCheckbox){if(Ext.isArray(j)){d.setChecked((j.indexOf(d._value)!=-1))}else{d.setChecked((j==d._value))}}else{if(Ext.isArray(j)){d.setValue(j[b])}}}}}else{if(h.isRadio||h.isCheckbox){h.setChecked(j)}else{h.setValue(j)}}if(g.getTrackResetOnLoad()){h.resetOriginalValue()}}}}return this},getValues:function(g,l){var f=this.getFields(),m={},e=Ext.isArray,j,k,b,c,a,h,d;b=function(n,i){if(!l&&(!i||i===\"null\")){return}if(n.isCheckbox){k=n.getSubmitValue()}else{k=n.getValue()}if(!(g&&n.getDisabled())){if(n.isRadio){if(n.isChecked()){m[i]=k}}else{c=m[i];if(!Ext.isEmpty(c)){if(!e(c)){c=m[i]=[c]}if(e(k)){c=m[i]=c.concat(k)}else{c.push(k)}}else{m[i]=k}}}};for(a in f){if(f.hasOwnProperty(a)){j=f[a];if(e(j)){h=j.length;for(d=0;d<h;d++){b(j[d],a)}}else{b(j,a)}}}return m},reset:function(){this.getFieldsAsArray().forEach(function(a){a.reset()});return this",285451,33,"getFieldsAsArray().forEach(function(b){b.setDisabled(a)});return this},getFieldsAsArray:function(){var a=[],b=function(c){if(c.isField){a.push(c)}if(c.isContainer){c.getItems().each(b)}};this.getItems().each(b);return a},getFields:function(b){var a={},d;var c=function(e){if(e.isField){d=e.getName();if((b&&d==b)||typeof b==\"undefined\"){if(a.hasOwnProperty(d)){if(!Ext.isArray(a[d])){a[d]=[a[d]]}a[d].push(e)}else{a[d]=e}}}if(e.isContainer){e.items.each(c)}};this.getItems().each(c);return(b)?(a[b]||[]):a},getFieldsArray:function(){var a=[];var b=function(c){if(c.isField){a.push(c)}if(c.isContainer){c.items.each(b)}};this.items.each(b);return a},getFieldsFromItem:Ext.emptyFn,showMask:function(a,b){a=Ext.isObject(a)?a.message:a;if(a){this.setMasked({xtype:\"loadmask\",message:a})}else{this.setMasked(true)}return this},hideM",241281,36,";return this},getFocusedField:function(){var a=this.getFieldsArray(),c=a.length,d,b;for(b=0;b<c;b++){d=a[b];if(d.isFocused){return d}}return null},getNextField:function(){var a=this.getFieldsArray(),c=this.getFocusedField(),b;if(c){b=a.indexOf(c);if(b!==a.length-1){b++;return a[b]}}return false},focusNextField:function(){var a=this.getNextField();if(a){a.focus();return a}return false},getPreviousField:function(){var a=this.getFieldsArray(),c=this.getFocusedField(),b;if(c){b=a.indexOf(c);if(b!==0){b--;return a[b]}}return false},focusPreviousField:function(){var a=this.getPreviousField();if(a){a.focus();return a}",289896,46,433415,9219,"plugin.ListPaging\",{extend:Ext.Component,alias:\"plugin.listpaging\",config:{autoPaging:false,loadMoreText:\"Load More...\",noMoreRecordsText:\"No More Records\",loadTpl:['<div class=\"{cssPrefix}loading-spinner\" style=\"font-size: 180%; margin: 10px auto;\">','<span class=\"{cssPrefix}loading-top\"></span>','<span class=\"{cssPrefix}loading-right\"></span>','<span class=\"{cssPrefix}loading-bottom\"></span>','<span class=\"{cssPrefix}loading-left\"></span>',\"</div>\",'<div class=\"{cssPrefix}list-paging-msg\">{message}</div>'].join(\"\"),loadMoreCmp:{xtype:\"component\",baseCls:Ext.baseCSSPrefix+\"list-paging\",scrollDock:\"bottom\",hidden:true},loadMoreCmpAdded:false,loadingCls:Ext.baseCSSPrefix+\"loading\",list:null,scroller:null,loading:false},init:function(c){var a=c.getScrollable().getScroller(),b=c.getStore();this.setList(c);this.setScroller(a);this.bindStore(c.getStore());this.addLoadMoreCmp();if(b){this.disableDataViewMask(b)}c.updateStore=Ext.Function.createInterceptor(c.updateStore,this.bindStore,this);if(this.getAutoPaging()){a.on({scrollend:this.onScrollEnd,scope:this})}},bindStore:function(a,b){if(b){b.un({beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad,scope:this})}if(a){a.on({beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad,scope:this})}},disableDataViewMask:function(a){var b=this.getList();if(a.isAutoLoading()){b.setLoadingText(null)}else{a.on({load:{single:true,fn:function(){b.setLoadingText(null)}}})}},applyLoadTpl:function(a){return(Ext.isObject(a)&&a.isTemplate)?a:new Ext.XTemplate(a)},applyLoadMoreCmp:function(a){a=Ext.merge(a,{html:this.getLoadTpl().apply({cssPrefix:Ext.baseCSSPrefix,message:this.getLoadMoreText()}),scrollDock:\"bottom\",listeners:{tap:{fn:this.loadNextPage,scope:this,element:\"element\"}}})",297191,41,"getLoadMoreCmp())},onScrollEnd:function(b,a,d){var c=this.getList();if(!this.getLoading()&&d>=b.maxPosition.y){this.currentScrollToTopOnRefresh=c.getScrollToTopOnRefresh();c.setScrollToTopOnRefresh(false);this.loadNextPage()}},updateLoading:function(a){var b=this.getLoadMoreCmp(),c=this.getLoadingCls();if(a){b.addCls(c)}else{b.removeCls(c)}},onStoreBeforeLoad:function(a){if(a.getCount()===0){this.getLoadMoreCmp().hide()}},onStoreLoad:function(a){var d=this.getLoadMoreCmp(),b=this.getLoadTpl(),c=this.storeFullyLoaded()?this.getNoMoreRecordsText():this.getLoadMoreText();if(a.getCount()){d.show()}this.setLoading(false);d.setHtml(b.apply({cssPrefix:Ext.baseCSSPrefix,message:c}));if(this.currentScrollToTopOnRefresh!==undefined){this.getList().setScrollToTopOnRefresh(this.currentScrollToTopOnRefresh);delete this.currentScrollToTopOnRefresh}},addLoadMoreCmp:function(){var b=this.getList(),a=this.getLoadMoreCmp();if(!this.getLoadMoreCmpAdded()){b.add(a);b.fireEvent(\"loadmorecmpadded\",this,b);this.setLoadMoreCmpAdded(true)}return a},storeFullyLoaded:function(){var a=this.getList().getStore(),b=a.getTotalCount();return b!==null?a.getTotalCount()<=(a.currentPage*a.getPageSize()):false},loadNextPage:function(){var a=this;if(!a.storeFullyLoaded()){a.setLoading(true);a.getList().getStore().nextPage({addRecords:true})}}});Ext.define(\"Ext.plugin.PullRefresh\",{extend:Ext.Component,alias:\"plugin.pullrefresh\",config:{list:null,pullRefreshText:\"Pull down to refresh...\",releaseRefreshText:\"Release to refresh...\",lastUpdatedText:\"Last Updated:\",lastUpdatedDateFormat:\"m/d/Y h:iA\",loadingText:\"Loading...\",loadedText:\"Loaded.\",autoSnapBack:true,snappingAnimationDuration:300,overpullSnapBackDuration:300,pullTpl:['<div class=\"x-list-pullrefresh\">','<div class=\"x-list-pullrefresh-arrow\"></div>','<div class=\"x-loading-spinner\">','<span class=\"x-loading-top\"></span>','<span class=\"x-loading-right\"></span>','<span class=\"x-loading-bottom\"></span>','<span class=\"x-loading-left\"></span>',\"</div>\",'<div class=\"x-list-pullrefresh-wrap\">','<h3 class=\"x-list-pullrefresh-message\"></h3>','<div class=\"x-list-pullrefresh-updated\"></div>',\"</div>\",\"</div>\"].join(\"\"),translatable:true},isRefreshing:false,currentViewState:\"\"",255323,46,"on({painted:\"onPainted\",scope:this})},init:function(b){var a=this;a.setList(b);a.initScrollable()},initScrollable:function(){var d=this,g=d.getList(),b=g.getStore(),f=d.getPullTpl(),c=d.element,e=g.getScrollable(),a;if(!e){return}a=e.getScroller();d.lastUpdated=new Date();g.insert(0,d);if(b){if(b.isAutoLoading()){g.setLoadingText(null)}else{b.on({load:{single:true,fn:function(){g.setLoadingText(null)}}})}}f.overwrite(c,[]);d.loadingElement=c.getFirstChild();d.messageEl=c.down(\".x-list-pullrefresh-message\");d.updatedEl=c.down(\".x-list-pullrefresh-updated\");d.maxScroller=a.getMaxPosition();a.on({maxpositionchange:d.setMaxScroller,scroll:d.onScrollChange,scope:d});d.resetRefreshState()},onScrollableChange:function(){this.initScrollable()},updateList:function(a,c){var b=this;if(a&&a!=c){a.on({order:\"after\",scrollablechange:b.onScrollableChange,scope:b})}else{if(c){c.un({order:\"after\",scrollablechange:b.onScrollableChange,scope:b})}}},fetchLatest:function(){var b=this.getList().getStore(),c=b.getProxy(),a",370362,35,"{page:1,start:0,model:b.getModel(),limit:b.getPageSize(),action:\"read\",sorters:b.getSorters(),filters:b.getRemoteFilter()?b.getFilters():[]});c.read(a,this.onLatestFetched,this)},onLatestFetched:function(d){var n=this.getList().getStore(),m=this.getList(),j=m.getScrollable().getScroller(),h=j.position.x,f=j.position.y,b=n.getData(),c=d.getRecords(),a=c.length,k=[],l,g,e;for(e=0;e<a;e++){l=c[e];g=b.getByKey(l.getId());if(g){g.set(l.getData())}else{k.push(l)}g=undefined}n.insert(0,k);j.scrollTo(h,f);this.setViewState(\"loaded\");this.fireEvent(\"latestfetched\");if(this.getAutoSnapBack()){this.snapBack()}},snapBack:function(){var b=this,c=b.getList(),a=c.getScrollable().getScroller();a.on({scrollend:function(){this.resetRefreshState()},single:true,scope:b});a.minPosition.y=0;a.scrollTo(null,0,{duration:b.getSnappingAnimationDuration()})},onPainted:function(){this.pullHeight=this.loadingElement.getHeight()},setMaxScroller:function(b,a){this.maxScroller=a},onScrollChange:function(b,a,c){if(c<=0){this.onBounceTop(c)}if(c>this.maxScroller.y){this.onBounceBottom(c)}},applyPullTpl:function(a){return(Ext.isObject(a)&&a.isTemplate)?a:new Ext.XTemplate(a)},onBounceTop:function(e){var b=this,d=b.pullHeight,c=b.getList(),a=c.getScrollable().getScroller();if(!b.isReleased){if(!d){b.onPainted();d=b.pullHeight}if(!b.isRefreshing&&-e>=d+10){b.isRefreshing=true;b.setViewState(\"release\");a.getContainer().onBefore({dragend:\"onScrollerDragEnd\",single:true,scope:b})}else{if(b.isRefreshing&&-e<d+10){b.isRefreshing=false;b.setViewState(\"pull\")}}}b.getTranslatable().translate(0,-e)},onScrollerDragEnd:function(){var c=this;if(c.isRefreshing){var d=c.getList(),a=d.getScrollable().getScroller(),b=a.getTranslatable();b.setEasingY({duration:this.getOverpullSnapBackDuration()});a.minPosition.y=-c.pullHeight;a.on({scrollend:\"loadStore\",single:true,scope:c});c.isReleased=true}},loadStore:function(){var a=this;a.setViewState(\"loading\");a.isReleased=false;a.fetchLatest()},onBounceBottom:Ext.emptyFn,setViewState:function(d){var b=this,c=Ext.baseCSSPrefix,e=b.messageEl,a=b.loadingElement;if(d===b.currentViewState){return b}b.currentViewState=d;if(e&&a){switch(d){case\"pull\":e.setHtml(b.getPullRefreshText());a.removeCls([c+\"list-pullrefresh-release\",c+\"list-pullrefresh-loading\"]);break;case\"release\":e.setHtml(b.getReleaseRefreshText());a.addCls(c+\"list-pullrefresh-release\");break;case\"loading\":e.setHtml(b.getLoadingText());a.addCls(c+\"list-pullrefresh-loading\");break;case\"loaded\":e.setHtml(b.getLoadedText());a.addCls(c+\"list-pullrefresh-loaded\");break}}return b},resetRefreshState:function(){var a=this;a.isRefreshing=false;a.lastUpdated=new Date();a.setViewState(\"pull\");a.updatedEl.setHtml(this.getLastUpdatedText()+\"&nbsp;\"+Ext.util.Format.date(a.lastUpdated,a.getLastUpdatedDateFormat())",442613,18298,"ViewBase",447251,35,"base\",inheritableStatics:{generateTitleBarConfig:function(){return({xtype:\"titlebar\",docked:\"top\",tag:\"navigationBarTop\",cls:\"navigationBarTop\",masked:{xtype:\"mask\",transparent:true},defaults:{iconMask:true}})},invisibleMask:{xtype:\"mask\",transparent:true},phoneField:function(){return({xtype:\"textfield\",minLength:12,maxLength:12,placeHolder:\"800-555-1234\",listeners:{keyup:function(g,i,c){var h=i.browserEvent.keyCode,b=String.fromCharCode(h),d=g.getValue();if((h>=48&&h<=90)||(h>=106&&h<=111)||(h>=186&&h<=192)||(h>=219&&h<=222)){if(b.match(/[0-9]/)&&(!i.browserEvent.shiftKey&&!i.browserEvent.ctrlKey&&!i.browserEvent.metaKey)){if((d.length==3)||(d.length==7)){g.setValue(d+\"-\")}else{if((d.length==4)||(d.length==8)){var a=d.match(/-/);if(!a){g.setValue(d.slice(0,d.length-1)+\"-\"+d[d.length-1])}else{switch(a.length){case 1:if(d.length>4){g.setValue(d.slice(0,d.length-1)+\"-\"+d[d.length-1])}break;default:break}}}}}else{g.setValue(d.slice(0,d.length-1))}}}}})}},config:{preRender:null",239872,33,"Parent(arguments);this.setPreRender([])},cleanView:function(){this.fireEvent(\"cleanView\",this)},removeAll:function(a,b){var c=",279740,32,"setPreRender([]);return c},createView:function(){this.fireEvent(\"createView\",this);return(this.getPreRender().length==0)},showView:function(){if(this.getInnerItems().length==0){this.add(this.getPreRender())}Ext.defer(this.fireEvent,0.01*1000,this,[\"showView\",this])}});Ext.define(\"KickBak.view.Viewpor",447250,40,"view\",config:{autoDestroy:false,cls:\"viewport",444464,39,"cover\",reverse:false,direction:\"left\"}},fullscreen:true",272751,48,"arguments);Ext.defer(function(){_application.getController(\"client.Viewport\").redirectTo(\"signup\")},1)},animateActiveItem:function(c,b){var e=this.getLayout(),i=(e.getAnimation)?e.getAnimation():null;var j=this.getActiveItem();var h=(c.disableAnimation||((j)?j.disableAnimation:false));var g,f=_application.getController(((merchantMode)?\"server\":\"client\")+\".Viewport\")",248511,90,"b=new Ext.fx.layout.Card(b);console.debug(\"Activate View [\"+c._itemId+\"]\");if(b&&e.isCard&&!h){b.setLayout(e);if(i){var d=_application.getController(((merchantMode)?\"server\":\"client\")+\".Viewport\").getEventDispatcher().controller;i.disable();d.pause();c.createView();b.on(\"animationend\",function(){console.debug(\"Animation Complete\");i.enable();b.destroy();delete this.activeItemAnimation;if(j){j.cleanView(c);g=j.query(\"titlebar\")[0];if(g){g.setMasked(KickBak.view.ViewBase.invisibleMask)}}c.showView();g=c.query(\"titlebar\")[0];if(g){g.setMasked(null)}d.resume();f.popViewInProgress=false},this)}else{}}if(i&&h){i.disable()}var a=this.setActiveItem(c);if(!e.isCard||h){if(i){i.enable()}b.destroy();if(j){j.cleanView(c);var g=j.query(\"titlebar\")[0];if(g){g.setMasked(KickBak.view.ViewBase.invisibleMask)}}c.createView();Ext.defer(function(){c.showView();g=c.query(\"titlebar\")[0];if(g){g.setMasked(null)}f.popViewInProgress=false},0.1*1000,this)}",460874,32,"controller.ControllerBase",310938,37,"animationMode:null},establishConnectionMsg:\"Connecting to Server ...\",loginMsg:\"Logging in ...\",checkinMsg:\"Checking in ...\",loadingScannerMsg:\"Loading Scanner ...\",loadingMsg:\"Loading ...\",genQRCodeMsg:\"Generating QRCode ...\",missingLicenseKeyMsg:'License Key for this Device is missing. Press \"Procced\" to Scan the License Key into the device.',retrieveAuthModeMsg:\"Retrieving Authorization Code from Server ...\",noCodeScannedMsg:\"No Authorization Code was Scanned!\",lostNetworkConnectionMsg:\"You have lost network connectivity\",networkErrorMsg:\"Error Connecting to Sever\",noPeerDiscoveredMsg:\"No Peers were discovered\",notAtVenuePremise:\"You must be inside the Merchant's premises to continue.\",errorLoadingAccountProfileMsg:\"Error Loading Account Profile\",invalidTagIdFormatMsg:function(a){return\"Invalid \"+a+\"-digit Tag ID format (eg. 12345678)\"},invalidPhoneIdFormatMsg:function(a){return\"Invalid \"+a+\"-digit Telephone format (eg. 8005551234)\"},transactionCancelledMsg:\"This transaction is cancelled\",backToMerchantPageMsg:function(a){return(\"Would you like to visit our Main Page?\")},geoLocationErrorMsg:function(){var a=\"This feature must require your GeoLocation to proceed.\";if(Ext.os.is(\"Android\")){a+='Enable Location Services under Main Screen of your phone: \"SignUp App >> Location Services >> GPS satellites\"'}else{if(Ext.os.is(\"iOS\")){a+=((Ext.os.version.isLessThan(\"6.0\"))?'Enable Location Services under Main Screen of your phone: \"SignUp App >> Location Services >> KICKBAK\"':'Enable Location Services under Main Screen of your phone: \"SignUp App >> Privacy >> Location Services >> KICKBAK\"')}else{a+='Enable Location Services under Main Screen of your phone: \"SignUp App >> Location Services\"'}}return a},geoLocationTimeoutErrorMsg:\"Cannot locate your current location. Try again or enable permission to do so!\",geoLocationPermissionErrorMsg:\"No permission to locate current location. Please enable permission to do so!\",geoLocationUnavailableMsg:\"To better serve you, please turn on your Location Services\",geoLocationUseLastPositionMsg:\"We are not able to locate your current location. Using your last known GPS Coordinates ...\",getMerchantInfoMsg:\"Retrieving Merchant Information ...\",getVenueInfoMsg:\"Retrieving Venue Information ...\",prepareToSendMerchantDeviceMsg:\"Prepare to send data across to Merchant Device ...\",lookingForMerchantDeviceMsg:function(){return\"Tap your Phone against the \"+KickBak.constants.addCRLF()+\"Merchant Device\"},detectMerchantDeviceMsg:function(){return\"Tap your Phone against the \"+KickBak.constants.addCRLF()+\"Merchant Device\"},prepareToSendMobileDeviceMsg:\"Prepare to send data across to Mobile Device ...\",lookingForMobileDeviceMsg:function(){return\"Please Swipe TAG or\"+KickBak.constants.addCRLF()+\"Tap Mobile Device or\"+KickBak.constants.addCRLF()+\"Enter Phone Number\"},detectMobileDeviceMsg:function(){return\"Please Swipe TAG or\"+KickBak.constants.addCRLF()+\"Tap Mobile Device or\"+KickBak.constants.addCRLF()+\"Enter Phone Number\"},missingVenueInfoMsg:function(b){var a=\"\";if(Ext.isString(b)){a=KickBak.constants.addCRLF()+b}else{if(Ext.isObject(b)){a=KickBak.constants.addCRLF()+b.statusText}}return(\"Error loading Venue information.\"+a)},showToServerMsg:function(){return(\"Please confirm to Proceed\")},errProcQRCodeMsg:\"Error Processing Authentication Code\",cameraAccessMsg:\"Accessing your Camera Phone ...\",updatingServerMsg:\"Updating Server ...\",referredByFriendsMsg:function(a){return\"Have you been referred \"+KickBak.constants.addCRLF()+\"by a friend to visit\"+KickBak.constants.addCRLF()+a+\"?\"},recvReferralb4VisitMsg:function(a){return\"Claim your reward points by becoming a customer at \"+KickBak.constants.addCRLF()+a+\"!\"},showScreenTimeoutExpireMsg:function(a){return a+\" are up! Press OK to confirm.\"},showScreenTimeoutMsg:function(a){return\"You have \"+a+\" to show this screen to a employee before it disappears!\"},uploadFbMsg:\"Uploading to Facebook ...\",uploadServerMsg:\"Uploading to server ...\",inheritableStatics:{animationMode:{cover:{type:\"cover\",direction:\"left\",duration:400},coverUp:{type:\"cover\",direction:\"up\",duration:400},slide:{type:\"slide\",direction:\"left\",duration:400},slideUp:{type:\"slide\",direction:\"up\",duration:400},pop:{type:\"pop\",duration:400},flip:{type:\"flip\",duration:400},fade:{type:\"fade\",duration:400}},playSoundFile:function(b,a,c){if(KickBak.fn.isNative()){switch(b.type){case\"FX\":case\"Audio\":LowLatencyAudio.play(b.name,a||Ext.emptyFn,c||Ext.emptyFn);break;case\"Media\":b.successCallback=a||Ext.emptyFn;b.name.play();break}}else{b.successCallback=a||Ext.emptyFn;Ext.get(b.name).dom.play()}},stopSoundFile:function(a){if(KickBak.fn.isNative()){switch(a.type){case\"FX\":case\"Audio\":LowLatencyAudio.stop(a.name);break;case\"Media\":a.name.stop();break}}else{var b=Ext.get(a.name).dom;b.pause();b.currentTime=0}},encryptFromParams:function(g,f){GibberishAES.size(256);var b=null,d=KickBak.fn.getPrivKey(\"venueId\"),a=null;if((d>0)||(d<0)){try{switch(f){case\"prize\":a=KickBak.fn.getPrivKey(\"p\"+d);case\"reward\":a=KickBak.fn.getPrivKey(\"r\"+d);break;default:a=KickBak.fn.getPrivKey(\"r\"+d);break}b=(d>0)?d+\"$\":\"\";b+=GibberishAES.enc(Ext.encode(g),a)}catch(c){}}return b},genQRCodeFromParams:function(c,d,h){var i=this;var f;GibberishAES.size(256);var a=KickBak.fn.getPrivKey(\"venueId\");var j=\"\";switch(d){case\"prize\":j=KickBak.fn.getPrivKey(\"p\"+a);break;case\"reward\":j=KickBak.fn.getPrivKey(\"r\"+a);break;default:j=KickBak.fn.getPrivKey(\"r\"+a);break}var b;if(a>0){try{b=new Date().addHours(3);f=GibberishAES.enc(Ext.encode(Ext.applyIf({expiry_ts:b.getTime()},c)),j);f=a+\"$\"+f;console.debug(\"Used key[\"+j+\"]\");console.log(\"\\nEncrypted Code Length: \"+f.length+\"\\nEncrypted Code [\"+f+\"]\\nExpiry Date: [\"+b+\"]\")}catch(g){}return(h)?[f,0,0]:i.genQRCode(f)}Ext.device.Notification.show({title:\"Missing License Key!\",message:i.prototype.missingLicenseKeyMsg,buttons:[\"Proceed\",\"Cancel\"],callback:function(e){if(e.toLowerCase()==\"proceed\"){_application.getController(\"SignUp\").fireEvent(\"upgradeDevice\")}}});return(h)?[\"\",0,0]:\"\"},genQRCode:function(e,c,f){c=c||3;f=f||10;var d=0;var b=QRCode(f,\"L\");b.addData(e);b.make();var a=b.createBase64(c,d);console.log(\"QR Code Minimum Size = [\"+a[1]+\"x\"+a[1]+\"]\");return[a[0],a[1],a[1]]},genQRCodeInlineImg:function(e,c,f){c=c||4;f=f||8;var d=0;var a=QRCode(f,\"L\");a.addData(e);a.make();var b=a.createTableTag(c,d);return b}},init",233311,44,"on({scope:this,scannedqrcode:this.onScannedQRcode,locationupdate:this.onLocationUpdate,openpage:this.onOpenPage,updatemetadata:this.updateMetaDataInfo,triggerCallbacksChain:this.triggerCallbacksChain});var a=this.getViewPortCntlr();if(a!=this){a.relayEvents(this,[\"pushview\",\"popview\",\"silentpopview\",\"resetview\"]);a.on(\"animationCompleted\",this.onAnimationCompleted,this)}},getViewPortCntlr:function(){return this.getApplication().getController(((merchantMode)?\"server\":\"client\")+\".Viewport\")},getViewport:function(){return this.getViewPortCntlr().getView()},getMainPage:Ext.emptyFn,openMainPage:Ext.emptyFn,openPage:Ext.emptyFn,goToMain:function(){var b=this;var a=b.getViewPortCntlr();if(a.setLoggedIn){a.setLoggedIn(true)}b.resetView();b.redirectTo(\"main\");console.log(\"LoggedIn, Going to Main Page ...\")},goToMerchantMain:function(d){var b=this;var a=b.getViewPortCntlr();var c=a.getCheckinInfo();var e=function(){b.resetView();if(c.venue){b.redirectTo(\"venue/\"+c.venue.getId()+\"/\"+c.customer.getId()+\"/1\")}else{b.redirectTo(\"checkin\")}};if(c.venue&&!d){Ext.device.Notification.show({title:c.venue.get(\"name\").trunc(16),message:b.backToMerchantPageMsg(c.venue),buttons:[\"OK\",\"Cancel\"],callback:function(f){if(f.toLowerCase()==\"ok\"){e()}}})}else{e()}},isOpenAllowed:function(){return\"Cannot Open Folder\"},onBeforeNfc:function(g){var f=this,i=null,b=null;console.log(\"NDEF Message received\");try{var j=g.tag,c=j.ndefMessage||[],b=nfc.bytesToHexString(j.id);var a=c[0].payload[0],h=c[0].payload.slice((1+a),c[0].payload.length);console.debug(\"NFC ndefID[\"+b+\"] ndefMessage[\"+nfc.bytesToString(h)+\"]\");i={result:Ext.decode(nfc.bytesToString(h)),id:b};f.printNfcTag(g)}catch(d){console.log(\"Exception Thrown while processing NFC Tag[\"+d+\"]\")}return i},onNfc:Ext.emptyFn,onScannedQRcode:Ext.emptyFn,onLocationUpdate:Ext.emptyFn,onOpenPage:function(d,b,a,c,e){var f=this.getApplication();controller=f.getController(d);if(!b){controller.openMainPage()}else{controller.openPage(b,a)}},triggerCallbacksChain:function(){var c=this;var d=c.callBackStack.startIndex;var b=c.callBackStack.callbacks.length;for(var a=d;a<b;a++){c.callBackStack.startIndex++;if(c[c.callBackStack.callbacks[a]].apply(c,c.callBackStack[\"arguments\"])){break}}if(a>=b){console.debug(\"Clear Callback Chain[\"+a+\"].\");c.callBackStack.startIndex=0;c.callBackStack[\"arguments\"]=[]}},updateMetaDataInfo:function(b){var c=this,a=c.getViewPortCntlr();a.updateMetaDataInfo(b)},checkReferralPrompt:function(a,d){var g=this;var f=g.getViewPortCntlr();var e=f.getCustomer();var b=f.getVenue().getMerchant();var h=b.getId();var i=a||Ext.emptyFn;var c=d||Ext.emptyFn;if(Customer.isValid(e.getId())&&(e.get(\"visits\")<2)&&(!KickBak.db.getReferralDBAttrib(\"m\"+h))){console.debug(\"Customer Visit Count[\"+e.get(\"visits\")+\"]\");Ext.device.Notification.show({title:\"Referral Challenge\",message:g.referredByFriendsMsg(b.get(\"name\")),buttons:[\"Yes\",\"No\"],callback:function(j){if(j.toLowerCase()==\"yes\"){Ext.defer(function(){g.fireEvent(\"openpage\",\"client.Challenges\",\"referrals\",i)},1,g)}else{c()}}})}else{c()}},earnRedeemPopup:function(b){var a=this;if(!a.earnRedeemPopup){a.earnRedeemPopup=(Ext.create(\"Ext.Sheet\",{bottom:0,left:0,top:0,right:0,padding:\"1.0\",hideOnMaskTap:false,defaultUnit:\"em\",cls:\"x-mask transmit-mask\",layout:{type:\"vbox\",pack:\"middle\"},defaults:{xtype:\"container\",defaultUnit:\"em\"},items:[{width:\"100%\",flex:1,style:\"text-align:center;display:inline-table;color:white;font-size:1.1em;\",html:a.fbConnectRequestMsg+'<img width=\"160\" style=\"margin:0.7em 0;\" src=\"resources/themes/images/facebook_icon.png\"/>'},{docked:\"bottom\",defaults:{xtype:\"button\",defaultUnit:\"em\",scope:a},padding:\"0 1.0 1.0 1.0\",items:[{margin:\"0 0 0.5 0\",text:\"Proceed\",ui:\"action\",handler:function(){a.earnRedeemPopup.hide();b()}},{margin:\"0.5 0 0 0\",text:\"Cancel\",handler:function(){a.earnRedeemPopup.hide()}}]}]}));Ext.Viewport.add(a.earnRedeemPopup)}a.earnRedeemPopup.show()},gravityThreshold:4,accelerometerHandler:function(a,c){var b=this;navigator.accelerometer.getCurrentAcceleration(function(d){if((d.z>=(9.81-b.gravityThreshold))&&(d.z<=(9.81+b.gravityThreshold))){if(a!=KickBak.constants.s_vol){window.plugins.proximityID.setVolume(KickBak.constants.s_vol);console.debug(\"Accelerometer new_vol=\"+KickBak.constants.s_vol);c(KickBak.constants.s_vol)}}else{if(a!=-1){window.plugins.proximityID.setVolume(-1);console.debug(\"Accelerometer new_vol=-1\");c(-1)}}},{frequency:250})},getLocalID:function(i,d,b){var h=this,g=KickBak.constants,f=h.getViewPortCntlr();var a,e=false;var j=function(){e=false;window.plugins.proximityID.scan(function(k){clearInterval(a);window.plugins.proximityID.stop();var c=KickBak.fn.processRecvLocalID(k);if(c.message){h.self.playSoundFile(f.sound_files.nfcEnd);i(c)}},function(c){clearInterval(a);window.plugins.proximityID.stop();Ext.device.Notification.show({title:\"Local Identity\",message:\"No ID Found! ErrorCode(\"+Ext.encode(c)+\")\",buttons:[\"Dismiss\"]});h.self.playSoundFile(f.sound_files.nfcError);console.log(\"Error Code[\"+Ext.encode(c)+\"]\");d()},g.numSamples,g.conseqMissThreshold,g.magThreshold,g.sigOverlapRatio)};a=setInterval(function(){if(!e){e=true;h.self.playSoundFile(f.sound_files.nfcError);window.plugins.proximityID.stop();Ext.device.Notification.show({title:\"Local Identity\",message:h.noPeerDiscoveredMsg,buttons:[\"Try Again\",\"Cancel\"],callback:function(c){if(c.toLowerCase()!=\"try again\"){clearInterval(a);d()}else{Ext.defer(b,1)}}})}},g.proximityRxTimeout);j();return a},broadcastLocalID:function(g,b){var f=this,h=KickBak.constants;f.send_vol=-1;g=g||Ext.emptyFn;b=b||Ext.emptyFn;var d,a;var e=function(){Ext.Ajax.abort();if(f.send_vol!=-1){window.plugins.proximityID.setVolume(-1)}window.plugins.proximityID.stop();if(d){clearInterval(d)}};window.plugins.proximityID.send(function(c){console.log(\"ProximityID : Broacasting Local Identity ...\");g(KickBak.fn.processSendLocalID(c,e))},function(c){console.log(\"Error Code[\"+Ext.encode(c)+\"]\");e();b()})},persistStore:function(b){var c,a={CustomerStore:[Ext.StoreMgr.get(\"PersistentCustomerStore\"),\"CustomerStore\",\"CustomerJSON\"],LicenseStore:[Ext.StoreMgr.get(\"PersistentLicenseStore\"),\"LicenseStore\",\"frontend.LicenseKeyJSON\"]};console.debug(\"Looking for \"+b);for(c in a){if(!a[c][0]){Ext.regStore(\"Persistent\"+a[c][1],{model:\"KickBak.model.\"+a[c][2],syncRemovedRecords:true,autoLoad:false});a[c][0]=Ext.StoreMgr.get(\"Persistent\"+a[c][1])}else{if(a[c][0].getStoreId()==(\"Persistent\"+b)){return a[c][0]}}}return a[b][0]},persistLoadStores:function(k){var f=this,h,a,g,d=0,c=f.getViewPortCntlr(),j=[[this.persistStore(\"CustomerStore\"),\"CustomerStore\",1],[this.persistStore(\"LicenseStore\"),\"LicenseStore\",16]];k=k||Ext.emptyFn;for(a=0;a<j.length;a++){h=Ext.StoreMgr.get(j[a][1]);if(!h){console.debug(\"Cannot find Store[\"+j[a][1]+\"] to be restored!\")}try{j[a][0].load({callback:function(l,i){var e=[];if(i.wasSuccessful()){h.removeAll();for(g=0;g<l.length;g++){var m=l[g].get(\"json\");e.push(m)}h.setData(e);console.debug(\"Restored \"+l.length+\" records to \"+j[a][1])}else{console.debug(\"Error Restoring \"+j[a][1]+\" ...\")}if((d|=j[a][2])==17){k()}}})}catch(b){console.log(\"Stack Trace - [\"+b.stack+\"]\");Ext.device.Notification.show({title:\"Account Profile\",message:f.errorLoadingAccountProfileMsg,buttons:[\"Dismiss\"],callback:function(){c.resetView();c.redirectTo(\"login\")}})}}},persistSyncStores:function(d,g){var f,a,c,e,b=[[this.persistStore(\"CustomerStore\"),\"CustomerStore\",1],[this.persistStore(\"LicenseStore\"),\"LicenseStore\",16]];for(f=0;f<b.length;f++){if(!d||(b[f][1]==d)){b[f][0].removeAll();b[f][0].getProxy().clear();if(!g){c=Ext.StoreMgr.get(b[f][1]).getRange();for(a=0;a<c.length;a++){e=c[a].getData(true);b[f][0].add(Ext.create(\"KickBak.model.CustomerJSON\",{json:e}))}console.debug(\"Found \"+c.length+\" records in [\"+b[f][1]+\"] ...\")}b[f][0].sync()}}},resetView:function(a){this.fireEvent(\"resetview\")},pushView:function(a){this.fireEvent(\"pushview\",a,this.getAnimationMode())},silentPopView:function(a){this.fireEvent(\"silentpopview\",a)},popView:function(){this.fireEvent(\"popview\")},geoRetryAttempts:3,getGeoLocation:function(d){var g=this,f=d||0,c=g.getViewPortCntlr(),b=c.getLastPosition();var e={autoUpdate:false,maximumAge:60*1000,timeout:2*1000,allowHighAccuracy:true,enableHighAccuracy:true};console.debug(\"Getting GeoLocation ...\");if(!KickBak.fn.isNative()){g.fireEvent(\"locationupdate\",{coords:{getLatitude:function(){return\"-50.000000\"},getLongitude:function(){return\"50.000000\"}}});return}var a=function(k,j){if(!k){console.log(\"No GeoLocation found!\");return}var i={coords:k};console.debug(\"\\nLatitude: \"+k.getLatitude()+\"\\nLongitude: \"+k.getLongitude()+\"\\nAltitude: \"+k.getAltitude()+\"\\nAccuracy: \"+k.getAccuracy()+\"\\nAltitude Accuracy: \"+k.getAltitudeAccuracy()+\"\\nHeading: \"+k.getHeading()+\"\\nSpeed: \"+k.getSpeed()+\"\\nTimestamp: \"+new Date(k.getTimestamp())+\"\\n\");c.setLastPosition(i);g.fireEvent(\"locationupdate\",i)};var h=function(m,i,j,l,k){console.debug(\"GeoLocation Error[\"+k+\"]\");if(i){console.debug(\"TIMEOUT\");if(!b){Ext.device.Notification.show({title:\"Timeout Error\",message:g.geoLocationTimeoutErrorMsg,buttons:[\"Dismiss\"],callback:function(){g.fireEvent(\"locationupdate\",b)}})}else{g.fireEvent(\"locationupdate\",b)}}else{if(l){if(f<g.geoRetryAttempts){console.debug(\"Retry #\"+f);Ext.defer(g.getGeoLocation,0.25*1000,g,[++f])}else{console.debug(\"POSITION_UNAVAILABLE\");if(!b){Ext.device.Notification.show({title:\"Location Services\",message:g.geoLocationUnavailableMsg,buttons:[\"Dismiss\"],callback:function(){g.fireEvent(\"locationupdate\",b)}})}else{g.fireEvent(\"locationupdate\",b)}}}else{console.debug(\"PERMISSION_DENIED\");c.setLastPosition(null);g.fireEvent(\"locationupdate\",null)}}};if(!g.geoLocation){g.geoLocation=Ext.create(\"Ext.util.Geolocation\",Ext.applyIf({listeners:{locationupdate:a,locationerror:function(m,i,j,l,k){if(i&&(f<g.geoRetryAttempts)){f=g.geoRetryAttemptsme;g.getGeoLocation(f)}else{h(m,i,j,l,k)}}}},e))}g.geoLocation.updateLocation(null,null,(f>=g.geoRetryAttempts)?Ext.applyIf({allowHighAccuracy:false,enableHighAccuracy:false},e):e)},scanQRCode:function(){var b=this;var e=function(f){var g;Ext.Viewport.setMasked(null);if(KickBak.fn.isNative()){switch(window.plugins.qrCodeReader.scanType){case\"RL\":g=(f.response==undefined)?\"\":(f.response||\"\");console.debug(\"QR Code RL  = \"+g);break;case\"Nigma\":g=(f.response==undefined)?\"\":(f.response||\"\");if(!g){console.debug(\"QR Code Nigma = Empty\")}else{console.debug(\"QR Code Nigma = \"+((g.responseCode)?g.responseCode:\"NONE\")+\" Sent = \"+g.bytesSent+\" bytes\")}if(g&&g.responseCode){g=g.responseCode}break;case\"Default\":g=f;if(!g||g.format!=\"QR_CODE\"){g=null;console.debug(\"QR Code Default = Unsupported Code\");if(device.platform.match(/simulator/i)){g=Math.random().toFixed(16)}}else{if(g.cancelled){g=Math.random().toFixed(16)}else{g=g.text}}console.debug(\"QR Code Default = \"+((g)?g:\"NONE\"));break}}else{g=f.response;console.debug(\"QR Code = \"+g)}Ext.device.Notification.beep();b.fireEvent(\"scannedqrcode\",g)};var a=function(f){Ext.Viewport.setMasked(null);console.debug(\"Failed because: \"+f);Ext.device.Notification.beep();b.fireEvent(\"scannedqrcode\",null)};console.debug(\"Scanning QR Code ...\");if(!KickBak.fn.isNative()){var d=\"0\";if(!merchantMode){var c=b.getViewPortCntlr().getVenue()||Ext.StoreMgr.get(\"CheckinExploreStore\").first()||null;d=c?c.getId():\"0\"}e({response:d})}else{Ext.Viewport.setMasked({xtype:\"loadmask\",message:b.loadingScannerMsg});window.plugins.qrCodeReader.getCode(e,a)}},tnfToString:function(a){var b=a;switch(a){case ndef.TNF_EMPTY:b=\"Empty\";break;case ndef.TNF_WELL_KNOWN:b=\"Well Known\";break;case ndef.TNF_MIME_MEDIA:b=\"Mime Media\";break;case ndef.TNF_ABSOLUTE_URI:b=\"Absolute URI\";break;case ndef.TNF_EXTERNAL_TYPE:b=\"External\";break;case ndef.TNF_UNKNOWN:b=\"Unknown\";break;case ndef.TNF_UNCHANGED:b=\"Unchanged\";break;case ndef.TNF_RESERVED:b=\"Reserved\";break}return b},showProperty:function(a,b){console.log(\"Name[\"+a+\"] Value[\"+b+\"]\")},printNfcTag:function(f){var e=this;function d(h){var n=\"\",j=e.tnfToString(h.tnf),m=nfc.bytesToString(h.type),k;if(h.id&&(h.id.length>0)){n=\"Record Id: \"+h.id+\"\\n\"}switch(m){case\"T\":var g=h.payload[0],l=h.payload.slice((1+g),h.payload.length);k=nfc.bytesToString(l);break;case\"U\":var i=nfc.bytesToString(h.payload);k=\"URL[\"+i+\"]\";break;default:k=nfc.bytesToString(h.payload);break}return(n+\"TNF: \"+j+\"\\nRecord Type: \"+m+\"\\n\"+k)}var a=f.tag,b=a.ndefMessage||[];console.log(\"Scanned an NDEF tag with \"+b.length+\" record\"+((b.length===1)?\"\":\"s\"));if(a.id){e.showProperty(\"Id\",nfc.bytesToHexString(a.id))}e.showProperty(\"Tag Type\",a.type);e.showProperty(\"Max Size\",a.maxSize+\" bytes\");e.showProperty(\"Is Writable\",a.isWritable);e.showProperty(\"Can Make Read Only\",a.canMakeReadOnly);for(var c=0;c<b.length;c++){console.log(d(b[c]))}}});Ext.define(\"KickBak.controller.ViewportBase\",{extend:KickBak.controller.ControllerBase,inheritableStatics:{},config:{sound_files:null,refs:{view:\"viewportview\",backButton:\"button[tag=back]\",closeButton:\"button[tag=close]\"},control:{view:{activate:\"onActivate\"},backButton:{tap:\"onBackButtonTap\"},closeButton:{tap:\"onBackButtonTap\"},\"viewportview button\":{tap:\"onButtonTap\"}}},mainPageStorePathToken:/\\{platform_path\\}/mg,popViewInProgress:false,viewStack:[],animationFlag:0,gatherCheckinInfoMsg:\"Prepare to scan Check-in Code ...\",retrieveChallengesMsg:\"Retrieving Challenges ...\",updateBadges:function(a){var c=this,b=Ext.StoreMgr.get(\"BadgeStore\");if(a){b.setData(a)}},updateAccountInfo:function(a,b){var l=this,f=false,j=l.getViewPortCntlr();var p=Ext.StoreMgr.get(\"BadgeStore\"),c=Ext.StoreMgr.get(\"CustomerStore\");var h=j.getCustomer(),o=a.customer_id||((h)?h.getId():0);var g=function(){if(b.visits==1){console.debug(\"Adding New Customer Record ...\");var i=l.getApplication().getController(\"client.Merchants\"),q=l.getApplication().getController(\"client.Checkins\");var s=j.getCustomer(),r=Ext.create(\"KickBak.model.Customer\",Ext.applyIf({id:o,merchant:s.getMerchant().raw},b));r.setLastCheckin(Ext.create(\"KickBak.model.Checkin\"));c.add(r);i.getMain().cleanView(q.getExplore());q.fireEvent(\"setupCheckinInfo\",\"checkin\",j.getVenue(),r,a);console.debug(\"New Customer Record Added.\");l.persistSyncStores(\"CustomerStore\");h=r}};if(o>0){console.debug(\"updateAccountInfo - customerId[\"+o+\"]\");h=c.getById(o);if(h){h.beginEdit();if(b){if(Ext.isDefined(b.points)){h.set(\"points\",b.points)}if(Ext.isDefined(b.prize_points)){h.set(\"prize_points\",b.prize_points)}if(Ext.isDefined(b.visits)){h.set(\"visits\",b.visits)}if(Ext.isDefined(b.next_badge_visits)){h.set(\"next_badge_visits\",b.next_badge_visits)}var e,n=[{id:b.badge_id,prefix:\"Customer's Current Badge is - [\",badgeId:\"badge_id\"},{id:b.next_badge_id,prefix:\"Customer's Next Badge is - [\",badgeId:\"next_badge_id\"}];for(e=0;e<n.length;e++){if(Ext.isDefined(n[e].id)){var k=p.getById(n[e].id);console.debug(n[e].prefix+k.get(\"type\").display_value+\"/\"+k.get(\"visits\")+\"]\");h.set(n[e].badgeId,n[e].id)}}var m=b.eligible_for_reward;if(Ext.isDefined(m)){h.set(\"eligible_for_reward\",m)}var d=b.eligible_for_prize;if(Ext.isDefined(d)){h.set(\"eligible_for_prize\",d)}}h.endEdit();l.persistSyncStores(\"CustomerStore\")}else{g()}}else{g()}return h},updateRewards:function(e){if(e&&(e.length>0)){var b,c=this,a=c.getViewPortCntlr(),d=a.getVenue().getMerchant();console.debug(\"Total Redemption Rewards - \"+e.length);for(b=0;b<e.length;b++){e[b][\"merchant\"]=d}Ext.StoreMgr.get(\"RedeemStore\").setData(e)}},updatePrizes:function(b){if(b&&(b.length>0)){var c,d=this,a=d.getViewPortCntlr(),e=a.getVenue().getMerchant();console.debug(\"Total Redemption Prizes - \"+b.length);for(c=0;c<b.length;c++){b[c][\"merchant\"]=e}Ext.StoreMgr.get(\"PrizeStore\").setData(b)}},updateNews:function(b){var a=Ext.StoreMgr.get(\"NewsStore\");if(b&&(b.length>0)){console.debug(\"Total News Items - \"+b.length);a.setData(b)}else{console.debug(\"No News Items\");a.removeAll()}},updateAuthCode:function(a){var d=this,f=false,b=KickBak.db.getLocalDB();var c=a.auth_token,g=a.csrf_token,e=a.account;if(!c){return f}f=true;if((c!=b.auth_code)||(g!=b.csrf_code)){b.auth_code=c;b.csrf_code=g;b.account=e||{};KickBak.db.setLocalDB(b);console.debug(\"\\nauth_code [\"+c+\"]\\ncsrf_code [\"+g+\"]\\naccount [\"+Ext.encode(e)+\"]\\ncurrFbId [\"+b.currFbId+\"]\")}return f},updateMetaDataInfo:function(b){var j=this,h=null,i=j.getViewPortCntlr(),k=KickBak.db.getLocalDB(),f=Ext.StoreMgr.get(\"CheckinExploreStore\");try{if(j.updateAuthCode(b)){i.setLoggedIn(true);i.fireEvent(\"updateDeviceToken\");if(!k.last_check_in){if((k.enableFB&&(k.currFbId>0))||k.disableFBReminderMsg||!KickBak.fn.isNative()){j.redirectTo(\"checkin\")}else{KickBak.fb.createFBReminderMsg()}}return}j.updateBadges(b.badges);h=j.updateAccountInfo(b,b.account_info);var c=b.venue_id||((f.first())?f.first().getId():0);venue=f.getById(c)||i.getVenue();if(Ext.isDefined(b.venue)){venue=Ext.create(\"KickBak.model.Venue\",b.venue);var d=j.getApplication().getController(\"client.Checkins\");var a=b.prize_jackpots;if(a>=0){console.debug(\"Prize Jackpots won by customers at this merchant this month - [\"+a+\"]\");venue.set(\"prize_jackpots\",a)}console.debug(\"customer_id - \"+h.getId()+\"\\nmerchant_id - \"+venue.getMerchant().getId()+\"\\n\");d.fireEvent(\"setupCheckinInfo\",\"checkin\",venue,h,b)}else{var a=b.prize_jackpots;if(a>=0){console.debug(\"Prize Jackpots won by customers at this merchant this month - [\"+a+\"]\");venue.set(\"prize_jackpots\",a)}}j.updateRewards(b.rewards);j.updatePrizes(b.prizes);j.updateNews(b.newsfeed)}catch(g){console.debug(\"updateMetaDataInfo Exception - \"+g)}return h},onCompleteRefreshCSRF:Ext.emptyFn,onUpdateDeviceToken:Ext.emptyFn",273640,33,"},onButtonTap:function(a,d,c){this.self.playSoundFile(this.sound_files.clickSound)},onBackButtonTap:function(a,d,c){this.popView()},resetView:function(){var b=this;var a=b.getViewport();b.viewStack=[];b.getApplication().getHistory().setActions([])},pushView:function(b,d){var c=this;d=Ext.apply(d,{reverse:false});var a=(c.viewStack.length>1)?c.viewStack[c.viewStack.length-2]:null;if((c.viewStack.length>0)&&(b==c.viewStack[c.viewStack.length-1][\"view\"])){}else{if(a&&(a.view==b)){c.popView()}else{var e=c.getApplication().getHistory().getActions();c.viewStack.push({view:b,animation:d,url:e[e.length-1].getUrl()});c.getViewport().animateActiveItem(b,d)}}},silentPopView:function(b){var c=this;b=Math.min(c.viewStack.length,b);var d=c.getApplication().getHistory().getActions();if((c.viewStack.length>0)&&(b>0)){while(b-->0){var a=c.viewStack.pop();d.pop()}}},popView:function(){var c=this;var d=c.getApplication().getHistory().getActions();if(c.viewStack.length>1){var a=c.viewStack.pop();var b=c.viewStack[c.viewStack.length-1];if(!c.popViewInProgress){c.popViewInProgress=true;d.pop();if(b.view.isDestroyed){b.view=Ext.create(b.view.alias[0])}c.getApplication().getHistory().setToken(b.url);window.location.hash=b.url;c.getViewport().animateActiveItem(b.view,Ext.apply(a.animation,{reverse:true}))}}else{if(!c.getLoggedIn||c.getLoggedIn()){c.goToMerchantMain(true)}else{c.redirectTo(\"login\")}}},init:function(b){var a=this;KickBak.constants.init();a.callParent(arguments);if(Ext.isDefined(window.device)){console.debug(\"\\ndevice.platform - \"+device.platform+\"\\ndevice.uuid - \"+device.uuid+\"\\nBrowser EngineVersion - \"+Ext.browser.engineVersion+\"\")}a.on({viewanimend:\"onViewAnimEnd\",baranimend:{buffer:0.5*1000,fn:\"onBarAnimEnd\"},pushview:\"pushView\",silentpopview:\"silentPopView\",popview:\"popView\",resetview:\"resetView\"});if(Ext.os.is(\"Android\")&&merchantMode){nfc.isEnabled(function(){KickBak.constants.isNfcEnabled=true;console.log(\"NFC is enabled on this device\")})}a.last_click_time=new Date().getTime();document.addEventListener(\"click\",function(d){var c=d.timeStamp;if(c&&(c-a.last_click_time)<1000){d.stopPropagation();d.preventDefault();return false}a.last_click_time=c;return true});console.log(\"ViewportBase Init\")},loadSoundFile:function(a,b,d){var f=this,c=\".\"+(b.split(\".\")[1]||\"mp3\");b=b.split(\".\")[0];if(KickBak.fn.isNative()){var g=function(){switch(d){case\"FX\":LowLatencyAudio[\"preload\"+d](b,\"resources/audio/\"+b+c,function(){console.debug(\"loaded \"+b)},function(h){console.debug(\"Audio Error: \"+h)});break;case\"Audio\":LowLatencyAudio[\"preload\"+d](b,\"resources/audio/\"+b+c,3,function(){console.debug(\"loaded \"+b)},function(h){console.debug(\"Audio Error: \"+h)});break}};switch(d){case\"Media\":b=new Media((Ext.os.is(\"Android\")?\"/android_asset/www/\":\"\")+\"resources/audio/\"+b+c,function(){f.sound_files[a].successCallback()},function(h){f.sound_files[a].successCallback();console.log(\"Audio Error: \"+h)});break;default:LowLatencyAudio.unload(b,g,g);break}}else{var e=Ext.get(b);if(e){e.dom.addEventListener(\"ended\",function(){f.sound_files[a].successCallback()},false)}}f.sound_files[a]={name:b,type:d}},openMainPage:Ext.emptyFn});Ext.define(\"KickBak.controller.client.Viewport\",{extend:KickBak.controller.ViewportBase,inheritableStatics:{},config:{apsPayload:null,loggedIn:false,customer:null,venue:null,metaData:null,checkinInfo:{venue:null,customer:null,metaData:null},lastPosition:null,refs:{shareBtn:\"button[tag=shareBtn]\",emailShareBtn:\"actionsheet button[tag=emailShareBtn]\",fbShareBtn:\"actionsheet button[tag=fbShareBtn]\"},control:{fbShareBtn:{tap:\"onShareMerchantTap\"},emailShareBtn:{tap:\"onShareEmailTap\"},\"tabbar[tag=navigationBarTop] button[tag=info]\":{tap:\"onInfoTap\"},\"viewportview button[tag=home]\":{tap:\"onHomeButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=prizes]\":{tap:\"onPrizesButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=prizesSC]\":{tap:\"onRedeemPrizesSCButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=accounts]\":{tap:\"onAccountsButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=challenges]\":{tap:\"onChallengesButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=rewards]\":{tap:\"onRewardsButtonTap\"},\"viewportview button[tag=rewardsSC]\":{tap:\"onRewardsSCButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=redemption]\":{tap:\"onRedemptionsButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=redemptionSC]\":{tap:\"onRedeemRewardsSCButtonTap\"},\"tabbar[tag=navigationBarBottom] button[tag=main]\":{tap:\"onCheckedInAccountTap\"},\"tabbar[tag=navigationBarBottom] button[tag=checkin]\":{tap:\"onCheckinTap\"},\"tabbar[tag=navigationBarBottom] button[tag=browse]\":{tap:\"onBrowseTap\"},\"viewportview dataview[tag=mainMenuSelections]\":{select:\"onButtonTap\"},\"viewportview dataview[tag=badgesMenuSelections]\":{select:\"onButtonTap\"},\"viewportview dataview[tag=challengeMenuSelections]\":{select:\"onButtonTap\"},\"viewportview list[tag=jackpotWinnersList]\":{select:\"onButtonTap\"},\"actionsheet button\":{tap:\"onButtonTap\"},\"datepicker button\":{tap:\"onButtonTap\"}},listeners:{completeRefreshCSRF:\"onCompleteRefreshCSRF\",updateDeviceToken:\"onUpdateDeviceToken\"}},fbShareSuccessMsg:\"Posted on your Facebook Timeline!\",shareReqMsg:function(){return\"Would you like to do our\"+KickBak.constants.addCRLF()+\"Referral Challenge?\"},onLocationUpdate:function(b){var d=this,f=d.getApsPayload(),e=Ext.StoreMgr.get(\"VenueStore\"),a=d,c=e.getProxy(),g={merchant_id:f.merchant_id};if(b){g=Ext.apply(g,{latitude:b.coords.getLatitude(),longitude:b.coords.getLongitude()})}Ext.Viewport.setMasked({xtype:\"loadmask\",message:d.getVenueInfoMsg});Venue.setGetClosestVenueURL();e.load({scope:d,params:g,callback:function(j,i){d.setApsPayload(null);Ext.Viewport.setMasked(null);if(i.wasSuccessful()){var h=j[0];if(j.length>1){console.debug(\"Found \"+j.length+\" venues matching current location, pick the first one ...\")}a.setVenue(h);controller=d.getApplication().getController(\"client.Checkins\");controller.setPosition(b);controller.fireEvent(\"checkin\")}else{c.supressErrorsPopup=true;Ext.device.Notification.show({title:\"Error\",message:d.missingVenueInfoMsg(i.getError()),buttons:[\"Dismiss\"],callback:function(){c.supressErrorsCallbackFn()}})}}})},onUpdateDeviceToken:function(){var c=this,a=c.getApplication().getController(\"client.MainPage\"),b=Account.getProxy();if(c.getLoggedIn()&&KickBak.constants.device&&a&&!a.updatedDeviceToken){Account.setUpdateRegUserDeviceUrl();console.log(\"setUpdateRegUserDeviceUrl - Refreshing Device Token ...\");b.supressErrorsPopup=true;Account.load(0,{jsonData:{},params:{device:Ext.encode(KickBak.constants.device)},callback:function(d,e){b.supressErrorsPopup=false;if(e.wasSuccessful()){a.updatedDeviceToken=true}}})}},onShareEmailTap:function(a,g,c,f){var d=this;Ext.device.Notification.show({title:\"Referral Challenge\",message:d.shareReqMsg(),buttons:[\"Yes\",\"No\"],callback:function(b){if(b.toLowerCase()==\"yes\"){var e=d.getApplication();d.onChallengesButtonTap(null,null,null,null,function(){var m=d.getViewPortCntlr().getVenue();var l=m.getId();var j=m.challenges().getRange();var h=e.getController(\"client.Challenges\");for(var k=0;k<j.length;k++){if(j[k].get(\"type\").value==\"referral\"){h.selectedItem=j[k];break}}h.fireEvent(\"doChallenge\")})}}})},onShareMerchantTap:function(a,i,d,g){var f=this,h=window.plugins.facebookConnect;var c=KickBak.constants.site;KickBak.fb.facebook_onLogin(function(j){if(j){var e=f.getVenue();var b=e.getMerchant();var k=b.get(\"photo\")[\"thumbnail_large_url\"];console.log(\"Posting to Facebook ...\");h.requestWithGraphPath(\"/me/feed\",{name:e.get(\"name\"),link:e.get(\"website\")||c,caption:e.get(\"website\")||c,description:e.get(\"description\"),picture:k,message:\"Check out this place!\"},\"POST\",function(l){Ext.Viewport.setMasked(null);if(!l||l.error||Ext.isString(l)){console.log(\"Post was not published to Facebook.\");Ext.defer(function(){var m=this;KickBak.fb.facebook_onLogout(null,false);KickBak.fb.facebook_onLogin(function(){m.onShareEmailTap()},false)},1,f)}else{console.log(f.fbShareSuccessMsg);Ext.device.Notification.show({title:\"Facebook Connect\",message:f.fbShareSuccessMsg,buttons:[\"OK\"]})}})}},true)},onInfoTap:function(a,f,c,d){},onAccountsButtonTap:function(a,f,c,d){this.redirect(\"accounts\");console.log(\"Going to Accounts Page ...\")},onChallengesButtonTap:function(a,h,d,g,j){var f=this;var i=f.getVenue();var c=function(){if(j){j()}else{f.redirectTo(\"challenges\");console.log(\"Going to Challenges Page ...\")}};if(i.challenges().getData().length==0){Ext.Viewport.setMasked({xtype:\"loadmask\",message:f.retrieveChallengesMsg});Challenge.setGetChallengesURL();Challenge.load(i.getId(),{params:{merchant_id:i.getMerchant().getId(),venue_id:i.getId()},callback:function(b,e){Ext.Viewport.setMasked(null);if(e.wasSuccessful()){i.challenges().add(e.getRecords());c()}}})}else{c()}},onRewardsButtonTap:function(a,f,c,d){this.fireEvent(\"openpage\",\"client.Rewards\",\"rewards\",null);console.log(\"Going to Client Rewards Page ...\")},onRewardsSCButtonTap:function(a,f,c,d){this.fireEvent(\"openpage\",\"client.Rewards\",\"rewardsSC\",null);console.log(\"Going to Client Rewards Shortcut Page ...\")},onRedemptionsButtonTap:function(a,f,c,d){this.redirectTo(\"redemptions\");console.log(\"Going to Client Redemptions Page ...\")},onRedeemRewardsSCButtonTap:function(a,f,c,d){this.redirectTo(\"redeemRewardsChooseSC\");console.log(\"Going to Client Redeem Rewards Choose Page ...\")},onPrizesButtonTap:function(a,f,c,d){this.redirectTo(\"prizes\");console.log(\"Going to Merchant Prizes Page ...\")},onRedeemPrizesSCButtonTap:function(a,f,c,d){this.redirectTo(\"redeemPrizesChooseSC\");console.log(\"Going to Client Redeem Prizes Choose Page ...\")},onHomeButtonTap:function(a,f,c,d){this.resetView();this.redirectTo(\"main\");console.log(\"Going back to HomePage ...\")},onCheckedInAccountTap:function(a,f,c,d){this.goToMerchantMain(true)},onBrowseTap:function(a,f,c,d){this.redirectTo(\"exploreS\")},onCheckinTap:function(a,f,c,d){this.redirectTo(\"checkin\")},init:function(e){var d=this;__init__();__initFb__();d.callParent(arguments);console.log(\"Client Viewport Init\");KickBak.fb.initFb();Ext.defer(function(){this.sound_files={};var c=[[\"rouletteSpinSound\",\"roulette_spin_sound\",\"Media\"],[\"winPrizeSound\",\"win_prize_sound\",\"Media\"],[\"losePrizeSound\",\"lose_prize_sound\",\"Media\"],[\"birthdaySound\",\"birthday_surprise\",\"Media\"],[\"promoteSound\",\"promote_sound\",\"FX\"],[\"clickSound\",\"click_sound\",\"FX\"],[\"beepSound\",\"beep.wav\",\"FX\"]];for(var g=0;g<c.length;g++){this.loadSoundFile.apply(this,c[g])}},1,d);if(KickBak.fn.isNative()){var b,a,f=KickBak.constants;if(Ext.os.is(\"iOS\")){b=0.5;f.s_vol=50;a=0.5;f.conseqMissThreshold=1;f.magThreshold=20000;f.numSamples=4*1024;f.sigOverlapRatio=0.25}if(Ext.os.is(\"Android\")){b=0.5;f.s_vol=50;a=0.5;f.conseqMissThreshold=1;f.magThreshold=20000;f.numSamples=4*1024;f.sigOverlapRatio=0.25}f.proximityTxTimeout=20*1000;f.proximityRxTimeout=40*1000;KickBak.fn.printProximityConfig();window.plugins.proximityID.init(b,a)}},openMainPage:function(){var c=this;var b=KickBak.db.getLocalDB();var a=(b.auth_code)?true:false;c.resetView();if(a){c.setLoggedIn(a);console.debug(\"Going to SignIn Page ...\");c.redirectTo(\"signIn\")}else{console.debug(\"Going to Login Page ...\");KickBak.db.resetStorage();c.redirectTo(\"login\")}}});Ext.define(\"KickBak.view.Document\",{extend:KickBak.view.ViewBase,xtype:\"documentview\",config:{layout:\"fit\",cls:\"viewport\"},disableAnimation:true,constructor:function(a){Ext.merge(a,{items:[Ext.apply(this.self.generateTitleBarConfig(),{title:\" \",items:[{align:\"left\",ui:\"normal\",tag:\"back\",text:\"Back\"}]}),{xtype:\"container\",tag:\"content\",scrollable:\"vertical\",padding:\"0.7 0.8\",defaultUnit:\"em\",html:\" \"}]});this.callParent(arguments)},setHtml:function(b){var c=this.query(\"container[tag=content]\")[0];var a=c.getScrollable();c.setHtml(b);if(a){a.getScroller().scrollTo(0,0)}},createView:function(){if(!this.callParent(arguments)){return}}});Ext.define(\"KickBak.view.MultipartDocument\",{extend:KickBak.view.ViewBase,xtype:\"multipartdocumentview\",config:{layout:\"fit\",cls:\"viewport\"},disableAnimation:true,constructor:function(a){Ext.merge(a,{items:[Ext.apply(this.self.generateTitleBarConfig(),{title:\" \",items:[{align:\"left\",ui:\"normal\",tag:\"back\",text:\"Back\"}]}),{xtype:\"tabpanel\",defaults:{xtype:\"container\",scrollable:\"vertical\",padding:\"0.7 0.8\",defaultUnit:\"em\",html:\" \"},layout:\"card\",tabBarPosition:\"top\",tabBar:{layout:{pack:\"justify\"}}}]});this.callParent(arguments)},setHtml:function(b,d){var e=this.query(\"tabpanel\")[0];var c=e.getInnerItems()[b];if(!c){c=e.insert(b,Ext.apply({xtype:\"container\"},d))}else{var a=c.getScrollable();a.getScroller().scrollTo(0,0);c.setHtml(html)}},createView:function(){if(!this.callParent(arguments)){return}}});Ext.define(\"KickBak.controller.SignUpBase\",{extend:KickBak.controller.ControllerBase,inheritableStatics:{},xtype:\"signupBaseCntlr\",config:{termsOfServiceTitle:\"Term of Service\",privacyTitle:\"Privacy\",aboutUsTitle:\"About Us\",routes:{aboutus:\"documentPage\",privacy:\"documentPage\",termsOfUse:\"multipartDocumentPage\",signup:\"openSignUpPage\"},refs:{documentPage:{selector:\"documentview\",autoCreate:true,xtype:\"documentview\"},multipartDocumentPage:{selector:\"multipartdocumentview\",autoCreate:true,xtype:\"multipartdocumentview\"}}},termsLoaded:false,privacyLoaded:false,aboutUsLoaded:false,init",233311,44,"getMultipartDocumentPage();this.getDocumentPage();console.log(\"SignUp Base Init\")},onTermsTap:function(c,j){var g=this,f=0,a=g.getViewPortCntlr(),i=[],h=g.getMultipartDocumentPage();h.query(\"title\")[0].setTitle(g.getTermsOfServiceTitle());g.self.playSoundFile(a.sound_files.clickSound);if(!g.termsLoaded){var d=function(){for(var b=0;b<i.length;b++){h.setHtml(b,i[b].cardConfig)}g.redirectTo(\"termsOfUse\");g.termsLoaded=true};Ext.Ajax.request({async:true,disableCaching:false,url:Ext.Loader.getPath(\"KickBak\")+\"/../term_of_service.htm\",callback:function(e,k,b){if(k||(b.status==0)){i[0]=b;b.cardConfig={title:\"Terms of Use\",html:b.responseText};if((f|=1)==17){d()}}else{console.debug(\"Error Loading Term of Service Document.\");console.debug(\"Status code \"+b.status)}}});Ext.Ajax.request({async:true,disableCaching:false,url:Ext.Loader.getPath(\"KickBak\")+\"/../program_rules.htm\",callback:function(e,k,b){if(k||(b.status==0)){i[1]=b;b.cardConfig={title:\"Program Rules\",html:b.responseText};if((f|=16)==17){d()}}else{console.debug(\"Error Loading Program Rules Document.\");console.debug(\"Status code \"+b.status)}}})}else{g.redirectTo(\"termsOfUse\")}},onPrivacyTap:function(c,g){var d=this;var a=d.getViewPortCntlr();var f=d.getDocumentPage();f.query(\"title\")[0].setTitle(d.getPrivacyTitle());d.self.playSoundFile(a.sound_files.clickSound);if(!d.privacyLoaded){Ext.Ajax.request({disableCaching:false,url:Ext.Loader.getPath(\"KickBak\")+\"/../privacy.htm\",callback:function(e,h,b){if(h||(b.status==0)){f.setHtml(b.responseText);d.redirectTo(\"privacy\");d.privacyLoaded=true}else{console.debug(\"Error Loading Privacy Document.\");console.debug(\"Status code \"+b.status)}}})}else{d.redirectTo(\"privacy\")}},onAboutUsTap:function(c,g){var d=this;var a=d.getViewPortCntlr();var f=d.getDocumentPage();f.query(\"title\")[0].setTitle(d.getAboutUsTitle());d.self.playSoundFile(a.sound_files.clickSound);if(d.aboutUsLoaded){Ext.Ajax.request({disableCaching:false,url:Ext.Loader.getPath(\"KickBak\")+\"/../about_us.htm\",callback:function(e,h,b){if(h||(b.status==0)){f.setHtml(b.responseText);d.redirectTo(\"aboutUs\");d.aboutUsLoaded=true}else{console.debug(\"Error Loading About US Document.\");console.debug(\"Status code \"+b.status)}}})}else{d.redirectTo(\"aboutUs\")}},openSignUpPage:Ext.emptyFn,multipartDocumentPage:function(){this.openPage(\"multipartDocument\")},documentPage:function(){this.openPage(\"document\")},openPage:function(a){var b=this,c;switch(a){case\"signup\":c=b.getSignUpPage();b.setAnimationMode(b.self.animationMode.cover);break;case\"multipartDocument\":c=b.getMultipartDocumentPage();b.setAnimationMode(b.self.animationMode.slide);break;case\"document\":c=b.getDocumentPage();b.setAnimationMode(b.self.animationMode.slide);break}b.pushView(c)},isOpenAllowed:function(){return true}});Ext.define(\"KickBak.view.widgets.ListField\",{extend:Ext.field.Text,alternateClassName:\"KickBak.field.List\",xtype:\"listfield\",config:{ui:\"list\",component:{useMask:false},clearIcon:true,iconCls:\"\",readOnly:false},initialize:function(){var b=this,a=b.getComponent();b.callParent();if(b.getIconCls()){Ext.fly(b.element.query(\".\"+Ext.baseCSSPrefix.trim()+\"component-outer\")[0]).addCls(b.getIconCls())}a.setReadOnly(true)},doClearIconTap:Ext.emptyFn});Ext.define(\"KickBak.model.frontend.Account\",{extend:Ext.data.Model,alternateClassName:\"Account\",id:\"Account\",config:{fields:[\"name\",\"email\",\"gender\",{type:\"date\",name:\"birthday\",dateFormat:\"time\"},\"phone\",\"password\",\"username\"],validations:[{type:\"format\",field:\"phone\",matcher:/^(\\d{3})\\D*(\\d{3})\\D*(\\d{4})\\D*(\\d*)$/},{type:\"length\",field:\"password\",min:6}],proxy:{type:\"ajax\",disableCaching:false,writer:{type:\"json\",messageProperty:\"message\",rootProperty:\"user\"},reader:{type:\"json\",messageProperty:\"message\",rootProperty:\"data\"},listeners:{metachange:function(d,b,c){var a=_application.getController(((merchantMode)?\"server\":\"client\")+\".Viewport\");a.fireEvent(\"updatemetadata\",b)}}}},inheritableStatics:{phoneRegex:/^(\\d{3})\\D*(\\d{3})\\D*(\\d{4})\\D*(\\d*)$/,setUpdateFbLoginUrl:function(){this.getProxy().setActionMethods({read:\"POST\"});this.getProxy().setUrl(serverHost+\"/api/v1/account/update_facebook_info\")},setPasswdResetUrl:function(){this.getProxy().setActionMethods({read:\"POST\"});this.getProxy().setUrl(serverHost+\"/api/v1/account/reset_password\")},setPasswdChangeUrl:function(){this.getProxy().setActionMethods({read:\"POST\"});this.getProxy().setUrl(serverHost+\"/api/v1/account/change_password\")},setRefreshCsrfTokenUrl:function(){this.getProxy().setActionMethods({read:\"GET\"});this.getProxy().setUrl(serverHost+\"/api/v1/tokens/get_csrf_token\")},setUpdateRegUserDeviceUrl:function(){this.getProxy().setActionMethods({read:\"POST\"});this.getProxy().setUrl(serverHost+\"/api/v1/account/register_user_device\")},setUpdateAccountUrl:function(){this.getProxy().setActionMethods({read:\"POST\"});this.getProxy().setUrl(serverHost+\"/api/v1/account/update\")}}});Ext.define(\"KickBak.view.client.SignUpPage\",{extend:Ext.form.Panel,alias:\"widget.clientsignuppageview\",fbConnectRequestMsg:\"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!\",config:{preRender:null,cls:\"viewport\",scrollable:\"vertical\",layout:{type:\"vbox\",align:\"stretch\",pack:\"start\"}}",240782,36,"a=a||{};Ext.merge(a,{items:[Ext.apply(KickBak.view.ViewBase.generateTitleBarConfig(),{title:\"KickBak SignUp\"}),{xtype:\"fieldset\",title:\"Social Media\",instructions:b.fbConnectRequestMsg,defaults:{labelWidth:\"60%\"},items:[{xtype:\"togglefield\",name:\"facebook\",label:'<img src=\"resources/images/'+KickBak.constants.themeName+'facebook_icon.png\" style=\"height:'+(2.5/0.8)+'em;float:left;margin-right:0.8em;\"/> Facebook',value:0},{hidden:true,xtype:\"togglefield\",name:\"twitter\",label:'<img src=\"resources/images/'+KickBak.constants.themeName+'twitter_icon.png\" style=\"height:'+(2.5/0.8)+'em;float:left;margin-right:0.8em;\"/> Twitter',value:0}]},{xtype:\"fieldset\",tag:\"profile\",title:\"Account Profile\",defaults:{labelWidth:\"50%\"},items:[{xtype:\"textfield\",labelWidth:\"30%\",name:\"user\",label:\"Name\",placeHolder:\"John Smith\",required:true},{xtype:\"textfield\",labelWidth:\"30%\",name:\"email\",label:\"Email\",placeHolder:\"john.smith@example.com\",required:true},Ext.apply({labelWidth:\"30%\",label:\"Phone#\",name:\"phone\",required:true},KickBak.view.ViewBase.phoneField()),{xtype:\"datepickerfield\",labelWidth:\"30%\",label:\"Birthday\",name:\"birthday\",dateFormat:\"M j, Y\",required:false,picker:{yearFrom:1913,doneButton:{ui:\"normal\"}},value:0}]},{tag:\"accountUpdate\",xtype:\"button\",ui:\"confirm\",height:\"3em\",style:\"margin:0 0.5em 1.5em 0.5em\",text:\"SIGN UP NOW!\"},{xtype:\"fieldset\",title:\"About Kickbak\",defaults:{labelWidth:\"50%\"},items:[{xtype:\"listfield\",name:\"terms\",label:\"Terms of Use\",value:\" \"},{xtype:\"listfield\",name:\"privacy\",label:\"Privacy\",value:\" \"}]}]});b.callParent(arguments)",239872,33,"Parent(arguments);this.setPreRender([])},cleanView:function(){return KickBak.view.ViewBase.prototype.cleanView.apply(this,arguments)},removeAll:function(a,b){return KickBak.view.ViewBase.prototype.removeAll.apply(this,arguments)},createView:function(){return KickBak.view.ViewBase.prototype.createView.apply(this,arguments)},showView:function(){return KickBak.view.ViewBase.prototype.showView.apply(this,arguments)}});Ext.define(\"KickBak.controller.client.SignUp\",{extend:KickBak.controller.SignUpBase,signupTitle:\"Account SignUp\",enableFBMsg:\"By connecting to Facebook, you will receive additional Reward Pts everytime we update your KICKBAK activity to your Facebook account!\",disableFBMsg:\"\",enableTwitterMsg:\"By enabling Twitter connectivity, you will receive additional reward points everytime we update your KICKBAK activity to their site!\",disableTwitterMsg:\"\",twitterUnconfiguredMsg:\"Please configure your Twitter App\",inheritableStatics:{accountValidateFailedMsg:function(a){return a+KickBak.constants.addCRLF()+\"Please with correct syntax.\"},accountValidate:function(d,h){var e=this,c=Ext.create(\"KickBak.model.frontend.Account\",h),b=c.validate(),g,i,a,f,j;if(!b.isValid()){do{a=false;g=b.first();if(g){i=d.query(\"field[name=\"+g.getField()+\"]\")[0];if(!i||!i.getRequired()||(g.getField()==\"password\")){if(!i||!i.getValue()||(i.getValue()==\"\")||(i.getValue()==\" \")){b.remove(g);a=true}}}else{i=null}}while(a);if(i){f=i.getLabel();j=e.accountValidateFailedMsg(f+\" \"+g.getMessage());console.log(j);Ext.device.Notification.show({title:e.signupTitle,message:j,buttons:[\"Dismiss\"]});return null}}return c}},xtype:\"clientSignUpCntlr\",config:{refs:{SignUpPage:{selector:\"clientsignuppageview\",autoCreate:true,xtype:\"clientsignuppageview\"}},control:{\"clientsignuppageview togglefield[name=facebook]\":{change:\"onFacebookChange\"},\"clientsignuppageview togglefield[name=twitter]\":{change:\"onTwitterChange\"},\"clientsignuppageview listfield[name=changepassword]\":{clearicontap:\"onPasswordChangeTap\"},\"clientsignuppageview button[tag=accountUpdate]\":{tap:\"onAccountUpdateTap\"},\"clientsignuppageview listfield[name=terms]\":{clearicontap:\"onTermsTap\"},\"clientsignuppageview listfield[name=privacy]\":{clearicontap:\"onPrivacyTap\"},\"clientsignuppageview listfield[name=aboutus]\":{clearicontap:\"onAboutUsTap\"}},listeners:{toggleFB:{fn:\"onToggleFB\",buffer:3*1000},toggleTwitter:{fn:\"onToggleTwitter\",buffer:0.3*1000}}},initializing:true,accountUpdateSuccessMsg:\"Update Successful\",accountUpdateFailedMsg:\"Update Failed\",fbLoggedInIdentityMsg:function(a){return\"You're logged into Facebook as \"+KickBak.constants.addCRLF()+a},updatingFbLoginMsg:\"Updating Facebok Login Credentials\",getAccountFields:function(){var b=this,a=b.getSignUpPage();return({user:{preLoadFn:function(d,c){d.setReadOnly(false)},field:a.query(\"textfield[name=user]\")[0],fbFn:function(d,c){d.setReadOnly(true);return c.name}},email:{preLoadFn:function(d,c){d.setReadOnly(false)},field:a.query(\"textfield[name=email]\")[0],fbFn:function(d,c){d.setReadOnly(true);return c.email}},birthday:{preLoadFn:function(d,c){d.setReadOnly(false)},field:a.query(\"datepickerfield[name=birthday]\")[0],fn:function(e,c){var d=new Date.parse(db.account[\"birthday\"]);return(!d||!(d instanceof Date))?\" \":d},fbFn:function(e,c){var d=new Date.parse(c.birthday);if(!d||!(d instanceof Date)){d=\" \"}if(d instanceof Date){e.setReadOnly(true)}return d}},phone:{preLoadFn:Ext.emptyFn,field:a.query(\"textfield[name=phone]\")[0],fn:function(e,d){var c=db.account[\"phone\"].match(Account.phoneRegex);return(c[1]+\"-\"+c[2]+\"-\"+c[3])},fbFn:Ext.emptyFn}})},updateFBSignUp:function(b){var a=this;Ext.defer(function(){Ext.device.Notification.show({title:\"Facebook Connect\",message:a.fbLoggedInIdentityMsg(b.email),buttons:[\"OK\"]})},1,a)},updateFBSignUpPopup:function(d,a){var b=this,c=b.getSignUpPage();var e=function(){KickBak.fb.facebook_onLogin(function(h,f){Ext.Viewport.setMasked(null);if(!h||((f&&!f.wasSuccessful()))){if(!c.isHidden()&&a){a.toggle()}}else{b.updateFBSignUp(h);if(a){a.originalValue=1;b.updateAccountInfo(h);var g=c.query(\"fieldset[tag=profile]\")[0];c.getScrollable().getScroller().scrollTo(0,g._title.element.getY()-46,true)}}},false)};e()},updateAccountInfo:function(b){var c,g,e=this,d=e.getSignUpPage(),a=e.getAccountFields();for(c in a){g=a[c];g.preLoadFn(g.field);if(b){g[c]=g.fbFn(g.field,b)}else{g[c]=null}}console.log(\"enableFB - \"+((b)?1:0));e.initializing=true;if(b){d.setValues({user:a.user.user,email:a.email.email,birthday:a.birthday.birthday,phone:a.phone.phone,facebook:1})}else{d.setValues({birthday:a.birthday.birthday,phone:a.phone.phone,facebook:(b)?1:0})}e.initializing=false},onPasswordChangeTap:function(c,f){var d=this;var a=d.getViewPortCntlr();d.self.playSoundFile(a.sound_files.clickSound);d.redirectTo(\"password_change\")},onFacebookChange:function(b,g,c,h,d,e){var f=this,a=f.getViewPortCntlr();if(f.initializing){return}f.self.playSoundFile(a.sound_files.clickSound);f.fireEvent(\"toggleFB\",b,g,c,h,d,e)},onTwitterChange:function(b,g,c,h,d,e){var f=this,a=f.getViewPortCntlr();if(f.initializing){return}f.self.playSoundFile(a.sound_files.clickSound);f.fireEvent(\"toggleTwitter\",b,g,c,h,d,e)},onAccountUpdateTap:function(a,j,f){var h=this,g=h.getSignUpPage(),c=g.getValues(true),d=Account.getProxy();var i=h.self.accountValidate(g,c);if(i){Ext.Viewport.setMasked({xtype:\"loadmask\",message:h.establishConnectionMsg});Account.setUpdateAccountUrl();i.save({action:\"read\",jsonData:{},callback:function(b,e){Ext.Viewport.setMasked(null);if(e.wasSuccessful()){Ext.device.Notification.show({title:h.signupTitle,message:h.accountUpdateSuccessMsg,buttons:[\"OK\"]})}else{d.supressErrorsPopup=true;Ext.device.Notification.show({title:h.signupTitle,message:h.accountUpdateFailedMsg,buttons:[\"Dismiss\"],callback:function(){d.supressErrorsCallbackFn()}})}}})}},onToggleFB:function(f,d,b,c,a,g){var h=this,i=KickBak.db.getLocalDB();if(c==1){h.updateFBSignUpPopup(h.signupTitle,f)}else{if(i.enableFB){console.debug(\"Cancelling Facebook Login ...\");var e={facebook_id:0};Account.setUpdateFbLoginUrl();Account.load(0,{jsonData:{},params:{user:Ext.encode(e)},callback:function(j,k){if(k.wasSuccessful()){i=KickBak.db.getLocalDB();i.enableFB=false;i.currFbId=0;delete i.fbAccountId;delete i.fbResponse;KickBak.db.setLocalDB(i);if(KickBak.fn.isNative()){KickBak.fb.facebook_onLogout(null,true)}}else{if(!h.getSignUpPage().isHidden()){f.toggle()}}}})}}},onToggleTwitter:function(e,d,b,c,a,f){var g=this,i=KickBak.db.getLocalDB();var h=function(){Ext.device.Notification.show({title:g.signupTitle,message:g.enableTwitterMsg,buttons:[\"Dismiss\"]});i.enableTwitter=true;KickBak.db.setLocalDB(i)};if(c==1){console.debug(\"Enabling Twitter Login ...\");if(KickBak.fn.isNative()){window.plugins.twitter.isTwitterSetup(function(j){if(j==1){if(!i.enableFB){h()}}else{Ext.device.Notification.show({title:g.signupTitle,message:g.twitterUnconfiguredMsg,buttons:[\"Dismiss\"]});if(!g.getSignUpPage().isHidden()){e.toggle()}}})}else{h()}}else{if(i.enableTwitter){console.debug(\"Cancelling Twitter Login ...\");i.enableTwitter=false;KickBak.db.setLocalDB(i)}}},openSignUpPage:function(){var a=this;a.updateAccountInfo();a.getSignUpPage().query(\"togglefield[name=facebook]\")[0].label.setStyle({\"line-height\":\"2.2em\"});a.openPage(\"signup\")}});Ext.application({viewport:{autoMaximize:true},name:\"KickBak\",views:[\"ViewBase\",\"Viewport\",\"Document\",\"client.SignUpPage\"],controllers:[\"client.Viewport\",\"client.SignUp",461718,517,"_application=this;console.log(\"Ext App Launch\");var a=_application.getController(\"client.Viewport\");a.appName=appName;Ext.create(\"KickBak.view.Viewport\");console.log(\"Launched App\"",462283,207]