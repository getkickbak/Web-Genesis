["/*82c79b8aad02a28cbdf75eba03cbc391a4a2451c",42,492147,"field.Email",578492,45,"Ext.form.Email\",xtype:\"emailfield\",config:{component:{type:\"email\"},autoCapitalize:false}});Ext.define(\"Ext.field.Password",293955,32,"password",497949,36,"Password\",config:{",294063,32,"type:\"password\"}",492169,24754,"plugin.ListPaging\",{extend:Ext.Component,alias:\"plugin.listpaging\",config:{autoPaging:false,loadMoreText:\"Load More...\",noMoreRecordsText:\"No More Records\",loadTpl:['<div class=\"{cssPrefix}loading-spinner\" style=\"font-size: 180%; margin: 10px auto;\">','<span class=\"{cssPrefix}loading-top\"></span>','<span class=\"{cssPrefix}loading-right\"></span>','<span class=\"{cssPrefix}loading-bottom\"></span>','<span class=\"{cssPrefix}loading-left\"></span>',\"</div>\",'<div class=\"{cssPrefix}list-paging-msg\">{message}</div>'].join(\"\"),loadMoreCmp:{xtype:\"component\",",415104,32,"paging\",scrollDock:\"bottom\",hidden:true},loadMoreCmpAdded:false,loadingCls:Ext.baseCSSPrefix+\"loading\",list:null,scroller:null,loading:false},init:function(c){var a=c",429698,38,"Store();this.setList(c);this.setScroller(a);this.bindStore(c.getStore());this.addLoadMoreCmp();if(b){this.disableDataViewMask(b)}c.updateStore=Ext.Function.createInterceptor(c.updateStore,this.bindStore,this);if(this.getAutoPaging()){a.on({scrollend:this.onScrollEnd,scope:this})}},bindStore:function(a,b){if(b){b.un({beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad,scope:this})}if(a){a.on({beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad,scope:this})}},disableDataViewMask:function(a){var b=this.getList();if(a.isAutoLoading()){b.setLoadingText(null)}else{a.on({load:{single:true,fn:function(){b.setLoadingText(null)}}})}},applyLoad",411426,78,"applyLoadMoreCmp:function(a){a=Ext.merge(a,{html:this.getLoadTpl().apply({cssPrefix:Ext.baseCSSPrefix,message:this.getLoadMoreText()}),scrollDock:\"bottom\",listeners:{tap:{fn:this.loadNextPage,scope:this,element:\"element\"}}});",279054,34,",this.getLoadMoreCmp())},onScrollEnd:function(b,a,d){var c=this.getList();if(!this.getLoading()&&d>=b.maxPosition.y){this.currentScrollToTopOnRefresh=c.getScrollToTopOnRefresh();c.setScrollToTopOnRefresh(false);this.loadNextPage()}},updateLoading:function(a){var b=this.getLoadMoreCmp(),c=this.getLoadingCls();if(a){b.addCls(c)}else{b.removeCls(c)}},onStoreBeforeLoad:function(a){if(a.getCount()===0){this.getLoadMoreCmp().hide()}},onStoreLoad:function(a){var d=this.getLoadMoreCmp(),b=this.getLoadTpl(),c=this.storeFullyLoaded()?this.getNoMoreRecordsText():this.getLoadMoreText();if(a.getCount()){d.show()}this.setLoading(false);d.setHtml(b.apply({cssPrefix:Ext.baseCSSPrefix,message:c}));if(this.currentScrollToTopOnRefresh!==undefined){this.getList().setScrollToTopOnRefresh(this.currentScrollToTopOnRefresh);delete this.currentScrollToTopOnRefresh}},addLoadMoreCmp:function(){var b=this.getList(),a=this.getLoadMoreCmp();if(!this.getLoadMoreCmpAdded()){b.add(a);b.fireEvent(\"loadmorecmpadded\",this,b);this.setLoadMoreCmpAdded(true)}return a},storeFullyLoaded:function(){var a=this.getList().getStore(),b=a.getTotalCount();return b!==null?a.getTotalCount()<=(a.currentPage*a.getPageSize()):false},loadNextPage:function(){var a=this;if(!a.storeFullyLoaded()){a.setLoading(true);a.getList().getStore().nextPage({addRecords:true})}}});Ext.define(\"Ext.plugin.PullRefresh\",{extend:Ext.Component,alias:\"plugin.pullrefresh\",config:{list:null,pullRefreshText:\"Pull down to refresh...\",releaseRefreshText:\"Release to refresh...\",lastUpdatedText:\"Last Updated:\",lastUpdatedDateFormat:\"m/d/Y h:iA\",loadingText:\"Loading...\",loadedText:\"Loaded.\",autoSnapBack:true,snappingAnimationDuration:300,overpullSnapBackDuration:300,pullTpl:['<div class=\"x-list-pullrefresh\">','<div class=\"x-list-pullrefresh-arrow\"></div>','<div class=\"x-loading-spinner\">','<span class=\"x-loading-top\"></span>','<span class=\"x-loading-right\"></span>','<span class=\"x-loading-bottom\"></span>','<span class=\"x-loading-left\"></span>',\"</div>\",'<div class=\"x-list-pullrefresh-wrap\">','<h3 class=\"x-list-pullrefresh-message\"></h3>','<div class=\"x-list-pullrefresh-updated\"></div>',\"</div>\",\"</div>\"].join(\"\"),translatable:true},isRefreshing:false,currentViewState:\"\"",492428,46,"on({painted:\"onPainted\",scope:this})},init:function(b){var a=this;a.setList(b);a.initScrollable()},initScrollable:function(){var d=this,g=d.getList(),b=g.getStore(),f=d.getPullTpl(),c=d.element,e=g.getScrollable(),a;if(!e){return}a=e.getScroller();d.lastUpdated=new Date();g.insert(0,d);if(b){if(b.isAutoLoading()){g.setLoadingText(null)}else{b.on({load:{single:true,fn:function(){g.setLoadingText(null)}}})}}f.overwrite(c,[]);d.loadingElement=c.getFirstChild();d.messageEl=c.down(\".x-list-pullrefresh-message\");d.updatedEl=c.down(\".x-list-pullrefresh-updated\");d.maxScroller=a.getMaxPosition();a.on({maxpositionchange:d.setMaxScroller,scroll:d.onScrollChange,scope:d});d.resetRefreshState()},onScrollableChange:function(){this.initScrollable()},updateList:function(a,c){var b=this;if(a&&a!=c){a.on({order:\"after\",scrollablechange:b.onScrollableChange,scope:b})}else{if(c){c.un({order:\"after\",scrollablechange:b.onScrollableChange,scope:b})}}},fetchLatest:function(){var b=this.getList().getStore(),c=b.getProxy(),a",369174,35,"{page:1,start:0,model:b.getModel(),limit:b.getPageSize(),action:\"read\",sorters:b.getSorters(),filters:b.getRemoteFilter()?b.getFilters():[]});c.read(a,this.onLatestFetched,this)},onLatestFetched:function(d){var n=this.getList().getStore(),m=this.getList(),j=m.getScrollable().getScroller(),h=j.position.x,f=j.position.y,b=n.getData(),c=d.getRecords(),a=c.length,k=[],l,g,e;for(e=0;e<a;e++){l=c[e];g=b.getByKey(l.getId());if(g){g.set(l.getData())}else{k.push(l)}g=undefined}n.insert(0,k);j.scrollTo(h,f);this.setViewState(\"loaded\");this.fireEvent(\"latestfetched\");if(this.getAutoSnapBack()){this.snapBack()}},snapBack:function(){var b=this,c=b.getList(),a=c.getScrollable().getScroller();a.on({scrollend:function(){this.resetRefreshState()},single:true,scope:b});a.minPosition.y=0;a.scrollTo(null,0,{duration:b.getSnappingAnimationDuration()})},onPainted:function(){this.pullHeight=this.loadingElement.getHeight()},setMaxScroller:function(b,a){this.maxScroller=a},onScrollChange:function(b,a,c){if(c<=0){this.onBounceTop(c)}if(c>this.maxScroller.y){this.onBounceBottom(c)}},applyPull",411426,80,"BounceTop:function(e){var b=this,d=b.pullHeight,c=b.getList(),a=c.getScrollable().getScroller();if(!b.isReleased){if(!d){b.onPainted();d=b.pullHeight}if(!b.isRefreshing&&-e>=d+10){b.isRefreshing=true;b.setViewState(\"release\");a.getContainer().onBefore({dragend:\"onScrollerDragEnd\",single:true,scope:b})}else{if(b.isRefreshing&&-e<d+10){b.isRefreshing=false;b.setViewState(\"pull\")}}}b.getTranslatable().translate(0,-e)},onScrollerDragEnd:function(){var c=this;if(c.isRefreshing){var d=c.getList(),a=d",429698,33,"a.getTranslatable();b.setEasingY({duration:this.getOverpullSnapBackDuration()});a.minPosition.y=-c.pullHeight;a.on({scrollend:\"loadStore\",single:true,scope:c});c.isReleased=true}},loadStore:function(){var a=this;a.setViewState(\"loading\");a.isReleased=false;a.fetchLatest()},onBounceBottom:Ext.emptyFn,setViewState:function(d){var b=this,c=Ext.baseCSSPrefix,e=b.messageEl,a=b.loadingElement;if(d===b.currentViewState){return b}b.currentViewState=d;if(e&&a){switch(d){case\"pull\":e.setHtml(b.getPullRefreshText());a.removeCls([c+\"list-pullrefresh-release\",c+\"list-pullrefresh-loading\"]);break;case\"release\":e.setHtml(b.getReleaseRefreshText());a.addCls(c+\"list-pullrefresh-release\");break;case\"loading\":e.setHtml(b.getLoadingText());a.addCls(c+\"list-pullrefresh-loading\");break;case\"loaded\":e.setHtml(b.getLoadedText());a.addCls(c+\"list-pullrefresh-loaded\");break}}return b},resetRefreshState:function(){var a=this;a.isRefreshing=false;a.lastUpdated=new Date();a.setViewState(\"pull\");a.updatedEl.setHtml(this.getLastUpdatedText()+\"&nbsp;\"+Ext.util.Format.date(a.lastUpdated,a.getLastUpdatedDateFormat())",516902,23887,"mobilePhoneInputMsg:\"Enter Mobile Number",540787,433,541272,110,541434,1339,"d",542774,107,"d",542882,125,"var c=Ext.get(b.name);if(c){c.dom.play()}else{b.successCallback()}",543033,185,";if(b){b.dom.pause();b.dom.currentTime=0}",543248,5118,"'+KickBak.constants.resourceSite+'\"",548384,16340,565491,32,564723,94,"KickBak.constants.resourceSite+\"",564828,148,564986,186,"KickBak.constants.resourceSite)+\"",565187,304,565523,6835,"__init__();__initFb__()",572357,61,572438,1429,"back",574533,37,573910,617,"back",574533,5122,"emailRegex",392798,76,"setCreateAccoun",579822,107,"sign_up\")}",578446,37,397866,35,"item\",alias:\"widget.item\",config:{cls:\"item\",tag:\"item\",layout:\"fit\"}",159550,35,";c=c||{};d.config.preItemsConfig=d.config.preItemsConfig||[];d.config.postItemsConfig=d.config.postItemsConfig||[];d.config.photoTemplate=d.config.photoTemplate||null;var a=c.preItemsConfig||[];var e=c.postItemsConfig||[];var b=c.photoTemplate||d.config.photoTemplate;Ext.merge(a,d.config.preItemsConfig);Ext.merge(e,d.config.postItemsConfig);delete c.preItemsConfig;delete c.postItemsConfig;delete c.photoTemplate;Ext.merge(c,{items:[{docked:\"top\",xtype:\"component\",tag:\"title\",cls:\"title\",defaultUnit:\"em\",tpl:Ext.create(\"Ext.XTemplate\",\"{[this.getDescription(values)]}\",{getDescription:function(f){return f.title}})}].concat(a,[{xtype:\"component\",tag:\"itemPhoto\",cls:\"itemPhoto\",tpl:(b)?b:Ext.create(\"Ext.XTemplate\",'<div class=\"photoVCenterHelper\"></div>','<div class=\"photoVCenterContent\"><img {[this.getPhoto(values)]} /></div>',{getPhoto:function(f){var g=f.photo;if(Ext.isString(g)){return'src=\"'+g+'\"'}else{return'src=\"'+g.url+'\" '+((g.width)?'style=\"width:'+KickBak.fn.addUnit(g.width)+\";height:\"+KickBak.fn.addUnit(g.height)+';\"':\"\")}}})}],e)});this",582491,78,"updateItem(this.getData())},updateItem:function(d){var c=this;var b=d.raw;var a=c.query(\"component[tag=itemPhoto]\")[0];var e=c.query(\"component[tag=title]\")[0];if(b.title){e.setData(b);e.show()}else{e.hide()}a.setData(b);c.setData(d);return b},inheritableStatics:{",578446,37,"PopupItem\",{extend:KickBak.view.widgets.Item,xtype:\"popupitem\",alias:\"widget.popupitem\",config:{iconTy",466441,33,"var b=this;Ext.merge(a,{tag:\"popupItem\",photoTemplate:Ext.create(\"Ext.XTemplate\",'<div class=\"photoVCenterHelper\"></div>','<div class=\"photoVCenterContent\"><img {[this.getPhoto(values)]} /></div>',{getPhoto:function(c){var d=b.self.getPhoto(c.type,b.getIconType());return'src=\"'+d+'\"'}})});b.callParent(arguments)},inheritableStatics:{getPhoto:function(b,a){var c=KickBak.constants.getIconPath(a,b.value,true);return c}}});Ext.define(\"KickBak.model.CustomerReward\",{extend:Ext.data.Model,id:\"CustomerReward\",alternateClassName:\"CustomerReward\",config:{fields:[\"id\",\"title\",\"points\",\"type\",\"photo\",\"quantity_limited\",\"quantity\",\"time_limited\",{name:\"expiry_date\",type:\"date\",convert:function(a,b){a=Date.parse(a,\"yyyy-MM-dd\");return(a)?KickBak.fn.convertDateNoTimeNoWeek(a):null}}],idProperty:\"id\"",579254,60,579360,68,"}},inheritableStatics:{",578446,37,"ItemDetail\",{",578447,36,"PopupItemDetail",482725,35,"opupitemdetailview\",config:{bottom:0,left:0,top:0,right:0",548043,38,548108,80,"},constructor:function(b){var d=this;b=b||{};var c=b.buttons||[];delete b.buttons;var a=b.preItemsConfig||[];var e=b.postItemsConfig||[];delete b.preItemsConfig;delete b.postItemsConfig;Ext.merge(b,{items:[{preItemsConfig:a,postItemsConfig:e,iconType:b.iconType,flex:1,xtype:\"popupitem\",data:",552509,34,"Reward\",{title:b.title,type:{value:b.icon}})",548412,60,548480,32,"c}]});delete b.iconType;delete b.icon;d",150848,38,580567,247,"unsupportedDeviceMsg:\"This mobile device is unsupported at this time. Visit our website with your desktop to Sign In",580811,235,"cls:\"navigationBarTop kbTitle",581067,167,"'+KickBak.constants.resourceSite+\"images/\"",581252,197,"'+KickBak.constants.resourceSite+\"images/\"",581467,210,"30%\"},items:[{xtype:\"textfield\",name:\"name",581736,53,"},{xtype:\"emailfield\",name:\"username",581839,66,"},{xtype:\"passwordfield\",name:\"password\",label:\"Passwd\",placeHolder:\"Min 6 chars\",minLength:6,required:true},Ext.apply({label:\"Mobile ",581948,97,582062,128,"signUp\",xtype:\"button\",ui:\"confirm\",height:\"3e",582230,51," NOW",582281,680,",signUpSuccessPopup:function(){var b=this;if(!b._actions){var a=Ext.bind(b.downloadAppTap,b);b._actions=Ext.create(\"KickBak.view.widgets.PopupItemDetail\",{iconType:\"prizewon\",icon:\"giftcertificate\",cls:\"viewport\",title:\"Congratulations!\"+KickBak.constants.addCRLF()+\"You have registered with KICKBAK\",listeners:[{element:\"element\",delegate:\"div.itemPhoto\",event:\"tap\",fn:a}],buttons:[{margin:\"0 0 0.5 0\",text:\"Download Mobile App Now!\",ui:\"action\",height:\"3em\",handler:a}]});Ext.Viewport.add(b._actions)}b._actions.show()},downloadAppTap:function(){var a=this;if(Ext.os.is(\"iOS\")){location.href=\"http://itunes.apple.com/us/app/kickbak-inc/id537476722?ls=1&mt=8\"}else{if(Ext.os.is(\"Android\")){location.href=\"https://play.google.com/store/apps/details?id=com.getkickbak.kickbak\"}else",554192,38,"KICKBAK\",message:a.unsupportedDeviceMsg,buttons:[\"Dismiss\"]})}}",582960,117,"creatingAccountMsg:\"Creating Your Account ...",583075,1397,"button[tag=signUp]\":{tap:\"onSignUp",584684,43,584654,235,"2",584890,80,585053,228,"name",585434,78,"name",585517,55,585422,90,"username",585517,63,"password",585434,78,"password]\")[0],fbFn:function(d,c){return c.password",585577,111,585790,211,586102,197,";a.response=b},updateFBSignUpPopupCallback:function(f,b){var d=this,e=d.getSignUpPage();var a=e",589705,39,";",588014,32,"!f||((b&&!b.wasSuccessful()))||(f.type==\"timeout\")){if(!e.isHidden()&&a",554191,39,"Facebook Connect\",message:KickBak.fb.fbConnectFailMsg,buttons:[\"Dismiss\"]});a.toggle()}}else{d.updateFBSignUp(f);if(a){a.setValue(1);a.originalValue=1;d.updateAccountInfo(f);var c=e",586600,35,"e",586636,37,"To(0,c._title.element.getY()-66,true)}}",586299,67,"KickBak.fb.facebook_onLogin(false",586721,252,"name:a.name.name,username:a.email.email,password:a.password.password,",587091,58,"1})}e.initializing=false",587332,374,"SignUpTap:function(k,g,h){var j=this,a=j.getSignUpPage(),l=a.getValues(true),i=Account.getProxy();var f=j.self.accountValidate(a,l);var d=j.response;if(f",570863,51,"j.establishConnectionMsg});console.debug(\"Creating Account ...\");var c={version:KickBak.constants.clientVersion,name:l.name,email:l.username,password:l.password,phone:l.phone.replace(/-/g,\"\"),birthday:l.birthday};if(d){c=Ext.applyIf(c,d)}",587851,49,"j.creatingAccountMsg});Account.setCreateAccount",588588,42,"version:KickBak.constants.clientVersion,device_pixel_ratio:window.devicePixelRatio,user:Ext.encode(c),device:Ext.encode(null),web_signup:true",587989,57,"!e.wasSuccessful()){}else{a.signUpSuccessPopup()}}})}},onToggleFB:function(a,f,b,g,c,d){var e=this;if(g==1){KickBak.fb.on(\"connected\",e.updateFBSignUpPopupCallback,e);KickBak.fb.on(\"unauthorized\",e.updateFBSignUpPopupCallback,e);KickBak.fb.on(\"exception\",e.updateFBSignUpPopupCallback,e);e.updateFBSignUpPopup(e.signupTitle,a)",588939,720,"b=this,a=KickBak.db.getLocalDB();b.updateAccountInfo();b",589689,96,"b.openPage(\"signup\");if(a.fbLoginInProgress){KickBak.fb.on(\"connected\",b.updateFBSignUpPopupCallback,b);KickBak.fb.on(\"unauthorized\",b.updateFBSignUpPopupCallback,b);KickBak.fb.on(\"exception\",b.updateFBSignUpPopupCallback,b)}",589805,73,"ViewBase\",\"Viewport\",\"Document\",\"client.SignUpPage",589917,952]